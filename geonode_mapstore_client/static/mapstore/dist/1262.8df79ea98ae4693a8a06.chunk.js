(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[1262],{80416:(e,t,n)=>{"use strict";n.d(t,{yS:()=>r,Zz:()=>o,ms:()=>i,ih:()=>a,OX:()=>u,sb:()=>l,K$:()=>c,k7:()=>p,cX:()=>s,x9:()=>f,vs:()=>y,oE:()=>d,Po:()=>b,qv:()=>h,cI:()=>g,g6:()=>m,I4:()=>v,l$:()=>O,Xv:()=>E,k3:()=>_,CQ:()=>R,R8:()=>P,HN:()=>S,sH:()=>j,c7:()=>w,_7:()=>x,eF:()=>L,O6:()=>A,ED:()=>T,RP:()=>C,sF:()=>M,VP:()=>G,He:()=>D,vO:()=>N,WO:()=>I,bh:()=>k,pV:()=>Y,MK:()=>H,ZF:()=>F,tV:()=>U,Dv:()=>B,Yz:()=>W,kI:()=>V,XG:()=>z,A4:()=>J,Rp:()=>Z,ct:()=>X,oh:()=>$,$h:()=>q,ud:()=>K,Qr:()=>Q,LR:()=>ee,nN:()=>te,UG:()=>ne,F5:()=>re,c9:()=>oe,Jh:()=>ie,Xy:()=>ae});var r="CHANGE_LAYER_PROPERTIES",o="LAYERS:CHANGE_LAYER_PARAMS",i="CHANGE_GROUP_PROPERTIES",a="TOGGLE_NODE",u="SORT_NODE",l="REMOVE_NODE",c="UPDATE_NODE",p="MOVE_NODE",s="LAYER_LOADING",f="LAYER_LOAD",y="LAYER_ERROR",d="ADD_LAYER",b="ADD_GROUP",h="REMOVE_LAYER",g="SHOW_SETTINGS",m="HIDE_SETTINGS",v="UPDATE_SETTINGS",O="REFRESH_LAYERS",E="LAYERS:UPDATE_LAYERS_DIMENSION",_="LAYERS_REFRESHED",R="LAYERS_REFRESH_ERROR",P="LAYERS:BROWSE_DATA",S="LAYERS:DOWNLOAD",j="LAYERS:CLEAR_LAYERS",w="LAYERS:SELECT_NODE",x="LAYERS:FILTER_LAYERS",L="LAYERS:SHOW_LAYER_METADATA",A="LAYERS:HIDE_LAYER_METADATA",T="LAYERS:UPDATE_SETTINGS_PARAMS";function C(e,t,n){return{type:g,node:e,nodeType:t,options:n}}function M(){return{type:m}}function G(e){return{type:v,options:e}}function D(e,t){return{type:r,newProperties:t,layer:e}}function N(e,t){return{type:o,layer:e,params:t}}function I(e,t){return{type:i,newProperties:t,group:e}}function k(e,t,n){return{type:a,node:e,nodeType:t,status:!n}}function Y(e){return{type:"CONTEXT_NODE",node:e}}function H(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:u,node:e,order:t,sortLayers:n}}function F(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:l,node:e,nodeType:t,removeEmpty:n}}function U(e,t,n){return{type:c,node:e,nodeType:t,options:n}}function B(e,t,n){return{type:p,node:e,groupId:t,index:n}}function W(e){return{type:s,layerId:e}}function V(e,t){return{type:f,layerId:e,error:t}}function z(e,t,n){return{type:y,layerId:e,tilesCount:t,tilesErrorCount:n}}function J(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{type:d,layer:e,foreground:t}}function Z(e,t,n){return{type:b,group:e,parent:t,options:n}}function X(e,t){return{type:r,layer:e,newProperties:{_v_:t||(new Date).getTime()}}}function $(e){return{type:_,layers:e}}function q(e,t){return{type:R,layers:e,error:t}}function K(e,t,n,r){return{type:E,dimension:e,value:t,options:n,layers:r}}function Q(e){return{type:P,layer:e}}function ee(e){return{type:S,layer:e}}function te(){return{type:j}}function ne(e,t,n){return{type:w,id:e,nodeType:t,ctrlKey:n}}function re(e){return{type:x,text:e}}function oe(e,t){return{type:L,metadataRecord:e,maskLoading:t}}function ie(){return{type:A}}function ae(e,t){return{type:T,newParams:e,update:t}}},90079:(e,t,n)=>{"use strict";n.d(t,{Z:()=>P});var r=n(72500),o=n.n(r),i=n(80643),a=n.n(i),u=n(27418),l=n.n(u),c=n(45697),p=n.n(c),s=n(24852),f=n.n(s),y=n(33044),d=n(5346);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(c,e);var t,n,r,i,u=(r=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(r);if(i){var n=E(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return v(this,e)});function c(){var e;h(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return _(O(e=u.call.apply(u,[this].concat(n))),"state",{error:!1}),_(O(e),"onImgError",(function(){e.setState((function(){return{error:!0}}))})),_(O(e),"getUrl",(function(e,t){if(e.layer&&"wms"===e.layer.type&&e.layer.url){var n=e.layer,r=t||a()(n.url)&&Math.floor(Math.random()*n.url.length),i=a()(n.url)?n.url[r]:n.url.replace(/[?].*$/g,""),u=o().parse(i),c=(0,y.clearNilValuesForParams)(n.params),p=l()({},{service:"WMS",request:"GetLegendGraphic",format:"image/png",height:e.legendHeight,width:e.legendWidth,layer:n.name,style:n.style||null,version:n.version||"1.3.0",SLD_VERSION:"1.1.0",LEGEND_OPTIONS:e.legendOptions},n.legendParams||{},e.language&&n.localizedLayerStyles?{LANGUAGE:e.language}:{},(0,y.addAuthenticationToSLD)(c||{},e.layer),c&&c.SLD_BODY?{SLD_BODY:c.SLD_BODY}:{},e.scales&&e.currentZoomLvl&&e.scaleDependent?{SCALE:Math.round(e.scales[e.currentZoomLvl])}:{});return(0,y.addAuthenticationParameter)(i,p),o().format({host:u.host,protocol:u.protocol,pathname:u.pathname,query:p})}return""})),_(O(e),"validateImg",(function(t){t.height<=1&&t.width<=2&&e.onImgError()})),e}return t=c,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.state.error&&this.getUrl(e,0)!==this.getUrl(this.props,0)&&this.setState((function(){return{error:!1}}))}},{key:"render",value:function(){var e=this;return!this.state.error&&this.props.layer&&"wms"===this.props.layer.type&&this.props.layer.url?f().createElement("img",{onError:this.onImgError,onLoad:function(t){return e.validateImg(t.target)},src:this.getUrl(this.props),style:this.props.style}):f().createElement(d.Z,{msgId:"layerProperties.legenderror"})}}])&&g(t.prototype,n),c}(f().Component);_(R,"propTypes",{layer:p().object,legendHeight:p().number,legendWidth:p().number,legendOptions:p().string,style:p().object,currentZoomLvl:p().number,scales:p().array,scaleDependent:p().bool,language:p().string}),_(R,"defaultProps",{legendHeight:12,legendWidth:12,legendOptions:"forceLabels:on",style:{maxWidth:"100%"},scaleDependent:!0});const P=R},71262:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>K});var r=n(22843),o=n(68038);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=n(24852),c=n.n(l),p=n(71703),s=n(68699);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g,m,v,O=n(45697),E={borderTop:"1px solid #ffffffad"},_=function(e){var t;return null==e||null===(t=e.projectManager)||void 0===t?void 0:t.openMenuGroup},R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(r);if(o){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return b(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"render",value:function(){var e,t;return"basemaps"===this.props.openMenuGroup.id_label?c().createElement("div",{style:E},this.props.baseMaps.map((function(e){return c().createElement(s.N,{layer:e})}))):0===(null===(e=this.props.menuDatasets)||void 0===e?void 0:e.length)?c().createElement("div",{style:E},c().createElement(s.N,{dataset:null})):c().createElement("div",{style:E},null===(t=this.props.menuDatasets)||void 0===t?void 0:t.map((function(e){return c().createElement(s.N,{dataset:e})})))}}])&&y(t.prototype,n),a}(c().Component);g=R,m="propTypes",v={menuDatasets:O.array,openMenuGroup:O.string,baseMaps:O.array},m in g?Object.defineProperty(g,m,{value:v,enumerable:!0,configurable:!0,writable:!0}):g[m]=v;var P=(0,p.connect)((function(e){var t,n,r;return{openMenuGroup:_(e),menuDatasets:null==e||null===(t=e.projectManager)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.dataset_set.filter((function(t){var n,r;return(null==t||null===(n=t.mapstore_menu_group)||void 0===n?void 0:n.id_label)===(null===(r=_(e))||void 0===r?void 0:r.id_label)})),baseMaps:null==e||null===(r=e.layers)||void 0===r?void 0:r.flat.filter((function(e){return"background"===e.group}))}}),(function(e){return{setMenuGroup:function(t){return e((0,o.setMenuGroup)(t))}}}))(R),S=n(90079);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var G={position:"absolute",zIndex:1021,top:"10px",right:"60px",minWidth:"400px",backgroundColor:"rgba(0,60,136,0.6)",borderColor:"rgb(255 255 255 / 70%)",borderWidth:"2px",paddingBottom:"10px",fontSize:"12px",lineHeight:"1.5",borderRadius:"4px",color:"white",textAlign:"right",overflowY:"auto",overflowX:"hidden",maxHeight:"92%"},D={position:"absolute",zIndex:1021,top:"10px",right:"60px",minWidth:"135px",backgroundColor:"rgba(0,60,136,0.5)",borderColor:"rgb(255 255 255 / 70%)",borderWidth:"2px",padding:"5px 10px",fontSize:"12px",lineHeight:"1.5",borderRadius:"4px",color:"white",textAlign:"center"},N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=M(r);if(o){var n=M(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return C(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={showLegend:!1},t}return t=a,(n=[{key:"render",value:function(){var e=this;return this.state.showLegend?c().createElement("div",{style:G},c().createElement("div",{className:"row"},c().createElement("h4",{style:{textAlign:"center"}},"Legend")),c().createElement("span",{className:"btn glyphicon glyphicon-remove",style:{position:"absolute",right:"0px",color:"red"},onClick:function(){return e.setState({showLegend:!e.state.showLegend})}}),this.props.visibleLayers.map((function(e){return"wms"===e.type?c().createElement("div",{key:e.id,className:"row",style:{padding:"10px",margin:"-1px 10px -1px 10px",border:"2px solid #ffffffad",borderRadius:"3px"}},c().createElement("div",{className:"col-sm-6",style:{backgroundColor:"white",padding:"3px",borderRadius:"3px"}},c().createElement(S.Z,{layer:e,legendHeight:12,legendWidth:12,legendOptions:"dpi:150",style:{display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"80%",maxHeight:"auto"}})),c().createElement("div",{className:"col-sm-6"},c().createElement("span",{className:"h4 pull-left",style:{textAlign:"left"}},e.title))):null}))):c().createElement("div",null,c().createElement("button",{style:x({},D),onClick:function(){return e.setState({showLegend:!e.state.showLegend})}},"Show Legend"))}}])&&A(t.prototype,n),a}(c().Component);const I=(0,p.connect)((function(e){var t,n;return{visibleLayers:null==e||null===(t=e.layers)||void 0===t?void 0:t.flat.filter((function(e){return!0===e.visibility})),openLegendPanel:null==e||null===(n=e.projectManager)||void 0===n?void 0:n.openLegendPanel}}),null)(N);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){V(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z=n(45697),J=function(e){var t,n;return(null==e||null===(t=e.projectManager)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.map_store_menu_groups)||[]},Z={position:"absolute",zIndex:1021,top:"85px",left:"20px",minWidth:"400px",backgroundColor:"rgba(0,60,136,0.6)",borderColor:"rgb(255 255 255 / 70%)",borderWidth:"2px",padding:"5px 10px",fontSize:"12px",lineHeight:"1.5",borderRadius:"4px",color:"white",textAlign:"center"},X={position:"absolute",zIndex:1021,top:11,width:"85px",height:"60px",backgroundColor:"rgba(0,60,136,0.5)",borderColor:"rgb(255 255 255 / 70%)",borderWidth:"2px",padding:"3px 5px",fontSize:"12px",lineHeight:"1.3",borderRadius:"4px",color:"white",textAlign:"center"},$=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=W(r);if(o){var n=W(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return B(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"componentDidUpdate",value:function(){this.props.mapId||this.fetching||(this.fetching=!1),!this.props.mapId||this.props.hasPmData||this.fetching||(this.props.fetchProjectManagerConfig(this.props.mapId),this.fetching=!0),this.props.mapId&&this.props.hasPmData&&(this.fetching=!1)}},{key:"render",value:function(){var e=this;return c().createElement("div",{id:"project-manager-container"},c().createElement("div",null,c().createElement("ul",{className:"menu-groups"},c().createElement("button",{key:"basemaps",style:H(H({},X),{},{left:20}),onClick:function(){e.props.setMenuGroup(e.props.baseMapMenuGroup)}},"BaseMaps"),this.props.menuGroups&&this.props.menuGroups.length&&this.props.menuGroups.map((function(t,n){return c().createElement("button",{key:t.title,style:H(H({},X),{},{left:100*(n+1)+20}),onClick:function(){e.props.setMenuGroup(t)}},t.title)})))),function(){var t;switch(null===(t=e.props)||void 0===t?void 0:t.openMenuGroup){case null:case void 0:return null;case"app_scenario":return c().createElement("div",{id:"app-scenario-empty-div"});default:return c().createElement("div",{style:H({},Z)},c().createElement(P,null))}}(),c().createElement(I,null))}}])&&F(t.prototype,n),a}(c().Component);V($,"propTypes",{fetchProjectManagerConfig:z.func,menuGroups:z.array,baseMapMenuGroup:z.object,mapId:z.number,layers:z.array,projectTitle:z.string,isFetching:z.bool,hasPmData:z.object,openMenuGroup:z.string,setMenuGroup:z.func,menu:z.object}),V($,"defaultProps",{fetchProjectManagerConfig:function(){}});const q=(0,p.connect)((function(e){var t,n,r,o,i,a,u,l,c,p;return{mapId:null==e||null===(t=e.map)||void 0===t||null===(n=t.present)||void 0===n||null===(r=n.info)||void 0===r?void 0:r.id,layers:null==e||null===(o=e.layers)||void 0===o?void 0:o.flat.map((function(e){return e.name})),menuGroups:J(e),baseMapMenuGroup:{id:0,id_label:"basemaps",title:"Base Maps"},projectTitle:null==e||null===(i=e.projectManager)||void 0===i||null===(a=i.data)||void 0===a?void 0:a.title,isFetching:null==e||null===(u=e.projectManager)||void 0===u?void 0:u.fetching,hasPmData:null==e||null===(l=e.projectManager)||void 0===l?void 0:l.data,openMenuGroup:null==e||null===(c=e.projectManager)||void 0===c||null===(p=c.openMenuGroup)||void 0===p?void 0:p.id_label}}),(function(e){return{fetchProjectManagerConfig:(0,o.fetchProjectManagerConfig)(e),setMenuGroup:function(t){return e((0,o.setMenuGroup)(t))}}}))($),K=(0,r.rx)("ProjectManager",{component:q,reducers:{projectManager:function(){var e,t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=arguments.length>1?arguments[1]:void 0;switch(u.type){case o.FETCH_PROJECT_MANAGER_CONFIG:return a(a({},i),{},{fetching:u.mapId});case o.FETCH_PROJECT_MANAGER_CONFIG_SUCCESS:return a(a({},i),{},{fetching:null,data:u.payload});case o.SET_MENU_GROUP:return(null===(e=i.openMenuGroup)||void 0===e?void 0:e.id_label)===(null===(t=u.payload)||void 0===t?void 0:t.id_label)?a(a({},i),{},{openMenuGroup:null}):a(a({},i),{},{openMenuGroup:u.payload});case o.SET_ORG_VISIBILITY:return a(a({},i),{},{data:a(a({},i.data),{},{organisations:null==i||null===(n=i.data)||void 0===n||null===(r=n.organisations)||void 0===r?void 0:r.map((function(e){return e.id===u.org.id?a(a({},e),{},{visibility:u.isVisible}):e}))})});default:return i}}}})},68038:(e,t,n)=>{var r=n(75875),o="FETCH_PROJECT_MANAGER_CONFIG_ERROR",i="FETCH_PROJECT_MANAGER_CONFIG_SUCCESS",a="SET_MENU_GROUP",u=function(e){return{type:i,payload:e}};function l(e){return console.log("*** error:",e),{type:o,error:e}}e.exports={FETCH_PROJECT_MANAGER_CONFIG:"FETCH_PROJECT_MANAGER_CONFIG",fetchProjectManagerConfig:function(e){return function(t){return r.get("/projects/api/maps/".concat(t,"/")).then((function(t){e(u(t.data.project))})).catch((function(t){e(l(t))}))}},FETCH_PROJECT_MANAGER_CONFIG_ERROR:o,fetchProjectManagerConfigError:l,FETCH_PROJECT_MANAGER_CONFIG_SUCCESS:i,fetchProjectManagerConfigSuccess:u,SET_MENU_GROUP:a,setMenuGroup:function(e){return{type:a,payload:e}},SET_ORG_VISIBILITY:"SET_ORG_VISIBILITY",setOrgVisibility:function(e,t){return console.log("setOrgVisibility:",e,t),function(n){n({type:"SET_ORG_VISIBILITY",org:e,isVisible:t})}}}},68699:(e,t,n)=>{"use strict";n.d(t,{N:()=>_});var r=n(24852),o=n.n(r),i=n(71703),a=n(80416);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(7169);var b=n(45697),h=n(85552),g={borderBottom:"1px solid #ffffffad",paddingLeft:"5px",margin:0},m={display:"inline-block",verticalAlign:"middle"},v={background:"#ffffff",borderRadius:"3px",margin:"5px",marginRight:"20px",color:"limegreen",fontSize:"10px"},O={whiteSpace:"nowrap",paddingLeft:"3px"},E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(u,e);var t,n,r,i,a=(r=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(r);if(i){var n=y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return f(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=a.call(this,e)).state={isVisible:!0},t}return t=u,(n=[{key:"render",value:function(){var e,t,n,r=this;return this.props.thisLayer?o().createElement("div",{className:"row",style:c({},g)},o().createElement("div",{className:"btn-group inline pull-left",style:c({},m)},o().createElement("div",{className:"btn glyphicon "+(null!==(e=this.props.thisLayer)&&void 0!==e&&e.visibility?"glyphicon-ok":"glyphicon-remove"),style:c(c({},v),{},{color:null!==(t=this.props.thisLayer)&&void 0!==t&&t.visibility?"limegreen":"red"}),onClick:function(){var e,t;r.props.toggleLayer(null===(e=r.props.thisLayer)||void 0===e?void 0:e.id,null===(t=r.props.thisLayer)||void 0===t?void 0:t.visibility)}}),o().createElement("div",{className:"h5",style:O},this.props.thisLayer.title)),0===this.props.thisLayer.opacity||this.props.thisLayer.opacity?o().createElement("div",{className:"mapstore-slider dataset-transparency with-tooltip",onClick:function(e){e.stopPropagation()}},o().createElement(h,{step:1,start:100*(null===(n=this.props.thisLayer)||void 0===n?void 0:n.opacity),range:{min:0,max:100},onChange:function(e){var t;r.props.setOpacity(null===(t=r.props.thisLayer)||void 0===t?void 0:t.id,e)}})):null):o().createElement("div",{className:"row",style:c({},g)},o().createElement("div",{className:"btn-group inline pull-left",style:c({},m)},o().createElement("div",{className:"h5",style:O},"No datasets here yet...")))}}])&&p(t.prototype,n),u}(o().Component);d(E,"propTypes",{thisLayer:b.array,dataset:b.object,toggleLayer:b.func,setOpacity:b.func,layer:b.object});var _=(0,i.connect)((function(e,t){var n;return{thisLayer:t.layer?t.layer:null==e||null===(n=e.layers)||void 0===n?void 0:n.flat.filter((function(e){var n;return(null==e?void 0:e.id)===(null===(n=t.dataset)||void 0===n?void 0:n.layer)}))[0]}}),(function(e){return{toggleLayer:function(t,n){return e((0,a.He)(t,{visibility:!n}))},setOpacity:function(t,n){return e((0,a.He)(t,{opacity:.01*parseFloat(n)}))}}}))(E)},83918:(e,t,n)=>{(e.exports=n(9252)()).push([e.id,".msgapi .project-manager-panel {\n    position: absolute;\n    z-index: 1021;\n    top: 50px;\n    left: 20px;\n    min-width: 400px;\n    background-color: rgba(0, 60, 136, 0.6);\n    border-color: rgba(255, 255, 255, 0.7);\n    border-width: 2px;\n    padding: 5px 10px;\n    font-size: 12px;\n    line-height: 1.5;\n    border-radius: 4px;\n    color: white;\n    text-align: center\n}\n\n.msgapi .dataset-transparency {\n    margin-left: 280px;\n    margin-top: 15px;\n}\n\n.msgapi .mapstore-slider.with-tooltip.dataset-transparency .noUi-target.noUi-horizontal .noUi-base .noUi-origin .noUi-handle {\n    width: 20px;\n    left: -10px;\n    border: 2px solid #dddddd;\n    border-radius: 10px;\n    cursor: default;\n}\n\n.msgapi .mapstore-slider.with-tooltip.dataset-transparency .noUi-target {\n    box-shadow: none;\n    border: 1px solid rgba(255, 255, 255, 0.68);\n    background-color: #335781;\n}\n",""])},7169:(e,t,n)=>{var r=n(83918);"string"==typeof r&&(r=[[e.id,r,""]]),n(14246)(r,{}),r.locals&&(e.exports=r.locals)}}]);