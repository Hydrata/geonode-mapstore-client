(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[2164],{4206:(e,t,r)=>{"use strict";r.d(t,{hZ:()=>n,pb:()=>o,kD:()=>a,DI:()=>l,IC:()=>i,Vw:()=>p,KD:()=>c,uj:()=>m,lo:()=>d,Yf:()=>f,fo:()=>E,PY:()=>_,bp:()=>y});var n="CHANGE_DRAWING_STATUS",o="DRAW:END_DRAWING",a="DRAW:SET_CURRENT_STYLE",l="DRAW:GEOMETRY_CHANGED",i="DRAW:DRAW_SUPPORT_STOPPED",u="DRAW:FEATURES_SELECTED",s="DRAW:DRAWING_FEATURES";function p(e,t,r,n,o){return{type:l,features:e,owner:t,enableEdit:r,textChanged:n,circleChanged:o}}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:u,features:e}}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:s,features:e}}function d(){return{type:i}}function f(e,t,r,o,a,l){return{type:n,status:e,method:t,owner:r,features:o,options:a,style:l}}function E(e,t){return{type:o,geometry:e,owner:t}}function _(e){return{type:a,currentStyle:e}}var y=function(e){return f("clean","",e,[],{})}},33528:(e,t,r)=>{"use strict";r.d(t,{gJ:()=>n,Oj:()=>o,jp:()=>a,CM:()=>l,DU:()=>i,aO:()=>u,v6:()=>s,K8:()=>p,IN:()=>c,zh:()=>m,AH:()=>d,Ub:()=>f,_9:()=>E,JB:()=>_,oh:()=>y,AY:()=>g,yi:()=>v,SW:()=>h,Hk:()=>b,iQ:()=>T,dY:()=>F,$:()=>S,_u:()=>R,gG:()=>B,DI:()=>w,dZ:()=>A,qw:()=>C,f$:()=>O,bZ:()=>M,$O:()=>I,sF:()=>P,Gk:()=>D,vO:()=>N,ut:()=>L,MK:()=>G,VV:()=>x,B8:()=>U,VM:()=>k,a3:()=>H,Xp:()=>j,DA:()=>W,sK:()=>Y,yA:()=>z,r:()=>V,iB:()=>q,EH:()=>Q,Yd:()=>K,Hg:()=>Z,Lz:()=>$,ye:()=>X,Jb:()=>J,d:()=>ee,fT:()=>te,Ib:()=>re,Pl:()=>ne,UB:()=>oe,Uh:()=>ae,QT:()=>le,oL:()=>ie,Ap:()=>ue,KD:()=>se,Z_:()=>pe,Vw:()=>ce,sY:()=>me,kA:()=>de,gr:()=>fe,pX:()=>Ee,F5:()=>_e,MO:()=>ye,dq:()=>ge,DY:()=>ve,oO:()=>he,uF:()=>be,a8:()=>Te,Pv:()=>Fe,an:()=>Se,lg:()=>Re,nY:()=>Be,nG:()=>we,lx:()=>Ae,$S:()=>Ce,gc:()=>Oe,Uz:()=>Me,fO:()=>Ie,$E:()=>Pe,cE:()=>De,JK:()=>Ne,YV:()=>Le,t9:()=>Ge,YG:()=>xe,HT:()=>Ue,MY:()=>ke,ve:()=>He,hB:()=>je,Ox:()=>We,zd:()=>Ye,aT:()=>ze,VH:()=>Ve,Yb:()=>qe,Jr:()=>Qe,pP:()=>Ke});var n="FEATUREGRID:SET_UP",o="FEATUREGRID:SELECT_FEATURES",a="FEATUREGRID:DESELECT_FEATURES",l="FEATUREGRID:CLEAR_SELECTION",i="FEATUREGRID:SET_SELECTION_OPTIONS",u="FEATUREGRID:TOGGLE_MODE",s="FEATUREGRID:TOGGLE_FEATURES_SELECTION",p="FEATUREGRID:FEATURES_MODIFIED",c="FEATUREGRID:NEW_FEATURE",m="FEATUREGRID:SAVE_CHANGES",d="FEATUREGRID:SAVING",f="FEATUREGRID:START_EDITING_FEATURE",E="FEATUREGRID:START_DRAWING_FEATURE",_="FEATUREGRID:DELETE_GEOMETRY",y="FEATUREGRID:DELETE_GEOMETRY_FEATURE",g="FEATUREGRID:SAVE_SUCCESS",v="FEATUREGRID:CLEAR_CHANGES",h="FEATUREGRID:SAVE_ERROR",b="FEATUREGRID:DELETE_SELECTED_FEATURES",T="SET_FEATURES",F="FEATUREGRID:SORT_BY",S="FEATUREGRID:SET_LAYER",R="QUERY:UPDATE_FILTER",B="FEATUREGRID:CHANGE_PAGE",w="FEATUREGRID:GEOMETRY_CHANGED",A="DOCK_SIZE_FEATURES",C="FEATUREGRID:TOGGLE_TOOL",O="FEATUREGRID:CUSTOMIZE_ATTRIBUTE",M="ASK_CLOSE_FEATURE_GRID_CONFIRM",I="FEATUREGRID:OPEN_GRID",P="FEATUREGRID:CLOSE_GRID",D="FEATUREGRID:CLEAR_CHANGES_CONFIRMED",N="FEATUREGRID:FEATURE_GRID_CLOSE_CONFIRMED",L="FEATUREGRID:SET_PERMISSION",G="FEATUREGRID:DISABLE_TOOLBAR",x="FEATUREGRID:ACTIVATE_TEMPORARY_CHANGES",U="FEATUREGRID:DEACTIVATE_GEOMETRY_FILTER",k="FEATUREGRID:ADVANCED_SEARCH",H="FEATUREGRID:ZOOM_ALL",j="FEATUREGRID:INIT_PLUGIN",W="FEATUREGRID:SIZE_CHANGE",Y="FEATUREGRID:TOGGLE_SHOW_AGAIN_FLAG",z="FEATUREGRID:HIDE_SYNC_POPOVER",V="FEATUREGRID:UPDATE_EDITORS_OPTIONS",q="FEATUREGRID:LAUNCH_UPDATE_FILTER_FUNC",Q={EDIT:"EDIT",VIEW:"VIEW"},K="FEATUREGRID:START_SYNC_WMS",Z="FEATUREGRID:STOP_SYNC_WMS",$="STORE_ADVANCED_SEARCH_FILTER",X="LOAD_MORE_FEATURES",J="FEATUREGRID:QUERY_RESULT",ee="FEATUREGRID:SET_TIME_SYNC",te="FEATUREGRID:SET_PAGINATION";function re(){return{type:Y}}function ne(){return{type:z}}function oe(e,t){return{type:J,features:e,pages:t}}function ae(e){return{type:$,filterObj:e}}function le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:j,options:e}}function ie(){return{type:D}}function ue(){return{type:N}}function se(e,t){return{type:o,features:e,append:t}}function pe(e){return{type:n,options:e}}function ce(e){return{type:w,features:e}}function me(){return{type:f}}function de(){return{type:E}}function fe(e){return{type:a,features:e}}function Ee(){return{type:_}}function _e(e){return{type:y,features:e}}function ye(){return{type:l}}function ge(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.multiselect,r=void 0!==t&&t;return{type:i,multiselect:r}}function ve(e,t){return{type:F,sortBy:e,sortOrder:t}}function he(e,t){return{type:B,page:e,size:t}}function be(e){return{type:S,id:e}}function Te(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:R,update:e,append:t}}function Fe(e,t){return{type:C,tool:e,value:t}}function Se(e,t,r){return{type:O,name:e,key:t,value:r}}function Re(){return{type:u,mode:Q.EDIT}}function Be(){return{type:u,mode:Q.VIEW}}function we(e,t){return{type:p,features:e,updated:t}}function Ae(e){return{type:c,features:e}}function Ce(){return{type:m}}function Oe(){return{type:g}}function Me(){return{type:b}}function Ie(){return{type:d}}function Pe(){return{type:v}}function De(){return{type:h}}function Ne(){return{type:M}}function Le(){return{type:P}}function Ge(){return{type:I}}function xe(e){return{type:G,disabled:e}}function Ue(e){return{type:L,permission:e}}function ke(){return{type:k}}function He(){return{type:H}}function je(){return{type:K}}function We(e,t){return{type:W,size:e,dockProps:t}}var Ye=function(e){return{type:X,pages:e}},ze=function(e){return{type:x,activated:e}},Ve=function(e){return{type:U,deactivated:e}},qe=function(e){return{type:ee,value:e}},Qe=function(e){return{type:te,size:e}},Ke=function(e){return{type:q,updateFilterAction:e}}},29386:(e,t,r)=>{"use strict";r.d(t,{F2:()=>n,fu:()=>o,NF:()=>a,WP:()=>l,_E:()=>i});var n="HIGHLIGHT_STATUS",o="UPDATE_HIGHLIGHTED",a="HIGHLIGHT:SET_HIGHLIGHT_FEATURES_PATH";function l(e){return{type:a,featuresPath:e}}function i(e,t){return{type:o,features:e,status:t}}},80416:(e,t,r)=>{"use strict";r.d(t,{yS:()=>n,Zz:()=>o,ms:()=>a,ih:()=>l,OX:()=>i,sb:()=>u,K$:()=>s,k7:()=>p,cX:()=>c,x9:()=>m,vs:()=>d,oE:()=>f,Po:()=>E,qv:()=>_,cI:()=>y,g6:()=>g,I4:()=>v,l$:()=>h,Xv:()=>b,k3:()=>T,CQ:()=>F,R8:()=>S,HN:()=>R,sH:()=>B,c7:()=>w,_7:()=>A,eF:()=>C,O6:()=>O,ED:()=>M,RP:()=>I,sF:()=>P,VP:()=>D,He:()=>N,vO:()=>L,WO:()=>G,bh:()=>x,pV:()=>U,MK:()=>k,ZF:()=>H,tV:()=>j,Dv:()=>W,Yz:()=>Y,kI:()=>z,XG:()=>V,A4:()=>q,Rp:()=>Q,ct:()=>K,oh:()=>Z,$h:()=>$,ud:()=>X,Qr:()=>J,LR:()=>ee,nN:()=>te,UG:()=>re,F5:()=>ne,c9:()=>oe,Jh:()=>ae,Xy:()=>le});var n="CHANGE_LAYER_PROPERTIES",o="LAYERS:CHANGE_LAYER_PARAMS",a="CHANGE_GROUP_PROPERTIES",l="TOGGLE_NODE",i="SORT_NODE",u="REMOVE_NODE",s="UPDATE_NODE",p="MOVE_NODE",c="LAYER_LOADING",m="LAYER_LOAD",d="LAYER_ERROR",f="ADD_LAYER",E="ADD_GROUP",_="REMOVE_LAYER",y="SHOW_SETTINGS",g="HIDE_SETTINGS",v="UPDATE_SETTINGS",h="REFRESH_LAYERS",b="LAYERS:UPDATE_LAYERS_DIMENSION",T="LAYERS_REFRESHED",F="LAYERS_REFRESH_ERROR",S="LAYERS:BROWSE_DATA",R="LAYERS:DOWNLOAD",B="LAYERS:CLEAR_LAYERS",w="LAYERS:SELECT_NODE",A="LAYERS:FILTER_LAYERS",C="LAYERS:SHOW_LAYER_METADATA",O="LAYERS:HIDE_LAYER_METADATA",M="LAYERS:UPDATE_SETTINGS_PARAMS";function I(e,t,r){return{type:y,node:e,nodeType:t,options:r}}function P(){return{type:g}}function D(e){return{type:v,options:e}}function N(e,t){return{type:n,newProperties:t,layer:e}}function L(e,t){return{type:o,layer:e,params:t}}function G(e,t){return{type:a,newProperties:t,group:e}}function x(e,t,r){return{type:l,node:e,nodeType:t,status:!r}}function U(e){return{type:"CONTEXT_NODE",node:e}}function k(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:i,node:e,order:t,sortLayers:r}}function H(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:u,node:e,nodeType:t,removeEmpty:r}}function j(e,t,r){return{type:s,node:e,nodeType:t,options:r}}function W(e,t,r){return{type:p,node:e,groupId:t,index:r}}function Y(e){return{type:c,layerId:e}}function z(e,t){return{type:m,layerId:e,error:t}}function V(e,t,r){return{type:d,layerId:e,tilesCount:t,tilesErrorCount:r}}function q(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{type:f,layer:e,foreground:t}}function Q(e,t,r){return{type:E,group:e,parent:t,options:r}}function K(e,t){return{type:n,layer:e,newProperties:{_v_:t||(new Date).getTime()}}}function Z(e){return{type:T,layers:e}}function $(e,t){return{type:F,layers:e,error:t}}function X(e,t,r,n){return{type:b,dimension:e,value:t,options:r,layers:n}}function J(e){return{type:S,layer:e}}function ee(e){return{type:R,layer:e}}function te(){return{type:B}}function re(e,t,r){return{type:w,id:e,nodeType:t,ctrlKey:r}}function ne(e){return{type:A,text:e}}function oe(e,t){return{type:C,metadataRecord:e,maskLoading:t}}function ae(){return{type:O}}function le(e,t){return{type:M,newParams:e,update:t}}},21914:(e,t,r)=>{"use strict";r.d(t,{XL:()=>o,km:()=>a,Ih:()=>l,Xw:()=>i,Pn:()=>u,DZ:()=>s,e8:()=>p,E0:()=>c,F9:()=>m,X_:()=>d,pb:()=>f,qb:()=>E,Re:()=>_,ih:()=>y,xy:()=>g,jL:()=>v,oz:()=>h,ph:()=>b,lF:()=>T,gG:()=>F,cb:()=>S,GI:()=>R,B1:()=>B,fv:()=>w,gc:()=>A,zX:()=>C,ZF:()=>O,Zb:()=>M,Fm:()=>I,sV:()=>P,Mn:()=>D,LU:()=>N,XP:()=>L,WU:()=>G,JB:()=>x,g:()=>U,ws:()=>k,HP:()=>H,aN:()=>j,Pg:()=>Y,u0:()=>z,TM:()=>V,PM:()=>q,lK:()=>Q,sv:()=>K,MO:()=>Z,oO:()=>$,Mc:()=>X,Zw:()=>J,RA:()=>ee,am:()=>te,ZM:()=>re,wm:()=>ne,Y$:()=>oe});var n=r(47310),o="LOAD_FEATURE_INFO",a="ERROR_FEATURE_INFO",l="EXCEPTIONS_FEATURE_INFO",i="CHANGE_MAPINFO_STATE",u="NEW_MAPINFO_REQUEST",s="PURGE_MAPINFO_RESULTS",p="CHANGE_MAPINFO_FORMAT",c="SHOW_MAPINFO_MARKER",m="HIDE_MAPINFO_MARKER",d="SHOW_REVERSE_GEOCODE",f="HIDE_REVERSE_GEOCODE",E="GET_VECTOR_INFO",_="NO_QUERYABLE_LAYERS",y="CLEAR_WARNING",g="FEATURE_INFO_CLICK",v="IDENTIFY:UPDATE_FEATURE_INFO_CLICK_POINT",h="IDENTIFY:TOGGLE_HIGHLIGHT_FEATURE",b="TOGGLE_MAPINFO_STATE",T="UPDATE_CENTER_TO_MARKER",F="IDENTIFY:CHANGE_PAGE",S="IDENTIFY:CLOSE_IDENTIFY",R="IDENTIFY:CHANGE_FORMAT",B="IDENTIFY:TOGGLE_SHOW_COORD_EDITOR",w="IDENTIFY:EDIT_LAYER_FEATURES",A="IDENTIFY:CURRENT_EDIT_FEATURE_QUERY",C="IDENTIFY:SET_MAP_TRIGGER",O="IDENTIFY:TOGGLE_EMPTY_MESSAGE_GFI",M="IDENTIFY:SET_SHOW_IN_MAP_POPUP";function I(e,t,r,n,a){return{type:o,data:t,reqId:e,requestParams:r,layerMetadata:n,layer:a}}function P(e,t,r,n){return{type:a,error:t,reqId:e,requestParams:r,layerMetadata:n}}function D(e,t,r,n){return{type:l,reqId:e,exceptions:t,requestParams:r,layerMetadata:n}}function N(){return{type:_}}function L(){return{type:y}}function G(e,t){return{type:u,reqId:e,request:t}}function x(e,t,r,n){return{type:E,layer:e,request:t,metadata:r,queryableLayers:n}}function U(){return{type:s}}function k(e){return{type:p,infoFormat:e}}function H(){return{type:c}}function j(){return{type:m}}function W(e){return{type:d,reverseGeocodeData:e.data}}function Y(e){return function(t){n.Z.reverseGeocode(e).then((function(e){t(W(e))})).catch((function(e){t(W(e))}))}}function z(){return{type:f}}function V(){return{type:b}}function q(e){return{type:T,status:e}}function Q(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return{type:g,point:e,layer:t,filterNameList:r,overrideParams:n,itemId:o}}function K(e){return{type:v,point:e}}function Z(e){return{type:h,enabled:e}}function $(e){return{type:F,index:e}}var X=function(){return{type:S}},J=function(e){return{type:R,format:e}},ee=function(e){return{type:B,showCoordinateEditor:e}},te=function(e){return{type:w,layer:e}},re=function(e){return{type:A,query:e}},ne=function(e){return{type:C,trigger:e}},oe=function(e){return{type:M,value:e}}},7878:(e,t,r)=>{"use strict";r.d(t,{E6:()=>l,vo:()=>i,l1:()=>u,J9:()=>s,U:()=>p,z8:()=>c,ql:()=>m,O_:()=>d,M$:()=>f,Ug:()=>E,p5:()=>_,Fz:()=>y,WZ:()=>g,bP:()=>v,On:()=>h,d_:()=>b,xM:()=>T,bl:()=>F,Wi:()=>S,PN:()=>R,_M:()=>B,Wm:()=>w,Eg:()=>A,V1:()=>C,cY:()=>O,RD:()=>M,Hl:()=>I,co:()=>P,uY:()=>D,H8:()=>N,je:()=>L,go:()=>G,_8:()=>x,xd:()=>U,o7:()=>k,Nr:()=>H,Gf:()=>j,nh:()=>W,Rf:()=>Y,D6:()=>z,Sm:()=>V,Ef:()=>q,jW:()=>Q,kQ:()=>K,JG:()=>Z,js:()=>$,q$:()=>X,OZ:()=>J,Nc:()=>ee,NV:()=>te,I5:()=>re,QL:()=>ne,I:()=>oe,ku:()=>ae,EU:()=>le,IV:()=>ie,HT:()=>ue,lg:()=>se,ds:()=>pe,VF:()=>ce,DD:()=>me,uo:()=>de,Ry:()=>fe,ZH:()=>Ee,AQ:()=>_e,yC:()=>ye,F:()=>ge,mc:()=>ve,uM:()=>be,eJ:()=>Te,uP:()=>Fe,N5:()=>Se,bn:()=>Re,Bm:()=>Be,F2:()=>we,jR:()=>Ae,$J:()=>Ce});var n=r(75875),o=r.n(n);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l="ADD_FILTER_FIELD",i="REMOVE_FILTER_FIELD",u="UPDATE_FILTER_FIELD",s="UPDATE_EXCEPTION_FIELD",p="ADD_GROUP_FIELD",c="UPDATE_LOGIC_COMBO",m="REMOVE_GROUP_FIELD",d="CHANGE_CASCADING_VALUE",f="EXPAND_ATTRIBUTE_PANEL",E="EXPAND_SPATIAL_PANEL",_="QUERYFORM:EXPAND_CROSS_LAYER",y="QUERYFORM:SET_CROSS_LAYER_PARAMETER",g="QUERYFORM:RESET_CROSS_LAYER_FILTER",v="SELECT_SPATIAL_METHOD",h="SELECT_VIEWPORT_SPATIAL_METHOD",b="UPDATE_GEOMETRY",T="SELECT_SPATIAL_OPERATION",F="CHANGE_SPATIAL_ATTRIBUTE",S="CHANGE_SPATIAL_FILTER_VALUE",R="REMOVE_SPATIAL_SELECT",B="SHOW_SPATIAL_DETAILS",w="QUERY_FORM_SEARCH",A="QUERY_FORM_RESET",C="SHOW_GENERATED_FILTER",O="CHANGE_DWITHIN_VALUE",M="ZONE_SEARCH",I="ZONE_SEARCH_ERROR",P="ZONE_FILTER",D="ZONE_CHANGE",N="ZONES_RESET",L="SIMPLE_FILTER_FIELD_UPDATE",G="ADD_SIMPLE_FILTER_FIELD",x="REMOVE_SIMPLE_FILTER_FIELD",U="REMOVE_ALL_SIMPLE_FILTER_FIELDS",k="UPDATE_FILTER_FIELD_OPTIONS",H="LOADING_FILTER_FIELD_OPTIONS",j="QUERYFORM:ADD_CROSS_LAYER_FILTER_FIELD",W="QUERYFORM:UPDATE_CROSS_LAYER_FILTER_FIELD",Y="QUERYFORM:REMOVE_CROSS_LAYER_FILTER_FIELD",z="SET_AUTOCOMPLETE_MODE",V="TOGGLE_AUTOCOMPLETE_MENU",q="QUERYFORM:LOAD_FILTER";function Q(e){return{type:l,groupId:e}}function K(e,t){return{type:p,groupId:e,index:t}}function Z(e){return{type:i,rowId:e}}function $(e,t){return{type:V,rowId:e,status:t}}function X(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return{type:u,rowId:e,fieldName:t,fieldValue:r,fieldType:n,fieldOptions:o}}function J(e,t){return{type:s,rowId:e,exceptionMessage:t}}function ee(e,t){return{type:c,groupId:e,logic:t}}function te(e){return{type:z,status:e}}function re(e){return{type:m,groupId:e}}function ne(e){return{type:d,attributes:e}}function oe(e){return{type:f,expand:e}}function ae(e){return{type:E,expand:e}}function le(e){return{type:_,expand:e}}function ie(e,t){return{type:y,key:e,value:t}}function ue(e,t){return{type:v,fieldName:t,method:e}}function se(){return{type:h}}function pe(e){return{type:b,geometry:e}}function ce(e,t){return{type:T,fieldName:t,operation:e}}function me(e){return{type:F,attribute:e}}function de(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.feature,r=e.srsName,n=e.collectGeometries,o=e.style,a=e.options,l=e.value;return{type:S,value:l,collectGeometries:n,options:a,geometry:t&&t.geometry,feature:t,srsName:r,style:o}}function fe(){return{type:R}}function Ee(e){return{type:B,show:e}}function _e(e){return{type:O,distance:e}}function ye(e,t){return{type:w,searchUrl:e,filterObj:t}}function ge(e){return{type:q,filter:e}}function ve(e){return{type:A,skip:e}}function he(e,t){return{type:I,error:e,id:t}}function be(e,t){return{type:M,active:e,id:t}}function Te(e,t,r){return function(n){return o().post(e,t,{timeout:1e4,headers:{Accept:"application/json","Content-Type":"text/plain"}}).then((function(o){var l=o.data;if("object"!==a(l))try{l=JSON.parse(l)}catch(o){n(he("Search result broken ("+e+":   "+t+"): "+o.message,r))}n(function(e,t){return{type:P,data:e,id:t}}(l,r)),n(be(!1,r))})).catch((function(e){n(he(e,r))}))}}function Fe(e,t){return{type:D,id:e,value:t}}function Se(e){return{type:j,rowId:(new Date).getTime(),groupId:e}}function Re(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return{type:W,rowId:e,fieldName:t,fieldValue:r,fieldType:n,fieldOptions:o}}function Be(e){return{type:Y,rowId:e}}function we(){return{type:g}}function Ae(e,t){return{type:H,status:e,filterField:t}}function Ce(e,t,r){return{type:k,filterField:e,options:t,valuesCount:r}}},95797:(e,t,r)=>{"use strict";r.d(t,{DR:()=>n,S0:()=>o,u7:()=>a,lj:()=>l,yz:()=>i,lN:()=>u,zW:()=>s,Yx:()=>p,VN:()=>c,Hu:()=>m,VT:()=>d,RD:()=>f,Qq:()=>E,R1:()=>_,_T:()=>y,vO:()=>g,XO:()=>v,jG:()=>h,Xc:()=>b,gT:()=>T,rG:()=>F,t3:()=>S,Fs:()=>R,w_:()=>B,Lm:()=>w,rh:()=>A,rP:()=>C,IO:()=>O,zc:()=>M}),r(75875);var n="LAYER_SELECTED_FOR_SEARCH",o="FEATURE_TYPE_SELECTED",a="FEATURE_TYPE_LOADED",l="FEATURE_LOADED",i="FEATURE_LOADING",u="FEATURE_TYPE_ERROR",s="FEATURE_ERROR",p="QUERY_CREATE",c="QUERY:UPDATE_QUERY",m="QUERY_RESULT",d="QUERY_ERROR",f="RESET_QUERY",E="QUERY",_="INIT_QUERY_PANEL",y="QUERY:TOGGLE_SYNC_WMS",g="QUERY:TOGGLE_LAYER_FILTER";function v(){return{type:y}}function h(){return{type:g}}function b(){return{type:_}}function T(e,t){return{type:o,url:e,typeName:t}}function F(e,t){return{type:a,typeName:e,featureType:t}}function S(e,t){return{type:u,typeName:e,error:t}}function R(e){return{type:i,isLoading:e}}function B(e,t,r,n,o){return{type:m,searchUrl:t,filterObj:r,result:e,queryOptions:n,reason:o}}function w(e){return{type:d,error:e}}function A(e,t){return{type:c,updates:e,reason:t}}function C(e,t){return{type:p,searchUrl:e,filterObj:t}}function O(e,t,r,n){return{type:E,searchUrl:e,filterObj:t,queryOptions:r,reason:n}}function M(){return{type:f}}},47310:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(75875),o=r.n(n),a=r(72500),l=r.n(a),i=r(27418),u=r.n(i),s={format:"json",bounded:0,polygon_geojson:1,priority:5};const p={geocode:function(e,t){var r=u()({q:e},s,t||{}),n=l().format({protocol:"https",host:"nominatim.openstreetmap.org",query:r});return o().get(n)},reverseGeocode:function(e,t){var r=u()({lat:e.lat,lon:e.lng},t||{},s),n=l().format({protocol:"https",host:"nominatim.openstreetmap.org/reverse",query:r});return o().get(n)}}},68699:(e,t,r)=>{"use strict";r.d(t,{N:()=>T});var n=r(24852),o=r.n(n),a=r(71703),l=r(80416);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(7169);var E=r(45697),_=r(85552),y={borderBottom:"1px solid #ffffffad",paddingLeft:"5px",margin:0},g={display:"inline-block",verticalAlign:"middle"},v={background:"#ffffff",borderRadius:"3px",margin:"5px",marginRight:"20px",color:"limegreen",fontSize:"10px"},h={whiteSpace:"nowrap",paddingLeft:"3px"},b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(i,e);var t,r,n,a,l=(n=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(n);if(a){var r=d(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return m(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=l.call(this,e)).state={isVisible:!0},t}return t=i,(r=[{key:"render",value:function(){var e,t,r,n=this;return this.props.thisLayer?o().createElement("div",{className:"row",style:s({},y)},o().createElement("div",{className:"btn-group inline pull-left",style:s({},g)},o().createElement("div",{className:"btn glyphicon "+(null!==(e=this.props.thisLayer)&&void 0!==e&&e.visibility?"glyphicon-ok":"glyphicon-remove"),style:s(s({},v),{},{color:null!==(t=this.props.thisLayer)&&void 0!==t&&t.visibility?"limegreen":"red"}),onClick:function(){var e,t;n.props.toggleLayer(null===(e=n.props.thisLayer)||void 0===e?void 0:e.id,null===(t=n.props.thisLayer)||void 0===t?void 0:t.visibility)}}),o().createElement("div",{className:"h5",style:h},this.props.thisLayer.title)),0===this.props.thisLayer.opacity||this.props.thisLayer.opacity?o().createElement("div",{className:"mapstore-slider dataset-transparency with-tooltip",onClick:function(e){e.stopPropagation()}},o().createElement(_,{step:1,start:100*(null===(r=this.props.thisLayer)||void 0===r?void 0:r.opacity),range:{min:0,max:100},onChange:function(e){var t;n.props.setOpacity(null===(t=n.props.thisLayer)||void 0===t?void 0:t.id,e)}})):null):o().createElement("div",{className:"row",style:s({},y)},o().createElement("div",{className:"btn-group inline pull-left",style:s({},g)},o().createElement("div",{className:"h5",style:h},"No datasets here yet...")))}}])&&p(t.prototype,r),i}(o().Component);f(b,"propTypes",{thisLayer:E.array,dataset:E.object,toggleLayer:E.func,setOpacity:E.func,layer:E.object});var T=(0,a.connect)((function(e,t){var r;return{thisLayer:t.layer?t.layer:null==e||null===(r=e.layers)||void 0===r?void 0:r.flat.filter((function(e){var r;return(null==e?void 0:e.id)===(null===(r=t.dataset)||void 0===r?void 0:r.layer)}))[0]}}),(function(e){return{toggleLayer:function(t,r){return e((0,l.He)(t,{visibility:!r}))},setOpacity:function(t,r){return e((0,l.He)(t,{opacity:.01*parseFloat(r)}))}}}))(b)},52164:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>$e});var n=r(22843),o=r(52948),a=r(21914);function l(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c={showOutlets:!0,showFootprints:!0,showWatersheds:!0,bmpTypes:[],groupProfiles:[],allBmps:[],statuses:[],targets:[],visibleBmpForm:!1,visibleTargetForm:!1,creatingNewBmp:!1,drawingBmpLayerName:!1,bmpFilterMode:"type"},m=r(24852),d=r.n(m),f=r(71703),E=r(23885),_=r(33528),y=r(95797);function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:",";try{t=Math.abs(t),t=isNaN(t)?2:t;var o=e<0?"-":"",a=parseInt(e=Math.abs(Number(e)||0).toFixed(t)).toString(),l=a.length>3?a.length%3:0;return o+(l?a.substr(0,l)+n:"")+a.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+n)+(t?r+Math.abs(e-a).toFixed(t).slice(2):"")}catch(e){console.log(e)}}r(7169);var v=function(e){var t,r;return null!=e&&null!==(t=e.swamm)&&void 0!==t&&t.bmpTypes?null==e||null===(r=e.swamm)||void 0===r?void 0:r.bmpTypes.filter((function(e,t,r){return r.findIndex((function(t){return t.name===e.name}))===t})):[]},h=r(80416);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?R(e):t}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var A=r(45697),C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(l,e);var t,r,n,o,a=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=B(n);if(o){var r=B(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return S(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,e)).handleChange=t.handleChange.bind(R(t)),t.handleBmpChange=t.handleBmpChange.bind(R(t)),t.handlegroupProfileChange=t.handlegroupProfileChange.bind(R(t)),t.state={},t}return t=l,(r=[{key:"componentDidMount",value:function(){var e,t,r;0!==Object.keys(this.props.storedBmpForm).length||this.props.creatingNewBmp||(this.props.purgeMapInfoResults(),this.props.setMenuGroup(null)),this.props.toggleLayer(null===(e=this.props.bmpOutletLayer)||void 0===e?void 0:e.id,!0),this.props.toggleLayer(null===(t=this.props.bmpFootprintLayer)||void 0===t?void 0:t.id,!0),this.props.toggleLayer(null===(r=this.props.bmpWatershedLayer)||void 0===r?void 0:r.id,!0)}},{key:"componentDidUpdate",value:function(){0===Object.keys(this.props.storedBmpForm).length&&!this.props.creatingNewBmp&&this.props.updatingBmp&&this.props.makeExistingBmpForm(this.props.updatingBmp)}},{key:"render",value:function(){var e,t,r,n,o,a,l,i,u,s,p,c,m,f,_,y,g,v,h,b,T,F,S,R,B,w,A,C,O,M,I,P,D,N,L,G,x,U,k,H,j,W,Y,z,V,q,Q,K,Z,$,X,J,ee,te,re,ne,oe,ae,le,ie,ue,se,pe,ce,me,de,fe=this;return d().createElement(d().Fragment,null,d().createElement(E.Modal,{show:!0,onHide:function(){return fe.props.hideBmpForm()},style:{marginTop:"100px",fontSize:"small"},dialogClassName:"swamm-big-modal",backdrop:!1,enforceFocus:!1,scrollable:"true"},d().createElement(E.Modal.Header,null,d().createElement(E.Modal.Title,null,this.props.storedBmpForm.id?"Edit BMP: "+(null===(e=this.props.storedBmpForm)||void 0===e||null===(t=e.type_data)||void 0===t?void 0:t.name)+" "+this.props.storedBmpForm.id:"Create a new BMP")),d().createElement(E.Modal.Body,{style:{padding:0}},d().createElement(E.Col,{sm:6,style:{padding:"10px"}},d().createElement(E.Form,{horizontal:!0},d().createElement(E.FormGroup,{controlId:"formControlsSelectgroupProfile",bsSize:"small"},d().createElement(E.Col,{componentClass:E.ControlLabel,sm:6},"Organization"),this.props.storedBmpForm.id?d().createElement(E.Col,{sm:5},d().createElement(E.FormControl,{inline:"true",readOnly:"true",type:"string",value:null===(r=this.props.storedBmpForm)||void 0===r||null===(n=r.group_profile)||void 0===n?void 0:n.title})):d().createElement(E.Col,{sm:5},d().createElement(E.FormControl,{inline:"true",componentClass:"select",name:"groupProfile",value:JSON.stringify(null===(o=this.props.storedBmpForm)||void 0===o?void 0:o.group_profile),onChange:this.handlegroupProfileChange},d().createElement("option",{key:"1",value:"select"},"Select Organization"),this.props.groupProfiles.map((function(e){return d().createElement("option",{key:e.id,value:JSON.stringify(e)},e.title)}))),d().createElement(E.FormControl.Feedback,null))),d().createElement(E.FormGroup,{controlId:"formControlsSelectBmp",bsSize:"small"},d().createElement(E.Col,{componentClass:E.ControlLabel,sm:6},"BMP Type"),this.props.storedBmpForm.id?d().createElement(E.Col,{sm:5},d().createElement(E.FormControl,{inline:"true",readOnly:"true",type:"string",value:null===(a=this.props.storedBmpForm)||void 0===a?void 0:a.bmpName})):d().createElement(E.Col,{sm:5},d().createElement(E.FormControl,{inline:"true",componentClass:"select",name:"bmpName",value:null===(l=this.props.storedBmpForm)||void 0===l?void 0:l.bmpName,onChange:this.handleBmpChange},d().createElement("option",{key:"1",value:"select"},"Select BMP Type"),this.props.bmpUniqueNames.map((function(e){return d().createElement("option",{key:e,value:e},e)}))),d().createElement(E.FormControl.Feedback,null))),d().createElement(E.FormGroup,{controlId:"formControlsSelectStatus",bsSize:"small"},d().createElement(E.Col,{componentClass:E.ControlLabel,sm:6},"BMP Status"),d().createElement(E.Col,{sm:5},d().createElement(E.FormControl,{inline:"true",componentClass:"select",name:"status",value:null===(i=this.props.storedBmpForm)||void 0===i?void 0:i.status,onChange:this.handleChange},d().createElement("option",{key:"Unknown",value:"Unknown"},"Unknown"),this.props.statuses.filter((function(e){return"Unknown"!==e})).map((function(e){return d().createElement("option",{key:e,value:e},e)}))),d().createElement(E.FormControl.Feedback,null))),d().createElement(E.FormGroup,{controlId:"n_surface_red_percent",validationState:this.validateRatio("n_surface_red_percent"),bsSize:"small"},d().createElement(E.Col,{componentClass:E.ControlLabel,sm:6},"Surface Nitrogen Reduction Percentage"),d().createElement(E.Col,{sm:5},d().createElement(E.FormControl,{inline:"true",type:"number",step:.01,precision:2,name:"override_n_surface_red_percent",value:null===(u=this.props.storedBmpForm)||void 0===u?void 0:u.override_n_surface_red_percent,onChange:this.handleChange}),d().createElement(E.FormControl.Feedback,null))),d().createElement(E.FormGroup,{controlId:"p_surface_red_percent",validationState:this.validateRatio("p_surface_red_percent"),bsSize:"small"},d().createElement(E.Col,{componentClass:E.ControlLabel,sm:6},"Surface Phosphorus Reduction Percentage"),d().createElement(E.Col,{sm:5},d().createElement(E.FormControl,{inline:"true",type:"number",step:.01,precision:2,name:"override_p_surface_red_percent",value:null===(s=this.props.storedBmpForm)||void 0===s?void 0:s.override_p_surface_red_percent,onChange:this.handleChange}),d().createElement(E.FormControl.Feedback,null))),d().createElement(E.FormGroup,{controlId:"s_surface_red_percent",validationState:this.validateRatio("s_surface_red_percent"),bsSize:"small"},d().createElement(E.Col,{componentClass:E.ControlLabel,sm:6},"Surface Sediment Reduction Percentage"),d().createElement(E.Col,{sm:5},d().createElement(E.FormControl,{inline:"true",type:"number",step:.01,precision:2,name:"override_s_surface_red_percent",value:null===(p=this.props.storedBmpForm)||void 0===p?void 0:p.override_s_surface_red_percent,onChange:this.handleChange}),d().createElement(E.FormControl.Feedback,null))),d().createElement(E.FormGroup,{controlId:"cost_base",validationState:this.validateCost("cost_base"),bsSize:"small"},d().createElement(E.Col,{componentClass:E.ControlLabel,sm:6},"Base Cost ($)"),d().createElement(E.Col,{sm:5},d().createElement(E.FormControl,{inline:"true",type:"number",step:.01,precision:2,name:"override_cost_base",value:null===(c=this.props.storedBmpForm)||void 0===c?void 0:c.override_cost_base,onChange:this.handleChange}),d().createElement(E.FormControl.Feedback,null))),d().createElement(E.FormGroup,{controlId:"cost_rate_per_footprint_area",validationState:this.validateCost("cost_rate_per_footprint_area"),bsSize:"small"},d().createElement(E.Col,{componentClass:E.ControlLabel,sm:6},"Footprint Cost ($/acre)"),d().createElement(E.Col,{sm:5},d().createElement(E.FormControl,{inline:"true",type:"number",step:.01,precision:2,name:"override_cost_rate_per_footprint_area",value:null===(m=this.props.storedBmpForm)||void 0===m?void 0:m.override_cost_rate_per_footprint_area,onChange:this.handleChange}),d().createElement(E.FormControl.Feedback,null))),d().createElement(E.FormGroup,{controlId:"cost_rate_per_watershed_area",validationState:this.validateCost("cost_rate_per_watershed_area"),bsSize:"small"},d().createElement(E.Col,{componentClass:E.ControlLabel,sm:6},"Watershed Cost ($/acre)"),d().createElement(E.Col,{sm:5},d().createElement(E.FormControl,{inline:"true",type:"number",step:.01,precision:2,name:"override_cost_rate_per_watershed_area",value:null===(f=this.props.storedBmpForm)||void 0===f?void 0:f.override_cost_rate_per_watershed_area,onChange:this.handleChange}),d().createElement(E.FormControl.Feedback,null))),d().createElement(E.FormGroup,{controlId:"outlet_fid",validationState:this.validateFid("outlet_fid"),bsSize:"small"},d().createElement(E.Col,{componentClass:E.ControlLabel,sm:6},"Outlet Point:"),null!==(_=this.props.storedBmpForm)&&void 0!==_&&_.outlet_fid?d().createElement(E.Col,{sm:1},d().createElement(E.Button,{className:"pull-right",bsStyle:"info",style:{opacity:"0.7"},onClick:function(){var e,t,r;return fe.drawBmpStep1((null===(e=fe.props)||void 0===e||null===(t=e.projectData)||void 0===t?void 0:t.code)+"_bmp_outlet",null===(r=fe.props.storedBmpForm)||void 0===r?void 0:r.outlet_fid)}},"Edit")):d().createElement(E.Col,{sm:5},d().createElement(E.Button,{disabled:!(null!==(y=this.props.storedBmpForm)&&void 0!==y&&y.group_profile_id&&this.props.storedBmpForm.bmpName),bsStyle:null!==(g=this.props.storedBmpForm)&&void 0!==g&&g.group_profile_id&&this.props.storedBmpForm.bmpName?"success":"default",style:{opacity:"0.7"},onClick:function(){var e;return fe.drawBmpStep1((null===(e=fe.props.projectData)||void 0===e?void 0:e.code)+"_bmp_outlet",null)}},"Locate Outlet"))),d().createElement(E.FormGroup,{controlId:"footprint_fid",validationState:this.validateFid("footprint_fid"),bsSize:"small"},d().createElement(E.Col,{componentClass:E.ControlLabel,sm:6},"Footprint:"),null!==(v=this.props.storedBmpForm)&&void 0!==v&&v.footprint_fid?d().createElement(d().Fragment,null,d().createElement(E.Col,{sm:3},d().createElement(E.FormControl,{inline:"true",readOnly:"true",type:"string",value:null!==(h=this.props.storedBmpForm)&&void 0!==h&&h.calculated_footprint_area?(null===(b=this.props.storedBmpForm)||void 0===b||null===(T=b.calculated_footprint_area)||void 0===T?void 0:T.toFixed(2))+" acres":""})),d().createElement(E.Col,{sm:2},d().createElement(E.Button,{className:"pull-right",bsStyle:"info",style:{opacity:"0.7"},onClick:function(){var e,t,r;return fe.drawBmpStep1((null===(e=fe.props)||void 0===e||null===(t=e.projectData)||void 0===t?void 0:t.code)+"_bmp_footprint",null===(r=fe.props.storedBmpForm)||void 0===r?void 0:r.footprint_fid)}},"Edit"))):d().createElement(d().Fragment,null,d().createElement(E.Col,{sm:5},d().createElement(E.Button,{disabled:!(null!==(F=this.props.storedBmpForm)&&void 0!==F&&F.group_profile_id&&this.props.storedBmpForm.bmpName),bsStyle:null!==(S=this.props.storedBmpForm)&&void 0!==S&&S.group_profile_id&&this.props.storedBmpForm.bmpName?"success":"default",style:{opacity:"0.7"},onClick:function(){var e,t;return fe.drawBmpStep1((null===(e=fe.props)||void 0===e||null===(t=e.projectData)||void 0===t?void 0:t.code)+"_bmp_footprint")}},"Draw footprint")))),d().createElement(E.FormGroup,{controlId:"watershed_fid",validationState:this.validateFid("watershed_fid"),bsSize:"small"},d().createElement(E.Col,{componentClass:E.ControlLabel,sm:6},"Watershed:"),null!==(R=this.props.storedBmpForm)&&void 0!==R&&R.watershed_fid?d().createElement(d().Fragment,null,d().createElement(E.Col,{sm:3},d().createElement(E.FormControl,{inline:"true",readOnly:"true",type:"string",value:null!==(B=this.props.storedBmpForm)&&void 0!==B&&B.calculated_watershed_area?(null===(w=this.props.storedBmpForm)||void 0===w||null===(A=w.calculated_watershed_area)||void 0===A?void 0:A.toFixed(2))+" acres":""})),d().createElement(E.Col,{sm:2},d().createElement(E.Button,{className:"pull-right",bsStyle:"info",style:{opacity:"0.7"},onClick:function(){var e,t,r;return fe.drawBmpStep1((null===(e=fe.props)||void 0===e||null===(t=e.projectData)||void 0===t?void 0:t.code)+"_bmp_watershed",null===(r=fe.props.storedBmpForm)||void 0===r?void 0:r.watershed_fid)}},"Edit"))):d().createElement(d().Fragment,null,d().createElement(E.Col,{sm:5},d().createElement(E.Button,{disabled:!(null!==(C=this.props.storedBmpForm)&&void 0!==C&&C.group_profile_id&&this.props.storedBmpForm.bmpName),bsStyle:null!==(O=this.props.storedBmpForm)&&void 0!==O&&O.group_profile_id&&this.props.storedBmpForm.bmpName?"success":"default",style:{opacity:"0.7"},onClick:function(){var e,t;return fe.drawBmpStep1((null===(e=fe.props)||void 0===e||null===(t=e.projectData)||void 0===t?void 0:t.code)+"_bmp_watershed")},bsSize:"small"},"Draw watershed")))))),d().createElement(E.Col,{sm:6,style:{padding:"10px"}},d().createElement(E.Table,{bordered:!0,condensed:!0,hover:!0,className:"text-right"},d().createElement("thead",null,d().createElement("tr",null,d().createElement("th",null,"Results"),d().createElement("th",null),d().createElement("th",null))),d().createElement("tbody",null,d().createElement("tr",null,d().createElement("td",null,"Previous nitrogen load: "),d().createElement("td",null,null===(M=this.props.storedBmpForm)||void 0===M||null===(I=M.previous_n_load)||void 0===I?void 0:I.toFixed(0)),d().createElement("td",{className:"text-left"},"lbs/year")),d().createElement("tr",null,d().createElement("td",null,"Nitrogen load reduction: "),d().createElement("td",null,null===(P=this.props.storedBmpForm)||void 0===P||null===(D=P.n_load_reduction)||void 0===D?void 0:D.toFixed(0)),d().createElement("td",{className:"text-left"},"lbs/year")),d().createElement("tr",null,d().createElement("td",null,"New nitrogen load: "),d().createElement("td",null,null===(N=this.props.storedBmpForm)||void 0===N||null===(L=N.new_n_load)||void 0===L?void 0:L.toFixed(0)),d().createElement("td",{className:"text-left"},"lbs/year")),d().createElement("tr",null,d().createElement("td",null,"Previous phosphorus load: "),d().createElement("td",null,null===(G=this.props.storedBmpForm)||void 0===G||null===(x=G.previous_p_load)||void 0===x?void 0:x.toFixed(0)),d().createElement("td",{className:"text-left"},"lbs/year")),d().createElement("tr",null,d().createElement("td",null,"Phosphorus load reduction: "),d().createElement("td",null,null===(U=this.props.storedBmpForm)||void 0===U||null===(k=U.p_load_reduction)||void 0===k?void 0:k.toFixed(0)),d().createElement("td",{className:"text-left"},"lbs/year")),d().createElement("tr",null,d().createElement("td",null,"New phosphorus load: "),d().createElement("td",null,null===(H=this.props.storedBmpForm)||void 0===H||null===(j=H.new_p_load)||void 0===j?void 0:j.toFixed(0)),d().createElement("td",{className:"text-left"},"lbs/year")),d().createElement("tr",null,d().createElement("td",null,"Previous sediment load: "),d().createElement("td",null,null===(W=this.props.storedBmpForm)||void 0===W||null===(Y=W.previous_s_load)||void 0===Y?void 0:Y.toFixed(0)),d().createElement("td",{className:"text-left"},"tons/year")),d().createElement("tr",null,d().createElement("td",null,"Sediment load reduction: "),d().createElement("td",null,null===(z=this.props.storedBmpForm)||void 0===z||null===(V=z.s_load_reduction)||void 0===V?void 0:V.toFixed(0)),d().createElement("td",{className:"text-left"},"tons/year")),d().createElement("tr",null,d().createElement("td",null,"New sediment load: "),d().createElement("td",null,null===(q=this.props.storedBmpForm)||void 0===q||null===(Q=q.new_s_load)||void 0===Q?void 0:Q.toFixed(0)),d().createElement("td",{className:"text-left"},"tons/year")),d().createElement("tr",null,d().createElement("td",null,"Calculated total cost: "),null!==(K=this.props.storedBmpForm)&&void 0!==K&&K.calculated_total_cost?d().createElement("td",null,"$",Number(null===(Z=this.props.storedBmpForm)||void 0===Z||null===($=Z.calculated_total_cost)||void 0===$?void 0:$.toFixed(0)).toLocaleString()):d().createElement("td",null),d().createElement("td",null)),d().createElement("tr",null,d().createElement("td",null,"Nitrogen reduction cost: "),null!==(X=this.props.storedBmpForm)&&void 0!==X&&X.cost_per_lbs_n_reduced?d().createElement("td",null,Number(null===(J=this.props.storedBmpForm)||void 0===J||null===(ee=J.cost_per_lbs_n_reduced)||void 0===ee?void 0:ee.toFixed(0)).toLocaleString()):d().createElement("td",null),d().createElement("td",{className:"text-left"},"$/lb/year")),d().createElement("tr",null,d().createElement("td",null,"Phosphorus reduction cost: "),null!==(te=this.props.storedBmpForm)&&void 0!==te&&te.cost_per_lbs_p_reduced?d().createElement("td",null,Number(null===(re=this.props.storedBmpForm)||void 0===re||null===(ne=re.cost_per_lbs_p_reduced)||void 0===ne?void 0:ne.toFixed(0)).toLocaleString()):d().createElement("td",null),d().createElement("td",{className:"text-left"},"$/lb/year")),d().createElement("tr",null,d().createElement("td",null,"Sediment reduction cost: "),null!==(oe=this.props.storedBmpForm)&&void 0!==oe&&oe.cost_per_ton_s_reduced?d().createElement("td",null,Number(null===(ae=this.props.storedBmpForm)||void 0===ae||null===(le=ae.cost_per_ton_s_reduced)||void 0===le?void 0:le.toFixed(0)).toLocaleString()):d().createElement("td",null),d().createElement("td",{className:"text-left"},"$/ton/year")))),d().createElement(E.FormGroup,{controlId:"notes",bsSize:"small"},d().createElement(E.Col,{componentClass:E.ControlLabel,sm:3},"Notes"),d().createElement(E.Col,{sm:8},d().createElement(E.FormControl,{inline:"true",type:"textarea",componentClass:"textarea",name:"notes",value:null===(ie=this.props.storedBmpForm)||void 0===ie?void 0:ie.notes,onChange:this.handleChange}),d().createElement(E.FormControl.Feedback,null))),null!==(ue=this.props.storedBmpForm)&&void 0!==ue&&ue.created_by?d().createElement("p",null,"Created by: ",null===(se=this.props.storedBmpForm)||void 0===se?void 0:se.created_by," on ",new Date(null===(pe=this.props.storedBmpForm)||void 0===pe?void 0:pe.created_at).toLocaleString()):null,null!==(ce=this.props.storedBmpForm)&&void 0!==ce&&ce.updated_by?d().createElement("p",null,"Updated by: ",null===(me=this.props.storedBmpForm)||void 0===me?void 0:me.updated_by," on ",new Date(null===(de=this.props.storedBmpForm)||void 0===de?void 0:de.updated_at).toLocaleString()):null)),d().createElement(E.Modal.Footer,null,d().createElement(E.Button,{bsStyle:"danger",bsSize:"small",style:{opacity:"0.7",position:"absolute",bottom:"20px",right:"320px",minWidth:"80px"},onClick:function(){var e;window.confirm("This action can not be undone. Are you sure?")&&fe.props.deleteBmp(fe.props.mapId,null===(e=fe.props.storedBmpForm)||void 0===e?void 0:e.id)}},"Delete"),d().createElement(E.Button,{bsStyle:"danger",bsSize:"small",style:{opacity:"0.7",position:"absolute",bottom:"20px",right:"220px",minWidth:"80px"},onClick:function(){return fe.props.clearBmpForm()}},"Close"),d().createElement(E.Button,{bsStyle:"info",bsSize:"small",style:{opacity:"0.7",position:"absolute",bottom:"20px",right:"120px",minWidth:"80px"},onClick:function(){return fe.props.hideBmpForm()}},"View Map"),d().createElement(E.Button,{bsStyle:"success",bsSize:"small",style:{opacity:"0.7",position:"absolute",bottom:"20px",right:"20px",minWidth:"80px"},onClick:function(){fe.props.submitBmpForm(fe.props.storedBmpForm,fe.props.mapId)}},"Update"))))}},{key:"validateRatio",value:function(e){var t=this.props.storedBmpForm[e];return t<1&&t>0?"success":1===t?"warning":t>1||t<0?"error":null}},{key:"validateCost",value:function(e){var t=this.props.storedBmpForm[e];return t>=0?"success":t<0?"error":null}},{key:"validateFid",value:function(e){var t,r,n=this.props.storedBmpForm[e];return n>=0&&(t=n,!isNaN(t)&&(0|(r=parseFloat(t)))===r)?"success":n<0?"error":null}},{key:"handleChange",value:function(e){var t=e.target.name,r=e.target.value,n=w({},t,r);"number"===e.target.type&&(n=w({},t,parseFloat(r))),this.props.updateBmpForm(n)}},{key:"handlegroupProfileChange",value:function(e){var t=e.target.name,r=e.target.value,n=w({},t,JSON.parse(r));this.props.updateBmpForm(n)}},{key:"handleBmpChange",value:function(e){var t=e.target.value,r=this.props.bmpTypes.filter((function(e){return e.name===t}))[0];this.props.makeDefaultsBmpForm(r)}},{key:"drawBmpStep1",value:function(e,t){console.log("drawBmpStep1 layerName",e),console.log("drawBmpStep1 featureId",t),this.props.setDrawingBmpLayerName(e),t?this.props.setEditingBmpFeatureId(t):this.props.clearEditingBmpFeatureId();var r=this.props.layers.flat.filter((function(t){return null==t?void 0:t.name.includes(e)}))[0];console.log("drawBmpStep1 targetLayer",r),this.props.setLayer(null==r?void 0:r.id),this.props.featureTypeSelected("http://localhost:8080/geoserver/wfs",null==r?void 0:r.name)}}])&&T(t.prototype,r),l}(d().Component);w(C,"propTypes",{bmpTypeId:A.number,bmpTypes:A.array,statuses:A.array,setMenuGroup:A.func,creatingNewBmp:A.bool,updatingBmp:A.object,hideBmpForm:A.func,showBmpForm:A.func,submitBmpForm:A.func,showSubmitBmpFormSuccess:A.bool,showSubmitBmpFormError:A.bool,storeBmpForm:A.func,thisBmpType:A.object,newBmpForm:A.object,storedBmpForm:A.object,clearBmpForm:A.func,groupProfiles:A.array,makeDefaultsBmpForm:A.func,makeExistingBmpForm:A.func,updateBmpForm:A.func,setLayer:A.func,featureTypeSelected:A.func,toggleEditMode:A.func,createNewFeatures:A.func,createQuery:A.func,startDrawingFeature:A.func,saveChanges:A.func,setDrawingBmpLayerName:A.func,setEditingBmpFeatureId:A.func,clearEditingBmpFeatureId:A.func,layers:A.object,query:A.func,mapId:A.number,purgeMapInfoResults:A.func,bmpUniqueNames:A.array,setBmpTypesVisibility:A.func,setHighlightFeaturesPath:A.func,projectData:A.object,toggleLayer:A.func,bmpOutletLayer:A.object,bmpFootprintLayer:A.object,bmpWatershedLayer:A.object,deleteBmp:A.func}),w(C,"defaultProps",{});var O=(0,f.connect)((function(e){var t,r,n,o,a,l,i,u,s,p,c,m,d,f,E,_;return{mapId:null==e||null===(t=e.swamm)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.base_map,projectData:null==e||null===(n=e.swamm)||void 0===n?void 0:n.data,bmpUniqueNames:v(e).map((function(e){return e.name})),bmpTypes:null==e||null===(o=e.swamm)||void 0===o?void 0:o.bmpTypes,statuses:null==e||null===(a=e.swamm)||void 0===a?void 0:a.statuses,thisBmpType:null==e||null===(l=e.swamm)||void 0===l?void 0:l.bmpTypes.filter((function(t){var r;return t.id===(null==e||null===(r=e.swamm)||void 0===r?void 0:r.BmpFormBmpTypeId)}))[0],storedBmpForm:(null==e||null===(i=e.swamm)||void 0===i?void 0:i.storedBmpForm)||{},bmpOutletLayer:null==e||null===(u=e.layers)||void 0===u||null===(s=u.flat)||void 0===s?void 0:s.filter((function(t){var r,n;return t.name===(null==e||null===(r=e.swamm)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.code)+"_bmp_outlet"}))[0],bmpFootprintLayer:null==e||null===(p=e.layers)||void 0===p||null===(c=p.flat)||void 0===c?void 0:c.filter((function(t){var r,n;return t.name===(null==e||null===(r=e.swamm)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.code)+"_bmp_footprint"}))[0],bmpWatershedLayer:null==e||null===(m=e.layers)||void 0===m||null===(d=m.flat)||void 0===d?void 0:d.filter((function(t){var r,n;return t.name===(null==e||null===(r=e.swamm)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.code)+"_bmp_watershed"}))[0],creatingNewBmp:null==e||null===(f=e.swamm)||void 0===f?void 0:f.creatingNewBmp,updatingBmp:null==e||null===(E=e.swamm)||void 0===E?void 0:E.updatingBmp,groupProfiles:null==e||null===(_=e.swamm)||void 0===_?void 0:_.groupProfiles,layers:null==e?void 0:e.layers,query:null==e?void 0:e.query}}),(function(e){return{setMenuGroup:function(t){return e((0,o.setMenuGroup)(t))},hideBmpForm:function(){return e((0,o.hideBmpForm)())},showBmpForm:function(){return e((0,o.showBmpForm)())},submitBmpForm:function(t,r){return e((0,o.submitBmpForm)(t,r))},updateBmpForm:function(t){return e((0,o.updateBmpForm)(t))},clearBmpForm:function(){return e((0,o.clearBmpForm)())},deleteBmp:function(t,r){return e((0,o.deleteBmp)(t,r))},makeDefaultsBmpForm:function(t){return e((0,o.makeDefaultsBmpForm)(t))},setLayer:function(t){return e((0,_.uF)(t))},setDrawingBmpLayerName:function(t){return e((0,o.setDrawingBmpLayerName)(t))},setEditingBmpFeatureId:function(t){return e((0,o.setEditingBmpFeatureId)(t))},clearEditingBmpFeatureId:function(){return e((0,o.clearEditingBmpFeatureId)())},featureTypeSelected:function(t,r){return e((0,y.gT)(t,r))},toggleEditMode:function(){return e((0,_.lg)())},toggleLayer:function(t,r){return e((0,h.He)(t,{visibility:r}))},createNewFeatures:function(t){return e((0,_.lx)(t))},createQuery:function(t,r){return e((0,y.rP)(t,r))},query:function(t,r,n,o){return e((0,y.IO)(t,r,n,o))},startDrawingFeature:function(){return e((0,_.kA)())},saveChanges:function(){return e((0,_.$S)())},purgeMapInfoResults:function(){return e((0,a.g)())},makeExistingBmpForm:function(t){return e((0,o.makeExistingBmpForm)(t))}}}))(C),M=r(53370),I=r.n(M),P=r(45453);function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function G(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?k(e):t}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var W=r(45697),Y=P.Filters.NumericFilter,z=(P.Filters.AutoCompleteFilter,P.Filters.MultiSelectFilter,P.Filters.SingleSelectFilter,function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(l,e);var t,r,n,o,a=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=H(n);if(o){var r=H(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return U(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),j(k(t=a.call(this,e)),"columnDefaults",{resizable:!0,dragable:!0,width:150,sortable:!1}),j(k(t),"columnHeaders",[{key:"id",name:"ID",filterable:!0,filterRenderer:Y},{key:"typeName",name:"Type"},{key:"organisationName",name:"Organization"},{key:"n_redratio",name:"N Reduction Ratio"},{key:"p_redratio",name:"P Reduction Ratio"},{key:"s_redratio",name:"S Reduction Ratio"},{key:"cost_base",name:"Cost Base"},{key:"cost_rate_per_footprint_area",name:"Cost per Footprint Acre"},{key:"cost_rate_per_watershed_area",name:"Cost per Watershed Acre"},{key:"calculated_footprint_area",name:"Footprint Area (Acres)"},{key:"calculated_watershed_area",name:"Watershed Area (Acres)"},{key:"calculated_total_cost",name:"Total Cost"},{key:"previous_n_load",name:"Previous N Load (lbs/year)"},{key:"n_load_reduction",name:"N Load Reduction (lbs/year)"},{key:"new_n_load",name:"New N Load (lbs/year)"},{key:"previous_p_load",name:"Previous P Load (lbs/year)"},{key:"p_load_reduction",name:"P Load Reduction (lbs/year)"},{key:"new_p_load",name:"New P Load (lbs/year)"},{key:"previous_s_load",name:"Previous S Load (lbs/year)"},{key:"s_load_reduction",name:"S Load Reduction (lbs/year)"},{key:"new_s_load",name:"New S Load (lbs/year)"},{key:"cost_per_lbs_n_reduced",name:"$ per pound N Reduction"},{key:"cost_per_lbs_p_reduced",name:"$ per pound P Reduction"},{key:"cost_per_ton_s_reduced",name:"$ per pound S Reduction"}]),j(k(t),"columns",t.columnHeaders.map((function(e){return L(L({},t.columnDefaults),e)}))),j(k(t),"rows",t.props.allBmps.map((function(e){var t,r,n,o,a,l,i,u,s,p,c,m;return L(L({},e),{},{typeName:e.type_data.name,organisationName:e.type_data.organisation.name,n_redratio:null===(t=e.override_n_redratio)||void 0===t?void 0:t.toPrecision(2),p_redratio:null===(r=e.override_p_redratio)||void 0===r?void 0:r.toPrecision(2),s_redratio:null===(n=e.override_s_redratio)||void 0===n?void 0:n.toPrecision(2),cost_base:g(e.override_cost_base,0),cost_rate_per_footprint_area:g(e.override_cost_rate_per_footprint_area,0),cost_rate_per_watershed_area:g(e.override_cost_rate_per_watershed_area,0),calculated_footprint_area:g(e.calculated_footprint_area,0),calculated_watershed_area:g(e.calculated_watershed_area,0),calculated_total_cost:g(e.calculated_total_cost,0),previous_n_load:null===(o=e.previous_n_load)||void 0===o?void 0:o.toFixed(0),n_load_reduction:null===(a=e.n_load_reduction)||void 0===a?void 0:a.toFixed(0),new_n_load:null===(l=e.new_n_load)||void 0===l?void 0:l.toFixed(0),previous_p_load:null===(i=e.previous_p_load)||void 0===i?void 0:i.toFixed(0),p_load_reduction:null===(u=e.p_load_reduction)||void 0===u?void 0:u.toFixed(0),new_p_load:null===(s=e.new_p_load)||void 0===s?void 0:s.toFixed(0),previous_s_load:null===(p=e.previous_s_load)||void 0===p?void 0:p.toFixed(0),s_load_reduction:null===(c=e.s_load_reduction)||void 0===c?void 0:c.toFixed(0),new_s_load:null===(m=e.new_s_load)||void 0===m?void 0:m.toFixed(0),cost_per_lbs_n_reduced:g(e.cost_per_lbs_n_reduced,0),cost_per_lbs_p_reduced:g(e.cost_per_lbs_p_reduced,0),cost_per_ton_s_reduced:g(e.cost_per_ton_s_reduced,0)})}))),t.handleChange=t.handleChange.bind(k(t)),t.state={},t}return t=l,(r=[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this;return d().createElement(E.Modal,{show:!0,onHide:function(){return console.log("onHide")},style:{marginTop:"50px",width:"100%"},dialogClassName:"swamm-big-modal"},d().createElement(E.Modal.Header,null,d().createElement(E.Modal.Title,null,"BMP Summary")),d().createElement(E.Modal.Body,null,d().createElement("div",null,d().createElement(I(),{columns:this.columns,rowGetter:function(t){return e.rows[t]},rowsCount:this.rows.length,minHeight:"75vh",height:"75vh",style:{margin:"10px"}}))),d().createElement(E.Modal.Footer,null,d().createElement(E.Button,{bsStyle:"danger",bsSize:"small",style:{opacity:"0.7"},onClick:function(){return e.props.hideSwammDataGrid()}},"Close")))}},{key:"handleChange",value:function(e){console.log("handleChange",e)}}])&&G(t.prototype,r),l}(d().Component));j(z,"propTypes",{hideSwammDataGrid:W.func,allBmps:W.array}),j(z,"defaultProps",{});var V=(0,f.connect)((function(e){var t,r,n;return{mapId:null==e||null===(t=e.projectManager)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.base_map,allBmps:null==e||null===(n=e.swamm)||void 0===n?void 0:n.allBmps}}),(function(e){return{hideSwammDataGrid:function(){return e((0,o.hideSwammDataGrid)())}}}))(z);function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e,t){return!t||"object"!==q(t)&&"function"!=typeof t?$(e):t}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(19970);var ee=r(45697),te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(l,e);var t,r,n,o,a=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=X(n);if(o){var r=X(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Z(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,e)).handleChange=t.handleChange.bind($(t)),t.handleMultiSelection=t.handleMultiSelection.bind($(t)),t.state={},t}return t=l,(r=[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e,t,r,n,o,a,l,i,u,s,p,c,m,f=this;return d().createElement(d().Fragment,null,d().createElement(E.Modal,{show:!0,onHide:function(){return f.props.hideTargetForm()},style:{marginTop:"50px",fontSize:"small"},dialogClassName:"swamm-big-modal",backdrop:!1,enforceFocus:!1,scrollable:"true"},d().createElement(E.Modal.Header,null,d().createElement(E.Modal.Title,null,this.props.targetForm.id?"Edit Target: "+(null===(e=this.props.targetForm)||void 0===e?void 0:e.name):"Create a new Target")),d().createElement(E.Modal.Body,{style:{padding:"20px"}},d().createElement(E.Grid,null,d().createElement(E.Col,{sm:6},d().createElement(E.Row,{className:"well",style:{paddingTop:"10px",margin:"5px"}},d().createElement("h4",{style:{paddingTop:"5px",paddingBottom:"20px",margin:"0",textAlign:"center",fontSize:"14px"}},"Target Details:"),d().createElement(E.FormGroup,{controlId:"target_name",bsSize:"small"},d().createElement(E.Row,null,d().createElement(E.Col,{componentClass:E.ControlLabel,sm:3,style:{marginTop:"3px"}},"Name:"),d().createElement(E.Col,{sm:9},d().createElement(E.FormControl,{inline:"true",type:"text",name:"name",value:null===(t=this.props.targetForm)||void 0===t?void 0:t.name,onChange:this.handleChange}),d().createElement(E.FormControl.Feedback,null)))),d().createElement(E.FormGroup,{controlId:"target_description",bsSize:"small"},d().createElement(E.Row,null,d().createElement(E.Col,{componentClass:E.ControlLabel,sm:3,style:{marginTop:"3px"}},"Description:"),d().createElement(E.Col,{sm:9},d().createElement(E.FormControl,{componentClass:"textarea",inline:"true",type:"textarea",name:"description",value:null===(r=this.props.targetForm)||void 0===r?void 0:r.description,onChange:this.handleChange}),d().createElement(E.FormControl.Feedback,null))))),d().createElement(E.Row,{className:"well",style:{paddingTop:"10px",margin:"5px"}},d().createElement("h4",{style:{paddingTop:"5px",paddingBottom:"20px",margin:"0",textAlign:"center",fontSize:"14px"}},"Establish Targets:"),d().createElement(E.FormGroup,{controlId:"target_percent_n_reduction",validationState:this.validatePercentage("target_percent_n_reduction"),bsSize:"small"},d().createElement(E.Row,null,d().createElement(E.Col,{componentClass:E.ControlLabel,sm:3,style:{marginTop:"3px"}},"Nitrogen:"),d().createElement(E.Col,{sm:5},d().createElement(E.FormControl,{inline:"true",type:"number",step:1,precision:0,name:"target_percent_n_reduction",value:100*(null===(n=this.props.targetForm)||void 0===n?void 0:n.target_percent_n_reduction),onChange:this.handleChange}),d().createElement(E.FormControl.Feedback,null)),d().createElement(E.Col,{sm:3,style:{marginTop:"3px"}},"% reduction"))),d().createElement(E.FormGroup,{controlId:"target_percent_p_reduction",validationState:this.validatePercentage("target_percent_p_reduction"),bsSize:"small"},d().createElement(E.Row,null,d().createElement(E.Col,{componentClass:E.ControlLabel,sm:3,style:{marginTop:"3px"}},"Phosphorus:"),d().createElement(E.Col,{sm:5},d().createElement(E.FormControl,{inline:"true",type:"number",step:1,precision:0,name:"target_percent_p_reduction",value:100*(null===(o=this.props.targetForm)||void 0===o?void 0:o.target_percent_p_reduction),onChange:this.handleChange}),d().createElement(E.FormControl.Feedback,null)),d().createElement(E.Col,{sm:3,style:{marginTop:"3px"}},"% reduction"))),d().createElement(E.FormGroup,{controlId:"target_percent_s_reduction",validationState:this.validatePercentage("target_percent_s_reduction"),bsSize:"small"},d().createElement(E.Row,null,d().createElement(E.Col,{componentClass:E.ControlLabel,sm:3,style:{marginTop:"3px"}},"Sediment:"),d().createElement(E.Col,{sm:5},d().createElement(E.FormControl,{inline:"true",type:"number",step:1,precision:0,name:"target_percent_s_reduction",value:100*(null===(a=this.props.targetForm)||void 0===a?void 0:a.target_percent_s_reduction),onChange:this.handleChange}),d().createElement(E.FormControl.Feedback,null)),d().createElement(E.Col,{sm:3,style:{marginTop:"3px"}},"% reduction"))))),d().createElement(E.Col,{sm:6},d().createElement(E.Row,{className:"well",style:{paddingTop:"10px",margin:"5px"}},d().createElement("h4",{style:{paddingTop:"5px",paddingBottom:"20px",margin:"0",textAlign:"center",fontSize:"14px"}},"Include BMPs from these organizations:"),d().createElement(E.FormGroup,{controlId:"target_groupProfiles",bsSize:"small"},d().createElement(E.Row,null,d().createElement(E.FormControl,{componentClass:"select",multiple:!0,inline:"true",name:"groupProfiles",value:null===(l=this.props.targetForm)||void 0===l?void 0:l.groupProfiles,onChange:this.handleMultiSelection},null===(i=this.props.groupProfiles)||void 0===i?void 0:i.map((function(e){return d().createElement("option",{value:e.id},e.name)}))),d().createElement(E.FormControl.Feedback,null)))),d().createElement(E.Row,{className:"well",style:{paddingTop:"10px",margin:"5px"}},d().createElement("h4",{style:{paddingTop:"5px",paddingBottom:"20px",margin:"0",textAlign:"center",fontSize:"14px"}},"Include these BMP types:"),d().createElement(E.FormGroup,{controlId:"target_bmp_types",bsSize:"small"},d().createElement(E.Row,null,d().createElement(E.FormControl,{componentClass:"select",multiple:!0,inline:"true",name:"bmp_types",value:null===(u=this.props.targetForm)||void 0===u?void 0:u.bmp_types,onChange:this.handleMultiSelection},null===(s=this.props.bmpTypes)||void 0===s?void 0:s.map((function(e){return d().createElement("option",{value:e.id},e.name)}))),d().createElement(E.FormControl.Feedback,null)))),d().createElement(E.Row,{className:"well",style:{paddingTop:"10px",margin:"5px"}},d().createElement("h4",{style:{paddingTop:"5px",paddingBottom:"20px",margin:"0",textAlign:"center",fontSize:"14px"}},"Include these BMP statuses:"),d().createElement(E.FormGroup,{controlId:"target_bmp_statuses",bsSize:"small"},d().createElement(E.Row,null,d().createElement(E.FormControl,{componentClass:"select",multiple:!0,inline:"true",name:"statuses",value:null===(p=this.props.targetForm)||void 0===p?void 0:p.statuses,onChange:this.handleMultiSelection},null===(c=this.props.statuses)||void 0===c?void 0:c.map((function(e){return d().createElement("option",{value:e},e)}))),d().createElement(E.FormControl.Feedback,null))))))),d().createElement(E.Modal.Footer,{style:{minHeight:"100px"}},null!==(m=this.props.targetForm)&&void 0!==m&&m.id?d().createElement(E.Button,{bsStyle:"danger",bsSize:"small",style:{opacity:"0.7",position:"absolute",bottom:"20px",right:"220px",minWidth:"80px"},onClick:function(){var e;window.confirm("This action can not be undone. Are you sure?")&&f.props.deleteTarget(f.props.mapId,null===(e=f.props.targetForm)||void 0===e?void 0:e.id)}},"Delete Target"):null,d().createElement(E.Button,{bsStyle:"danger",bsSize:"small",style:{opacity:"0.7",position:"absolute",bottom:"20px",right:"120px",minWidth:"80px"},onClick:function(){return f.props.hideTargetForm()}},"Close"),d().createElement(E.Button,{bsStyle:"success",bsSize:"small",style:{opacity:"0.7",position:"absolute",bottom:"20px",right:"20px",minWidth:"80px"},onClick:function(){f.props.submitTargetForm(f.props.targetForm,f.props.mapId)}},"Save Target"))))}},{key:"handleMultiSelection",value:function(e){var t=J({},e.target.name,Array.from(e.target.selectedOptions,(function(e){return e.value})));this.props.updateTargetForm(t)}},{key:"handleChange",value:function(e){var t=e.target.name,r=e.target.value,n=J({},t,r);"number"===e.target.type&&e.target.name.includes("target_percent_")&&(n=J({},t,parseFloat(r)/100)),this.props.updateTargetForm(n)}},{key:"validatePercentage",value:function(e){var t=this.props.targetForm[e];return t<1&&t>0?"success":1===t?"warning":t>1||t<0?"error":null}}])&&Q(t.prototype,r),l}(d().Component);J(te,"propTypes",{mapId:ee.number,targetForm:ee.object,hideTargetForm:ee.func,deleteTarget:ee.func,clearTargetForm:ee.func,submitTargetForm:ee.func,updateTargetForm:ee.func,groupProfiles:ee.array,bmpTypes:ee.array,statuses:ee.array}),J(te,"defaultProps",{});var re=(0,f.connect)((function(e){var t,r,n,o,a,l;return{mapId:null==e||null===(t=e.swamm)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.base_map,bmpTypes:null==e||null===(n=e.swamm)||void 0===n?void 0:n.bmpTypes,statuses:null==e||null===(o=e.swamm)||void 0===o?void 0:o.statuses,targetForm:(null==e||null===(a=e.swamm)||void 0===a?void 0:a.targetForm)||{},groupProfiles:null==e||null===(l=e.swamm)||void 0===l?void 0:l.groupProfiles}}),(function(e){return{hideTargetForm:function(){return e((0,o.hideTargetForm)())},deleteTarget:function(t,r){return e((0,o.deleteTarget)(t,r))},clearTargetForm:function(){return e((0,o.clearTargetForm)())},submitTargetForm:function(t,r){return e((0,o.submitTargetForm)(t,r))},updateTargetForm:function(t){return e((0,o.updateTargetForm)(t))}}}))(te);function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function le(e,t,r){return t&&ae(e.prototype,t),r&&ae(e,r),e}function ie(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=me(e);if(t){var o=me(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return pe(this,r)}}function pe(e,t){return!t||"object"!==ne(t)&&"function"!=typeof t?ce(e):t}function ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function de(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var fe=r(45697),Ee=r(48465),_e=Ee.Cell,ye=Ee.BarChart,ge=Ee.Bar,ve=Ee.PieChart,he=Ee.Pie,be=Ee.ResponsiveContainer,Te=Ee.XAxis,Fe=Ee.YAxis,Se=Ee.Legend,Re=(Ee.Tooltip,100),Be=function(e){ie(r,e);var t=se(r);function r(e){var n;return oe(this,r),de(ce(n=t.call(this,e)),"pollutants",[{name:"Phosphorus",load_red_total_key:"p_load_reduction",units:"lbs/year",initial:"p"},{name:"Nitrogen",load_red_total_key:"n_load_reduction",units:"lbs/year",initial:"n"},{name:"Sediment",load_red_total_key:"s_load_reduction",units:"tons/year",initial:"s"}]),de(ce(n),"colours",["#0088FE","#00C49F","#FFBB28","#FF8042","#39CCCC","#7FDBFF","#0074D9","#001f3f","#FFDC00","#01FF70","#2ECC40","#3D9970","#DDDDDD","#AAAAAA","#B10DC9","#F012BE","#85144b","#FF4136","#FF851B","#FFFFFF"]),n.state={},n}return le(r,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e,t,r,n,o,a,l,i,u,s,p,c,m,f,_,y,v,h,b,T,F,S,R,B,w,A,C,O,M,I,P,D,N,L,G,x,U,k,H,j,W=this;return d().createElement(E.Modal,{show:!0,onHide:function(){return console.log("onHide")},style:{marginTop:"50px",width:"100%"},dialogClassName:"swamm-big-modal"},d().createElement(E.Modal.Header,null,d().createElement(E.Modal.Title,{style:{textAlign:"center"}},d().createElement("h4",{style:{padding:"0",margin:"0"}},null===(e=this.props.selectedTarget)||void 0===e?void 0:e.name))),d().createElement(E.Modal.Body,null,d().createElement(E.Grid,null,d().createElement(E.Col,{sm:2},d().createElement(E.Row,{className:"well",style:{paddingTop:"0"}},d().createElement("h4",{style:{paddingTop:"5px",paddingBottom:"10px",margin:"0",textAlign:"center",fontSize:"14px"}},"Targets"),this.props.targets.map((function(e){return d().createElement("div",{className:"row-no-gutters"},d().createElement(E.Button,{bsStyle:"success",bsSize:"xsmall",block:!0,style:{backgroundColor:e.id===W.props.selectedTargetId?"rgba(39,202,59,1)":"rgba(39,202,59,0.6)",marginTop:"4px",fontSize:"x-small"},onClick:function(){return W.props.selectSwammTargetId(null==e?void 0:e.id)}},null==e?void 0:e.name))})),d().createElement("div",{className:"row-no-gutters"},d().createElement(E.Button,{bsStyle:"info",bsSize:"xsmall",block:!0,style:{marginTop:"4px",fontSize:"x-small"},onClick:function(){return W.props.showTargetForm()}},"New Target")),d().createElement("div",{className:"row-no-gutters"},d().createElement(E.Button,{bsStyle:"info",bsSize:"xsmall",block:!0,style:{marginTop:"4px",fontSize:"x-small"},onClick:function(){return W.props.showTargetForm(W.props.selectedTarget)}},"Edit Target"))),d().createElement(E.Row,{className:"well",style:{paddingTop:"20px"}},d().createElement("h4",{style:{paddingTop:"5px",paddingBottom:"10px",margin:"0",textAlign:"center",fontSize:"14px"}},"Sort Data By:"),d().createElement("div",{className:"row-no-gutters"},d().createElement(E.Button,{bsStyle:"success",bsSize:"xsmall",block:!0,style:{backgroundColor:"type"===this.props.bmpFilterMode?"rgba(39,202,59,1)":"rgba(39,202,59,0.6)",marginTop:"4px",fontSize:"x-small"},onClick:function(){return W.props.setBmpFilterMode("type")}},"BMP Type")),d().createElement("div",{className:"row-no-gutters"},d().createElement(E.Button,{bsStyle:"success",bsSize:"xsmall",block:!0,style:{backgroundColor:"status"===this.props.bmpFilterMode?"rgba(39,202,59,1)":"rgba(39,202,59,0.6)",marginTop:"4px",fontSize:"x-small"},onClick:function(){return W.props.setBmpFilterMode("status")}},"BMP Status")),d().createElement("div",{className:"row-no-gutters"},d().createElement(E.Button,{bsStyle:"success",bsSize:"xsmall",block:!0,style:{backgroundColor:"groupProfile"===this.props.bmpFilterMode?"rgba(39,202,59,1)":"rgba(39,202,59,0.6)",marginTop:"4px",fontSize:"x-small"},onClick:function(){return W.props.setBmpFilterMode("groupProfile")}},"Organization")))),this.props.selectedTargetId?d().createElement(E.Col,{sm:8,style:{marginLeft:20,marginRight:-20}},this.pollutants.map((function(e){var t,r,n,o,a,l,i,u,s,p;return d().createElement(E.Row,{className:"well"},d().createElement(E.Col,{sm:3,style:{padding:0}},d().createElement("h4",{style:{textAlign:"center",fontSize:"14px",paddingLeft:"5px",paddingTop:"5px",paddingBottom:"10px",margin:0}},e.name),d().createElement("div",{style:{width:150,height:Re/1.2}},d().createElement(be,null,d().createElement(ve,{width:150,height:150,style:{paddingTop:"10px"}},d().createElement(he,{data:null===(t=W.props.selectedTarget)||void 0===t||null===(r=t.speedDialData)||void 0===r?void 0:r["percent".concat(e.name,"Target")],dataKey:"value",cx:66.92307692307692,cy:50,innerRadius:Re/3,outerRadius:50,fill:"#82ca9d",startAngle:180,endAngle:0,isAnimationActive:!1},d().createElement(_e,{fill:"#27ca3b",cornerRadius:5}),d().createElement(_e,{fill:"#97b3c3",cornerRadius:1})),d().createElement("text",{x:66.92307692307692,y:45,textAnchor:"middle",fontSize:20,dominantBaseline:"middle",className:"progress-label"},null===(n=W.props.selectedTarget)||void 0===n||null===(o=n.speedDialData["percent".concat(e.name,"Target")])||void 0===o||null===(a=o[0])||void 0===a?void 0:a.value.toFixed(1),"%"))))),d().createElement(E.Col,{sm:8},d().createElement("h4",{style:{textAlign:"center",fontSize:"14px",paddingTop:"5px",paddingBottom:"10px",margin:0}},"Load reductions (",e.units,"):"),d().createElement("div",{style:{width:"100%",height:100}},d().createElement(be,null,d().createElement(ye,{width:600,height:80,data:[{barOne:null===(l=W.props.selectedTarget)||void 0===l||null===(i=l.barChartData)||void 0===i?void 0:i[W.props.bmpFilterMode]}],margin:{top:0,right:0,left:10,bottom:10},layout:"vertical",maxBarSize:100},null===(u=W.props.selectedTarget)||void 0===u||null===(s=u.barChartData)||void 0===s||null===(p=s[W.props.bmpFilterMode])||void 0===p?void 0:p.map((function(t,r){var n="barOne.".concat(r,".").concat(e.load_red_total_key);return d().createElement(ge,{key:"".concat(t[W.props.bmpFilterMode]," + ").concat(e.initial),stackId:"a",dataKey:n,fill:W.colours[r],name:null==t?void 0:t.label})})),d().createElement(Te,{type:"number"}),d().createElement(Fe,{type:"category",hide:!0}),"p"===e.initial?d().createElement(Se,{layout:"vertical",verticalAlign:"top",align:"right",wrapperStyle:{right:"-300px",top:"-40px"}}):null)))))})),d().createElement(E.Row,null,d().createElement(E.Table,{bordered:!0,condensed:!0,hover:!0,className:"text-right"},d().createElement("thead",null,d().createElement("tr",null,d().createElement("th",null,"Summary"),d().createElement("th",{style:{textAlign:"center"}},"Phosphorus"),d().createElement("th",{style:{textAlign:"center"}},"Nitrogen"),d().createElement("th",{style:{textAlign:"center"}},"Sediment"),d().createElement("th",null))),d().createElement("tbody",null,d().createElement("tr",null,d().createElement("td",null,"Current total untreated pollutant volume:"),d().createElement("td",null,g(null===(t=this.props.selectedTarget)||void 0===t||null===(r=t.speedDialData)||void 0===r?void 0:r.currentPhosphorusLoad,0)),d().createElement("td",null,g(null===(n=this.props.selectedTarget)||void 0===n||null===(o=n.speedDialData)||void 0===o?void 0:o.currentNitrogenLoad,0)),d().createElement("td",null,g(null===(a=this.props.selectedTarget)||void 0===a||null===(l=a.speedDialData)||void 0===l?void 0:l.currentSedimentLoad,0)),d().createElement("td",{className:"text-left"},"units/year")),d().createElement("tr",null,d().createElement("td",null,"Selected target reduction percentage:"),d().createElement("td",null,100*(null===(i=this.props.selectedTarget)||void 0===i||null===(u=i.speedDialData)||void 0===u?void 0:u.percentPhosphorusReductionTarget)),d().createElement("td",null,100*(null===(s=this.props.selectedTarget)||void 0===s||null===(p=s.speedDialData)||void 0===p?void 0:p.percentNitrogenReductionTarget)),d().createElement("td",null,100*(null===(c=this.props.selectedTarget)||void 0===c||null===(m=c.speedDialData)||void 0===m?void 0:m.percentSedimentReductionTarget)),d().createElement("td",{className:"text-left"},"% of total")),d().createElement("tr",null,d().createElement("td",null,"Selected target load reduction required:"),d().createElement("td",null,g(null===(f=this.props.selectedTarget)||void 0===f||null===(_=f.speedDialData)||void 0===_?void 0:_.targetPhosphorusLoadReductionRequired,0)),d().createElement("td",null,g(null===(y=this.props.selectedTarget)||void 0===y||null===(v=y.speedDialData)||void 0===v?void 0:v.targetNitrogenLoadReductionRequired,0)),d().createElement("td",null,g(null===(h=this.props.selectedTarget)||void 0===h||null===(b=h.speedDialData)||void 0===b?void 0:b.targetSedimentLoadReductionRequired,0)),d().createElement("td",{className:"text-left"},"units/year")),d().createElement("tr",null,d().createElement("td",null,"Actual pollutant reduction from BMPs:"),d().createElement("td",null,g(null===(T=this.props.selectedTarget)||void 0===T||null===(F=T.speedDialData)||void 0===F?void 0:F.totalBmpPhosphorusReduction,0)),d().createElement("td",null,g(null===(S=this.props.selectedTarget)||void 0===S||null===(R=S.speedDialData)||void 0===R?void 0:R.totalBmpNitrogenReduction,0)),d().createElement("td",null,g(null===(B=this.props.selectedTarget)||void 0===B||null===(w=B.speedDialData)||void 0===w?void 0:w.totalBmpSedimentReduction,0)),d().createElement("td",{className:"text-left"},"units/year")),d().createElement("tr",null,d().createElement("td",null,"Percentage of target achieved:"),d().createElement("td",null,null===(A=this.props.selectedTarget)||void 0===A||null===(C=A.speedDialData)||void 0===C||null===(O=C.percentPhosphorusTarget)||void 0===O||null===(M=O[0])||void 0===M||null===(I=M.value)||void 0===I?void 0:I.toFixed(1)),d().createElement("td",null,null===(P=this.props.selectedTarget)||void 0===P||null===(D=P.speedDialData)||void 0===D||null===(N=D.percentNitrogenTarget)||void 0===N||null===(L=N[0])||void 0===L||null===(G=L.value)||void 0===G?void 0:G.toFixed(1)),d().createElement("td",null,null===(x=this.props.selectedTarget)||void 0===x||null===(U=x.speedDialData)||void 0===U||null===(k=U.percentSedimentTarget)||void 0===k||null===(H=k[0])||void 0===H||null===(j=H.value)||void 0===j?void 0:j.toFixed(1)),d().createElement("td",{className:"text-left"},"%")))))):d().createElement(E.Col,{sm:8,style:{marginLeft:20,marginRight:-20,textAlign:"center"}},"Please select a target on the left"))),d().createElement(E.Modal.Footer,null,d().createElement(E.Button,{bsStyle:"danger",bsSize:"small",style:{opacity:"0.7"},onClick:function(){return W.props.hideSwammBmpChart()}},"Close")))}}]),r}(d().Component);de(Be,"propTypes",{hideSwammBmpChart:fe.func,allBmps:fe.array,data:fe.array,layerForLegend:fe.object,targets:fe.array,selectSwammTargetId:fe.func,showTargetForm:fe.func,selectedTargetId:fe.number,defaultTargetId:fe.number,selectedTarget:fe.object,bmpFilterMode:fe.string,setBmpFilterMode:fe.func}),de(Be,"defaultProps",{});var we=function(e){ie(r,e);var t=se(r);function r(){return oe(this,r),t.apply(this,arguments)}return le(r,[{key:"render",value:function(){return null}}]),r}(d().Component);de(we,"propTypes",{type:fe.string,payload:fe.array,active:fe.bool,tooltipBarId:fe.number,tooltipPollutantKey:fe.string,barChartData:fe.array,selectedTarget:fe.object});var Ae=function(e){var t,r,n,o,a,l,i,u,s,p,c,m,d,f,E=(null==e||null===(t=e.swamm)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.code)+"_bmp_footprint";return{mapId:null==e||null===(n=e.swamm)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.base_map,layerForLegend:null==e||null===(a=e.layers)||void 0===a||null===(l=a.flat)||void 0===l?void 0:l.filter((function(e){return e.name===E}))[0],allBmps:null==e||null===(i=e.swamm)||void 0===i?void 0:i.allBmps,statuses:(null==e||null===(u=e.swamm)||void 0===u?void 0:u.statuses)||[],targets:(null==e||null===(s=e.swamm)||void 0===s?void 0:s.targets)||[],selectedTargetId:null==e||null===(p=e.swamm)||void 0===p?void 0:p.selectedTargetId,selectedTarget:null==e||null===(c=e.swamm)||void 0===c||null===(m=c.targets)||void 0===m||null===(d=m.filter((function(t){var r;return t.id===(null==e||null===(r=e.swamm)||void 0===r?void 0:r.selectedTargetId)})))||void 0===d?void 0:d[0],bmpFilterMode:(null==e||null===(f=e.swamm)||void 0===f?void 0:f.bmpFilterMode)||"type",visibleTargetForm:null==e?void 0:e.swamm.visibleTargetForm}},Ce=function(e){return{hideSwammBmpChart:function(){return e((0,o.hideSwammBmpChart)())},selectSwammTargetId:function(t){return e((0,o.selectSwammTargetId)(t))},setBmpFilterMode:function(t){return e((0,o.setBmpFilterMode)(t))},showTargetForm:function(t){return e((0,o.showTargetForm)(t))}}},Oe=(0,f.connect)(Ae,Ce)(Be),Me=((0,f.connect)(Ae,Ce)(we),r(68699)),Ie=r(4206);function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function De(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ne(e,t){return(Ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Le(e,t){return!t||"object"!==Pe(t)&&"function"!=typeof t?Ge(e):t}function Ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xe(e){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(29944);var ke=r(45697),He=r(72986),je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ne(e,t)}(l,e);var t,r,n,o,a=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=xe(n);if(o){var r=xe(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Le(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),Ue(Ge(t=a.call(this,e)),"setBmpTypesVisibility",(function(e,t){})),t}return t=l,(r=[{key:"componentDidUpdate",value:function(){var e,t,r,n;this.props.mapId||this.fetching||(this.fetching=!1),!this.props.mapId||this.props.hasPmData||this.fetching||(this.props.fetchProjectManagerConfig(this.props.mapId),this.fetching=!0),this.props.mapId&&this.props.hasPmData&&(this.fetching=!1),this.props.mapId||this.fetchingBmpTypes||(this.fetchingBmpTypes=!1),this.props.mapId&&0===(null===(e=this.props.bmpTypes)||void 0===e?void 0:e.length)&&!this.fetchingBmpTypes&&(this.fetchingBmpTypes=!0,this.props.fetchSwammBmpTypes(this.props.mapId)),this.props.mapId&&(null===(t=this.props.bmpTypes)||void 0===t?void 0:t.length)>0&&(this.fetchingBmpTypes=!1),this.props.mapId||this.fetchingGroupProfiles||(this.fetchingGroupProfiles=!1),this.props.mapId&&0===(null===(r=this.props.groupProfiles)||void 0===r?void 0:r.length)&&!this.fetchingGroupProfiles&&(this.fetchingGroupProfiles=!0,this.props.fetchGroupProfiles()),this.props.mapId&&(null===(n=this.props.groupProfiles)||void 0===n?void 0:n.length)>0&&(this.fetchingGroupProfiles=!1),this.props.mapId||this.fetchingBmps||(this.fetchingBmps=!1),this.props.mapId&&0===this.props.allBmps.length&&!this.fetchingBmps&&(this.fetchingBmps=!0,this.props.fetchSwammAllBmps(this.props.mapId)),this.props.mapId&&this.props.allBmps.length>0&&(this.fetchingBmps=!1),this.props.mapId||this.fetchingStatuses||(this.fetchingStatuses=!1),this.props.mapId&&0===this.props.statuses.length&&!this.fetchingStatuses&&(this.fetchingStatuses=!0,this.props.fetchSwammBmpStatuses(this.props.mapId)),this.props.mapId&&this.props.statuses.length>0&&(this.fetchingStatuses=!1),this.props.mapId||this.fetchingTargets||(this.fetchingTargets=!1),this.props.mapId&&0===this.props.targets.length&&!this.fetchingTargets&&(this.fetchingTargets=!0,this.props.fetchSwammTargets(this.props.mapId)),this.props.mapId&&this.props.targets.length>0&&(this.fetchingTargets=!1)}},{key:"render",value:function(){var e,t,r=this;return d().createElement("div",{id:"swamm-container"},(null===(e=this.props.allBmps)||void 0===e?void 0:e.length)>=0?null:d().createElement("button",{className:"simple-view-menu-button bmp-loading-button"},d().createElement("div",{style:{marginBottom:"10px"}},"Loading BMP data..."),d().createElement("span",null,d().createElement(He,{color:"white",style:{display:"inline-block"},spinnerName:"circle",noFadeIn:!0}))),!this.props.storedBmpForm||this.props.visibleBmpForm||this.props.drawingBmpLayerName||this.props.editingBmpFeatureId?this.props.drawingBmpLayerName||this.props.editingBmpFeatureId?d().createElement(d().Fragment,null,d().createElement(E.Button,{bsStyle:"success",className:"simple-view-menu-button bmp-progress-button",onClick:function(){r.props.saveChanges(),r.props.showBmpForm()}},"Save Feature"),d().createElement(E.Button,{bsStyle:"danger",className:"simple-view-menu-button bmp-progress-button",style:{left:160},onClick:function(){r.props.showBmpForm(),r.props.setLayer(null),r.props.toggleViewMode(),r.props.drawStopped(),r.props.clearDrawingBmpLayerName(),r.props.clearEditingBmpFeatureId()}},"Cancel Feature"),d().createElement("button",{key:"swamm-bmp-creator-button",className:"simple-view-menu-button",style:{left:100*(this.props.numberOfMenus+1)+20},onClick:function(){r.props.saveChanges(),r.props.showBmpForm(),r.props.setMenuGroup(null)}},"Create BMPs")):this.props.visibleBmpForm?d().createElement("button",{className:"simple-view-menu-button",style:{left:100*(this.props.numberOfMenus+1)+20},disabled:!0},"Create BMPs"):d().createElement("button",{key:"swamm-bmp-creator-button",className:"simple-view-menu-button",style:{left:100*(this.props.numberOfMenus+1)+20},onClick:function(){r.props.makeBmpForm(),r.props.setMenuGroup(null)}},"Create BMPs"):d().createElement(d().Fragment,null,d().createElement(E.Button,{className:"simple-view-menu-button bmp-progress-button",style:{left:20},bsStyle:"success",onClick:function(){return r.props.showBmpForm()}},"BMP in progress"),d().createElement("button",{key:"swamm-bmp-creator-button",className:"simple-view-menu-button",style:{left:100*(this.props.numberOfMenus+1)+20},onClick:function(){r.props.showBmpForm(),r.props.setMenuGroup(null)}},"Create BMPs")),d().createElement("button",{key:"swamm-bmp-data-grid-button",className:"simple-view-menu-button",style:{left:100*(this.props.numberOfMenus+2)+20},onClick:function(){r.props.showSwammFeatureGrid(r.props.bmpOutletLayer),r.props.setMenuGroup(null)}},"Summary Table"),null!==(t=this.props.targets)&&void 0!==t&&t.length?d().createElement("button",{key:"swamm-bmp-chart-button",className:"simple-view-menu-button",style:{left:100*(this.props.numberOfMenus+3)+20},onClick:function(){r.props.showSwammBmpChart(),r.props.setMenuGroup(null)}},"Dashboard"):d().createElement("button",{key:"swamm-bmp-chart-button",className:"simple-view-menu-button disabled",style:{left:100*(this.props.numberOfMenus+3)+20}},d().createElement("span",null,d().createElement(He,{color:"white",style:{display:"inline-block"},spinnerName:"circle",noFadeIn:!0}))),this.props.visibleBmpManager?d().createElement("div",{className:"simple-view-panel",id:"swamm-bmp-manager"},d().createElement("table",{className:"table check1",style:{tableLayout:"fixed",marginBottom:"0"}},d().createElement("tbody",null,d().createElement("tr",{key:"r1"},d().createElement("td",{key:"d2"},d().createElement(Me.N,{layer:this.props.bmpDataLayer})))))):null,this.props.visibleTargetForm?d().createElement(re,null):null,this.props.visibleBmpForm?d().createElement(O,{setBmpTypesVisibility:this.setBmpTypesVisibility}):null,this.props.visibleSwammDataGrid?d().createElement("div",null,d().createElement(V,null),"SwammDataGrid"):null,this.props.visibleSwammBmpChart?d().createElement("div",null,d().createElement(Oe,null),"SwammBmpChart"):null)}}])&&De(t.prototype,r),l}(d().Component);Ue(je,"propTypes",{fetchSwammBmpTypes:ke.func,fetchSwammAllBmps:ke.func,fetchingBmps:ke.bool,fetchSwammBmpStatuses:ke.func,fetchSwammTargets:ke.func,fetchProjectManagerConfig:ke.func,fetchGroupProfiles:ke.func,fetchingGroupProfiles:ke.bool,fetchingTargets:ke.bool,statuses:ke.array,targets:ke.array,swammData:ke.array,mapId:ke.number,bmpUniqueNames:ke.array,bmpTypes:ke.array,groupProfiles:ke.array,allBmps:ke.array,showOutlets:ke.bool,showFootprints:ke.bool,showWatersheds:ke.bool,projectCode:ke.string,layers:ke.object,toggleLayer:ke.func,showBmpForm:ke.func,visibleBmpForm:ke.bool,makeBmpForm:ke.func,storedBmpForm:ke.object,showMenuGroup:ke.bool,setMenuGroup:ke.func,saveChanges:ke.func,clearDrawingBmpLayerName:ke.func,clearEditingBmpFeatureId:ke.func,drawingBmpLayerName:ke.string,setEditingBmpFeatureId:ke.func,editingBmpFeatureId:ke.string,query:ke.func,queryStore:ke.func,toggleBmpType:ke.func,setBmpType:ke.func,filters:ke.object,visibleBmpManager:ke.bool,visibleSwammDataGrid:ke.bool,showSwammFeatureGrid:ke.func,showSwammDataGrid:ke.func,visibleSwammBmpChart:ke.bool,visibleTargetForm:ke.bool,showSwammBmpChart:ke.func,clickBmpManager:ke.func,bmpByUniqueNameSelector:ke.func,setLayer:ke.func,toggleViewMode:ke.func,drawStopped:ke.func,bmpOutletLayer:ke.object,bmpFootrprintLayer:ke.object,bmpWatershedLayer:ke.object,numberOfMenus:ke.number,hasPmData:ke.object,bmpDataLayer:ke.object}),Ue(je,"defaultProps",{});const We=(0,f.connect)((function(e){var t,r,n,o,a,l,i,u,s,p,c,m,d,f,E,_,y,g,h,b,T,F,S,R,B,w,A,C;return{mapId:null==e||null===(t=e.map)||void 0===t||null===(r=t.present)||void 0===r||null===(n=r.info)||void 0===n?void 0:n.id,hasPmData:null==e||null===(o=e.swamm)||void 0===o?void 0:o.data,bmpUniqueNames:v(e),bmpTypes:null==e||null===(a=e.swamm)||void 0===a?void 0:a.bmpTypes,groupProfiles:null==e?void 0:e.swamm.groupProfiles,allBmps:null==e||null===(l=e.swamm)||void 0===l?void 0:l.allBmps,statuses:null==e||null===(i=e.swamm)||void 0===i?void 0:i.statuses,targets:null==e||null===(u=e.swamm)||void 0===u?void 0:u.targets,fetchingTargets:null==e||null===(s=e.swamm)||void 0===s?void 0:s.fetchingTargets,showOutlets:null==e||null===(p=e.swamm)||void 0===p?void 0:p.showOutlets,showFootprints:null==e||null===(c=e.swamm)||void 0===c?void 0:c.showFootprints,showWatersheds:null==e||null===(m=e.swamm)||void 0===m?void 0:m.showWatersheds,projectCode:null==e||null===(d=e.swamm)||void 0===d||null===(f=d.data)||void 0===f?void 0:f.code,layers:null==e?void 0:e.layers,bmpOutletLayer:null==e||null===(E=e.layers)||void 0===E||null===(_=E.flat)||void 0===_?void 0:_.filter((function(t){var r,n;return t.name===(null==e||null===(r=e.swamm)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.code)+"_bmp_outlet"}))[0],visibleBmpForm:null==e||null===(y=e.swamm)||void 0===y?void 0:y.visibleBmpForm,storedBmpForm:null==e||null===(g=e.swamm)||void 0===g?void 0:g.storedBmpForm,drawingBmpLayerName:null==e||null===(h=e.swamm)||void 0===h?void 0:h.drawingBmpLayerName,editingBmpFeatureId:null==e||null===(b=e.swamm)||void 0===b?void 0:b.editingBmpFeatureId,visibleBmpManager:null==e||null===(T=e.swamm)||void 0===T?void 0:T.visibleBmpManager,visibleSwammDataGrid:null==e||null===(F=e.swamm)||void 0===F?void 0:F.visibleSwammDataGrid,visibleSwammBmpChart:null==e||null===(S=e.swamm)||void 0===S?void 0:S.visibleSwammBmpChart,visibleTargetForm:null==e||null===(R=e.swamm)||void 0===R?void 0:R.visibleTargetForm,queryStore:null==e?void 0:e.query,numberOfMenus:null==e||null===(B=e.layers)||void 0===B?void 0:B.groups.length,filters:{showOutlets:null===(w=e.swamm)||void 0===w?void 0:w.showOutlets,showFootprints:null===(A=e.swamm)||void 0===A?void 0:A.showFootprints,showWatersheds:null===(C=e.swamm)||void 0===C?void 0:C.showWatersheds}}}),(function(e){return{fetchSwammBmpTypes:function(t){return e((0,o.fetchSwammBmpTypes)(t))},fetchProjectManagerConfig:(0,o.fetchProjectManagerConfig)(e),fetchGroupProfiles:function(){return e((0,o.fetchGroupProfiles)())},fetchSwammAllBmps:function(t){return e((0,o.fetchSwammAllBmps)(t))},fetchSwammBmpStatuses:function(t){return e((0,o.fetchSwammBmpStatuses)(t))},fetchSwammTargets:function(t){return e((0,o.fetchSwammTargets)(t))},toggleLayer:function(t,r){return e((0,h.He)(t,{visibility:r}))},showBmpForm:function(){return e((0,o.showBmpForm)())},setLayer:function(t){return e((0,_.uF)(t))},setEditingBmpFeatureId:function(t){return e((0,o.setEditingBmpFeatureId)(t))},showSwammDataGrid:function(){return e((0,o.showSwammDataGrid)())},showSwammFeatureGrid:function(t){return e((0,o.showSwammFeatureGrid)(t))},showSwammBmpChart:function(){return e((0,o.showSwammBmpChart)())},clickBmpManager:function(){e((0,o.toggleBmpManager)()),e((0,o.setMenuGroup)(null))},setMenuGroup:function(t){return e((0,o.setMenuGroup)(t))},makeBmpForm:function(t){return e((0,o.makeBmpForm)(t))},saveChanges:function(){return e((0,_.$S)())},clearDrawingBmpLayerName:function(){return e((0,o.clearDrawingBmpLayerName)())},clearEditingBmpFeatureId:function(){return e((0,o.clearEditingBmpFeatureId)())},query:function(t,r,n,o){return e((0,y.IO)(t,r,n,o))},toggleBmpType:function(t){return e((0,o.toggleBmpType)(t))},setBmpType:function(t,r){return e((0,o.setBmpType)(t,r))},toggleViewMode:function(){return e((0,_.nY)())},drawStopped:function(){return e((0,Ie.lo)())}}}))(je);var Ye=r(49977),ze=r.n(Ye),Ve=r(29386),qe=r(57546),Qe=r.n(qe),Ke=r(7878);function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const $e=(0,n.rx)("Swamm",{component:We,reducers:{swamm:function(){var e,t,r,n,i,u,p,m,d,f,E,_,y,g,v,h,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,T=arguments.length>1?arguments[1]:void 0;switch(T.type){case a.XL:var F,S=null==T||null===(e=T.data)||void 0===e||null===(t=e.features)||void 0===t?void 0:t.map((function(e){return/([a-zA-Z0-9]{3}_){2}outlet/.test(e.id)||/([a-zA-Z0-9]{3}_){2}footprint/.test(e.id)||/([a-zA-Z0-9]{3}_){2}watershed/.test(e.id)?e:null}));return S&&S[0]?(b.allBmps.filter((function(e){return e.watershed_fid===S[0].id}))[0]&&(F=b.allBmps.filter((function(e){return e.watershed_fid===S[0].id}))[0]),b.allBmps.filter((function(e){return e.footprint_fid===S[0].id}))[0]&&(F=b.allBmps.filter((function(e){return e.footprint_fid===S[0].id}))[0]),b.allBmps.filter((function(e){return e.outlet_fid===S[0].id}))[0]&&(F=b.allBmps.filter((function(e){return e.outlet_fid===S[0].id}))[0]),console.log("possibleBmpFeatures",S),F?s(s({},b),{},{visibleBmpForm:!0,updatingBmp:F}):(alert("error: Orphaned geometry ".concat(JSON.stringify(S[0]))),b)):b;case o.FETCH_GROUP_PROFILES:return s(s({},b),{},{fetchingGroupProfiles:T.groupProfiles});case o.FETCH_GROUP_PROFILES_SUCCESS:return s(s({},b),{},{fetchingGroupProfiles:!1,groupProfiles:T.groupProfiles});case o.FETCH_PROJECT_MANAGER_CONFIG:return s(s({},b),{},{fetching:T.mapId});case o.FETCH_PROJECT_MANAGER_CONFIG_SUCCESS:return s(s({},b),{},{fetching:null,data:T.payload});case o.FETCH_SWAMM_BMPTYPES:return s(s({},b),{},{fetching:T.mapId});case o.FETCH_SWAMM_BMPTYPES_SUCCESS:return s(s({},b),{},{fetching:!1,bmpTypes:T.bmpTypes});case o.FETCH_SWAMM_ALL_BMPS_SUCCESS:return s(s({},b),{},{fetching:!1,allBmps:T.allBmps});case o.FETCH_SWAMM_BMP_STATUSES:return s(s({},b),{},{fetchingStatuses:!0});case o.FETCH_SWAMM_BMP_STATUSES_SUCCESS:return s(s({},b),{},{statuses:T.statuses});case o.TOGGLE_BMP_TYPE:return s(s({},b),{},{bmpTypes:b.bmpTypes.map((function(e){return e.id===T.bmpType.id?s(s({},e),{},{visibility:!T.bmpType.visibility}):e}))});case o.SET_BMP_TYPE:return s(s({},b),{},{bmpTypes:b.bmpTypes.map((function(e){return e.id===T.bmpType.id?s(s({},e),{},{visibility:T.isVisible}):e}))});case o.SET_MENU_GROUP:return T.payload?s(s({},b),{},{visibleBmpManager:!1}):b;case o.SHOW_BMP_MANAGER:return s(s({},b),{},{visibleBmpManager:!0});case o.HIDE_BMP_MANAGER:return s(s({},b),{},{visibleBmpManager:!1});case o.TOGGLE_BMP_MANAGER:return s(s({},b),{},{visibleBmpManager:!b.visibleBmpManager});case o.SHOW_SWAMM_DATA_GRID:return s(s({},b),{},{visibleSwammDataGrid:!0});case o.HIDE_SWAMM_DATA_GRID:return s(s({},b),{},{visibleSwammDataGrid:!1});case o.SHOW_SWAMM_BMP_CHART:return s(s({},b),{},{visibleSwammBmpChart:!0});case o.HIDE_SWAMM_BMP_CHART:return s(s({},b),{},{visibleSwammBmpChart:!1});case o.SHOW_BMP_FORM:return s(s({},b),{},{visibleBmpForm:!0});case o.MAKE_BMP_FORM:return s(s({},b),{},{creatingNewBmp:!0,visibleBmpForm:!0,storedBmpForm:{bmpName:""}});case o.MAKE_DEFAULTS_BMP_FORM:var R={id:null,bmpName:T.bmpType.name,type:T.bmpType.id,type_data:T.bmpType,project:T.bmpType.project.id,override_n_surface_red_percent:T.bmpType.n_surface_red_percent,override_p_surface_red_percent:T.bmpType.p_surface_red_percent,override_s_surface_red_percent:T.bmpType.s_surface_red_percent,override_cost_base:T.bmpType.cost_base,override_cost_rate_per_watershed_area:T.bmpType.cost_rate_per_watershed_area,override_cost_rate_per_footprint_area:T.bmpType.cost_rate_per_footprint_area,notes:""};return s(s({},b),{},{storedBmpForm:s(s({},b.storedBmpForm),R)});case o.MAKE_EXISTING_BMP_FORM:console.log("MAKE_EXISTING_BMP_FORM",T);var B=null!=b&&null!==(r=b.storedBmpForm)&&void 0!==r&&r.outlet_fid?null===(n=b.storedBmpForm)||void 0===n?void 0:n.outlet_fid:null===(i=T.bmp)||void 0===i?void 0:i.outlet_fid,w=null!=b&&null!==(u=b.storedBmpForm)&&void 0!==u&&u.footprint_fid?null===(p=b.storedBmpForm)||void 0===p?void 0:p.footprint_fid:null===(m=T.bmp)||void 0===m?void 0:m.footprint_fid,A=null!=b&&null!==(d=b.storedBmpForm)&&void 0!==d&&d.watershed_fid?null===(f=b.storedBmpForm)||void 0===f?void 0:f.watershed_fid:null===(E=T.bmp)||void 0===E?void 0:E.watershed_fid,C=s(s({},T.bmp),{},{id:T.bmp.id,bmpName:T.bmp.type_data.name,type:T.bmp.type_data.id,type_data:T.bmp.type_data,project:T.bmp.project,group_profile:T.bmp.group_profile,group_profile_id:null===(_=T.bmp.group_profile)||void 0===_?void 0:_.id,override_n_surface_red_percent:T.bmp.override_n_surface_red_percent,override_p_surface_red_percent:T.bmp.override_p_surface_red_percent,override_s_surface_red_percent:T.bmp.override_s_surface_red_percent,override_cost_base:T.bmp.override_cost_base,override_cost_rate_per_watershed_area:T.bmp.override_cost_rate_per_watershed_area,override_cost_rate_per_footprint_area:T.bmp.override_cost_rate_per_footprint_area,notes:T.bmp.notes,outlet_fid:B,footprint_fid:w,watershed_fid:A});return s(s({},b),{},{storedBmpForm:C,updatingBmp:null});case o.HIDE_BMP_FORM:return s(s({},b),{},{visibleBmpForm:!1});case o.CLEAR_BMP_FORM:return s(s({},b),{},{creatingNewBmp:!1,storedBmpForm:null,BmpFormBmpTypeId:null,visibleBmpForm:!1,updatingBmp:null});case o.SUBMIT_BMP_FORM_SUCCESS:var O=null===(y=b.allBmps)||void 0===y?void 0:y.map((function(e){return e.id}));return console.log("allBmpIds:",O),O.indexOf(T.bmp.id)>-1?s(s({},b),{},{allBmps:b.allBmps.map((function(e){return e.id===T.bmp.id?T.bmp:e}))}):s(s({},b),{},{allBmps:[].concat(l(b.allBmps),[T.bmp])});case o.SUBMIT_BMP_FORM_ERROR:return s(s({},b),{},{showSubmitBmpFormError:!0});case o.UPDATE_BMP_FORM:return console.log("heard UPDATE_BMP_FORM",T),null!=T&&null!==(g=T.kv)&&void 0!==g&&null!==(v=g.type_data)&&void 0!==v&&v.id?s(s({},b),{},{BmpFormBmpTypeId:T.kv.type_data.id}):null!=T&&null!==(h=T.kv)&&void 0!==h&&h.groupProfile?s(s({},b),{},{storedBmpForm:s(s(s({},b.storedBmpForm),T.kv),{},{group_profile_id:null==T||null===(M=T.kv)||void 0===M||null===(I=M.groupProfile)||void 0===I?void 0:I.pk})}):s(s({},b),{},{storedBmpForm:s(s({},b.storedBmpForm),T.kv)});var M,I;case o.SET_DRAWING_BMP_LAYER_NAME:var P=!1;return T.drawingBmpLayerName!==b.drawingBmpLayerName&&(P=T.drawingBmpLayerName),s(s({},b),{},{drawingBmpLayerName:P});case o.CLEAR_DRAWING_BMP_LAYER_NAME:return s(s({},b),{},{drawingBmpLayerName:null});case o.SET_EDITING_BMP_FEATURE_ID:return s(s({},b),{},{editingBmpFeatureId:T.editingBmpFeatureId});case o.CLEAR_EDITING_BMP_FEATURE_ID:return s(s({},b),{},{editingBmpFeatureId:null});case o.DELETE_BMP_SUCCESS:return console.log("deleted",T),s(s({},b),{},{allBmps:b.allBmps.filter((function(e){return e.id!==T.bmpId}))});case o.FETCH_SWAMM_TARGETS_SUCCESS:return s(s({},b),{},{fetchingTargets:!1,targets:T.targets});case o.SELECT_SWAMM_TARGET_ID:return s(s({},b),{},{selectedTargetId:T.selectedTargetId});case o.SET_BMP_FILTER_MODE:return s(s({},b),{},{bmpFilterMode:T.bmpFilterMode});case o.UPDATE_TARGET_FORM:return s(s({},b),{},{targetForm:s(s({},b.targetForm),T.kv)});case o.SHOW_TARGET_FORM:return T.target?s(s({},b),{},{visibleTargetForm:T.visibleTargetForm,targetForm:T.target}):s(s({},b),{},{visibleTargetForm:T.visibleTargetForm});case o.HIDE_TARGET_FORM:return s(s({},b),{},{visibleTargetForm:T.visibleTargetForm});default:return b}}},epics:{startBmpCreateFeatureEpic:function(e,t){return e.ofType(y.Hu).filter((function(){var e,r,n,o;return console.log("startBmpCreateFeatureEpic1",!(null!==(e=t.getState())&&void 0!==e&&null!==(r=e.swamm)&&void 0!==r&&r.editingBmpFeatureId)),!(null!==(n=t.getState())&&void 0!==n&&null!==(o=n.swamm)&&void 0!==o&&o.editingBmpFeatureId)})).filter((function(e){var r,n,o,a,l,i;return console.log("startBmpCreateFeatureEpic2",(null==e||null===(r=e.filterObj)||void 0===r?void 0:r.featureTypeName)===(null===(n=t.getState())||void 0===n||null===(o=n.swamm)||void 0===o?void 0:o.drawingBmpLayerName)),(null==e||null===(a=e.filterObj)||void 0===a?void 0:a.featureTypeName)===(null===(l=t.getState())||void 0===l||null===(i=l.swamm)||void 0===i?void 0:i.drawingBmpLayerName)})).filter((function(e){return console.log("startBmpCreateFeatureEpic3","querySetNewBmpLayer"===(null==e?void 0:e.reason)),"querySetNewBmpLayer"===(null==e?void 0:e.reason)})).flatMap((function(){return ze().Observable.of((0,_.lg)(),(0,_.lx)([{}]),(0,_.kA)(),(0,Ve.WP)("draw.tempFeatures"),(0,o.hideBmpForm)(),(0,y.zc)())}))},saveBmpCreateFeatureEpic:function(e,t){return e.ofType(_.AY).filter((function(){var e,r,n,o;return console.log("saveBmpCreateFeatureEpic1",null===(e=t.getState())||void 0===e||null===(r=e.swamm)||void 0===r?void 0:r.drawingBmpLayerName),null===(n=t.getState())||void 0===n||null===(o=n.swamm)||void 0===o?void 0:o.drawingBmpLayerName})).filter((function(){var e,r,n,o;return console.log("WARNING: saveBmpCreateFeatureEpic2",!(null!==(e=t.getState())&&void 0!==e&&null!==(r=e.swamm)&&void 0!==r&&r.editingBmpFeatureId)),!(null!==(n=t.getState())&&void 0!==n&&null!==(o=n.swamm)&&void 0!==o&&o.editingBmpFeatureId)})).flatMap((function(){var e,r,n,a,l,i,u;return ze().Observable.of((0,y.IO)("http://localhost:8080/geoserver/wfs",{featureTypeName:null===(e=t.getState())||void 0===e||null===(r=e.swamm)||void 0===r?void 0:r.drawingBmpLayerName,filterType:"OGC",ogcVersion:"1.1.0",pagination:{maxFeatures:2e6}},{},"queryGetNewBmpId"),(0,o.clearDrawingBmpLayerName)(),(0,Ie.lo)(),(0,_.nY)(),(0,Ve.WP)("highlight.emptyFeatures"),(0,o.submitBmpForm)(null===(n=t.getState())||void 0===n||null===(a=n.swamm)||void 0===a?void 0:a.storedBmpForm,null===(l=t.getState())||void 0===l||null===(i=l.swamm)||void 0===i||null===(u=i.data)||void 0===u?void 0:u.base_map))}))},setBmpDrawingLayerEpic:function(e,t){return e.ofType(y.S0).filter((function(e){var r,n,o,a,l,i,u,s,p,c,m;return console.log("setBmpDrawingLayerEpic1a",(null===(r=t.getState())||void 0===r||null===(n=r.swamm)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.code)+"_bmp_"),console.log("setBmpDrawingLayerEpic1b",null==e?void 0:e.typeName),console.log("setBmpDrawingLayerEpic1",null==e||null===(a=e.typeName)||void 0===a?void 0:a.includes((null===(l=t.getState())||void 0===l||null===(i=l.swamm)||void 0===i||null===(u=i.data)||void 0===u?void 0:u.code)+"_bmp_")),null==e||null===(s=e.typeName)||void 0===s?void 0:s.includes((null===(p=t.getState())||void 0===p||null===(c=p.swamm)||void 0===c||null===(m=c.data)||void 0===m?void 0:m.code)+"_bmp_")})).flatMap((function(e){return ze().Observable.of((0,y.IO)("http://localhost:8080/geoserver/wfs",{featureTypeName:null==e?void 0:e.typeName,filterType:"OGC",ogcVersion:"1.1.0"},{},"querySetNewBmpLayer"))}))},startBmpEditFeatureEpic:function(e,t){return e.ofType(y.Hu).filter((function(){var e,r,n,o;return console.log("startBmpEditFeatureEpic1",null===(e=t.getState())||void 0===e||null===(r=e.swamm)||void 0===r?void 0:r.editingBmpFeatureId),null===(n=t.getState())||void 0===n||null===(o=n.swamm)||void 0===o?void 0:o.editingBmpFeatureId})).filter((function(e){return console.log("startBmpEditFeatureEpic2","querySetNewBmpLayer"===(null==e?void 0:e.reason)),"querySetNewBmpLayer"===(null==e?void 0:e.reason)})).flatMap((function(){var e,r,n;return ze().Observable.of((0,_.KD)(null===(e=t.getState())||void 0===e||null===(r=e.query)||void 0===r||null===(n=r.result)||void 0===n?void 0:n.features.filter((function(e){var r,n;return(null==e?void 0:e.id)===(null===(r=t.getState())||void 0===r||null===(n=r.swamm)||void 0===n?void 0:n.editingBmpFeatureId)}))),(0,_.lg)(),(0,o.hideBmpForm)(),(0,y.zc)())}))},saveBmpEditFeatureEpic:function(e,t){return e.ofType(_.AY).filter((function(){var e,r,n,o;return console.log("saveBmpEditFeatureEpic",null===(e=t.getState())||void 0===e||null===(r=e.swamm)||void 0===r?void 0:r.editingBmpFeatureId),null===(n=t.getState())||void 0===n||null===(o=n.swamm)||void 0===o?void 0:o.editingBmpFeatureId})).flatMap((function(){var e,r,n,a,l;return ze().Observable.of((0,o.clearEditingBmpFeatureId)(),(0,o.clearDrawingBmpLayerName)(),(0,Ie.lo)(),(0,_.nY)(),(0,Ve.WP)("highlight.emptyFeatures"),(0,o.submitBmpForm)(null===(e=t.getState())||void 0===e||null===(r=e.swamm)||void 0===r?void 0:r.storedBmpForm,null===(n=t.getState())||void 0===n||null===(a=n.swamm)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.base_map))}))},finishBmpCreateFeatureEpic:function(e,t){return e.ofType(y.Hu).filter((function(){var e,r,n,o;return console.log("finishBmpCreateFeatureEpic1",!(null!==(e=t.getState())&&void 0!==e&&null!==(r=e.swamm)&&void 0!==r&&r.editingBmpFeatureId)),!(null!==(n=t.getState())&&void 0!==n&&null!==(o=n.swamm)&&void 0!==o&&o.editingBmpFeatureId)})).filter((function(e){return console.log("finishBmpCreateFeatureEpic2","queryGetNewBmpId"===(null==e?void 0:e.reason)),"queryGetNewBmpId"===(null==e?void 0:e.reason)})).flatMap((function(e){return ze().Observable.of((0,o.createBmpFeatureId)(e),(0,y.zc)())}))},autoSaveBmpFormEpic:function(e,t){return e.ofType(o.UPDATE_BMP_FORM).flatMap((function(){var e,r,n,o,a,l;return null!==(e=t.getState())&&void 0!==e&&null!==(r=e.swamm)&&void 0!==r&&null!==(n=r.storedBmpForm)&&void 0!==n&&n.groupProfile&&null!==(o=t.getState())&&void 0!==o&&null!==(a=o.swamm)&&void 0!==a&&null!==(l=a.storedBmpForm)&&void 0!==l&&l.bmpName?ze().Observable.of():null}))},showBmpFeatureGridEpic:function(e,t){return e.ofType(o.SHOW_SWAMM_FEATURE_GRID).flatMap((function(r){var n;console.log("epic heard: SHOW_SWAMM_FEATURE_GRID");var o,a=Qe()(t.getState(),"query.typeName");return console.log("store.getState(): ",t.getState()),console.log("action: ",r),(n=ze().Observable).of.apply(n,(o=a!==(null==r?void 0:r.layer.name)?[(0,Ke.mc)()]:[],function(e){if(Array.isArray(e))return Ze(e)}(o)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||function(e,t){if(e){if("string"==typeof e)return Ze(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ze(e,t):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([(0,_.uF)(null==r?void 0:r.layer.id),(0,_.t9)()])).merge(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.url,o=r.name,a=r.id,l=Qe()(t.getState(),'featuregrid.advancedFilters["'.concat(a,'"]')),i=function(){return(0,y.rP)(n,l||{featureTypeName:o,filterType:"OGC",ogcVersion:"1.1.0"})};return ze().Observable.of((0,y.gT)(n,o)).merge(e.ofType(y.u7).filter((function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).typeName===o})).map(i))}(e,t,null==r?void 0:r.layer))}))}}})},52948:(e,t,r)=>{function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(75875),u="FETCH_SWAMM_BMPTYPES_SUCCESS",s="FETCH_GROUP_PROFILES_SUCCESS",p="FETCH_PROJECT_MANAGER_CONFIG_ERROR",c="FETCH_PROJECT_MANAGER_CONFIG_SUCCESS",m="FETCH_SWAMM_ALL_BMPS_SUCCESS",d="FETCH_SWAMM_BMP_STATUSES_SUCCESS",f="FETCH_SWAMM_TARGETS_ERROR",E="FETCH_SWAMM_TARGETS_SUCCESS",_="SELECT_SWAMM_TARGET_ID",y="SHOW_SWAMM_BMP_CHART",g="HIDE_SWAMM_BMP_CHART",v="SHOW_TARGET_FORM",h="HIDE_TARGET_FORM",b="UPDATE_TARGET_FORM",T="CLEAR_TARGET_FORM",F="SUBMIT_TARGET_FORM_SUCCESS",S="DELETE_TARGET_SUCCESS",R="DELETE_TARGET_ERROR",B="SHOW_SWAMM_DATA_GRID",w="HIDE_SWAMM_DATA_GRID",A="SHOW_SWAMM_FEATURE_GRID",C="SHOW_BMP_MANAGER",O="HIDE_BMP_MANAGER",M="TOGGLE_BMP_MANAGER",I="SET_MENU_GROUP",P="SET_STATUS_FILTER",D="SHOW_BMP_FORM",N="HIDE_BMP_FORM",L="SUBMIT_BMP_FORM_SUCCESS",G="MAKE_BMP_FORM",x="CLEAR_BMP_FORM",U="MAKE_DEFAULTS_BMP_FORM",k="MAKE_EXISTING_BMP_FORM",H="UPDATE_BMP_FORM",j="SET_DRAWING_BMP_LAYER_NAME",W="START_DRAWING_BMP",Y="CLEAR_DRAWING_BMP_LAYER_NAME",z="SET_EDITING_BMP_FEATURE_ID",V="CLEAR_EDITING_BMP_FEATURE_ID",q="DELETE_BMP_SUCCESS",Q="DELETE_BMP_ERROR",K="SET_BMP_FILTER_MODE",Z=r(23570),$=r(97395).SHOW_NOTIFICATION,X=function(e){return{type:u,bmpTypes:e}};function J(e){return console.log("fetchSwammBmpTypesError",e),{type:$,title:"Fetch Swamm Bmp Types Error",autoDismiss:600,position:"tc",message:"".concat(null==e?void 0:e.data),uid:Z(),level:"error"}}var ee=function(e){return{type:c,payload:e}};function te(e){return console.log("*** error:",e),{type:p,error:e}}var re=function(e){return e.map((function(e){return a(a({},e),{},{id:e.pk})})),{type:s,groupProfiles:e}};function ne(e){return console.log("fetchGroupProfilesError",e),{type:$,title:"Fetch fetchGroupProfiles Error",autoDismiss:600,position:"tc",message:"".concat(null==e?void 0:e.data),uid:Z(),level:"error"}}var oe=function(e){return{type:m,allBmps:e}};function ae(e){return console.log("fetchSwammAllBmpsError",e),{type:$,title:"Fetch Swamm All Bmps Error",autoDismiss:600,position:"tc",message:"".concat(null==e?void 0:e.data),uid:Z(),level:"error"}}var le=function(e){return{type:d,statuses:e}};function ie(e){return console.log("fetchSwammBmpStatusesError",e),{type:$,title:"Fetch Swamm Bmp Statuses Error",autoDismiss:600,position:"tc",message:"".concat(null==e?void 0:e.data),uid:Z(),level:"error"}}var ue=function(){return{type:N}},se=function(e){return{type:k,bmp:e}},pe=function(){return{type:x}},ce=function(){return{type:Y}},me=function(){return console.log("clearEditingBmpFeatureId"),{type:V}},de=function(e){return function(t){t({type:E,targets:e})}},fe=function(e){return console.log("*** error:",e),function(t){t({type:$,title:"Failed to load Targets",autoDismiss:60,position:"tc",message:"".concat(null==e?void 0:e.data),uid:Z(),level:"error"}),t({type:f,error:e})}},Ee=function(e){return function(t){return i.get("/swamm/api/".concat(e,"/pollutant-loading-target/")).then((function(e){t(de(e.data))})).catch((function(e){t(fe(e))}))}},_e=function(e){return function(t){t({type:$,title:"Success",autoDismiss:6,position:"tc",message:"BMP ID: ".concat(e.id," saved"),uid:Z(),level:"success"}),t({type:L,bmp:e})}};function ye(e){return console.log("submitBmpFormError",e),{type:$,title:"Submit Bmp Form Error",autoDismiss:600,position:"tc",message:"Error saving BMP: ".concat(null==e?void 0:e.data),uid:Z(),level:"error"}}var ge=function(e){return function(t){t({type:$,title:"Delete BMP Success",autoDismiss:6,position:"tc",message:"Successfully deleted BMP: ".concat(e),uid:Z(),level:"success"}),t({type:q,bmpId:e})}},ve=function(e){return console.log("*** error:",e),function(t){t({type:$,title:"Delete BMP Error",autoDismiss:60,position:"tc",message:"".concat(null==e?void 0:e.data),uid:Z(),level:"error"}),t({type:Q,error:e})}},he=function(){return{type:h,visibleTargetForm:!1}},be=function(){return{type:T,targetForm:null}},Te=function(e){return function(t){t({type:$,title:"Success",autoDismiss:6,position:"tc",message:"Target: ".concat(e.id," saved"),uid:Z(),level:"success"}),t({type:F,target:e})}};function Fe(e){return console.log("submitTargetFormError",e),{type:$,title:"Submit Target Form Error",autoDismiss:600,position:"tc",message:"Error saving Target: ".concat(null==e?void 0:e.data),uid:Z(),level:"error"}}var Se=function(e){return function(t){t({type:$,title:"Delete Target Success",autoDismiss:6,position:"tc",message:"Successfully deleted Target: ".concat(e),uid:Z(),level:"success"}),t({type:S,targetId:e})}},Re=function(e){return console.log("*** error:",e),function(t){t({type:$,title:"Delete Target Error",autoDismiss:60,position:"tc",message:"".concat(null==e?void 0:e.data),uid:Z(),level:"error"}),t({type:R,error:e})}};e.exports={FETCH_SWAMM_BMPTYPES:"FETCH_SWAMM_BMPTYPES",fetchSwammBmpTypes:function(e){return function(t){return i.get("/swamm/api/".concat(e,"/bmp-type/")).then((function(e){t(X(e.data))})).catch((function(e){t(J(e))}))}},FETCH_SWAMM_BMPTYPES_ERROR:"FETCH_SWAMM_BMPTYPES_ERROR",fetchSwammBmpTypesError:J,FETCH_SWAMM_BMPTYPES_SUCCESS:u,fetchSwammBmpTypesSuccess:X,FETCH_PROJECT_MANAGER_CONFIG:"FETCH_PROJECT_MANAGER_CONFIG",fetchProjectManagerConfig:function(e){return function(t){return i.get("/projects/api/maps/".concat(t,"/")).then((function(t){e(ee(t.data.project))})).catch((function(t){e(te(t))}))}},FETCH_PROJECT_MANAGER_CONFIG_ERROR:p,fetchProjectManagerConfigError:te,FETCH_PROJECT_MANAGER_CONFIG_SUCCESS:c,fetchProjectManagerConfigSuccess:ee,FETCH_GROUP_PROFILES:"FETCH_GROUP_PROFILES",fetchGroupProfiles:function(){return function(e){return i.get("/api/v2/groups?page_size=1000").then((function(t){e(re(t.data.group_profiles))})).catch((function(t){e(ne(t))}))}},FETCH_GROUP_PROFILES_ERROR:"FETCH_GROUP_PROFILES_ERROR",fetchGroupProfilesError:ne,FETCH_GROUP_PROFILES_SUCCESS:s,fetchGroupProfilesSuccess:re,FETCH_SWAMM_ALL_BMPS:"FETCH_SWAMM_ALL_BMPS",fetchSwammAllBmps:function(e){return function(t){return i.get("/swamm/api/".concat(e,"/bmps/")).then((function(e){t(oe(e.data))})).catch((function(e){t(ae(e))}))}},FETCH_SWAMM_ALL_BMPS_ERROR:"FETCH_SWAMM_ALL_BMPS_ERROR",fetchSwammAllBmpsError:ae,FETCH_SWAMM_ALL_BMPS_SUCCESS:m,fetchSwammAllBmpsSuccess:oe,FETCH_SWAMM_BMP_STATUSES:"FETCH_SWAMM_BMP_STATUSES",fetchSwammBmpStatuses:function(e){return function(t){return i.get("/swamm/api/".concat(e,"/bmps/status_list/")).then((function(e){t(le(e.data))})).catch((function(e){t(ie(e))}))}},FETCH_SWAMM_BMP_STATUSES_ERROR:"FETCH_SWAMM_BMP_STATUSES_ERROR",fetchSwammBmpStatusesError:ie,FETCH_SWAMM_BMP_STATUSES_SUCCESS:d,fetchSwammBmpStatusesSuccess:le,FETCH_SWAMM_TARGETS:"FETCH_SWAMM_TARGETS",fetchSwammTargets:Ee,FETCH_SWAMM_TARGETS_ERROR:f,fetchSwammTargetsError:fe,FETCH_SWAMM_TARGETS_SUCCESS:E,fetchSwammTargetsSuccess:de,SELECT_SWAMM_TARGET_ID:_,selectSwammTargetId:function(e){return{type:_,selectedTargetId:e}},SUBMIT_BMP_FORM:"SUBMIT_BMP_FORM",submitBmpForm:function(e,t){return e.id?function(r){return console.log("updating existing BMP: ",e),i.patch("/swamm/api/".concat(t,"/bmps/").concat(e.id,"/"),e).then((function(e){r(_e(e.data)),r(se(e.data)),r(Ee(t))})).catch((function(e){r(ye(e))}))}:function(r){return console.log("creating new BMP: ",e),i.post("/swamm/api/".concat(t,"/bmps/"),e).then((function(e){r(_e(e.data)),r(se(e.data)),r(Ee(t))})).catch((function(e){r(ye(e))}))}},SUBMIT_BMP_FORM_ERROR:"SUBMIT_BMP_FORM_ERROR",submitBmpFormError:ye,SUBMIT_BMP_FORM_SUCCESS:L,submitBmpFormSuccess:_e,TOGGLE_BMP_TYPE:"TOGGLE_BMP_TYPE",toggleBmpType:function(e){return function(t){t({type:"TOGGLE_BMP_TYPE",bmpType:e})}},SET_BMP_TYPE:"SET_BMP_TYPE",setBmpType:function(e,t){return function(r){r({type:"SET_BMP_TYPE",bmpType:e,isVisible:t})}},SET_STATUS_FILTER:P,setStatusFilter:function(e){return{type:P,statuses:e}},SET_MENU_GROUP:I,setMenuGroup:function(e){return{type:I,payload:e}},SHOW_BMP_FORM:D,showBmpForm:function(){return{type:D}},HIDE_BMP_FORM:N,hideBmpForm:ue,SHOW_SWAMM_DATA_GRID:B,showSwammDataGrid:function(){return{type:B}},HIDE_SWAMM_DATA_GRID:w,hideSwammDataGrid:function(){return{type:w}},SHOW_SWAMM_FEATURE_GRID:A,showSwammFeatureGrid:function(e){return{type:A,layer:e}},SHOW_SWAMM_BMP_CHART:y,showSwammBmpChart:function(){return{type:y}},HIDE_SWAMM_BMP_CHART:g,hideSwammBmpChart:function(){return{type:g}},SHOW_BMP_MANAGER:C,showBmpManager:function(){return{type:C}},HIDE_BMP_MANAGER:O,hideBmpManager:function(){return{type:O}},TOGGLE_BMP_MANAGER:M,toggleBmpManager:function(){return{type:M}},CLEAR_BMP_FORM:x,clearBmpForm:pe,MAKE_BMP_FORM:G,makeBmpForm:function(){return{type:G}},MAKE_DEFAULTS_BMP_FORM:U,makeDefaultsBmpForm:function(e){return{type:U,bmpType:e}},MAKE_EXISTING_BMP_FORM:k,makeExistingBmpForm:se,UPDATE_BMP_FORM:H,updateBmpForm:function(e){return{type:H,kv:e}},START_DRAWING_BMP:W,startDrawingBmp:function(){return{type:W}},SET_DRAWING_BMP_LAYER_NAME:j,setDrawingBmpLayerName:function(e){return console.log("setDrawingBmpLayerName",e),{type:j,drawingBmpLayerName:e}},CLEAR_DRAWING_BMP_LAYER_NAME:Y,clearDrawingBmpLayerName:ce,CREATE_BMP_FEATURE_ID:"CREATE_BMP_FEATURE_ID",createBmpFeatureId:function(e){console.log("createBmpFeatureId action:",e);var t,r,o=null,a=e.result.features.map((function(e){return e.id.split(".")[1]}));console.log("createBmpFeatureId ids:",a),t=Math.max.apply(Math,function(e){if(Array.isArray(e))return n(e)}(r=a)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());var l=e.filterObj.featureTypeName.split("_")[2];console.log("createBmpFeatureId newBmpId: ",t),console.log("createBmpFeatureId featureBmpType: ",l);var i=e.filterObj.featureTypeName+"."+t;switch(console.log("createBmpFeatureId assigning: ",i),l){case"outlet":o={outlet_fid:i};break;case"footprint":o={footprint_fid:i};break;case"watershed":o={watershed_fid:i};break;default:o={}}return console.log("createBmpFeatureId shapeId: ",o),{type:H,kv:o}},SET_EDITING_BMP_FEATURE_ID:z,setEditingBmpFeatureId:function(e){return console.log("setEditingBmpFeatureId",e),{type:z,editingBmpFeatureId:e}},CLEAR_EDITING_BMP_FEATURE_ID:V,clearEditingBmpFeatureId:me,DELETE_BMP:"DELETE_BMP",deleteBmp:function(e,t){return function(r){return i.delete("/swamm/api/".concat(e,"/bmps/").concat(t,"/"),{}).then((function(e){r(ge(t)),r(ue()),r(pe()),r(me()),r(ce())})).catch((function(e){r(ve(e))}))}},DELETE_BMP_ERROR:Q,deleteBmpError:ve,DELETE_BMP_SUCCESS:q,deleteBmpSuccess:ge,SET_BMP_FILTER_MODE:K,setBmpFilterMode:function(e){return{type:K,bmpFilterMode:e}},SHOW_TARGET_FORM:v,showTargetForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:v,visibleTargetForm:!0,target:e}},HIDE_TARGET_FORM:h,hideTargetForm:he,UPDATE_TARGET_FORM:b,updateTargetForm:function(e){return{type:b,kv:e}},CLEAR_TARGET_FORM:T,clearTargetForm:be,SUBMIT_TARGET_FORM:"SUBMIT_TARGET_FORM",submitTargetForm:function(e,t){return e.id?function(r){return console.log("updating existing Target: ",e),i.patch("/swamm/api/".concat(t,"/pollutant-loading-target/").concat(e.id,"/"),e).then((function(e){r(Te(e.data)),r(Ee(t)),r(he()),r(be())})).catch((function(e){r(Fe(e))}))}:function(r){return console.log("creating new Target: ",e),i.post("/swamm/api/".concat(t,"/pollutant-loading-target/"),e).then((function(e){r(Te(e.data)),r(Ee(t)),r(he()),r(be())})).catch((function(e){r(Fe(e))}))}},SUBMIT_TARGET_FORM_SUCCESS:F,submitTargetFormSuccess:Te,SUBMIT_TARGET_FORM_ERROR:"SUBMIT_TARGET_FORM_ERROR",submitTargetFormError:Fe,DELETE_TARGET:"DELETE_TARGET",deleteTarget:function(e,t){return function(r){return i.delete("/swamm/api/".concat(e,"/pollutant-loading-target/").concat(t,"/"),{}).then((function(n){r(Se(t)),r(Ee(e)),r(he()),r(be())})).catch((function(e){r(Re(e))}))}},DELETE_TARGET_SUCCESS:S,deleteTargetSuccess:Se,DELETE_TARGET_ERROR:R,deleteTargetError:Re}},83918:(e,t,r)=>{(e.exports=r(9252)()).push([e.id,".msgapi .project-manager-panel {\n    position: absolute;\n    z-index: 1021;\n    top: 50px;\n    left: 20px;\n    min-width: 400px;\n    background-color: rgba(0, 60, 136, 0.6);\n    border-color: rgba(255, 255, 255, 0.7);\n    border-width: 2px;\n    padding: 5px 10px;\n    font-size: 12px;\n    line-height: 1.5;\n    border-radius: 4px;\n    color: white;\n    text-align: center\n}\n\n.msgapi .dataset-transparency {\n    margin-left: 280px;\n    margin-top: 15px;\n}\n\n.msgapi .mapstore-slider.with-tooltip.dataset-transparency .noUi-target.noUi-horizontal .noUi-base .noUi-origin .noUi-handle {\n    width: 20px;\n    left: -10px;\n    border: 2px solid #dddddd;\n    border-radius: 10px;\n    cursor: default;\n}\n\n.msgapi .mapstore-slider.with-tooltip.dataset-transparency .noUi-target {\n    box-shadow: none;\n    border: 1px solid rgba(255, 255, 255, 0.68);\n    background-color: #335781;\n}\n",""])},14203:(e,t,r)=>{(e.exports=r(9252)()).push([e.id,".msgapi .simple-view-menu-button {\n    position: absolute;\n    z-index: 1021;\n    top: 11px;\n    width: 85px;\n    height: 50px;\n    background-color: rgba(0, 60, 136, 0.6);\n    border-color: rgba(255, 255, 255, 0.7);\n    border-width: 2px;\n    padding: 3px 5px;\n    font-size: 12px;\n    line-height: 1.3;\n    border-radius: 4px;\n    color: white;\n    text-align: center\n}\n\n.msgapi .simple-view-panel {\n    position: absolute;\n    z-index: 1021;\n    top: 65px;\n    left: 20px;\n    min-width: 400px;\n    background-color: rgba(0, 60, 136, 0.6);\n    border-color: rgba(255, 255, 255, 0.7);\n    border-width: 2px;\n    padding: 5px 10px;\n    font-size: 12px;\n    line-height: 1.5;\n    border-radius: 4px;\n    color: white;\n    text-align: center;\n}\n\n.msgapi .legend-button {\n    right: 60px;\n}\n\n.msgapi .legend-panel {\n    top: 10px;\n    right: 60px;\n    left: unset;\n    text-align: right;\n    padding-bottom: 20px;\n    overflow-y: auto;\n    overflow-x: hidden;\n    max-height: 92%;\n    max-width: 400px;\n}\n\n.msgapi .legend-row {\n    padding: 10px;\n    margin: -1px 10px -1px 10px;\n    border: 1px solid #ffffffad;\n    border-radius: 3px;\n}\n\n.msgapi .legend-background {\n    background-color: white;\n    padding: 3px;\n    border-radius: 3px;\n}\n\n.msgapi .legend-image {                                                \n    display: block;\n    text-align: center;\n    margin-left: auto;\n    margin-right: auto;\n    max-width: 80%;\n}\n\n.msgapi .legend-text-label {\n    text-align: left;\n}\n\n.msgapi .legend-heading {\n    text-align: center;\n}\n\n.msgapi .legend-close {\n    position: absolute;\n    right: 0;\n    color: red;\n}\n\n.msgapi .menu-rows-container {\n    border-top: 1px solid #ffffffad;\n}\n\n.msgapi .menu-row {\n    border-bottom: 1px solid #ffffffad;\n    padding-left: 5px;\n    margin: 0;\n}\n\n.msgapi .menu-row-button {\n    display: inline-block;\n    vertical-align: middle;\n}\n\n\n.msgapi .menu-row-glyph {\n    background: #ffffff;\n    border-radius: 3px;\n    margin: 5px 20px 5px 5px;\n    color: limegreen;\n    font-size: 10px\n}\n\n.msgapi .menu-row-text {\n    white-space: nowrap;\n    padding-left: 3px;\n}",""])},89447:(e,t,r)=>{(e.exports=r(9252)()).push([e.id,".msgapi .bmp-progress-button {\n    top: 50px;\n    left: 20px;\n    min-width: 135px;\n    position: absolute;\n    opacity: 0.7;\n    border-radius: 4px\n}\n\n.msgapi .bmp-loading-button {\n    position: absolute;\n    top: 200px;\n    left: 50%;\n    margin-top: -100px;\n    margin-left: -100px;\n    opacity: 0.7;\n    width: 200px;\n    height: 100px;\n    border-radius: 4px;\n    border-color: white;\n    color: white;\n    background: rgba(0, 60, 136, 0.6);\n    text-align: center\n}\n",""])},7169:(e,t,r)=>{var n=r(83918);"string"==typeof n&&(n=[[e.id,n,""]]),r(14246)(n,{}),n.locals&&(e.exports=n.locals)},29944:(e,t,r)=>{var n=r(14203);"string"==typeof n&&(n=[[e.id,n,""]]),r(14246)(n,{}),n.locals&&(e.exports=n.locals)},19970:(e,t,r)=>{var n=r(89447);"string"==typeof n&&(n=[[e.id,n,""]]),r(14246)(n,{}),n.locals&&(e.exports=n.locals)}}]);