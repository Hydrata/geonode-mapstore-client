(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[3358],{80416:(e,t,n)=>{"use strict";n.d(t,{yS:()=>r,Zz:()=>o,ms:()=>c,ih:()=>a,OX:()=>i,sb:()=>u,K$:()=>s,k7:()=>l,cX:()=>p,x9:()=>d,vs:()=>f,oE:()=>g,Po:()=>m,qv:()=>v,cI:()=>y,g6:()=>w,I4:()=>E,l$:()=>R,Xv:()=>S,k3:()=>h,CQ:()=>P,R8:()=>O,HN:()=>x,sH:()=>A,c7:()=>b,_7:()=>L,eF:()=>T,O6:()=>_,ED:()=>N,RP:()=>C,sF:()=>I,VP:()=>D,He:()=>G,vO:()=>Y,WO:()=>k,bh:()=>M,pV:()=>F,MK:()=>q,ZF:()=>H,tV:()=>U,Dv:()=>j,Yz:()=>B,kI:()=>W,XG:()=>Q,A4:()=>V,Rp:()=>X,ct:()=>Z,oh:()=>K,$h:()=>$,ud:()=>z,Qr:()=>J,LR:()=>ee,nN:()=>te,UG:()=>ne,F5:()=>re,c9:()=>oe,Jh:()=>ce,Xy:()=>ae});var r="CHANGE_LAYER_PROPERTIES",o="LAYERS:CHANGE_LAYER_PARAMS",c="CHANGE_GROUP_PROPERTIES",a="TOGGLE_NODE",i="SORT_NODE",u="REMOVE_NODE",s="UPDATE_NODE",l="MOVE_NODE",p="LAYER_LOADING",d="LAYER_LOAD",f="LAYER_ERROR",g="ADD_LAYER",m="ADD_GROUP",v="REMOVE_LAYER",y="SHOW_SETTINGS",w="HIDE_SETTINGS",E="UPDATE_SETTINGS",R="REFRESH_LAYERS",S="LAYERS:UPDATE_LAYERS_DIMENSION",h="LAYERS_REFRESHED",P="LAYERS_REFRESH_ERROR",O="LAYERS:BROWSE_DATA",x="LAYERS:DOWNLOAD",A="LAYERS:CLEAR_LAYERS",b="LAYERS:SELECT_NODE",L="LAYERS:FILTER_LAYERS",T="LAYERS:SHOW_LAYER_METADATA",_="LAYERS:HIDE_LAYER_METADATA",N="LAYERS:UPDATE_SETTINGS_PARAMS";function C(e,t,n){return{type:y,node:e,nodeType:t,options:n}}function I(){return{type:w}}function D(e){return{type:E,options:e}}function G(e,t){return{type:r,newProperties:t,layer:e}}function Y(e,t){return{type:o,layer:e,params:t}}function k(e,t){return{type:c,newProperties:t,group:e}}function M(e,t,n){return{type:a,node:e,nodeType:t,status:!n}}function F(e){return{type:"CONTEXT_NODE",node:e}}function q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:i,node:e,order:t,sortLayers:n}}function H(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:u,node:e,nodeType:t,removeEmpty:n}}function U(e,t,n){return{type:s,node:e,nodeType:t,options:n}}function j(e,t,n){return{type:l,node:e,groupId:t,index:n}}function B(e){return{type:p,layerId:e}}function W(e,t){return{type:d,layerId:e,error:t}}function Q(e,t,n){return{type:f,layerId:e,tilesCount:t,tilesErrorCount:n}}function V(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{type:g,layer:e,foreground:t}}function X(e,t,n){return{type:m,group:e,parent:t,options:n}}function Z(e,t){return{type:r,layer:e,newProperties:{_v_:t||(new Date).getTime()}}}function K(e){return{type:h,layers:e}}function $(e,t){return{type:P,layers:e,error:t}}function z(e,t,n,r){return{type:S,dimension:e,value:t,options:n,layers:r}}function J(e){return{type:O,layer:e}}function ee(e){return{type:x,layer:e}}function te(){return{type:A}}function ne(e,t,n){return{type:b,id:e,nodeType:t,ctrlKey:n}}function re(e){return{type:L,text:e}}function oe(e,t){return{type:T,metadataRecord:e,maskLoading:t}}function ce(){return{type:_}}function ae(e,t){return{type:N,newParams:e,update:t}}},59551:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n(72500),o=n.n(r),c=n(20721),a=n.n(c),i=n(44612),u=n.n(i),s=n(27418),l=n.n(s),p=n(75875),d=n.n(p),f=n(37275),g=n(96309),m=function(e){var t=o().parse(e,!0);return o().format(l()({},t,{search:null},{query:l()({service:"CSW",version:"2.0.2"},t.query,{request:void 0})}))},v={parseUrl:m,getRecordById:function(e){return new Promise((function(t){Promise.all([n.e(9942),n.e(6372)]).then(function(){t(d().get(e).then((function(e){if(e){var t=n(66372).unmarshaller.unmarshalString(e.data);if(t&&t.name&&"GetRecordByIdResponse"===t.name.localPart&&t.value&&t.value.abstractRecord){var r=t.value.abstractRecord[0].value.dcElement;if(r){for(var o={references:[]},c=0;c<r.length;c++){var a=r[c],i=a.name.localPart,u={};u="references"===i&&a.value?{value:a.value.content&&(0,f.$F)(a.value.content[0])||a.value.content||a.value,scheme:a.value.scheme}:a.value.content&&a.value.content[0]||a.value.content||a.value,o[i]&&Array.isArray(o[i])?o[i].push(u):o[i]?o[i]=[o[i],u]:o[i]=u}return{dc:o}}}else if(t&&t.name&&"ExceptionReport"===t.name.localPart)return{error:t.value.exception&&t.value.exception.length&&t.value.exception[0].exceptionText||"GenericError"};return null}return null})))}.bind(null,n)).catch(n.oe)}))},getRecords:function(e,t,r,o){return new Promise((function(c){Promise.all([n.e(9942),n.e(1269)]).then(function(){var i=n(66372),s=i.CSW,l=i.marshaller,p=i.unmarshaller,v=l.marshalString({name:"csw:GetRecords",value:s.getRecords(t,r,"string"!=typeof o&&o)});o&&"string"!=typeof o||(v=function(e,t,n){return n?'<csw:GetRecords xmlns:csw="http://www.opengis.net/cat/csw/2.0.2"\n    xmlns:ogc="http://www.opengis.net/ogc"\n    xmlns:gml="http://www.opengis.net/gml"\n    xmlns:dc="http://purl.org/dc/elements/1.1/"\n    xmlns:dct="http://purl.org/dc/terms/"\n    xmlns:gmd="http://www.isotc211.org/2005/gmd"\n    xmlns:gco="http://www.isotc211.org/2005/gco"\n    xmlns:gmi="http://www.isotc211.org/2005/gmi"\n    xmlns:ows="http://www.opengis.net/ows" service="CSW" version="2.0.2" resultType="results" startPosition="'.concat(e,'" maxRecords="').concat(t,'">\n    <csw:Query typeNames="csw:Record">\n        <csw:ElementSetName>full</csw:ElementSetName>\n        <csw:Constraint version="1.1.0">\n            <ogc:Filter>\n            <ogc:And>\n                <ogc:PropertyIsLike wildCard="%" singleChar="_" escapeChar="\\">\n                    <ogc:PropertyName>csw:AnyText</ogc:PropertyName>\n                    <ogc:Literal>%').concat(n,"%</ogc:Literal>\n                </ogc:PropertyIsLike>\n                <ogc:Or>\n                <ogc:PropertyIsEqualTo>\n                    <ogc:PropertyName>dc:type</ogc:PropertyName>\n                    <ogc:Literal>dataset</ogc:Literal>\n                </ogc:PropertyIsEqualTo>\n                <ogc:PropertyIsEqualTo>\n                    <ogc:PropertyName>dc:type</ogc:PropertyName>\n                    <ogc:Literal>http://purl.org/dc/dcmitype/Dataset</ogc:Literal>\n                </ogc:PropertyIsEqualTo>\n               </ogc:Or>\n            </ogc:And>\n            </ogc:Filter>\n        </csw:Constraint>\n    </csw:Query>\n</csw:GetRecords>"):'<csw:GetRecords xmlns:csw="http://www.opengis.net/cat/csw/2.0.2"\n        xmlns:ogc="http://www.opengis.net/ogc"\n        xmlns:gml="http://www.opengis.net/gml"\n        xmlns:dc="http://purl.org/dc/elements/1.1/"\n        xmlns:dct="http://purl.org/dc/terms/"\n        xmlns:gmd="http://www.isotc211.org/2005/gmd"\n        xmlns:gco="http://www.isotc211.org/2005/gco"\n        xmlns:gmi="http://www.isotc211.org/2005/gmi"\n        xmlns:ows="http://www.opengis.net/ows" service="CSW" version="2.0.2" resultType="results" startPosition="'.concat(e,'" maxRecords="').concat(t,'">\n        <csw:Query typeNames="csw:Record">\n            <csw:ElementSetName>full</csw:ElementSetName>\n            <csw:Constraint version="1.1.0">\n        <ogc:Filter>\n            <ogc:Or>\n            <ogc:PropertyIsEqualTo>\n                <ogc:PropertyName>dc:type</ogc:PropertyName>\n                <ogc:Literal>dataset</ogc:Literal>\n            </ogc:PropertyIsEqualTo>\n            <ogc:PropertyIsEqualTo>\n                <ogc:PropertyName>dc:type</ogc:PropertyName>\n                <ogc:Literal>http://purl.org/dc/dcmitype/Dataset</ogc:Literal>\n            </ogc:PropertyIsEqualTo>\n           </ogc:Or>\n        </ogc:Filter>\n            </csw:Constraint>\n        </csw:Query>\n    </csw:GetRecords>')}(t,r,o)),c(d().post(m(e),v,{headers:{"Content-Type":"application/xml"}}).then((function(e){if(e){var t=p.unmarshalString(e.data);if(t&&t.name&&"GetRecordsResponse"===t.name.localPart&&t.value&&t.value.searchResults){var n=t.value,r=n.searchResults.abstractRecord||n.searchResults.any,o={numberOfRecordsMatched:n.searchResults.numberOfRecordsMatched,numberOfRecordsReturned:n.searchResults.numberOfRecordsReturned,nextRecord:n.searchResults.nextRecord},c=[];if(r)for(var i=0;i<r.length;i++){var s=r[i].value,l={dateStamp:s.dateStamp&&s.dateStamp.date,fileIdentifier:s.fileIdentifier&&s.fileIdentifier.characterString&&s.fileIdentifier.characterString.value,identificationInfo:s.abstractMDIdentification&&s.abstractMDIdentification.value};if(s.boundingBox){var d,m=void 0,v=void 0;if((d=Array.isArray(s.boundingBox)?a()(s.boundingBox):s.boundingBox)&&d.value){var y,w,E,R,S=null!==(y=null===(w=d.value)||void 0===w?void 0:w.crs)&&void 0!==y?y:"",h=null===(E=S.match(/[\w-]*:[\w-]*:[\w-]*:[\w-]*:[\w-]*:[^:]*:(([\w-]+\s[\w-]+)|[\w-]*)/))||void 0===E?void 0:E[0],P=(0,g.makeNumericEPSG)(null===(R=S.match(/EPSG:[0-9]+/))||void 0===R?void 0:R[0]),O=d.value.lowerCorner,x=d.value.upperCorner,A=P||(0,g.extractCrsFromURN)(h)||u()(S.split(":"));if(A){if("EPSG:"===A.slice(0,5)){if(!(v=(0,g.makeNumericEPSG)(A)))throw new Error('No suitable EPSG numeric conversion found for "'.concat(A,'"'))}else if(!(v=(0,g.makeNumericEPSG)("EPSG:".concat(A))))throw new Error('No suitable EPSG numeric conversion found for "'.concat(A,'"'))}else v="EPSG:4326";"EPSG:4326"===v&&"CRS84"!==A&&"OGC:CRS84"!==A&&(O=[O[1],O[0]],x=[x[1],x[0]]),m=(0,g.makeBboxFromOWS)(O,x)}l.boundingBox={extent:m,crs:v}}var b=s.dcElement;if(b){for(var L={references:[]},T=0;T<b.length;T++){var _=b[T],N=_.name.localPart,C={};C="references"===N&&_.value?{value:_.value.content&&(0,f.$F)(_.value.content[0])||_.value.content||_.value,scheme:_.value.scheme}:_.value.content&&_.value.content[0]||_.value.content||_.value,L[N]&&Array.isArray(L[N])?L[N].push(C):L[N]?L[N]=[L[N],C]:L[N]=C}l.dc=L}c.push(l)}return o.records=c,o}if(t&&t.name&&"ExceptionReport"===t.name.localPart)return{error:t.value.exception&&t.value.exception.length&&t.value.exception[0].exceptionText||"GenericError"}}return null})))}.bind(null,n)).catch(n.oe)}))},textSearch:function(e,t,n,r){return new Promise((function(o){o(v.getRecords(e,t,n,r))}))},workspaceSearch:function(e,t,r,o,c){return new Promise((function(a){Promise.all([n.e(9942),n.e(1269)]).then(function(){var i=n(84454).Filter,u=c||"%",s=o&&"%"+o+"%"||"%",l=i.propertyIsLike("identifier",u+":"+s),p=i.filter(l);a(v.getRecords(e,t,r,p))}.bind(null,n)).catch(n.oe)}))},reset:function(){}};const y=v},3475:(e,t,n)=>{"use strict";n.d(t,{Z:()=>R});var r=n(75875),o=n.n(r),c=n(37275),a=n(72500),i=n.n(a),u=n(27418),s=n.n(u),l=n(5055),p=n.n(l),d=n(9626),f=n.n(d),g=n(96309),m=n(7294),v={},y=function(e){var t=i().parse(e,!0);return i().format(s()({},t,{search:null},{query:s()({SERVICE:"WMTS",VERSION:"1.0.0",REQUEST:"GetCapabilities"},t.query)}))},w=function(e,t,n,r,o){for(var c=e.Capabilities.Contents,a=(0,m.G6)(e),i=(0,m.s5)(e),u=c.TileMatrixSet&&f()(c.TileMatrixSet)||[],l=[],p=u.length,d=0;d<p;d++)l.push((0,g.getEPSGCode)(u[d]["ows:SupportedCRS"]));var v=c.Layer,y=f()(v).filter((function(e){return!r||-1!==e["ows:Identifier"].toLowerCase().indexOf(r.toLowerCase())||e["ows:Title"]&&-1!==e["ows:Title"].toLowerCase().indexOf(r.toLowerCase())}));return{numberOfRecordsMatched:y.length,numberOfRecordsReturned:Math.min(n,y.length),nextRecord:t+Math.min(n,y.length)+1,records:y.filter((function(e,r){return r>=t-1&&r<t-1+n})).map((function(e){return s()({},e,{SRS:l,TileMatrixSet:u,queryable:!!(0,m.b4)(a,"GetFeatureInfo","KVP"),requestEncoding:i,style:(0,m.EN)(e),format:(0,m.JY)(e),GetTileURL:(0,m.b4)(a,"GetTile",i),capabilitiesURL:o})}))}},E={parseUrl:y,getRecords:function(e,t,n,r){var a=v[e];return a&&(new Date).getTime()<a.timestamp+1e3*((0,c.u8)("cacheExpire")||60)?new Promise((function(o){o(w(a.data,t,n,r,e))})):o().get(y(e)).then((function(o){var c;return p().parseString(o.data,{explicitArray:!1},(function(e,t){c=t})),v[e]={timestamp:(new Date).getTime(),data:c},w(c,t,n,r,e)}))},getCapabilities:function(e){var t=v[e];return t&&(new Date).getTime()<t.timestamp+1e3*((0,c.u8)("cacheExpire")||60)?new Promise((function(e){e(t.data)})):o().get(y(e)).then((function(t){var n;return p().parseString(t.data,{explicitArray:!1},(function(e,t){n=t})),v[e]={timestamp:(new Date).getTime(),data:n},n}))},textSearch:function(e,t,n,r){return E.getRecords(e,t,n,r)},reset:function(){Object.keys(v).forEach((function(e){delete v[e]}))}};const R=E},32354:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(57546),o=n.n(r),c=n(37275),a=function(e,t,n,r){var a=o()(c.ZP.getDefaults(),"initialState.defaultState.catalog.default.staticServices.default_map_backgrounds.backgrounds").filter((function(e){return!r||e.title.indexOf(r)>-1})),i=a.filter((function(e,r){return r>=t-1&&r<n+t-1}));return new Promise((function(e){return e({numberOfRecordsMatched:a.length,numberOfRecordsReturned:i.length,records:i,service:{Name:"Background Provider"}})}))};const i={getRecords:a,reset:function(){},textSearch:function(e,t,n,r){return a(0,t,n,r)}}},88113:(e,t,n)=>{"use strict";n.d(t,{b6:()=>f,PG:()=>g,_x:()=>m,Mm:()=>v,dP:()=>y,SX:()=>w,ZL:()=>E,_S:()=>R,iH:()=>S,R7:()=>h,Q7:()=>P,n7:()=>O,bA:()=>x,hm:()=>A,E2:()=>b,Cb:()=>L,eK:()=>T,Im:()=>_,e8:()=>N,$t:()=>C,kS:()=>I,y:()=>D,l2:()=>G,HN:()=>Y,BM:()=>k,am:()=>M,LV:()=>F,CK:()=>q});var r=n(22222),o=n(57546),c=n.n(o),a=n(69533),i=n.n(a),u=n(827),s=n(76712);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){return c()(e,"catalog.services")},g=(0,r.P1)((function(e){return c()(e,"catalog.default.staticServices")}),f,(function(e,t){return p(p({},t),i()(e,"default_map_backgrounds"))})),m=function(e){return c()(e,"catalog.default.tileSizes",[256,512])},v=function(e){return c()(e,"controls.metadataexplorer.group")},y=function(e){return c()(e,"catalog.saving")},w=function(e){return c()(e,"catalog.result")},E=function(e){return c()(e,"catalog.openCatalogServiceList")},R=function(e){return c()(e,"catalog.newService")},S=function(e){return c()(e,"catalog.newService.type","csw")},h=function(e){return c()(e,'catalog.services["'.concat(c()(e,"catalog.selectedService"),'"]'))},P=function(e){return c()(e,'catalog.services["'.concat(c()(e,"catalog.selectedService"),'"].type'),function(e){return c()(e,'catalog.default.staticServices["'.concat(c()(e,"catalog.selectedService"),'"].type'),"csw")}(e))},O=function(e){return c()(e,'catalog.services["'.concat(c()(e,"catalog.selectedService"),'"].layerOptions'),{})},x=function(e){return c()(e,"catalog.searchOptions")},A=function(e){return c()(e,"catalog.loadingError")},b=function(e){return c()(e,"catalog.loading",!1)},L=function(e){return c()(e,"catalog.selectedService")},T=function(e){return c()(e,"catalog.mode","view")},_=function(e){return c()(e,"catalog.layerError")},N=function(e){return c()(e,"catalog.searchOptions.text","")},C=function(e){return"metadataexplorer"===c()(e,"controls.toolbar.active")||c()(e,"controls.metadataexplorer.enabled")},I=function(e){return(c()(e,"localConfig.authenticationRules")||[]).filter((function(e){return"authkey"===e.method})).map((function(e){return e.authkeyParamName}))||[]},D=function(e){return c()(e,"catalog.pageSize",4)},G=function(e){return c()(e,"catalog.delayAutoSearch",1e3)},Y=(0,r.zB)({projection:u.uy}),k=function(e){return c()(e,"catalog.formatsLoading",!1)},M=function(e){return c()(e,"catalog.newService.supportedFormats.imageFormats",s.QQ)},F=function(e){return c()(e,"catalog.newService.supportedFormats.infoFormats",(0,s.B8)())},q=function(e){return c()(e,"catalog.newService.formatUrlUsed","")}}}]);