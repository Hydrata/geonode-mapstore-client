(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[3866],{15402:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var r=n(45697),o=n.n(r),l=n(24852),i=n.n(l);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n(68195).FormattedHTMLMessage,m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,e);var t,n,r,o,l=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(r);if(o){var n=f(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return p(this,e)});function a(){return u(this,a),l.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){return this.context.intl?i().createElement(d,{id:this.props.msgId,values:this.props.msgParams}):i().createElement("span",null,this.props.msgId||"")}}])&&c(t.prototype,n),a}(i().Component);y(m,"propTypes",{msgId:o().string.isRequired,msgParams:o().object}),y(m,"contextTypes",{intl:o().object});const b=m},38167:(e,t,n)=>{"use strict";n.d(t,{t6:()=>O,k9:()=>E,v0:()=>w,ZP:()=>j});var r=n(45697),o=n.n(r),l=n(24852),i=n.n(l),a=n(68195);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(u,e);var t,n,r,o,l=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(r);if(o){var n=d(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return y(this,e)});function u(){return s(this,u),l.apply(this,arguments)}return t=u,(n=[{key:"render",value:function(){return this.context.intl?i().createElement(a.FormattedDate,c({value:this.props.value},this.props.dateParams)):i().createElement("span",null,this.props.value&&this.props.value.toString()||"")}}])&&p(t.prototype,n),u}(i().Component);m(b,"propTypes",{value:o().object,dateParams:o().object}),m(b,"contextTypes",{intl:o().object}),m(b,"defaultProps",{value:new Date});const h=b;var v=n(15402),g=n(5346),w=g.Z,E=v.Z,O=h;const j={Message:g.Z,HTML:E,DateFormat:O}},88380:(e,t,n)=>{"use strict";n.d(t,{j:()=>E});var r=n(24852),o=n.n(r),l=n(71703),i=n(80416),a=(n(29944),n(51288)),u=n(95797),c=n(33528);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m,b,h,v=n(45697),g=n(85552),w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,e);var t,n,r,l,i=(r=a,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(r);if(l){var n=d(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return y(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={},t}return t=a,(n=[{key:"render",value:function(){var e,t,n,r=this;return this.props.layer?o().createElement("div",{className:"row menu-row"},o().createElement("span",{className:"pull-left .menu-row-button"},o().createElement("span",{className:"btn glyphicon menu-row-glyph "+(null!==(e=this.props.layer)&&void 0!==e&&e.visibility?"glyphicon-ok":"glyphicon-remove"),style:{color:null!==(t=this.props.layer)&&void 0!==t&&t.visibility?"limegreen":"red"},onClick:function(){var e,t;r.props.toggleLayer(null===(e=r.props.layer)||void 0===e?void 0:e.id,null===(t=r.props.layer)||void 0===t?void 0:t.visibility)}}),this.props.canEdit?o().createElement("span",{className:"btn glyphicon menu-row-glyph glyphicon-pencil",style:{color:"grey"},onClick:function(){r.props.setOpenMenuGroupId(null),r.props.setPermission({canEdit:!0}),r.props.svSelectLayer(r.props.layer),r.props.browseData(r.props.layer)}}):null,o().createElement("span",{className:"menu-row-text"},this.props.layer.title)),0===this.props.layer.opacity||this.props.layer.opacity?o().createElement("div",{className:"mapstore-slider dataset-transparency with-tooltip",onClick:function(e){e.stopPropagation()}},o().createElement(g,{step:1,start:100*(null===(n=this.props.layer)||void 0===n?void 0:n.opacity),range:{min:0,max:100},onChange:function(e){var t;r.props.setOpacity(null===(t=r.props.layer)||void 0===t?void 0:t.id,e)}})):null):o().createElement("div",{className:"row menu-row"},o().createElement("div",{className:"inline pull-left .menu-row-button"},o().createElement("div",{className:"h5 menu-row-text"},"No datasets here yet...")))}}])&&p(t.prototype,n),a}(o().Component);m=w,b="propTypes",h={layer:v.object,svSelectLayer:v.func,toggleLayer:v.func,setOpacity:v.func,setOpenMenuGroupId:v.func,canEdit:v.bool,editLayer:v.func,featureTypeSelected:v.func,browseData:v.func,setPermission:v.func},b in m?Object.defineProperty(m,b,{value:h,enumerable:!0,configurable:!0,writable:!0}):m[b]=h;var E=(0,l.connect)((function(e){var t,n;return{canEdit:!["theswamm.com"].map((function(t){var n;return!(null!=e&&null!==(n=e.gnsettings)&&void 0!==n&&n.geonodeUrl.includes(t))})).includes(!1)&&(null==e||null===(t=e.gnresource)||void 0===t||null===(n=t.permissions)||void 0===n?void 0:n.canEdit)}}),(function(e){return{toggleLayer:function(t,n){return e((0,i.He)(t,{visibility:!n}))},svSelectLayer:function(t){return e((0,a.svSelectLayer)(t))},setOpacity:function(t,n){return e((0,i.He)(t,{opacity:.01*parseFloat(n)}))},setOpenMenuGroupId:function(t){return e((0,a.setOpenMenuGroupId)(t))},featureTypeSelected:function(t,n){return e((0,u.gT)(t,n))},browseData:function(t){return e((0,i.Qr)(t))},setPermission:function(t){return e((0,c.HT)(t))}}}))(w)},51857:(e,t,n)=>{"use strict";n.d(t,{h:()=>O});var r=n(24852),o=n.n(r),l=n(71703),i=(n(72986),n(23885)),a=n(55033),u=n.n(a),c=n(51288),s=(n(29944),n(38167)),p=n(75875),f=n.n(p);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=n(45697),E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(c,e);var t,n,r,l,a=(r=c,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(r);if(l){var n=v(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return b(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),g(h(t=a.call(this,e)),"humanFileSize",(function(e){var t=Math.floor(Math.log(e)/Math.log(1024));return 1*(e/Math.pow(1024,t)).toFixed(2)+" "+["B","kB","MB","GB","TB"][t]})),g(h(t),"uploadFile",(function(e,n){console.log("uploadFile started",e),t.setState((function(t){return{itemList:t.uploaderFiles.map((function(t){return t.preview===e.preview?Object.assign(t,{status:"uploading"}):t}))}}));var r,o=new FormData;o.append(n,e),o.append("title",t.state.newTitle),r=t.props.serverUrl.includes("localhost")?"http://localhost:8081/":t.props.serverUrl,f().put("".concat(r,"anuga/api/").concat(t.props.projectId,"/elevation/upload/"),o,t.uploadConfig).then((function(n){console.log("upload response",n),t.setState((function(t){return{itemList:t.uploaderFiles.map((function(t){return t.preview===e.preview?Object.assign(t,{status:"complete"}):t}))}}))}))})),g(h(t),"uploadConfig",{onUploadProgress:function(e){return console.log("progressEvent: ",e),t.props.updateUploadStatus(Math.round(100*e.loaded/e.total)+"%"),Math.round(100*e.loaded/e.total)}}),t.state={uploaderFiles:[],newTitle:""},t}return t=c,(n=[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return this.props.visibleUploaderPanel?o().createElement("div",{className:"simple-view-panel uploader-panel"},o().createElement("div",{className:"row h4 legend-heading"},"Upload File",o().createElement("span",{className:"btn glyphicon glyphicon-remove legend-close",onClick:function(){return e.props.setVisibleUploaderPanel(!1)}})),this.state.uploaderFiles.length>0?o().createElement(i.Table,{bordered:!0,condensed:!0,hover:!0},o().createElement("thead",null,o().createElement("tr",null,o().createElement("th",{key:"hname"},"Title"),o().createElement("th",{key:"hname"},"Filename"),o().createElement("th",{key:"hsize"},"Filesize"),o().createElement("th",{key:"htype"},"Filetype"),o().createElement("th",{key:"hlast"},"Last Modified"),o().createElement("th",{key:"hstatus"},"Status"))),o().createElement("tbody",null,this.state.uploaderFiles&&this.state.uploaderFiles.map((function(t,n){return o().createElement("tr",{key:"row_"+n},o().createElement("td",{key:"title"},o().createElement("input",{id:"newTitle",key:"newTitle",className:"data-title-input",type:"text",value:e.state.newTitle,onChange:function(t){return e.setState({newTitle:t.target.value})}})),o().createElement("td",{key:"name"},t.name),o().createElement("td",{key:"size"},e.humanFileSize(t.size)),o().createElement("td",{key:"type"},t.type),o().createElement("td",{key:"last"},o().createElement(s.t6,{value:t.lastModifiedDate})),o().createElement("td",{key:"status"},"begin"===t.status?o().createElement(i.Button,{onClick:function(){return e.uploadFile(t,e.props.fileType||"file")},className:e.state.newTitle?"":"disabled",bsSize:"small",bsStyle:"success"},"Begin"):o().createElement("span",null,e.props.uploadStatus)))})))):o().createElement(u(),{key:"dropzone",rejectClassName:"alert-danger",className:"alert alert-info",onDrop:function(t){return e.setState({uploaderFiles:t.map((function(e){return Object.defineProperty(e,"status",{value:"begin",writable:!0}),e}))})},style:this.props.dropZoneStyle,activeStyle:this.props.dropZoneActiveStyle},o().createElement("div",{style:{display:"flex",alignItems:"center",width:"100%",height:"100%",justifyContent:"center"}},o().createElement("span",{style:{width:"100px",height:"100px",textAlign:"center"}},o().createElement(i.Glyphicon,{glyph:"upload"}),o().createElement("br",null),"Drag files or",o().createElement("br",null),"click here")))):null}}])&&d(t.prototype,n),c}(o().Component);g(E,"propTypes",{setVisibleUploaderPanel:w.func,updateUploaderFile:w.func,setUploaderFiles:w.func,uploaderFiles:w.object,updateUploadStatus:w.func,uploadStatus:w.string,visibleUploaderPanel:w.bool,serverUrl:w.string,projectId:w.number,newTitle:w.string,fileType:w.string});var O=(0,l.connect)((function(e){var t,n,r,o,l;return{visibleUploaderPanel:null==e||null===(t=e.simpleView)||void 0===t?void 0:t.visibleUploaderPanel,serverUrl:null==e||null===(n=e.gnsettings)||void 0===n?void 0:n.geonodeUrl,projectId:null==e||null===(r=e.anuga)||void 0===r||null===(o=r.project)||void 0===o?void 0:o.id,uploadStatus:null==e||null===(l=e.simpleView)||void 0===l?void 0:l.uploadStatus}}),(function(e){return{setVisibleUploaderPanel:function(t){return e((0,c.setVisibleUploaderPanel)(t))},updateUploadStatus:function(t){return e((0,c.updateUploadStatus)(t))}}}))(E)}}]);