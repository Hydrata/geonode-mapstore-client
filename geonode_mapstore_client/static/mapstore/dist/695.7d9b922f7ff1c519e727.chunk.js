(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[695],{98140:(e,t,r)=>{var o=r(67460),n=r(33716);e.exports=function(e,t,r){var l=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return n(r)&&(l="leading"in r?!!r.leading:l,i="trailing"in r?!!r.trailing:i),o(e,t,{leading:l,maxWait:t,trailing:i})}},4206:(e,t,r)=>{"use strict";r.d(t,{hZ:()=>o,pb:()=>n,kD:()=>l,DI:()=>i,IC:()=>a,Vw:()=>u,KD:()=>m,uj:()=>d,lo:()=>c,Yf:()=>f,fo:()=>v,PY:()=>_,bp:()=>g});var o="CHANGE_DRAWING_STATUS",n="DRAW:END_DRAWING",l="DRAW:SET_CURRENT_STYLE",i="DRAW:GEOMETRY_CHANGED",a="DRAW:DRAW_SUPPORT_STOPPED",s="DRAW:FEATURES_SELECTED",p="DRAW:DRAWING_FEATURES";function u(e,t,r,o,n){return{type:i,features:e,owner:t,enableEdit:r,textChanged:o,circleChanged:n}}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:s,features:e}}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:p,features:e}}function c(){return{type:a}}function f(e,t,r,n,l,i){return{type:o,status:e,method:t,owner:r,features:n,options:l,style:i}}function v(e,t){return{type:n,geometry:e,owner:t}}function _(e){return{type:l,currentStyle:e}}var g=function(e){return f("clean","",e,[],{})}},29386:(e,t,r)=>{"use strict";r.d(t,{F2:()=>o,fu:()=>n,NF:()=>l,WP:()=>i,_E:()=>a});var o="HIGHLIGHT_STATUS",n="UPDATE_HIGHLIGHTED",l="HIGHLIGHT:SET_HIGHLIGHT_FEATURES_PATH";function i(e){return{type:l,featuresPath:e}}function a(e,t){return{type:n,features:e,status:t}}},21914:(e,t,r)=>{"use strict";r.d(t,{XL:()=>n,km:()=>l,Ih:()=>i,Xw:()=>a,Pn:()=>s,DZ:()=>p,e8:()=>u,E0:()=>m,F9:()=>d,X_:()=>c,pb:()=>f,qb:()=>v,Re:()=>_,ih:()=>g,xy:()=>h,jL:()=>E,oz:()=>y,ph:()=>b,lF:()=>F,gG:()=>B,cb:()=>T,GI:()=>S,B1:()=>w,fv:()=>C,gc:()=>M,zX:()=>P,ZF:()=>I,Zb:()=>R,Fm:()=>O,sV:()=>A,Mn:()=>x,LU:()=>L,XP:()=>N,WU:()=>G,JB:()=>D,g:()=>k,ws:()=>U,HP:()=>H,aN:()=>j,Pg:()=>Y,u0:()=>z,TM:()=>V,PM:()=>q,lK:()=>K,sv:()=>J,MO:()=>X,oO:()=>Z,Mc:()=>$,Zw:()=>Q,RA:()=>ee,am:()=>te,ZM:()=>re,wm:()=>oe,Y$:()=>ne});var o=r(47310),n="LOAD_FEATURE_INFO",l="ERROR_FEATURE_INFO",i="EXCEPTIONS_FEATURE_INFO",a="CHANGE_MAPINFO_STATE",s="NEW_MAPINFO_REQUEST",p="PURGE_MAPINFO_RESULTS",u="CHANGE_MAPINFO_FORMAT",m="SHOW_MAPINFO_MARKER",d="HIDE_MAPINFO_MARKER",c="SHOW_REVERSE_GEOCODE",f="HIDE_REVERSE_GEOCODE",v="GET_VECTOR_INFO",_="NO_QUERYABLE_LAYERS",g="CLEAR_WARNING",h="FEATURE_INFO_CLICK",E="IDENTIFY:UPDATE_FEATURE_INFO_CLICK_POINT",y="IDENTIFY:TOGGLE_HIGHLIGHT_FEATURE",b="TOGGLE_MAPINFO_STATE",F="UPDATE_CENTER_TO_MARKER",B="IDENTIFY:CHANGE_PAGE",T="IDENTIFY:CLOSE_IDENTIFY",S="IDENTIFY:CHANGE_FORMAT",w="IDENTIFY:TOGGLE_SHOW_COORD_EDITOR",C="IDENTIFY:EDIT_LAYER_FEATURES",M="IDENTIFY:CURRENT_EDIT_FEATURE_QUERY",P="IDENTIFY:SET_MAP_TRIGGER",I="IDENTIFY:TOGGLE_EMPTY_MESSAGE_GFI",R="IDENTIFY:SET_SHOW_IN_MAP_POPUP";function O(e,t,r,o,l){return{type:n,data:t,reqId:e,requestParams:r,layerMetadata:o,layer:l}}function A(e,t,r,o){return{type:l,error:t,reqId:e,requestParams:r,layerMetadata:o}}function x(e,t,r,o){return{type:i,reqId:e,exceptions:t,requestParams:r,layerMetadata:o}}function L(){return{type:_}}function N(){return{type:g}}function G(e,t){return{type:s,reqId:e,request:t}}function D(e,t,r,o){return{type:v,layer:e,request:t,metadata:r,queryableLayers:o}}function k(){return{type:p}}function U(e){return{type:u,infoFormat:e}}function H(){return{type:m}}function j(){return{type:d}}function W(e){return{type:c,reverseGeocodeData:e.data}}function Y(e){return function(t){o.Z.reverseGeocode(e).then((function(e){t(W(e))})).catch((function(e){t(W(e))}))}}function z(){return{type:f}}function V(){return{type:b}}function q(e){return{type:F,status:e}}function K(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return{type:h,point:e,layer:t,filterNameList:r,overrideParams:o,itemId:n}}function J(e){return{type:E,point:e}}function X(e){return{type:y,enabled:e}}function Z(e){return{type:B,index:e}}var $=function(){return{type:T}},Q=function(e){return{type:S,format:e}},ee=function(e){return{type:w,showCoordinateEditor:e}},te=function(e){return{type:C,layer:e}},re=function(e){return{type:M,query:e}},oe=function(e){return{type:P,trigger:e}},ne=function(e){return{type:R,value:e}}},47310:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var o=r(75875),n=r.n(o),l=r(72500),i=r.n(l),a=r(27418),s=r.n(a),p={format:"json",bounded:0,polygon_geojson:1,priority:5};const u={geocode:function(e,t){var r=s()({q:e},p,t||{}),o=i().format({protocol:"https",host:"nominatim.openstreetmap.org",query:r});return n().get(o)},reverseGeocode:function(e,t){var r=s()({lat:e.lat,lon:e.lng},t||{},p),o=i().format({protocol:"https",host:"nominatim.openstreetmap.org/reverse",query:r});return n().get(o)}}},91561:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>We});var o=r(22843),n=r(52948);function l(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u={showOutlets:!0,showFootprints:!0,showWatersheds:!0,bmpTypes:[],groupProfiles:[],allBmps:[],statuses:[],targets:[],visibleBmpForm:!1,visibleTargetForm:!1,creatingNewBmp:!1,drawingBmpLayerName:!1,bmpFilterMode:"type",expandedFilter:null,priorities:[{id:0,label:"Not Assigned",value:0,visibility:!0},{id:1,label:"Critical",value:1,visibility:!0},{id:2,label:"Normal",value:2,visibility:!0},{id:3,label:"Low",value:3,visibility:!0}]},m=r(24852),d=r.n(m),c=r(71703),f=r(23885),v=r(51288),_=r(33528),g=r(21914),h=r(95797);function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:",";try{t=Math.abs(t),t=isNaN(t)?2:t;var n=e<0?"-":"",l=parseInt(e=Math.abs(Number(e)||0).toFixed(t)).toString(),i=l.length>3?l.length%3:0;return n+(i?l.substr(0,i)+o:"")+l.substr(i).replace(/(\d{3})(?=\d)/g,"$1"+o)+(t?r+Math.abs(e-l).toFixed(t).slice(2):"")}catch(e){console.log(e)}}var y=function(e){var t,r;return null!=e&&null!==(t=e.swamm)&&void 0!==t&&t.bmpTypes?null==e||null===(r=e.swamm)||void 0===r?void 0:r.bmpTypes.filter((function(e,t,r){return r.findIndex((function(t){return t.name===e.name}))===t})):[]},b=r(80416);function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var P=r(45697),I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(i,e);var t,r,o,n,l=(o=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=C(o);if(n){var r=C(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return S(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=l.call(this,e)).handleChange=t.handleChange.bind(w(t)),t.handleBmpChange=t.handleBmpChange.bind(w(t)),t.handleGroupProfileChange=t.handleGroupProfileChange.bind(w(t)),t.state={},t}return t=i,(r=[{key:"componentDidMount",value:function(){this.props.setOpenMenuGroupId(null),0!==Object.keys(this.props.storedBmpForm).length||this.props.creatingNewBmp||(this.props.purgeMapInfoResults(),this.props.setMenuGroup(null))}},{key:"componentDidUpdate",value:function(){0===Object.keys(this.props.storedBmpForm).length&&!this.props.creatingNewBmp&&this.props.updatingBmp&&this.props.makeExistingBmpForm(this.props.updatingBmp)}},{key:"render",value:function(){var e,t,r,o,n,l,i,a,s,p,u,m,c,v,_,g,h,E,y,b,F,B,T,S,w,C,M,P,I,R,O,A,x,L,N,G,D,k,U,H,j,W,Y,z,V,q,K,J,X,Z,$,Q,ee,te,re,oe,ne,le,ie,ae,se,pe,ue,me,de,ce,fe,ve,_e,ge,he,Ee,ye,be,Fe,Be,Te,Se,we,Ce,Me,Pe,Ie,Re,Oe,Ae,xe,Le,Ne,Ge,De,ke,Ue,He,je,We,Ye,ze,Ve,qe,Ke,Je,Xe,Ze,$e,Qe,et,tt,rt,ot,nt,lt,it,at,st,pt,ut,mt,dt,ct,ft,vt,_t,gt,ht,Et,yt,bt,Ft,Bt,Tt,St,wt,Ct,Mt,Pt,It,Rt,Ot,At,xt,Lt,Nt,Gt,Dt,kt,Ut,Ht,jt,Wt,Yt,zt,Vt,qt,Kt,Jt=this;return d().createElement(d().Fragment,null,d().createElement(f.Modal,{show:!0,onHide:function(){return Jt.props.hideBmpForm()},style:{marginTop:"100px",fontSize:"small"},dialogClassName:"swamm-big-modal",backdrop:!1,enforceFocus:!1,scrollable:"true"},d().createElement(f.Modal.Header,null,d().createElement(f.Modal.Title,null,this.props.storedBmpForm.id?"Edit BMP "+this.props.storedBmpForm.id+": "+(null===(e=this.props.storedBmpForm)||void 0===e||null===(t=e.type_data)||void 0===t?void 0:t.name):"Create a new BMP",d().createElement("span",{className:"btn glyphicon glyphicon-remove",style:{color:"red",position:"absolute",right:0},onClick:function(){Jt.props.clearBmpForm(),Jt.props.setComplexBmpForm(!1),Jt.refreshBmpLayers()}}))),d().createElement(f.Modal.Body,{style:{padding:0}},d().createElement(f.Col,{sm:6,style:{padding:"20px",textAlign:"left"}},this.props.storedBmpForm.bmpName?d().createElement("h5",null,this.props.storedBmpForm.bmpName):d().createElement("h5",null,"Select a BMP Type..."),d().createElement(f.Form,{horizontal:!0},this.props.requiresOutlet||this.props.complexBmpForm?d().createElement(f.FormGroup,{controlId:"outlet_fid",validationState:this.validateFid("outlet_fid"),bsSize:"small"},d().createElement(f.Col,{componentClass:f.ControlLabel,sm:3,style:{textAlign:"left"}},"Outlet Point:"),null!==(r=this.props.storedBmpForm)&&void 0!==r&&r.outlet_fid?d().createElement(f.Col,{sm:1},d().createElement(f.Button,{className:"pull-right",bsStyle:"info",style:{opacity:"0.7"},onClick:function(){var e,t,r,o;Jt.props.showLoadingBmp(!0),Jt.props.toggleLayer(null===(e=Jt.props.bmpOutletLayer)||void 0===e?void 0:e.id,!0),Jt.drawBmpStep1((null===(t=Jt.props)||void 0===t||null===(r=t.projectData)||void 0===r?void 0:r.code)+"_bmp_outlet",null===(o=Jt.props.storedBmpForm)||void 0===o?void 0:o.outlet_fid)}},"Edit")):d().createElement(f.Col,{sm:5},d().createElement(f.Button,{disabled:!(null!==(o=this.props.storedBmpForm)&&void 0!==o&&o.group_profile_id&&this.props.storedBmpForm.bmpName),bsStyle:null!==(n=this.props.storedBmpForm)&&void 0!==n&&n.group_profile_id&&this.props.storedBmpForm.bmpName?"success":"default",style:{opacity:"0.7"},onClick:function(){var e,t;Jt.props.showLoadingBmp(!0),Jt.props.toggleLayer(null===(e=Jt.props.bmpOutletLayer)||void 0===e?void 0:e.id,!0),Jt.drawBmpStep1((null===(t=Jt.props.projectData)||void 0===t?void 0:t.code)+"_bmp_outlet",null)}},"Locate Outlet"))):null,this.props.requiresFootprint||this.props.complexBmpForm?d().createElement(f.FormGroup,{controlId:"footprint_fid",validationState:this.validateFid("footprint_fid"),bsSize:"small"},d().createElement(f.Col,{componentClass:f.ControlLabel,sm:3,style:{textAlign:"left"}},"Footprint:"),null!==(l=this.props.storedBmpForm)&&void 0!==l&&l.footprint_fid?d().createElement(d().Fragment,null,d().createElement(f.Col,{sm:3},d().createElement(f.FormControl,{inline:"true",readOnly:"true",type:"string",value:null!==(i=this.props.storedBmpForm)&&void 0!==i&&i.calculated_footprint_area?(null===(a=this.props.storedBmpForm)||void 0===a||null===(s=a.calculated_footprint_area)||void 0===s?void 0:s.toFixed(2))+" acres":""})),d().createElement(f.Col,{sm:2},d().createElement(f.Button,{className:"pull-right",bsStyle:"info",style:{opacity:"0.7"},onClick:function(){var e,t,r,o;Jt.props.showLoadingBmp(!0),Jt.props.toggleLayer(null===(e=Jt.props.bmpFootprintLayer)||void 0===e?void 0:e.id,!0),Jt.drawBmpStep1((null===(t=Jt.props)||void 0===t||null===(r=t.projectData)||void 0===r?void 0:r.code)+"_bmp_footprint",null===(o=Jt.props.storedBmpForm)||void 0===o?void 0:o.footprint_fid)}},"Edit"))):d().createElement(d().Fragment,null,d().createElement(f.Col,{sm:5},d().createElement(f.Button,{disabled:!(null!==(p=this.props.storedBmpForm)&&void 0!==p&&p.group_profile_id&&this.props.storedBmpForm.bmpName),bsStyle:null!==(u=this.props.storedBmpForm)&&void 0!==u&&u.group_profile_id&&this.props.storedBmpForm.bmpName?"success":"default",style:{opacity:"0.7"},onClick:function(){var e,t,r;Jt.props.showLoadingBmp(!0),Jt.props.toggleLayer(null===(e=Jt.props.bmpFootprintLayer)||void 0===e?void 0:e.id,!0),Jt.drawBmpStep1((null===(t=Jt.props)||void 0===t||null===(r=t.projectData)||void 0===r?void 0:r.code)+"_bmp_footprint")}},"Draw footprint")))):null,!this.props.requiresWatershed&&!this.props.complexBmpForm||this.props.watershedIsFootprint?null:d().createElement(f.FormGroup,{controlId:"watershed_fid",validationState:this.validateFid("watershed_fid"),bsSize:"small"},d().createElement(f.Col,{componentClass:f.ControlLabel,sm:3,style:{textAlign:"left"}},"Watershed:"),null!==(m=this.props.storedBmpForm)&&void 0!==m&&m.watershed_fid?d().createElement(d().Fragment,null,d().createElement(f.Col,{sm:3},d().createElement(f.FormControl,{inline:"true",readOnly:"true",type:"string",value:null!==(c=this.props.storedBmpForm)&&void 0!==c&&c.calculated_watershed_area?(null===(v=this.props.storedBmpForm)||void 0===v||null===(_=v.calculated_watershed_area)||void 0===_?void 0:_.toFixed(2))+" acres":""})),d().createElement(f.Col,{sm:2},d().createElement(f.Button,{className:"pull-right",bsStyle:"info",style:{opacity:"0.7"},onClick:function(){var e,t,r,o;Jt.props.showLoadingBmp(!0),Jt.props.toggleLayer(null===(e=Jt.props.bmpWatershedLayer)||void 0===e?void 0:e.id,!0),Jt.drawBmpStep1((null===(t=Jt.props)||void 0===t||null===(r=t.projectData)||void 0===r?void 0:r.code)+"_bmp_watershed",null===(o=Jt.props.storedBmpForm)||void 0===o?void 0:o.watershed_fid)}},"Edit"))):d().createElement(d().Fragment,null,d().createElement(f.Col,{sm:5},d().createElement(f.Button,{disabled:!(null!==(g=this.props.storedBmpForm)&&void 0!==g&&g.group_profile_id&&this.props.storedBmpForm.bmpName),bsStyle:null!==(h=this.props.storedBmpForm)&&void 0!==h&&h.group_profile_id&&this.props.storedBmpForm.bmpName?"success":"default",style:{opacity:"0.7"},onClick:function(){var e,t,r;Jt.props.showLoadingBmp(!0),Jt.props.toggleLayer(null===(e=Jt.props.bmpWatershedLayer)||void 0===e?void 0:e.id,!0),Jt.drawBmpStep1((null===(t=Jt.props)||void 0===t||null===(r=t.projectData)||void 0===r?void 0:r.code)+"_bmp_watershed")}},"Draw watershed")))),d().createElement(f.FormGroup,{controlId:"field_identifier",bsSize:"small"},d().createElement(f.Col,{componentClass:f.ControlLabel,sm:3,style:{textAlign:"left",marginTop:"3px"}},"Field Identifier:"),d().createElement(f.Col,{sm:5},d().createElement(f.FormControl,{inline:"true",type:"text",name:"field_identifier",value:null===(E=this.props.storedBmpForm)||void 0===E?void 0:E.field_identifier,onChange:this.handleChange,placeholder:"optional"}),d().createElement(f.FormControl.Feedback,null))),d().createElement(f.FormGroup,{controlId:"owner_identifier",bsSize:"small"},d().createElement(f.Col,{componentClass:f.ControlLabel,sm:3,style:{textAlign:"left"}},"Owner details:"),d().createElement(f.Col,{sm:5},d().createElement(f.FormControl,{inline:"true",type:"text",name:"owner_identifier",value:null===(y=this.props.storedBmpForm)||void 0===y?void 0:y.owner_identifier,onChange:this.handleChange,placeholder:"optional"}),d().createElement(f.FormControl.Feedback,null))),this.props.complexBmpForm?d().createElement(d().Fragment,null,d().createElement(f.FormGroup,{controlId:"formControlsSelectGroupProfile",bsSize:"small"},d().createElement(f.Col,{componentClass:f.ControlLabel,sm:3,style:{textAlign:"left"}},"Organization"),d().createElement(f.Col,{sm:8},d().createElement(f.FormControl,{inline:"true",componentClass:"select",name:"group_profile",value:null===(b=this.props.storedBmpForm)||void 0===b||null===(F=b.group_profile)||void 0===F?void 0:F.pk,onChange:this.handleGroupProfileChange,placeholder:null===(B=this.props.storedBmpForm)||void 0===B||null===(T=B.group_profile)||void 0===T?void 0:T.title},this.props.allowedGroupProfiles.map((function(e){return d().createElement("option",{key:e.pk,value:null==e?void 0:e.pk},e.title)}))),d().createElement(f.FormControl.Feedback,null))),d().createElement(f.FormGroup,{controlId:"formControlsSelectStatus",bsSize:"small"},d().createElement(f.Col,{componentClass:f.ControlLabel,sm:3,style:{textAlign:"left"}},"BMP Status"),d().createElement(f.Col,{sm:8},d().createElement(f.FormControl,{inline:"true",componentClass:"select",name:"status",value:null===(S=this.props.storedBmpForm)||void 0===S?void 0:S.status,onChange:this.handleChange},d().createElement("option",{key:"Unknown",value:"Unknown"},"Unknown"),this.props.statuses.filter((function(e){return"Unknown"!==e.name})).map((function(e){return d().createElement("option",{key:e.name,value:e.name},e.name)}))),d().createElement(f.FormControl.Feedback,null))),d().createElement(f.FormGroup,{controlId:"formControlsSelectPriority",bsSize:"small"},d().createElement(f.Col,{componentClass:f.ControlLabel,sm:3,style:{textAlign:"left"}},"BMP Priority"),d().createElement(f.Col,{sm:8},d().createElement(f.FormControl,{inline:"true",componentClass:"select",name:"priority",value:null===(w=this.props.storedBmpForm)||void 0===w||null===(C=w.priority)||void 0===C?void 0:C.id,onChange:this.handleChange},this.props.priorities.map((function(e){return d().createElement("option",{key:e.id,value:null==e?void 0:e.value},e.label)}))),d().createElement(f.FormControl.Feedback,null))),d().createElement(f.FormGroup,{controlId:"n_surface_red_percent",validationState:this.validateRatio("n_surface_red_percent"),bsSize:"small"},d().createElement(f.Col,{componentClass:f.ControlLabel,sm:6},"Surface Nitrogen Reduction Percentage"),d().createElement(f.Col,{sm:5},d().createElement(f.FormControl,{inline:"true",type:"number",step:.01,precision:2,name:"override_n_surface_red_percent",value:null===(M=this.props.storedBmpForm)||void 0===M?void 0:M.override_n_surface_red_percent,onChange:this.handleChange}),d().createElement(f.FormControl.Feedback,null))),d().createElement(f.FormGroup,{controlId:"p_surface_red_percent",validationState:this.validateRatio("p_surface_red_percent"),bsSize:"small"},d().createElement(f.Col,{componentClass:f.ControlLabel,sm:6},"Surface Phosphorus Reduction Percentage"),d().createElement(f.Col,{sm:5},d().createElement(f.FormControl,{inline:"true",type:"number",step:.01,precision:2,name:"override_p_surface_red_percent",value:null===(P=this.props.storedBmpForm)||void 0===P?void 0:P.override_p_surface_red_percent,onChange:this.handleChange}),d().createElement(f.FormControl.Feedback,null))),d().createElement(f.FormGroup,{controlId:"s_surface_red_percent",validationState:this.validateRatio("s_surface_red_percent"),bsSize:"small"},d().createElement(f.Col,{componentClass:f.ControlLabel,sm:6},"Surface Sediment Reduction Percentage"),d().createElement(f.Col,{sm:5},d().createElement(f.FormControl,{inline:"true",type:"number",step:.01,precision:2,name:"override_s_surface_red_percent",value:null===(I=this.props.storedBmpForm)||void 0===I?void 0:I.override_s_surface_red_percent,onChange:this.handleChange}),d().createElement(f.FormControl.Feedback,null))),d().createElement(f.FormGroup,{controlId:"n_tiled_red_percent",validationState:this.validateRatio("n_tiled_red_percent"),bsSize:"small"},d().createElement(f.Col,{componentClass:f.ControlLabel,sm:6},"Tiled Nitrogen Reduction Percentage"),d().createElement(f.Col,{sm:5},d().createElement(f.FormControl,{inline:"true",type:"number",step:.01,precision:2,name:"override_n_tiled_red_percent",value:null===(R=this.props.storedBmpForm)||void 0===R?void 0:R.override_n_tiled_red_percent,onChange:this.handleChange}),d().createElement(f.FormControl.Feedback,null))),d().createElement(f.FormGroup,{controlId:"p_tiled_red_percent",validationState:this.validateRatio("p_tiled_red_percent"),bsSize:"small"},d().createElement(f.Col,{componentClass:f.ControlLabel,sm:6},"Tiled Phospohorus Reduction Percentage"),d().createElement(f.Col,{sm:5},d().createElement(f.FormControl,{inline:"true",type:"number",step:.01,precision:2,name:"override_p_tiled_red_percent",value:null===(O=this.props.storedBmpForm)||void 0===O?void 0:O.override_p_tiled_red_percent,onChange:this.handleChange}),d().createElement(f.FormControl.Feedback,null))),d().createElement(f.FormGroup,{controlId:"n_erosion_red_percent",validationState:this.validateRatio("n_erosion_red_percent"),bsSize:"small"},d().createElement(f.Col,{componentClass:f.ControlLabel,sm:6},"Erosion Nitrogen Reduction Percentage"),d().createElement(f.Col,{sm:5},d().createElement(f.FormControl,{inline:"true",type:"number",step:.01,precision:2,name:"override_n_erosion_red_percent",value:null===(A=this.props.storedBmpForm)||void 0===A?void 0:A.override_n_erosion_red_percent,onChange:this.handleChange}),d().createElement(f.FormControl.Feedback,null))),d().createElement(f.FormGroup,{controlId:"p_erosion_red_percent",validationState:this.validateRatio("p_erosion_red_percent"),bsSize:"small"},d().createElement(f.Col,{componentClass:f.ControlLabel,sm:6},"Erosion Phospohorus Reduction Percentage"),d().createElement(f.Col,{sm:5},d().createElement(f.FormControl,{inline:"true",type:"number",step:.01,precision:2,name:"override_p_erosion_red_percent",value:null===(x=this.props.storedBmpForm)||void 0===x?void 0:x.override_p_erosion_red_percent,onChange:this.handleChange}),d().createElement(f.FormControl.Feedback,null))),d().createElement(f.FormGroup,{controlId:"s_erosion_red_percent",validationState:this.validateRatio("s_erosion_red_percent"),bsSize:"small"},d().createElement(f.Col,{componentClass:f.ControlLabel,sm:6},"Erosion Sediment Reduction Percentage"),d().createElement(f.Col,{sm:5},d().createElement(f.FormControl,{inline:"true",type:"number",step:.01,precision:2,name:"override_s_erosion_red_percent",value:null===(L=this.props.storedBmpForm)||void 0===L?void 0:L.override_s_erosion_red_percent,onChange:this.handleChange}),d().createElement(f.FormControl.Feedback,null))),d().createElement(f.FormGroup,{controlId:"cost_base",validationState:this.validateCost("cost_base"),bsSize:"small"},d().createElement(f.Col,{componentClass:f.ControlLabel,sm:6},"Base Cost ($)"),d().createElement(f.Col,{sm:5},d().createElement(f.FormControl,{inline:"true",type:"number",step:.01,precision:2,name:"override_cost_base",value:null===(N=this.props.storedBmpForm)||void 0===N?void 0:N.override_cost_base,onChange:this.handleChange}),d().createElement(f.FormControl.Feedback,null))),d().createElement(f.FormGroup,{controlId:"cost_rate_per_footprint_area",validationState:this.validateCost("cost_rate_per_footprint_area"),bsSize:"small"},d().createElement(f.Col,{componentClass:f.ControlLabel,sm:6},"Footprint Cost ($/acre)"),d().createElement(f.Col,{sm:5},d().createElement(f.FormControl,{inline:"true",type:"number",step:.01,precision:2,name:"override_cost_rate_per_footprint_area",value:null===(G=this.props.storedBmpForm)||void 0===G?void 0:G.override_cost_rate_per_footprint_area,onChange:this.handleChange}),d().createElement(f.FormControl.Feedback,null))),d().createElement(f.FormGroup,{controlId:"cost_rate_per_watershed_area",validationState:this.validateCost("cost_rate_per_watershed_area"),bsSize:"small"},d().createElement(f.Col,{componentClass:f.ControlLabel,sm:6},"Watershed Cost ($/acre)"),d().createElement(f.Col,{sm:5},d().createElement(f.FormControl,{inline:"true",type:"number",step:.01,precision:2,name:"override_cost_rate_per_watershed_area",value:null===(D=this.props.storedBmpForm)||void 0===D?void 0:D.override_cost_rate_per_watershed_area,onChange:this.handleChange}),d().createElement(f.FormControl.Feedback,null)))):null,d().createElement(f.FormGroup,{controlId:"notes",bsSize:"small"},d().createElement(f.Col,{componentClass:f.ControlLabel,sm:3,style:{padding:"20px",textAlign:"left"}},"Notes"),d().createElement(f.Col,{sm:12},d().createElement(f.FormControl,{inline:"true",type:"textarea",componentClass:"textarea",name:"notes",value:null===(k=this.props.storedBmpForm)||void 0===k?void 0:k.notes,onChange:this.handleChange}),d().createElement(f.FormControl.Feedback,null))))),d().createElement(f.Col,{sm:6,style:{padding:"10px"}},null===(U=this.props.storedBmpForm)||void 0===U||!U.id||this.props.changingBmpType?d().createElement(d().Fragment,null,this.props.changingBmpType?d().createElement(f.Button,{bsStyle:"success",bsSize:"small",style:{opacity:"0.7",position:"absolute",bottom:"20px",right:"220px",minWidth:"80px"},onClick:function(){return Jt.props.setChangingBmpType(!1)}},"Accept"):null,d().createElement(f.Form,{horizontal:!0},d().createElement(f.FormGroup,{controlId:"formControlsSelectBmp",bsSize:"small"},d().createElement(f.Col,{componentClass:f.ControlLabel,sm:12,style:{textAlign:"left"}},d().createElement(f.FormControl,{componentClass:"radio",style:{border:"none",boxShadow:"none"},type:"radio",name:"bmpName",onChange:this.handleBmpChange},null===(H=this.props.bmpTypeGroups)||void 0===H?void 0:H.map((function(e){return d().createElement(f.Row,{className:"well",style:{textAlign:"left",marginLeft:0,marginBottom:"3px",padding:"3px"}},d().createElement("div",{style:{marginLeft:"15px"}},e[1]),Jt.props.bmpTypes.filter((function(t){return t.group_name===e[0]})).map((function(e){return d().createElement(f.Col,{sm:6},d().createElement(f.Radio,{name:"bmpName",value:e.name,style:{textAlign:"left"},inline:!0},e.name))})))}))))))):this.props.complexBmpForm?d().createElement(d().Fragment,null,d().createElement(f.Table,{bordered:!0,condensed:!0,hover:!0,className:"text-right",style:{tableLayout:"fixed"}},d().createElement("thead",null,d().createElement("tr",null,d().createElement("th",{style:{width:"30%"}},"Results"),d().createElement("th",{style:{width:"13%"}},"Surface"),d().createElement("th",{style:{width:"13%"}},"Tiled"),d().createElement("th",{style:{width:"13%","word-break":"break-word"}},"Gully Lake Streambank"),d().createElement("th",{style:{width:"10%"}},"Total"),this.props.watershedIsFootprint?d().createElement(d().Fragment,null,d().createElement("th",{style:{width:"10%"}},"Per Acre"),d().createElement("th",{style:{width:"11%"}})):d().createElement("th",{style:{width:"11%"}}))),d().createElement("tbody",null,d().createElement("tr",{style:{borderTop:"4px solid lightgrey"}},d().createElement("td",null,"Nitrogen load previous: "),d().createElement("td",null,null===(j=this.props.storedBmpForm)||void 0===j||null===(W=j.surface_previous_n_load)||void 0===W?void 0:W.toFixed(0)),d().createElement("td",null,null===(Y=this.props.storedBmpForm)||void 0===Y||null===(z=Y.tiled_previous_n_load)||void 0===z?void 0:z.toFixed(0)),d().createElement("td",null,parseFloat(null===(V=this.props.storedBmpForm)||void 0===V||null===(q=V.erosion_previous_n_load)||void 0===q?void 0:q.toPrecision(3))),d().createElement("td",null,null===(K=this.props.storedBmpForm)||void 0===K||null===(J=K.total_previous_n_load)||void 0===J?void 0:J.toFixed(0)),this.props.watershedIsFootprint?d().createElement("td",null,((null===(X=this.props.storedBmpForm)||void 0===X?void 0:X.total_previous_n_load)/(null===(Z=this.props.storedBmpForm)||void 0===Z?void 0:Z.calculated_footprint_area)).toFixed(1)):null,d().createElement("td",{className:"text-left"},"lbs/year")),d().createElement("tr",null,d().createElement("td",null,"Nitrogen load reduction: "),d().createElement("td",null,null===($=this.props.storedBmpForm)||void 0===$||null===(Q=$.surface_n_load_reduction)||void 0===Q?void 0:Q.toFixed(0)),d().createElement("td",null,null===(ee=this.props.storedBmpForm)||void 0===ee||null===(te=ee.tiled_n_load_reduction)||void 0===te?void 0:te.toFixed(0)),d().createElement("td",null,parseFloat(null===(re=this.props.storedBmpForm)||void 0===re||null===(oe=re.erosion_n_load_reduction)||void 0===oe?void 0:oe.toPrecision(3))),d().createElement("td",null,null===(ne=this.props.storedBmpForm)||void 0===ne||null===(le=ne.total_n_load_reduction)||void 0===le?void 0:le.toFixed(0)),this.props.watershedIsFootprint?d().createElement("td",null,((null===(ie=this.props.storedBmpForm)||void 0===ie?void 0:ie.total_n_load_reduction)/(null===(ae=this.props.storedBmpForm)||void 0===ae?void 0:ae.calculated_footprint_area)).toFixed(1)):null,d().createElement("td",{className:"text-left"},"lbs/year")),d().createElement("tr",null,d().createElement("td",null,"Nitrogen load new: "),d().createElement("td",null,null===(se=this.props.storedBmpForm)||void 0===se||null===(pe=se.surface_new_n_load)||void 0===pe?void 0:pe.toFixed(0)),d().createElement("td",null,null===(ue=this.props.storedBmpForm)||void 0===ue||null===(me=ue.tiled_new_n_load)||void 0===me?void 0:me.toFixed(0)),d().createElement("td",null,parseFloat(null===(de=this.props.storedBmpForm)||void 0===de||null===(ce=de.erosion_new_n_load)||void 0===ce?void 0:ce.toPrecision(3))),d().createElement("td",null,null===(fe=this.props.storedBmpForm)||void 0===fe||null===(ve=fe.total_new_n_load)||void 0===ve?void 0:ve.toFixed(0)),this.props.watershedIsFootprint?d().createElement("td",null,((null===(_e=this.props.storedBmpForm)||void 0===_e?void 0:_e.total_new_n_load)/(null===(ge=this.props.storedBmpForm)||void 0===ge?void 0:ge.calculated_footprint_area)).toFixed(1)):null,d().createElement("td",{className:"text-left"},"lbs/year")),d().createElement("tr",{style:{borderTop:"4px solid lightgrey"}},d().createElement("td",null,"Phosphorus load previous: "),d().createElement("td",null,null===(he=this.props.storedBmpForm)||void 0===he||null===(Ee=he.surface_previous_p_load)||void 0===Ee?void 0:Ee.toFixed(0)),d().createElement("td",null,null===(ye=this.props.storedBmpForm)||void 0===ye||null===(be=ye.tiled_previous_p_load)||void 0===be?void 0:be.toFixed(0)),d().createElement("td",null,parseFloat(null===(Fe=this.props.storedBmpForm)||void 0===Fe||null===(Be=Fe.erosion_previous_p_load)||void 0===Be?void 0:Be.toPrecision(3))),d().createElement("td",null,null===(Te=this.props.storedBmpForm)||void 0===Te||null===(Se=Te.total_previous_p_load)||void 0===Se?void 0:Se.toFixed(0)),this.props.watershedIsFootprint?d().createElement("td",null,((null===(we=this.props.storedBmpForm)||void 0===we?void 0:we.total_previous_p_load)/(null===(Ce=this.props.storedBmpForm)||void 0===Ce?void 0:Ce.calculated_footprint_area)).toFixed(1)):null,d().createElement("td",{className:"text-left"},"lbs/year")),d().createElement("tr",null,d().createElement("td",null,"Phosphorus load reduction: "),d().createElement("td",null,null===(Me=this.props.storedBmpForm)||void 0===Me||null===(Pe=Me.surface_p_load_reduction)||void 0===Pe?void 0:Pe.toFixed(0)),d().createElement("td",null,null===(Ie=this.props.storedBmpForm)||void 0===Ie||null===(Re=Ie.tiled_p_load_reduction)||void 0===Re?void 0:Re.toFixed(0)),d().createElement("td",null,parseFloat(null===(Oe=this.props.storedBmpForm)||void 0===Oe||null===(Ae=Oe.erosion_p_load_reduction)||void 0===Ae?void 0:Ae.toPrecision(3))),d().createElement("td",null,null===(xe=this.props.storedBmpForm)||void 0===xe||null===(Le=xe.total_p_load_reduction)||void 0===Le?void 0:Le.toFixed(0)),this.props.watershedIsFootprint?d().createElement("td",null,((null===(Ne=this.props.storedBmpForm)||void 0===Ne?void 0:Ne.total_p_load_reduction)/(null===(Ge=this.props.storedBmpForm)||void 0===Ge?void 0:Ge.calculated_footprint_area)).toFixed(1)):null,d().createElement("td",{className:"text-left"},"lbs/year")),d().createElement("tr",null,d().createElement("td",null,"Phosphorus load new: "),d().createElement("td",null,null===(De=this.props.storedBmpForm)||void 0===De||null===(ke=De.surface_new_p_load)||void 0===ke?void 0:ke.toFixed(0)),d().createElement("td",null,null===(Ue=this.props.storedBmpForm)||void 0===Ue||null===(He=Ue.tiled_new_p_load)||void 0===He?void 0:He.toFixed(0)),d().createElement("td",null,parseFloat(null===(je=this.props.storedBmpForm)||void 0===je||null===(We=je.erosion_new_p_load)||void 0===We?void 0:We.toPrecision(3))),d().createElement("td",null,null===(Ye=this.props.storedBmpForm)||void 0===Ye||null===(ze=Ye.total_new_p_load)||void 0===ze?void 0:ze.toFixed(0)),this.props.watershedIsFootprint?d().createElement("td",null,((null===(Ve=this.props.storedBmpForm)||void 0===Ve?void 0:Ve.total_new_p_load)/(null===(qe=this.props.storedBmpForm)||void 0===qe?void 0:qe.calculated_footprint_area)).toFixed(1)):null,d().createElement("td",{className:"text-left"},"lbs/year")),d().createElement("tr",{style:{borderTop:"4px solid lightgrey"}},d().createElement("td",null,"Sediment load previous: "),d().createElement("td",null,null===(Ke=this.props.storedBmpForm)||void 0===Ke||null===(Je=Ke.surface_previous_s_load)||void 0===Je?void 0:Je.toFixed(0)),d().createElement("td",null,null===(Xe=this.props.storedBmpForm)||void 0===Xe||null===(Ze=Xe.tiled_previous_s_load)||void 0===Ze?void 0:Ze.toFixed(0)),d().createElement("td",null,parseFloat(null===($e=this.props.storedBmpForm)||void 0===$e||null===(Qe=$e.erosion_previous_s_load)||void 0===Qe?void 0:Qe.toPrecision(3))),d().createElement("td",null,null===(et=this.props.storedBmpForm)||void 0===et||null===(tt=et.total_previous_s_load)||void 0===tt?void 0:tt.toFixed(0)),this.props.watershedIsFootprint?d().createElement("td",null,((null===(rt=this.props.storedBmpForm)||void 0===rt?void 0:rt.total_previous_s_load)/(null===(ot=this.props.storedBmpForm)||void 0===ot?void 0:ot.calculated_footprint_area)).toFixed(1)):null,d().createElement("td",{className:"text-left"},"tons/year")),d().createElement("tr",null,d().createElement("td",null,"Sediment load reduction: "),d().createElement("td",null,null===(nt=this.props.storedBmpForm)||void 0===nt||null===(lt=nt.surface_s_load_reduction)||void 0===lt?void 0:lt.toFixed(0)),d().createElement("td",null,null===(it=this.props.storedBmpForm)||void 0===it||null===(at=it.tiled_s_load_reduction)||void 0===at?void 0:at.toFixed(0)),d().createElement("td",null,parseFloat(null===(st=this.props.storedBmpForm)||void 0===st||null===(pt=st.erosion_s_load_reduction)||void 0===pt?void 0:pt.toPrecision(3))),d().createElement("td",null,null===(ut=this.props.storedBmpForm)||void 0===ut||null===(mt=ut.total_s_load_reduction)||void 0===mt?void 0:mt.toFixed(0)),this.props.watershedIsFootprint?d().createElement("td",null,((null===(dt=this.props.storedBmpForm)||void 0===dt?void 0:dt.total_s_load_reduction)/(null===(ct=this.props.storedBmpForm)||void 0===ct?void 0:ct.calculated_footprint_area)).toFixed(1)):null,d().createElement("td",{className:"text-left"},"tons/year")),d().createElement("tr",{style:{borderBottom:"4px solid lightgrey"}},d().createElement("td",null,"Sediment load new: "),d().createElement("td",null,null===(ft=this.props.storedBmpForm)||void 0===ft||null===(vt=ft.surface_new_s_load)||void 0===vt?void 0:vt.toFixed(0)),d().createElement("td",null,null===(_t=this.props.storedBmpForm)||void 0===_t||null===(gt=_t.tiled_new_s_load)||void 0===gt?void 0:gt.toFixed(0)),d().createElement("td",null,parseFloat(null===(ht=this.props.storedBmpForm)||void 0===ht||null===(Et=ht.erosion_new_s_load)||void 0===Et?void 0:Et.toPrecision(3))),d().createElement("td",null,null===(yt=this.props.storedBmpForm)||void 0===yt||null===(bt=yt.total_new_s_load)||void 0===bt?void 0:bt.toFixed(0)),this.props.watershedIsFootprint?d().createElement("td",null,((null===(Ft=this.props.storedBmpForm)||void 0===Ft?void 0:Ft.total_new_s_load)/(null===(Bt=this.props.storedBmpForm)||void 0===Bt?void 0:Bt.calculated_footprint_area)).toFixed(1)):null,d().createElement("td",{className:"text-left"},"tons/year")),d().createElement("tr",null,d().createElement("td",null,"Potential Incentive Payment:"),null!==(Tt=this.props.storedBmpForm)&&void 0!==Tt&&Tt.calculated_total_cost?d().createElement("td",null,"$",Number(null===(St=this.props.storedBmpForm)||void 0===St||null===(wt=St.calculated_total_cost)||void 0===wt?void 0:wt.toFixed(0)).toLocaleString()):d().createElement("td",null),d().createElement("td",null)),d().createElement("tr",null,d().createElement("td",null,"Nitrogen reduction value: "),null!==(Ct=this.props.storedBmpForm)&&void 0!==Ct&&Ct.total_cost_per_lbs_n_reduced?d().createElement("td",null,Number(null===(Mt=this.props.storedBmpForm)||void 0===Mt||null===(Pt=Mt.total_cost_per_lbs_n_reduced)||void 0===Pt?void 0:Pt.toFixed(0)).toLocaleString()):d().createElement("td",null),d().createElement("td",{className:"text-left"},"$/lb/year")),d().createElement("tr",null,d().createElement("td",null,"Phosphorus reduction value: "),null!==(It=this.props.storedBmpForm)&&void 0!==It&&It.total_cost_per_lbs_p_reduced?d().createElement("td",null,Number(null===(Rt=this.props.storedBmpForm)||void 0===Rt||null===(Ot=Rt.total_cost_per_lbs_p_reduced)||void 0===Ot?void 0:Ot.toFixed(0)).toLocaleString()):d().createElement("td",null),d().createElement("td",{className:"text-left"},"$/lb/year")),d().createElement("tr",null,d().createElement("td",null,"Sediment reduction value: "),null!==(At=this.props.storedBmpForm)&&void 0!==At&&At.total_cost_per_ton_s_reduced?d().createElement("td",null,Number(null===(xt=this.props.storedBmpForm)||void 0===xt||null===(Lt=xt.total_cost_per_ton_s_reduced)||void 0===Lt?void 0:Lt.toFixed(0)).toLocaleString()):d().createElement("td",null),d().createElement("td",{className:"text-left"},"$/ton/year")))),null!==(Nt=this.props.storedBmpForm)&&void 0!==Nt&&Nt.created_by?d().createElement("p",null,"Created by: ",null===(Gt=this.props.storedBmpForm)||void 0===Gt?void 0:Gt.created_by," on ",new Date(null===(Dt=this.props.storedBmpForm)||void 0===Dt?void 0:Dt.created_at).toLocaleString()):null,null!==(kt=this.props.storedBmpForm)&&void 0!==kt&&kt.updated_by?d().createElement("p",null,"Updated by: ",null===(Ut=this.props.storedBmpForm)||void 0===Ut?void 0:Ut.updated_by," on ",new Date(null===(Ht=this.props.storedBmpForm)||void 0===Ht?void 0:Ht.updated_at).toLocaleString()):null):d().createElement(f.Table,{bordered:!0,condensed:!0,hover:!0,className:"text-right"},d().createElement("thead",null,d().createElement("tr",null,d().createElement("th",null,"Results"),d().createElement("th",{style:{width:"100px"}},"Total"),d().createElement("th",null))),d().createElement("tbody",null,d().createElement("tr",null,d().createElement("td",null,"Nitrogen load reduction: "),d().createElement("td",null,null===(jt=this.props.storedBmpForm)||void 0===jt||null===(Wt=jt.total_n_load_reduction)||void 0===Wt?void 0:Wt.toFixed(0)),d().createElement("td",{className:"text-left"},"lbs/year")),d().createElement("tr",null,d().createElement("td",null,"Phosphorus load reduction: "),d().createElement("td",null,null===(Yt=this.props.storedBmpForm)||void 0===Yt||null===(zt=Yt.total_p_load_reduction)||void 0===zt?void 0:zt.toFixed(0)),d().createElement("td",{className:"text-left"},"lbs/year")),d().createElement("tr",null,d().createElement("td",null,"Sediment load reduction: "),d().createElement("td",null,null===(Vt=this.props.storedBmpForm)||void 0===Vt||null===(qt=Vt.total_s_load_reduction)||void 0===qt?void 0:qt.toFixed(0)),d().createElement("td",{className:"text-left"},"tons/year")))))),d().createElement(f.Modal.Footer,{style:{marginTop:"78vh",borderTop:"none"}},null!==(Kt=this.props.storedBmpForm)&&void 0!==Kt&&Kt.id?d().createElement(d().Fragment,null,d().createElement(f.Button,{bsStyle:"danger",bsSize:"small",style:{position:"absolute",bottom:"20px",right:"620px",minWidth:"80px"},onClick:function(){var e;window.confirm("This action can not be undone. Are you sure?")&&Jt.props.deleteBmp(Jt.props.mapId,null===(e=Jt.props.storedBmpForm)||void 0===e?void 0:e.id)}},"Delete"),d().createElement(f.Button,{bsStyle:"warning",bsSize:"small",style:{position:"absolute",bottom:"20px",right:"520px",minWidth:"80px"},onClick:function(){window.confirm("This will remove any custom data you have entered for the current BMP Type. Are you sure?")&&Jt.props.setChangingBmpType(!0)}},"Edit Type"),d().createElement(f.Button,{bsStyle:"info",bsSize:"small",style:{position:"absolute",bottom:"20px",right:"320px",minWidth:"80px"},onClick:function(){var e;Jt.props.downloadBmpReport(null===(e=Jt.props.storedBmpForm)||void 0===e?void 0:e.id)}},"Make PDF"),this.props.complexBmpForm?d().createElement(f.Button,{bsStyle:"info",bsSize:"small",style:{position:"absolute",bottom:"20px",right:"420px",minWidth:"80px"},onClick:function(){return Jt.props.setComplexBmpForm(!1)}},"Simple"):d().createElement(f.Button,{bsStyle:"info",bsSize:"small",style:{position:"absolute",bottom:"20px",right:"420px",minWidth:"80px"},onClick:function(){return Jt.props.setComplexBmpForm(!0)}},"Advanced")):null,d().createElement(f.Button,{bsStyle:"info",bsSize:"small",className:"".concat(this.props.standard_url?"":"disabled"),style:{position:"absolute",bottom:"20px",right:"220px",width:"80px",height:"30px",fontSize:"x-small"},onClick:function(){return window.open(Jt.props.standard_url,"_blank")}},"View Standard"),d().createElement(f.Button,{bsStyle:"info",bsSize:"small",style:{position:"absolute",bottom:"20px",right:"120px",minWidth:"80px"},onClick:function(){Jt.props.hideBmpForm(),Jt.refreshBmpLayers()}},"View Map"),d().createElement(f.Button,{bsStyle:"success",bsSize:"small",className:this.props.hasGeometry?"":"disabled",style:{position:"absolute",bottom:"20px",right:"20px",minWidth:"80px"},onClick:function(){Jt.props.submitBmpForm(Jt.props.storedBmpForm,Jt.props.mapId)}},"Save"))))}},{key:"validateRatio",value:function(e){var t=this.props.storedBmpForm[e];return t<1&&t>0?"success":1===t?"warning":t>1||t<0?"error":null}},{key:"validateCost",value:function(e){var t=this.props.storedBmpForm[e];return t>=0?"success":t<0?"error":null}},{key:"validateFid",value:function(e){var t,r,o=this.props.storedBmpForm[e];return o>=0&&(t=o,!isNaN(t)&&(0|(r=parseFloat(t)))===r)?"success":o<0?"error":null}},{key:"handleChange",value:function(e){var t=e.target.name,r=e.target.value,o=M({},t,r);"number"===e.target.type&&(o=M({},t,parseFloat(r))),this.props.updateBmpForm(o)}},{key:"handleGroupProfileChange",value:function(e){var t=e.target.name,r=JSON.parse(e.target.value),o=M({},t,this.props.groupProfiles.filter((function(e){return(null==e?void 0:e.pk)===r}))[0]);this.props.updateBmpForm(o)}},{key:"handleBmpChange",value:function(e){var t=e.target.value,r=this.props.bmpTypes.filter((function(e){return e.name===t}))[0];this.props.makeDefaultsBmpForm(r)}},{key:"drawBmpStep1",value:function(e,t){this.refreshBmpLayers(),this.props.hideBmpForm();var r=this.props.layers.flat.filter((function(t){return null==t?void 0:t.name.includes(e)}))[0];console.log("drawBmpStep1 targetLayer",r),console.log("drawBmpStep1 layerName",e),console.log("drawBmpStep1 featureId",t),this.props.setDrawingBmpLayerName(e),t?this.props.setEditingBmpFeatureId(t):this.props.clearEditingBmpFeatureId(),this.props.toggleLayer(r.id,!0),this.props.setLayer(null==r?void 0:r.id),this.props.featureTypeSelected("http://localhost:8080/geoserver/wfs",null==r?void 0:r.name),console.log("drawBmpStep1 finished")}},{key:"refreshBmpLayers",value:function(){this.props.refreshLayerVersion(this.props.bmpOutletLayer.id),this.props.refreshLayerVersion(this.props.bmpFootprintLayer.id),this.props.refreshLayerVersion(this.props.bmpWatershedLayer.id)}}])&&B(t.prototype,r),i}(d().Component);M(I,"propTypes",{bmpTypeId:P.number,bmpTypes:P.array,bmpTypeGroups:P.array,statuses:P.array,setMenuGroup:P.func,priorities:P.array,setOpenMenuGroupId:P.func,creatingNewBmp:P.bool,updatingBmp:P.object,hideLoadingBmp:P.func,showLoadingBmp:P.func,hideBmpForm:P.func,submitBmpForm:P.func,showSubmitBmpFormSuccess:P.bool,showSubmitBmpFormError:P.bool,storeBmpForm:P.func,complexBmpForm:P.bool,setComplexBmpForm:P.func,thisBmpType:P.object,newBmpForm:P.object,storedBmpForm:P.object,clearBmpForm:P.func,groupProfiles:P.array,allowedGroupProfiles:P.array,defaultGroupProfile:P.string,makeDefaultsBmpForm:P.func,makeExistingBmpForm:P.func,updateBmpForm:P.func,setLayer:P.func,featureTypeSelected:P.func,toggleEditMode:P.func,createNewFeatures:P.func,createQuery:P.func,startDrawingFeature:P.func,saveChanges:P.func,setDrawingBmpLayerName:P.func,setEditingBmpFeatureId:P.func,clearEditingBmpFeatureId:P.func,layers:P.object,query:P.func,mapId:P.number,purgeMapInfoResults:P.func,bmpUniqueNames:P.array,setHighlightFeaturesPath:P.func,projectData:P.object,toggleLayer:P.func,bmpOutletLayer:P.object,bmpFootprintLayer:P.object,bmpWatershedLayer:P.object,hasGeometry:P.bool,requiresOutlet:P.bool,requiresFootprint:P.bool,requiresWatershed:P.bool,watershedIsFootprint:P.bool,changingBmpType:P.bool,deleteBmp:P.func,setChangingBmpType:P.func,cppe_url:P.string,standard_url:P.string,ned_url:P.string,infosheet_url:P.string,downloadBmpReport:P.func,refreshLayerVersion:P.func}),M(I,"defaultProps",{});var R=(0,c.connect)((function(e){var t,r,o,n,l,i,a,s,p,u,m,d,c,f,v,_,g,h,E,b,F,B,T,S,w,C,M,P,I,R,O,A,x,L,N,G,D,k,U,H,j,W,Y,z,V,q,K,J,X,Z,$,Q,ee,te,re=null==e||null===(t=e.security)||void 0===t||null===(r=t.user)||void 0===r||null===(o=r.info)||void 0===o?void 0:o.groups.filter((function(e){return!["anonymous","registered-members","admin","swamm-users","illinois-pork-producers"].includes(e)})),oe=null==e||null===(n=e.swamm)||void 0===n?void 0:n.groupProfiles.filter((function(e){return re.includes(e.slug)}));return{mapId:null==e||null===(l=e.swamm)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.base_map,projectData:null==e||null===(a=e.swamm)||void 0===a?void 0:a.data,bmpUniqueNames:y(e).map((function(e){return e.name})),bmpTypes:null==e||null===(s=e.swamm)||void 0===s?void 0:s.bmpTypes,bmpTypeGroups:(null==e||null===(p=e.swamm)||void 0===p?void 0:p.bmpTypeGroups)||[],allowedGroupProfiles:oe,defaultGroupProfile:re[0],statuses:null==e||null===(u=e.swamm)||void 0===u?void 0:u.statuses,priorities:null==e||null===(m=e.swamm)||void 0===m?void 0:m.priorities,thisBmpType:null==e||null===(d=e.swamm)||void 0===d?void 0:d.bmpTypes.filter((function(t){var r;return t.id===(null==e||null===(r=e.swamm)||void 0===r?void 0:r.BmpFormBmpTypeId)}))[0],storedBmpForm:(null==e||null===(c=e.swamm)||void 0===c?void 0:c.storedBmpForm)||{},complexBmpForm:(null==e||null===(f=e.swamm)||void 0===f?void 0:f.complexBmpForm)||!1,bmpOutletLayer:null==e||null===(v=e.layers)||void 0===v||null===(_=v.flat)||void 0===_?void 0:_.filter((function(t){var r,o;return t.name.includes((null==e||null===(r=e.swamm)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.code)+"_bmp_outlet")}))[0],bmpFootprintLayer:null==e||null===(g=e.layers)||void 0===g||null===(h=g.flat)||void 0===h?void 0:h.filter((function(t){var r,o;return t.name.includes((null==e||null===(r=e.swamm)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.code)+"_bmp_footprint")}))[0],bmpWatershedLayer:null==e||null===(E=e.layers)||void 0===E||null===(b=E.flat)||void 0===b?void 0:b.filter((function(t){var r,o;return t.name.includes((null==e||null===(r=e.swamm)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.code)+"_bmp_watershed")}))[0],hasGeometry:(null==e||null===(F=e.swamm)||void 0===F||null===(B=F.storedBmpForm)||void 0===B?void 0:B.outlet_fid)||(null==e||null===(T=e.swamm)||void 0===T||null===(S=T.storedBmpForm)||void 0===S?void 0:S.footprint_fid)||(null==e||null===(w=e.swamm)||void 0===w||null===(C=w.storedBmpForm)||void 0===C?void 0:C.watershed_fid),requiresOutlet:null==e||null===(M=e.swamm)||void 0===M||null===(P=M.storedBmpForm)||void 0===P||null===(I=P.type_data)||void 0===I?void 0:I.requires_outlet,requiresFootprint:null==e||null===(R=e.swamm)||void 0===R||null===(O=R.storedBmpForm)||void 0===O||null===(A=O.type_data)||void 0===A?void 0:A.requires_footprint,requiresWatershed:null==e||null===(x=e.swamm)||void 0===x||null===(L=x.storedBmpForm)||void 0===L||null===(N=L.type_data)||void 0===N?void 0:N.requires_watershed,watershedIsFootprint:null==e||null===(G=e.swamm)||void 0===G||null===(D=G.storedBmpForm)||void 0===D||null===(k=D.type_data)||void 0===k?void 0:k.watershed_is_footprint,cppe_url:null==e||null===(U=e.swamm)||void 0===U||null===(H=U.storedBmpForm)||void 0===H||null===(j=H.type_data)||void 0===j?void 0:j.cppe_url,standard_url:null==e||null===(W=e.swamm)||void 0===W||null===(Y=W.storedBmpForm)||void 0===Y||null===(z=Y.type_data)||void 0===z?void 0:z.standard_url,ned_url:null==e||null===(V=e.swamm)||void 0===V||null===(q=V.storedBmpForm)||void 0===q||null===(K=q.type_data)||void 0===K?void 0:K.ned_url,infosheet_url:null==e||null===(J=e.swamm)||void 0===J||null===(X=J.storedBmpForm)||void 0===X||null===(Z=X.type_data)||void 0===Z?void 0:Z.infosheet_url,creatingNewBmp:null==e||null===($=e.swamm)||void 0===$?void 0:$.creatingNewBmp,changingBmpType:null==e||null===(Q=e.swamm)||void 0===Q?void 0:Q.changingBmpType,updatingBmp:null==e||null===(ee=e.swamm)||void 0===ee?void 0:ee.updatingBmp,groupProfiles:null==e||null===(te=e.swamm)||void 0===te?void 0:te.groupProfiles,layers:null==e?void 0:e.layers,query:null==e?void 0:e.query}}),(function(e){return{setMenuGroup:function(t){return e((0,n.setMenuGroup)(t))},setOpenMenuGroupId:function(t){return e((0,v.setOpenMenuGroupId)(t))},hideBmpForm:function(){return e((0,n.hideBmpForm)())},hideLoadingBmp:function(){return e((0,n.hideLoadingBmp)())},showLoadingBmp:function(){return e((0,n.showLoadingBmp)())},submitBmpForm:function(t,r){return e((0,n.submitBmpForm)(t,r))},updateBmpForm:function(t){return e((0,n.updateBmpForm)(t))},clearBmpForm:function(){return e((0,n.clearBmpForm)())},deleteBmp:function(t,r){return e((0,n.deleteBmp)(t,r))},makeDefaultsBmpForm:function(t){return e((0,n.makeDefaultsBmpForm)(t))},setChangingBmpType:function(t){return e((0,n.setChangingBmpType)(t))},setComplexBmpForm:function(t){return e((0,n.setComplexBmpForm)(t))},setLayer:function(t){return e((0,_.uF)(t))},setDrawingBmpLayerName:function(t){return e((0,n.setDrawingBmpLayerName)(t))},setEditingBmpFeatureId:function(t){return e((0,n.setEditingBmpFeatureId)(t))},clearEditingBmpFeatureId:function(){return e((0,n.clearEditingBmpFeatureId)())},featureTypeSelected:function(t,r){return e((0,h.gT)(t,r))},toggleEditMode:function(){return e((0,_.lg)())},toggleLayer:function(t,r){return e((0,b.He)(t,{visibility:r}))},createNewFeatures:function(t){return e((0,_.lx)(t))},createQuery:function(t,r){return e((0,h.rP)(t,r))},query:function(t,r,o,n){return e((0,h.IO)(t,r,o,n))},startDrawingFeature:function(){return e((0,_.kA)())},saveChanges:function(){return e((0,_.$S)())},purgeMapInfoResults:function(){return e((0,g.g)())},makeExistingBmpForm:function(t){return e((0,n.makeExistingBmpForm)(t))},downloadBmpReport:function(t){return e((0,n.downloadBmpReport)(t))},refreshLayerVersion:function(t,r){return e((0,b.ct)(t,r))}}}))(I);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?N(e):t}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(19970);var k=r(45697),U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(i,e);var t,r,o,n,l=(o=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=G(o);if(n){var r=G(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return L(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=l.call(this,e)).handleChange=t.handleChange.bind(N(t)),t.handleMultiSelection=t.handleMultiSelection.bind(N(t)),t.state={},t}return t=i,(r=[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e,t,r,o,n,l,i,a,s,p,u,m,c,v=this;return d().createElement(d().Fragment,null,d().createElement(f.Modal,{show:!0,onHide:function(){return v.props.hideTargetForm()},style:{marginTop:"50px",fontSize:"small"},dialogClassName:"swamm-big-modal",backdrop:!1,enforceFocus:!1,scrollable:"true"},d().createElement(f.Modal.Header,null,d().createElement(f.Modal.Title,null,this.props.targetForm.id?"Edit Target: "+(null===(e=this.props.targetForm)||void 0===e?void 0:e.name):"Create a new Target")),d().createElement(f.Modal.Body,{style:{padding:"20px"}},d().createElement(f.Grid,null,d().createElement(f.Col,{sm:6},d().createElement(f.Row,{className:"well",style:{paddingTop:"10px",margin:"5px"}},d().createElement("h4",{style:{paddingTop:"5px",paddingBottom:"20px",margin:"0",textAlign:"center",fontSize:"14px"}},"Target Details:"),d().createElement(f.FormGroup,{controlId:"target_name",bsSize:"small"},d().createElement(f.Row,null,d().createElement(f.Col,{componentClass:f.ControlLabel,sm:3,style:{marginTop:"3px"}},"Name:"),d().createElement(f.Col,{sm:9},d().createElement(f.FormControl,{inline:"true",type:"text",name:"name",value:null===(t=this.props.targetForm)||void 0===t?void 0:t.name,onChange:this.handleChange}),d().createElement(f.FormControl.Feedback,null)))),d().createElement(f.FormGroup,{controlId:"target_description",bsSize:"small"},d().createElement(f.Row,null,d().createElement(f.Col,{componentClass:f.ControlLabel,sm:3,style:{marginTop:"3px"}},"Description:"),d().createElement(f.Col,{sm:9},d().createElement(f.FormControl,{componentClass:"textarea",inline:"true",type:"textarea",name:"description",value:null===(r=this.props.targetForm)||void 0===r?void 0:r.description,onChange:this.handleChange}),d().createElement(f.FormControl.Feedback,null))))),d().createElement(f.Row,{className:"well",style:{paddingTop:"10px",margin:"5px"}},d().createElement("h4",{style:{paddingTop:"5px",paddingBottom:"20px",margin:"0",textAlign:"center",fontSize:"14px"}},"Establish Targets:"),d().createElement(f.FormGroup,{controlId:"target_percent_n_reduction",validationState:this.validatePercentage("target_percent_n_reduction"),bsSize:"small"},d().createElement(f.Row,null,d().createElement(f.Col,{componentClass:f.ControlLabel,sm:3,style:{marginTop:"3px"}},"Nitrogen:"),d().createElement(f.Col,{sm:5},d().createElement(f.FormControl,{inline:"true",type:"number",step:1,precision:0,name:"target_percent_n_reduction",value:100*(null===(o=this.props.targetForm)||void 0===o?void 0:o.target_percent_n_reduction),onChange:this.handleChange}),d().createElement(f.FormControl.Feedback,null)),d().createElement(f.Col,{sm:3,style:{marginTop:"3px"}},"% reduction"))),d().createElement(f.FormGroup,{controlId:"target_percent_p_reduction",validationState:this.validatePercentage("target_percent_p_reduction"),bsSize:"small"},d().createElement(f.Row,null,d().createElement(f.Col,{componentClass:f.ControlLabel,sm:3,style:{marginTop:"3px"}},"Phosphorus:"),d().createElement(f.Col,{sm:5},d().createElement(f.FormControl,{inline:"true",type:"number",step:1,precision:0,name:"target_percent_p_reduction",value:100*(null===(n=this.props.targetForm)||void 0===n?void 0:n.target_percent_p_reduction),onChange:this.handleChange}),d().createElement(f.FormControl.Feedback,null)),d().createElement(f.Col,{sm:3,style:{marginTop:"3px"}},"% reduction"))),d().createElement(f.FormGroup,{controlId:"target_percent_s_reduction",validationState:this.validatePercentage("target_percent_s_reduction"),bsSize:"small"},d().createElement(f.Row,null,d().createElement(f.Col,{componentClass:f.ControlLabel,sm:3,style:{marginTop:"3px"}},"Sediment:"),d().createElement(f.Col,{sm:5},d().createElement(f.FormControl,{inline:"true",type:"number",step:1,precision:0,name:"target_percent_s_reduction",value:100*(null===(l=this.props.targetForm)||void 0===l?void 0:l.target_percent_s_reduction),onChange:this.handleChange}),d().createElement(f.FormControl.Feedback,null)),d().createElement(f.Col,{sm:3,style:{marginTop:"3px"}},"% reduction"))))),d().createElement(f.Col,{sm:6},d().createElement(f.Row,{className:"well",style:{paddingTop:"10px",margin:"5px"}},d().createElement("h4",{style:{paddingTop:"5px",paddingBottom:"20px",margin:"0",textAlign:"center",fontSize:"14px"}},"Include BMPs from these organizations:"),d().createElement(f.FormGroup,{controlId:"target_groupProfiles",bsSize:"small"},d().createElement(f.Row,null,d().createElement(f.FormControl,{componentClass:"select",multiple:!0,inline:"true",name:"group_profiles",value:null===(i=this.props.targetForm)||void 0===i?void 0:i.group_profiles,onChange:this.handleMultiSelection,style:{height:"200px"}},null===(a=this.props.groupProfiles)||void 0===a?void 0:a.map((function(e){return d().createElement("option",{value:e.pk},e.title)}))),d().createElement(f.FormControl.Feedback,null)))),d().createElement(f.Row,{className:"well",style:{paddingTop:"10px",margin:"5px"}},d().createElement("h4",{style:{paddingTop:"5px",paddingBottom:"20px",margin:"0",textAlign:"center",fontSize:"14px"}},"Include these BMP types:"),d().createElement(f.FormGroup,{controlId:"target_bmp_types",bsSize:"small"},d().createElement(f.Row,null,d().createElement(f.FormControl,{componentClass:"select",multiple:!0,inline:"true",name:"bmp_types",value:null===(s=this.props.targetForm)||void 0===s?void 0:s.bmp_types,onChange:this.handleMultiSelection,style:{height:"200px"}},null===(p=this.props.bmpTypes)||void 0===p?void 0:p.map((function(e){return d().createElement("option",{value:e.id},e.name)}))),d().createElement(f.FormControl.Feedback,null)))),d().createElement(f.Row,{className:"well",style:{paddingTop:"10px",margin:"5px"}},d().createElement("h4",{style:{paddingTop:"5px",paddingBottom:"20px",margin:"0",textAlign:"center",fontSize:"14px"}},"Include these BMP statuses:"),d().createElement(f.FormGroup,{controlId:"target_bmp_statuses",bsSize:"small"},d().createElement(f.Row,null,d().createElement(f.FormControl,{componentClass:"select",multiple:!0,inline:"true",name:"statuses",value:null===(u=this.props.targetForm)||void 0===u?void 0:u.statuses,onChange:this.handleMultiSelection,style:{height:"200px"}},null===(m=this.props.statuses)||void 0===m?void 0:m.map((function(e){return d().createElement("option",{value:e.name},e.name)}))),d().createElement(f.FormControl.Feedback,null))))))),d().createElement(f.Modal.Footer,{style:{minHeight:"100px"}},null!==(c=this.props.targetForm)&&void 0!==c&&c.id?d().createElement(f.Button,{bsStyle:"danger",bsSize:"small",style:{opacity:"0.7",position:"absolute",bottom:"20px",right:"220px",minWidth:"80px"},onClick:function(){var e;window.confirm("This action can not be undone. Are you sure?")&&v.props.deleteTarget(v.props.mapId,null===(e=v.props.targetForm)||void 0===e?void 0:e.id)}},"Delete Target"):null,d().createElement(f.Button,{bsStyle:"danger",bsSize:"small",style:{opacity:"0.7",position:"absolute",bottom:"20px",right:"120px",minWidth:"80px"},onClick:function(){return v.props.hideTargetForm()}},"Close"),d().createElement(f.Button,{bsStyle:"success",bsSize:"small",style:{opacity:"0.7",position:"absolute",bottom:"20px",right:"20px",minWidth:"80px"},onClick:function(){v.props.submitTargetForm(v.props.targetForm,v.props.mapId)}},"Save Target"))))}},{key:"handleMultiSelection",value:function(e){var t=D({},e.target.name,Array.from(e.target.selectedOptions,(function(e){return e.value})));this.props.updateTargetForm(t)}},{key:"handleChange",value:function(e){var t=e.target.name,r=e.target.value,o=D({},t,r);"number"===e.target.type&&e.target.name.includes("target_percent_")&&(o=D({},t,parseFloat(r)/100)),this.props.updateTargetForm(o)}},{key:"validatePercentage",value:function(e){var t=this.props.targetForm[e];return t<1&&t>0?"success":1===t?"warning":t>1||t<0?"error":null}}])&&A(t.prototype,r),i}(d().Component);D(U,"propTypes",{mapId:k.number,targetForm:k.object,hideTargetForm:k.func,deleteTarget:k.func,clearTargetForm:k.func,submitTargetForm:k.func,updateTargetForm:k.func,groupProfiles:k.array,bmpTypes:k.array,statuses:k.array}),D(U,"defaultProps",{});var H=(0,c.connect)((function(e){var t,r,o,n,l,i;return{mapId:null==e||null===(t=e.swamm)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.base_map,bmpTypes:null==e||null===(o=e.swamm)||void 0===o?void 0:o.bmpTypes,statuses:null==e||null===(n=e.swamm)||void 0===n?void 0:n.statuses,targetForm:(null==e||null===(l=e.swamm)||void 0===l?void 0:l.targetForm)||{},groupProfiles:null==e||null===(i=e.swamm)||void 0===i?void 0:i.groupProfiles}}),(function(e){return{hideTargetForm:function(){return e((0,n.hideTargetForm)())},deleteTarget:function(t,r){return e((0,n.deleteTarget)(t,r))},clearTargetForm:function(){return e((0,n.clearTargetForm)())},submitTargetForm:function(t,r){return e((0,n.submitTargetForm)(t,r))},updateTargetForm:function(t){return e((0,n.updateTargetForm)(t))}}}))(U);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function z(e,t,r){return t&&Y(e.prototype,t),r&&Y(e,r),e}function V(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=Z(e);if(t){var n=Z(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return J(this,r)}}function J(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?X(e):t}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Q=r(45697),ee=r(48465),te=ee.Cell,re=ee.BarChart,oe=ee.Bar,ne=ee.PieChart,le=ee.Pie,ie=ee.ResponsiveContainer,ae=ee.XAxis,se=ee.YAxis,pe=ee.Legend,ue=(ee.Tooltip,100),me=function(e){V(r,e);var t=K(r);function r(e){var o;return W(this,r),$(X(o=t.call(this,e)),"pollutants",[{name:"Phosphorus",load_red_total_key:"total_p_load_reduction",units:"lbs/year",initial:"p"},{name:"Nitrogen",load_red_total_key:"total_n_load_reduction",units:"lbs/year",initial:"n"},{name:"Sediment",load_red_total_key:"total_s_load_reduction",units:"tons/year",initial:"s"}]),$(X(o),"colours",["#0088FE","#00C49F","#FFBB28","#FF8042","#39CCCC","#7FDBFF","#0074D9","#001f3f","#FFDC00","#01FF70","#2ECC40","#3D9970","#DDDDDD","#AAAAAA","#B10DC9","#F012BE","#85144b","#FF4136","#FF851B","#FFFFFF"]),o.state={},o}return z(r,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e,t,r,o,n,l,i,a,s,p,u,m,c,v,_,g,h,y,b,F,B,T,S,w,C,M,P,I,R,O,A,x,L,N,G,D,k,U,H,j,W=this;return d().createElement(f.Modal,{show:!0,onHide:function(){return console.log("onHide")},style:{marginTop:"50px",width:"100%"},dialogClassName:"swamm-big-modal"},d().createElement(f.Modal.Header,null,d().createElement(f.Modal.Title,{style:{textAlign:"center"}},d().createElement("h4",{style:{padding:"0",margin:"0"}},null===(e=this.props.selectedTarget)||void 0===e?void 0:e.name))),d().createElement(f.Modal.Body,null,d().createElement(f.Grid,null,d().createElement(f.Col,{sm:2},d().createElement(f.Row,{className:"well",style:{paddingTop:"0"}},d().createElement("h4",{style:{paddingTop:"5px",paddingBottom:"10px",margin:"0",textAlign:"center",fontSize:"14px"}},"Targets"),this.props.targets.map((function(e){return d().createElement("div",{className:"row-no-gutters"},d().createElement(f.Button,{bsStyle:"success",bsSize:"xsmall",block:!0,style:{backgroundColor:e.id===W.props.selectedTargetId?"rgba(39,202,59,1)":"rgba(39,202,59,0.6)",marginTop:"4px",fontSize:"x-small"},onClick:function(){return W.props.selectSwammTargetId(null==e?void 0:e.id)}},null==e?void 0:e.name))})),d().createElement("div",{className:"row-no-gutters"},d().createElement(f.Button,{bsStyle:"info",bsSize:"xsmall",block:!0,style:{marginTop:"4px",fontSize:"x-small"},onClick:function(){return W.props.showTargetForm()}},"New Target")),d().createElement("div",{className:"row-no-gutters"},d().createElement(f.Button,{bsStyle:"info",bsSize:"xsmall",block:!0,style:{marginTop:"4px",fontSize:"x-small"},onClick:function(){return W.props.showTargetForm(W.props.selectedTarget)}},"Edit Target"))),d().createElement(f.Row,{className:"well",style:{paddingTop:"20px"}},d().createElement("h4",{style:{paddingTop:"5px",paddingBottom:"10px",margin:"0",textAlign:"center",fontSize:"14px"}},"Sort Data By:"),d().createElement("div",{className:"row-no-gutters"},d().createElement(f.Button,{bsStyle:"success",bsSize:"xsmall",block:!0,style:{backgroundColor:"type"===this.props.bmpFilterMode?"rgba(39,202,59,1)":"rgba(39,202,59,0.6)",marginTop:"4px",fontSize:"x-small"},onClick:function(){return W.props.setBmpFilterMode("type")}},"BMP Type")),d().createElement("div",{className:"row-no-gutters"},d().createElement(f.Button,{bsStyle:"success",bsSize:"xsmall",block:!0,style:{backgroundColor:"status"===this.props.bmpFilterMode?"rgba(39,202,59,1)":"rgba(39,202,59,0.6)",marginTop:"4px",fontSize:"x-small"},onClick:function(){return W.props.setBmpFilterMode("status")}},"BMP Status")),d().createElement("div",{className:"row-no-gutters"},d().createElement(f.Button,{bsStyle:"success",bsSize:"xsmall",block:!0,style:{backgroundColor:"group_profile"===this.props.bmpFilterMode?"rgba(39,202,59,1)":"rgba(39,202,59,0.6)",marginTop:"4px",fontSize:"x-small"},onClick:function(){return W.props.setBmpFilterMode("group_profile")}},"Organization")))),this.props.selectedTargetId?d().createElement(f.Col,{sm:8,style:{marginLeft:20,marginRight:-20}},this.pollutants.map((function(e){var t,r,o,n,l,i,a,s,p,u;return d().createElement(f.Row,{className:"well"},d().createElement(f.Col,{sm:3,style:{padding:0}},d().createElement("h4",{style:{textAlign:"center",fontSize:"14px",paddingLeft:"5px",paddingTop:"5px",paddingBottom:"10px",margin:0}},e.name),d().createElement("div",{style:{width:150,height:ue/1.2}},d().createElement(ie,null,d().createElement(ne,{width:150,height:150,style:{paddingTop:"10px"}},d().createElement(le,{data:null===(t=W.props.selectedTarget)||void 0===t||null===(r=t.speedDialData)||void 0===r?void 0:r["percent".concat(e.name,"Target")],dataKey:"value",cx:66.92307692307692,cy:50,innerRadius:ue/3,outerRadius:50,fill:"#82ca9d",startAngle:180,endAngle:0,isAnimationActive:!1},d().createElement(te,{fill:"#27ca3b",cornerRadius:5}),d().createElement(te,{fill:"#97b3c3",cornerRadius:1})),d().createElement("text",{x:66.92307692307692,y:45,textAnchor:"middle",fontSize:20,dominantBaseline:"middle",className:"progress-label"},null===(o=W.props.selectedTarget)||void 0===o||null===(n=o.speedDialData["percent".concat(e.name,"Target")])||void 0===n||null===(l=n[0])||void 0===l?void 0:l.value.toFixed(1),"%"))))),d().createElement(f.Col,{sm:8},d().createElement("h4",{style:{textAlign:"center",fontSize:"14px",paddingTop:"5px",paddingBottom:"10px",margin:0}},"Load reductions (",e.units,"):"),d().createElement("div",{style:{width:"100%",height:100}},d().createElement(ie,null,d().createElement(re,{width:600,height:80,data:[{barOne:null===(i=W.props.selectedTarget)||void 0===i||null===(a=i.barChartData)||void 0===a?void 0:a[W.props.bmpFilterMode]}],margin:{top:0,right:0,left:10,bottom:10},layout:"vertical",maxBarSize:100},null===(s=W.props.selectedTarget)||void 0===s||null===(p=s.barChartData)||void 0===p||null===(u=p[W.props.bmpFilterMode])||void 0===u?void 0:u.map((function(t,r){var o="barOne.".concat(r,".").concat(e.load_red_total_key);return d().createElement(oe,{key:"".concat(t[W.props.bmpFilterMode]," + ").concat(e.initial),stackId:"a",dataKey:o,fill:W.colours[r],name:null==t?void 0:t.label})})),d().createElement(ae,{type:"number"}),d().createElement(se,{type:"category",hide:!0}),"p"===e.initial?d().createElement(pe,{layout:"vertical",verticalAlign:"top",align:"right",wrapperStyle:{right:"-300px",top:"-40px"}}):null)))))})),d().createElement(f.Row,null,d().createElement(f.Table,{bordered:!0,condensed:!0,hover:!0,className:"text-right"},d().createElement("thead",null,d().createElement("tr",null,d().createElement("th",null,"Summary"),d().createElement("th",{style:{textAlign:"center"}},"Phosphorus"),d().createElement("th",{style:{textAlign:"center"}},"Nitrogen"),d().createElement("th",{style:{textAlign:"center"}},"Sediment"),d().createElement("th",null))),d().createElement("tbody",null,d().createElement("tr",null,d().createElement("td",null,"Current total untreated pollutant volume:"),d().createElement("td",null,E(null===(t=this.props.selectedTarget)||void 0===t||null===(r=t.speedDialData)||void 0===r?void 0:r.currentPhosphorusLoad,0)),d().createElement("td",null,E(null===(o=this.props.selectedTarget)||void 0===o||null===(n=o.speedDialData)||void 0===n?void 0:n.currentNitrogenLoad,0)),d().createElement("td",null,E(null===(l=this.props.selectedTarget)||void 0===l||null===(i=l.speedDialData)||void 0===i?void 0:i.currentSedimentLoad,0)),d().createElement("td",{className:"text-left"},"units/year")),d().createElement("tr",null,d().createElement("td",null,"Selected target reduction percentage:"),d().createElement("td",null,100*(null===(a=this.props.selectedTarget)||void 0===a||null===(s=a.speedDialData)||void 0===s?void 0:s.percentPhosphorusReductionTarget)),d().createElement("td",null,100*(null===(p=this.props.selectedTarget)||void 0===p||null===(u=p.speedDialData)||void 0===u?void 0:u.percentNitrogenReductionTarget)),d().createElement("td",null,100*(null===(m=this.props.selectedTarget)||void 0===m||null===(c=m.speedDialData)||void 0===c?void 0:c.percentSedimentReductionTarget)),d().createElement("td",{className:"text-left"},"% of total")),d().createElement("tr",null,d().createElement("td",null,"Selected target load reduction required:"),d().createElement("td",null,E(null===(v=this.props.selectedTarget)||void 0===v||null===(_=v.speedDialData)||void 0===_?void 0:_.targetPhosphorusLoadReductionRequired,0)),d().createElement("td",null,E(null===(g=this.props.selectedTarget)||void 0===g||null===(h=g.speedDialData)||void 0===h?void 0:h.targetNitrogenLoadReductionRequired,0)),d().createElement("td",null,E(null===(y=this.props.selectedTarget)||void 0===y||null===(b=y.speedDialData)||void 0===b?void 0:b.targetSedimentLoadReductionRequired,0)),d().createElement("td",{className:"text-left"},"units/year")),d().createElement("tr",null,d().createElement("td",null,"Actual pollutant reduction from BMPs:"),d().createElement("td",null,E(null===(F=this.props.selectedTarget)||void 0===F||null===(B=F.speedDialData)||void 0===B?void 0:B.totalBmpPhosphorusReduction,0)),d().createElement("td",null,E(null===(T=this.props.selectedTarget)||void 0===T||null===(S=T.speedDialData)||void 0===S?void 0:S.totalBmpNitrogenReduction,0)),d().createElement("td",null,E(null===(w=this.props.selectedTarget)||void 0===w||null===(C=w.speedDialData)||void 0===C?void 0:C.totalBmpSedimentReduction,0)),d().createElement("td",{className:"text-left"},"units/year")),d().createElement("tr",null,d().createElement("td",null,"Percentage of target achieved:"),d().createElement("td",null,null===(M=this.props.selectedTarget)||void 0===M||null===(P=M.speedDialData)||void 0===P||null===(I=P.percentPhosphorusTarget)||void 0===I||null===(R=I[0])||void 0===R||null===(O=R.value)||void 0===O?void 0:O.toFixed(1)),d().createElement("td",null,null===(A=this.props.selectedTarget)||void 0===A||null===(x=A.speedDialData)||void 0===x||null===(L=x.percentNitrogenTarget)||void 0===L||null===(N=L[0])||void 0===N||null===(G=N.value)||void 0===G?void 0:G.toFixed(1)),d().createElement("td",null,null===(D=this.props.selectedTarget)||void 0===D||null===(k=D.speedDialData)||void 0===k||null===(U=k.percentSedimentTarget)||void 0===U||null===(H=U[0])||void 0===H||null===(j=H.value)||void 0===j?void 0:j.toFixed(1)),d().createElement("td",{className:"text-left"},"%")))))):d().createElement(f.Col,{sm:8,style:{marginLeft:20,marginRight:-20,textAlign:"center"}},"Please select a target on the left"))),d().createElement(f.Modal.Footer,null,d().createElement(f.Button,{bsStyle:"danger",bsSize:"small",style:{opacity:"0.7"},onClick:function(){return W.props.hideSwammBmpChart()}},"Close")))}}]),r}(d().Component);$(me,"propTypes",{hideSwammBmpChart:Q.func,allBmps:Q.array,data:Q.array,layerForLegend:Q.object,targets:Q.array,selectSwammTargetId:Q.func,showTargetForm:Q.func,selectedTargetId:Q.number,defaultTargetId:Q.number,selectedTarget:Q.object,bmpFilterMode:Q.string,setBmpFilterMode:Q.func}),$(me,"defaultProps",{});var de=function(e){V(r,e);var t=K(r);function r(){return W(this,r),t.apply(this,arguments)}return z(r,[{key:"render",value:function(){return null}}]),r}(d().Component);$(de,"propTypes",{type:Q.string,payload:Q.array,active:Q.bool,tooltipBarId:Q.number,tooltipPollutantKey:Q.string,barChartData:Q.array,selectedTarget:Q.object});var ce=function(e){var t,r,o,n,l,i,a,s,p,u,m,d,c,f,v=(null==e||null===(t=e.swamm)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.code)+"_bmp_footprint";return{mapId:null==e||null===(o=e.swamm)||void 0===o||null===(n=o.data)||void 0===n?void 0:n.base_map,layerForLegend:null==e||null===(l=e.layers)||void 0===l||null===(i=l.flat)||void 0===i?void 0:i.filter((function(e){return e.name===v}))[0],allBmps:null==e||null===(a=e.swamm)||void 0===a?void 0:a.allBmps,statuses:(null==e||null===(s=e.swamm)||void 0===s?void 0:s.statuses)||[],targets:(null==e||null===(p=e.swamm)||void 0===p?void 0:p.targets)||[],selectedTargetId:null==e||null===(u=e.swamm)||void 0===u?void 0:u.selectedTargetId,selectedTarget:null==e||null===(m=e.swamm)||void 0===m||null===(d=m.targets)||void 0===d||null===(c=d.filter((function(t){var r;return t.id===(null==e||null===(r=e.swamm)||void 0===r?void 0:r.selectedTargetId)})))||void 0===c?void 0:c[0],bmpFilterMode:(null==e||null===(f=e.swamm)||void 0===f?void 0:f.bmpFilterMode)||"type",visibleTargetForm:null==e?void 0:e.swamm.visibleTargetForm}},fe=function(e){return{hideSwammBmpChart:function(){return e((0,n.hideSwammBmpChart)())},selectSwammTargetId:function(t){return e((0,n.selectSwammTargetId)(t))},setBmpFilterMode:function(t){return e((0,n.setBmpFilterMode)(t))},showTargetForm:function(t){return e((0,n.showTargetForm)(t))}}},ve=(0,c.connect)(ce,fe)(me);function _e(e){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ee(e,t){return!t||"object"!==_e(t)&&"function"!=typeof t?ye(e):t}function ye(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}(0,c.connect)(ce,fe)(de);var Be=r(45697),Te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}(i,e);var t,r,o,n,l=(o=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=be(o);if(n){var r=be(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ee(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=l.call(this,e)).handleChange=t.handleChange.bind(ye(t)),t}return t=i,(r=[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this;return d().createElement(d().Fragment,null,d().createElement("div",{id:"swamm-bmp-filters",className:"simple-view-panel",style:{top:"175px",width:"480px"}},d().createElement("div",{className:"menu-rows-container"},d().createElement("div",{className:"row menu-row pull-left",style:{width:"480px",textAlign:"left"}},d().createElement("span",{className:"inline btn glyphicon menu-row-glyph "+("bmpType"===this.props.expandedFilter?"glyphicon-chevron-down":"glyphicon-chevron-right"),style:{color:"white",background:"none"},onClick:function(){e.props.setExpandedFilter("bmpType")}}),d().createElement("span",{className:"inline h5 menu-row-text"},d().createElement("strong",null,"Filter by BMP type")),"bmpType"===this.props.expandedFilter?d().createElement(d().Fragment,null,d().createElement("span",{className:"inline btn glyphicon menu-row-glyph glyphicon-check",style:{color:"limegreen",marginLeft:"30px"},onClick:function(){e.props.setAllBmpTypesVisibility(!0)}}),d().createElement("span",{className:"inline h5 menu-row-text"},"Select All"),d().createElement("span",{className:"inline btn glyphicon menu-row-glyph glyphicon-unchecked",style:{color:"red",marginLeft:"30px"},onClick:function(){e.props.setAllBmpTypesVisibility(!1)}}),d().createElement("span",{className:"inline h5 menu-row-text"},"Select None"),d().createElement("hr",{style:{margin:"0"}}),d().createElement(f.Row,null,this.props.bmpTypes.map((function(t,r){return d().createElement(f.Col,{sm:6,className:"row menu-row filter-row "+(r%2?"filter-row-odd":"")},d().createElement("span",{className:"btn glyphicon menu-row-glyph "+(null!=t&&t.visibility?"glyphicon-ok":"glyphicon-remove"),style:{color:null!=t&&t.visibility?"limegreen":"red"},onClick:function(){return e.props.toggleBmpTypeVisibility(t)}}),d().createElement("span",{className:"menu-row-text"},t.name))})))):null),d().createElement("div",{className:"row menu-row pull-left",style:{width:"480px",textAlign:"left"}},d().createElement("span",{className:"inline btn glyphicon menu-row-glyph "+("priority"===this.props.expandedFilter?"glyphicon-chevron-down":"glyphicon-chevron-right"),style:{color:"white",background:"none"},onClick:function(){e.props.setExpandedFilter("priority")}}),d().createElement("span",{className:"inline h5 menu-row-text"},d().createElement("strong",null,"Filter by BMP priority")),"priority"===this.props.expandedFilter?d().createElement(d().Fragment,null,d().createElement("hr",{style:{margin:"0"}}),d().createElement(f.Row,null,this.props.priorities.map((function(t,r){return d().createElement(f.Col,{sm:6,className:"row menu-row filter-row "+(r%2?"filter-row-odd":"")},d().createElement("span",{className:"btn glyphicon menu-row-glyph "+(null!=t&&t.visibility?"glyphicon-ok":"glyphicon-remove"),style:{color:null!=t&&t.visibility?"limegreen":"red"},onClick:function(){return e.props.toggleBmpPriorityVisibility(t)}}),d().createElement("span",{className:"menu-row-text"},t.label))})))):null),d().createElement("div",{className:"row menu-row pull-left",style:{width:"480px",textAlign:"left"}},d().createElement("span",{className:"inline btn glyphicon menu-row-glyph "+("status"===this.props.expandedFilter?"glyphicon-chevron-down":"glyphicon-chevron-right"),style:{color:"white",background:"none"},onClick:function(){e.props.setExpandedFilter("status")}}),d().createElement("span",{className:"inline h5 menu-row-text"},d().createElement("strong",null,"Filter by BMP status")),"status"===this.props.expandedFilter?d().createElement(d().Fragment,null,d().createElement("hr",{style:{margin:"0"}}),d().createElement(f.Row,null,this.props.statuses.map((function(t,r){return d().createElement(f.Col,{sm:6,className:"row menu-row filter-row "+(r%2?"filter-row-odd":"")},d().createElement("span",{className:"btn glyphicon menu-row-glyph "+(null!=t&&t.visibility?"glyphicon-ok":"glyphicon-remove"),style:{color:null!=t&&t.visibility?"limegreen":"red"},onClick:function(){return e.props.toggleBmpStatusVisibility(t)}}),d().createElement("span",{className:"menu-row-text"},t.name))})))):null),d().createElement("div",{className:"row menu-row pull-left",style:{width:"480px",textAlign:"left"}},d().createElement("span",{className:"inline btn glyphicon menu-row-glyph "+("groupProfile"===this.props.expandedFilter?"glyphicon-chevron-down":"glyphicon-chevron-right"),style:{color:"white",background:"none"},onClick:function(){e.props.setExpandedFilter("groupProfile")}}),d().createElement("span",{className:"inline h5 menu-row-text"},d().createElement("strong",null,"Filter by Organization")),"groupProfile"===this.props.expandedFilter?d().createElement(d().Fragment,null,d().createElement(f.Row,null,this.props.groupProfiles.map((function(t,r){var o;return d().createElement(f.Col,{sm:6,className:"row menu-row filter-row "+(r<(null===(o=e.props.groupProfiles)||void 0===o?void 0:o.length)/2+1?"filter-row-odd":"")},d().createElement("span",{className:"btn glyphicon menu-row-glyph "+(null!=t&&t.visibility?"glyphicon-ok":"glyphicon-remove"),style:{color:null!=t&&t.visibility?"limegreen":"red"},onClick:function(){return e.props.toggleBmpGroupProfileVisibility(t)}}),d().createElement("span",{className:"menu-row-text"},t.title))})))):null))))}},{key:"handleChange",value:function(e){console.log(e)}}])&&ge(t.prototype,r),i}(d().Component);Fe(Te,"propTypes",{bmpTypes:Be.array,expandedFilter:Be.string,setExpandedFilter:Be.func,bmpFilter:Be.object,changeLayerProperties:Be.func,toggleBmpTypeVisibility:Be.func,toggleBmpGroupProfileVisibility:Be.func,toggleBmpStatusVisibility:Be.func,setAllBmpTypesVisibility:Be.func,toggleBmpPriorityVisibility:Be.func,bmpWatershedLayer:Be.object,bmpFootprintLayer:Be.object,bmpOutletLayer:Be.object,priorities:Be.object,groupProfiles:Be.object,statuses:Be.object}),Fe(Te,"defaultProps",{});var Se=(0,c.connect)((function(e){var t,r,o,n,l,i,a,s,p,u,m,d,c,f,v,_=null==e||null===(t=e.security)||void 0===t||null===(r=t.user)||void 0===r||null===(o=r.info)||void 0===o?void 0:o.groups.filter((function(e){return!["anonymous","registered-members","admin","swamm-users","illinois-pork-producers"].includes(e)}));_.push("nwr","hyd");var g=null==e||null===(n=e.swamm)||void 0===n?void 0:n.groupProfiles.filter((function(e){return _.includes(e.slug)}));return console.log("allowedGroupProfiles",g),g.sort((function(e,t){return e.title.localeCompare(t.title)})),console.log("allowedGroupProfiles",g),{mapId:null==e||null===(l=e.swamm)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.base_map,projectData:null==e||null===(a=e.swamm)||void 0===a?void 0:a.data,bmpTypes:null==e||null===(s=e.swamm)||void 0===s?void 0:s.bmpTypes,statuses:null==e||null===(p=e.swamm)||void 0===p?void 0:p.statuses,groupProfiles:g,layers:null==e?void 0:e.layers,query:null==e?void 0:e.query,expandedFilter:null==e||null===(u=e.swamm)||void 0===u?void 0:u.expandedFilter,bmpFilter:null==e||null===(m=e.swamm)||void 0===m?void 0:m.bmpFilter,bmpOutletLayer:null==e||null===(d=e.swamm)||void 0===d?void 0:d.bmpOutletLayer,bmpFootprintLayer:null==e||null===(c=e.swamm)||void 0===c?void 0:c.bmpFootprintLayer,bmpWatershedLayer:null==e||null===(f=e.swamm)||void 0===f?void 0:f.bmpWatershedLayer,priorities:null==e||null===(v=e.swamm)||void 0===v?void 0:v.priorities}}),(function(e){return{setExpandedFilter:function(t){return e((0,n.setExpandedFilter)(t))},changeLayerProperties:function(t,r){return e((0,b.He)(t,r))},toggleBmpTypeVisibility:function(t){return e((0,n.toggleBmpTypeVisibility)(t))},toggleBmpGroupProfileVisibility:function(t){return e((0,n.toggleBmpGroupProfileVisibility)(t))},toggleBmpStatusVisibility:function(t){return e((0,n.toggleBmpStatusVisibility)(t))},setAllBmpTypesVisibility:function(t){return e((0,n.setAllBmpTypesVisibility)(t))},toggleBmpPriorityVisibility:function(t){return e((0,n.toggleBmpPriorityVisibility)(t))}}}))(Te),we=r(4206);function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Pe(e,t){return(Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ie(e,t){return!t||"object"!==Ce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(29944);var Ae=r(45697),xe=r(72986),Le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}(i,e);var t,r,o,n,l=(o=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Re(o);if(n){var r=Re(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ie(this,e)});function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),l.call(this,e)}return t=i,(r=[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){var e,t,r,o;this.props.mapId||this.fetching||(this.fetching=!1),!this.props.mapId||this.props.hasPmData||this.fetching||(this.props.fetchProjectManagerConfig(this.props.mapId),this.fetching=!0),this.props.mapId&&this.props.hasPmData&&(this.fetching=!1),this.props.hasPmData&&(this.props.mapId||this.fetchingBmpTypes||(this.fetchingBmpTypes=!1),this.props.mapId&&0===(null===(e=this.props.bmpTypes)||void 0===e?void 0:e.length)&&!this.fetchingBmpTypes&&(this.fetchingBmpTypes=!0,this.props.fetchSwammBmpTypes(this.props.mapId)),this.props.mapId&&(null===(t=this.props.bmpTypes)||void 0===t?void 0:t.length)>0&&(this.fetchingBmpTypes=!1),this.props.mapId||this.fetchingGroupProfiles||(this.fetchingGroupProfiles=!1),this.props.mapId&&0===(null===(r=this.props.groupProfiles)||void 0===r?void 0:r.length)&&!this.fetchingGroupProfiles&&(this.fetchingGroupProfiles=!0,this.props.fetchGroupProfiles()),this.props.mapId&&(null===(o=this.props.groupProfiles)||void 0===o?void 0:o.length)>0&&(this.fetchingGroupProfiles=!1),this.props.mapId||this.fetchingStatuses||(this.fetchingStatuses=!1),this.props.mapId&&0===this.props.statuses.length&&!this.fetchingStatuses&&(this.fetchingStatuses=!0,this.props.fetchSwammBmpStatuses(this.props.mapId)),this.props.mapId&&this.props.statuses.length>0&&(this.fetchingStatuses=!1),this.props.mapId||this.fetchingTargets||(this.fetchingTargets=!1),this.props.mapId&&0===this.props.targets.length&&!this.fetchingTargets&&(this.fetchingTargets=!0,this.props.fetchSwammTargets(this.props.mapId)),this.props.mapId&&this.props.targets.length>0&&(this.fetchingTargets=!1))}},{key:"render",value:function(){var e,t=this;return d().createElement("div",{id:"swamm-container"},this.props.hasPmData?d().createElement(d().Fragment,null,!this.props.storedBmpForm||this.props.visibleBmpForm||this.props.drawingBmpLayerName||this.props.editingBmpFeatureId?this.props.drawingBmpLayerName||this.props.editingBmpFeatureId?d().createElement(d().Fragment,null,d().createElement(f.Button,{bsStyle:"success",className:"simple-view-menu-button bmp-progress-button",style:{left:30,top:80,width:120,backgroundColor:"darkgreen"},onClick:function(){t.props.saveChanges(),t.props.showBmpForm()}},"Save Feature"),d().createElement(f.Button,{bsStyle:"danger",className:"simple-view-menu-button bmp-progress-button",style:{left:160,top:80,width:120,backgroundColor:"darkred"},onClick:function(){t.props.showBmpForm(),t.props.setLayer(null),t.props.toggleViewMode(),t.props.drawStopped(),t.props.clearDrawingBmpLayerName(),t.props.clearEditingBmpFeatureId()}},"Cancel Feature"),d().createElement("button",{key:"swamm-bmp-creator-button",className:"simple-view-menu-button",style:{left:100*(this.props.numberOfMenus+1)+20},onClick:function(){t.props.saveChanges(),t.props.showBmpForm(),t.props.setOpenMenuGroupId(null)}},"Create BMPs")):this.props.visibleBmpForm?d().createElement("button",{className:"simple-view-menu-button",style:{left:100*(this.props.numberOfMenus+1)+20},disabled:!0},"Create BMPs"):d().createElement("button",{key:"swamm-bmp-creator-button",className:"simple-view-menu-button",style:{left:100*(this.props.numberOfMenus+1)+20},onClick:function(){t.props.makeBmpForm(t.props.defaultGroupProfile),t.props.setOpenMenuGroupId(null)}},"Create BMPs"):d().createElement(d().Fragment,null,d().createElement(f.Button,{className:"simple-view-menu-button bmp-progress-button-success",style:{left:30,top:80,width:120,backgroundColor:"darkgreen"},bsStyle:"success",onClick:function(){return t.props.showBmpForm()}},"BMP in progress"),d().createElement("button",{key:"swamm-bmp-creator-button",className:"simple-view-menu-button",style:{left:100*(this.props.numberOfMenus+1)+20},onClick:function(){t.props.showBmpForm(),t.props.setOpenMenuGroupId(null)}},"Create BMPs")),null!==(e=this.props.targets)&&void 0!==e&&e.length?d().createElement("button",{key:"swamm-bmp-chart-button",className:"simple-view-menu-button",style:{left:100*(this.props.numberOfMenus+2)+20},onClick:function(){t.props.showSwammBmpChart(),t.props.setOpenMenuGroupId(null)}},"Dashboard"):d().createElement("button",{key:"swamm-bmp-chart-button",className:"simple-view-menu-button disabled",style:{left:100*(this.props.numberOfMenus+2)+20}},d().createElement("span",null,d().createElement(xe,{color:"white",style:{display:"inline-block"},spinnerName:"circle",noFadeIn:!0}))),this.props.visibleTargetForm?d().createElement(H,null):null,this.props.visibleBmpForm?d().createElement(R,null):null,this.props.visibleSwammBmpChart?d().createElement("div",null,d().createElement(ve,null)):null,this.props.viewBmpGroupId===this.props.openMenuGroupId?d().createElement("div",null,d().createElement(Se,null)):null,this.props.loadingBmp?d().createElement("button",{className:"simple-view-menu-button bmp-loading-button"},d().createElement("div",{style:{marginBottom:"10px"}},"Loading BMP data..."),d().createElement("span",null,d().createElement(xe,{color:"white",style:{display:"inline-block"},spinnerName:"circle",noFadeIn:!0}))):null):null)}}])&&Me(t.prototype,r),i}(d().Component);Oe(Le,"propTypes",{fetchSwammBmpTypes:Ae.func,fetchSwammBmpStatuses:Ae.func,fetchSwammTargets:Ae.func,fetchProjectManagerConfig:Ae.func,fetchGroupProfiles:Ae.func,fetchingGroupProfiles:Ae.bool,fetchingTargets:Ae.bool,statuses:Ae.array,targets:Ae.array,swammData:Ae.array,mapId:Ae.number,bmpUniqueNames:Ae.array,bmpTypes:Ae.array,groupProfiles:Ae.array,projectCode:Ae.string,layers:Ae.object,toggleLayer:Ae.func,showBmpForm:Ae.func,visibleBmpForm:Ae.bool,makeBmpForm:Ae.func,storedBmpForm:Ae.object,showMenuGroup:Ae.bool,setOpenMenuGroupId:Ae.func,loadingBmp:Ae.bool,saveChanges:Ae.func,clearDrawingBmpLayerName:Ae.func,clearEditingBmpFeatureId:Ae.func,drawingBmpLayerName:Ae.string,setEditingBmpFeatureId:Ae.func,editingBmpFeatureId:Ae.string,query:Ae.func,toggleBmpType:Ae.func,visibleSwammBmpChart:Ae.bool,visibleTargetForm:Ae.bool,showSwammBmpChart:Ae.func,bmpByUniqueNameSelector:Ae.func,setLayer:Ae.func,toggleViewMode:Ae.func,drawStopped:Ae.func,numberOfMenus:Ae.number,hasPmData:Ae.object,bmpDataLayer:Ae.object,defaultGroupProfile:Ae.object,viewBmpGroupId:Ae.string,openMenuGroupId:Ae.string,setBmpLayers:Ae.func,toggleSyncWms:Ae.func}),Oe(Le,"defaultProps",{});const Ne=(0,c.connect)((function(e){var t,r,o,n,l,i,a,s,p,u,m,d,c,f,v,_,g,h,E,b,F,B,T,S,w,C,M,P=null==e||null===(t=e.security)||void 0===t||null===(r=t.user)||void 0===r||null===(o=r.info)||void 0===o?void 0:o.groups.filter((function(e){return!["anonymous","registered-members","admin"].includes(e)})),I=null==e||null===(n=e.swamm)||void 0===n?void 0:n.groupProfiles.filter((function(e){return P.includes(e.slug)}));return{mapId:null==e||null===(l=e.map)||void 0===l||null===(i=l.present)||void 0===i||null===(a=i.info)||void 0===a?void 0:a.id,hasPmData:null==e||null===(s=e.swamm)||void 0===s?void 0:s.data,defaultGroupProfile:I[0],bmpUniqueNames:y(e),bmpTypes:null==e||null===(p=e.swamm)||void 0===p?void 0:p.bmpTypes,groupProfiles:null==e?void 0:e.swamm.groupProfiles,statuses:null==e||null===(u=e.swamm)||void 0===u?void 0:u.statuses,targets:null==e||null===(m=e.swamm)||void 0===m?void 0:m.targets,fetchingTargets:null==e||null===(d=e.swamm)||void 0===d?void 0:d.fetchingTargets,projectCode:null==e||null===(c=e.swamm)||void 0===c||null===(f=c.data)||void 0===f?void 0:f.code,layers:null==e?void 0:e.layers,visibleBmpForm:null==e||null===(v=e.swamm)||void 0===v?void 0:v.visibleBmpForm,storedBmpForm:null==e||null===(_=e.swamm)||void 0===_?void 0:_.storedBmpForm,drawingBmpLayerName:null==e||null===(g=e.swamm)||void 0===g?void 0:g.drawingBmpLayerName,editingBmpFeatureId:null==e||null===(h=e.swamm)||void 0===h?void 0:h.editingBmpFeatureId,visibleSwammBmpChart:null==e||null===(E=e.swamm)||void 0===E?void 0:E.visibleSwammBmpChart,visibleTargetForm:null==e||null===(b=e.swamm)||void 0===b?void 0:b.visibleTargetForm,loadingBmp:null==e||null===(F=e.swamm)||void 0===F?void 0:F.loadingBmp,numberOfMenus:null==e||null===(B=e.layers)||void 0===B?void 0:B.groups.length,viewBmpGroupId:null==e||null===(T=e.mapConfigRawData)||void 0===T||null===(S=T.map)||void 0===S||null===(w=S.groups)||void 0===w||null===(C=w.filter((function(e){return"View BMPs"===e.title}))[0])||void 0===C?void 0:C.id,openMenuGroupId:null==e||null===(M=e.simpleView)||void 0===M?void 0:M.openMenuGroupId}}),(function(e){return{fetchSwammBmpTypes:function(t){return e((0,n.fetchSwammBmpTypes)(t))},fetchProjectManagerConfig:(0,n.fetchProjectManagerConfig)(e),fetchGroupProfiles:function(){return e((0,n.fetchGroupProfiles)())},fetchSwammBmpStatuses:function(t){return e((0,n.fetchSwammBmpStatuses)(t))},fetchSwammTargets:function(t){return e((0,n.fetchSwammTargets)(t))},toggleLayer:function(t,r){return e((0,b.He)(t,{visibility:r}))},showBmpForm:function(){return e((0,n.showBmpForm)())},setLayer:function(t){return e((0,_.uF)(t))},setEditingBmpFeatureId:function(t){return e((0,n.setEditingBmpFeatureId)(t))},showSwammBmpChart:function(){return e((0,n.showSwammBmpChart)())},setOpenMenuGroupId:function(t){return e((0,v.setOpenMenuGroupId)(t))},makeBmpForm:function(t){return e((0,n.makeBmpForm)(t))},saveChanges:function(){return e((0,_.$S)())},clearDrawingBmpLayerName:function(){return e((0,n.clearDrawingBmpLayerName)())},clearEditingBmpFeatureId:function(){return e((0,n.clearEditingBmpFeatureId)())},query:function(t,r,o,n){return e((0,h.IO)(t,r,o,n))},toggleBmpType:function(t){return e((0,n.toggleBmpType)(t))},toggleViewMode:function(){return e((0,_.nY)())},drawStopped:function(){return e((0,we.lo)())},toggleSyncWms:function(){return e((0,h.XO)())}}}))(Le);var Ge=r(49977),De=r.n(Ge),ke=r(29386),Ue=r(75875),He=function(e,t){return{attribute:e,rowId:123456,type:"number",groupId:"".concat(e,"_1"),operator:"=",value:t}},je={filterObj:{featureTypeName:null,filterType:"OGC",ogcVersion:"1.1.0",groupFields:[{id:123456,index:0,logic:"AND"},{id:"type_1",groupId:123456,logic:"OR",index:1},{id:"priority_1",groupId:123456,logic:"OR",index:1},{id:"group_profile_1",groupId:123456,logic:"OR",index:1},{id:"status_1",groupId:123456,logic:"OR",index:1}],filterFields:[],spatialField:[],spatialFieldOperator:"AND"}};const We=(0,o.rx)("Swamm",{component:Ne,reducers:{swamm:function(){var e,t,r,o,i,a,p,m,d,c,f,v,_,g,h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,E=arguments.length>1?arguments[1]:void 0;switch(E.type){case n.FETCH_GROUP_PROFILES:return s(s({},h),{},{fetchingGroupProfiles:E.groupProfiles});case n.FETCH_GROUP_PROFILES_SUCCESS:return s(s({},h),{},{fetchingGroupProfiles:!1,groupProfiles:E.groupProfiles});case n.FETCH_PROJECT_MANAGER_CONFIG:return s(s({},h),{},{fetching:E.mapId});case n.FETCH_PROJECT_MANAGER_CONFIG_SUCCESS:return s(s({},h),{},{fetching:null,data:E.payload});case n.FETCH_SWAMM_BMPTYPES:return s(s({},h),{},{fetching:E.mapId});case n.FETCH_SWAMM_BMPTYPES_SUCCESS:return s(s({},h),{},{fetching:!1,bmpTypes:E.bmpTypes});case n.FETCH_SWAMM_ALL_BMPS_SUCCESS:return s(s({},h),{},{fetching:!1,allBmps:E.allBmps});case n.FETCH_SWAMM_BMP_STATUSES:return s(s({},h),{},{fetchingStatuses:!0});case n.FETCH_SWAMM_BMP_STATUSES_SUCCESS:return s(s({},h),{},{statuses:E.statuses});case n.TOGGLE_BMP_TYPE_VISIBILITY:return s(s({},h),{},{bmpTypes:h.bmpTypes.map((function(e){return e.id===E.bmpType.id?s(s({},e),{},{visibility:!E.bmpType.visibility}):e}))});case n.SET_BMP_TYPE:return s(s({},h),{},{bmpTypes:h.bmpTypes.map((function(e){return e.id===E.bmpType.id?s(s({},e),{},{visibility:E.isVisible}):e}))});case n.TOGGLE_BMP_PRIORITY_VISIBILITY:return s(s({},h),{},{priorities:h.priorities.map((function(e){return e.id===E.priority.id?s(s({},e),{},{visibility:!E.priority.visibility}):e}))});case n.TOGGLE_BMP_GROUP_PROFILE_VISIBILITY:return s(s({},h),{},{groupProfiles:h.groupProfiles.map((function(e){return e.id===E.groupProfile.id?s(s({},e),{},{visibility:!E.groupProfile.visibility}):e}))});case n.TOGGLE_BMP_STATUS_VISIBILITY:return s(s({},h),{},{statuses:h.statuses.map((function(e){return e.id===E.status.id?s(s({},e),{},{visibility:!E.status.visibility}):e}))});case n.SET_ALL_BMP_TYPES_VISIBILITY:return s(s({},h),{},{bmpTypes:h.bmpTypes.map((function(e){return e.visibility=E.boolValue,e}))});case n.SET_MENU_GROUP:return E.payload?s(s({},h),{},{visibleBmpManager:!1}):h;case n.SHOW_BMP_MANAGER:return s(s({},h),{},{visibleBmpManager:!0});case n.HIDE_BMP_MANAGER:return s(s({},h),{},{visibleBmpManager:!1});case n.TOGGLE_BMP_MANAGER:return s(s({},h),{},{visibleBmpManager:!h.visibleBmpManager});case n.SHOW_SWAMM_DATA_GRID:return s(s({},h),{},{visibleSwammDataGrid:!0});case n.HIDE_SWAMM_DATA_GRID:return s(s({},h),{},{visibleSwammDataGrid:!1});case n.SHOW_SWAMM_BMP_CHART:return s(s({},h),{},{visibleSwammBmpChart:!0});case n.HIDE_SWAMM_BMP_CHART:return s(s({},h),{},{visibleSwammBmpChart:!1});case n.SHOW_BMP_FORM:return s(s({},h),{},{visibleBmpForm:!0});case n.SHOW_LOADING_BMP:return s(s({},h),{},{loadingBmp:!0});case n.HIDE_LOADING_BMP:return s(s({},h),{},{loadingBmp:!1});case n.MAKE_BMP_FORM:return s(s({},h),{},{creatingNewBmp:!0,visibleBmpForm:!0,storedBmpForm:{group_profile_id:E.groupProfile.pk,group_profile:E.groupProfile,bmpName:""}});case n.MAKE_DEFAULTS_BMP_FORM:var y={bmpName:E.bmpType.name,type:E.bmpType.id,type_data:E.bmpType,project:E.bmpType.project.id,override_n_surface_red_percent:E.bmpType.n_surface_red_percent,override_p_surface_red_percent:E.bmpType.p_surface_red_percent,override_s_surface_red_percent:E.bmpType.s_surface_red_percent,override_n_tiled_red_percent:E.bmpType.n_tiled_red_percent,override_p_tiled_red_percent:E.bmpType.p_tiled_red_percent,override_n_erosion_red_percent:E.bmpType.n_erosion_red_percent,override_p_erosion_red_percent:E.bmpType.p_erosion_red_percent,override_s_erosion_red_percent:E.bmpType.s_erosion_red_percent,override_cost_base:E.bmpType.cost_base,override_cost_rate_per_watershed_area:E.bmpType.cost_rate_per_watershed_area,override_cost_rate_per_footprint_area:E.bmpType.cost_rate_per_footprint_area,notes:""};return s(s({},h),{},{storedBmpForm:s(s({},h.storedBmpForm),y)});case n.MAKE_EXISTING_BMP_FORM:var b=null!=h&&null!==(e=h.storedBmpForm)&&void 0!==e&&e.outlet_fid?null===(t=h.storedBmpForm)||void 0===t?void 0:t.outlet_fid:null===(r=E.bmp)||void 0===r?void 0:r.outlet_fid,F=null!=h&&null!==(o=h.storedBmpForm)&&void 0!==o&&o.footprint_fid?null===(i=h.storedBmpForm)||void 0===i?void 0:i.footprint_fid:null===(a=E.bmp)||void 0===a?void 0:a.footprint_fid,B=null!=h&&null!==(p=h.storedBmpForm)&&void 0!==p&&p.watershed_fid?null===(m=h.storedBmpForm)||void 0===m?void 0:m.watershed_fid:null===(d=E.bmp)||void 0===d?void 0:d.watershed_fid,T=s(s({},E.bmp),{},{id:E.bmp.id,bmpName:E.bmp.type_data.name,type:E.bmp.type_data.id,type_data:E.bmp.type_data,project:E.bmp.project,group_profile:E.bmp.group_profile,group_profile_id:null===(c=E.bmp.group_profile)||void 0===c?void 0:c.id,override_n_surface_red_percent:E.bmp.override_n_surface_red_percent,override_p_surface_red_percent:E.bmp.override_p_surface_red_percent,override_s_surface_red_percent:E.bmp.override_s_surface_red_percent,override_n_tiled_red_percent:E.bmp.override_n_tiled_red_percent,override_p_tiled_red_percent:E.bmp.override_p_tiled_red_percent,override_n_erosion_red_percent:E.bmp.override_n_erosion_red_percent,override_p_erosion_red_percent:E.bmp.override_p_erosion_red_percent,override_s_erosion_red_percent:E.bmp.override_s_erosion_red_percent,override_cost_base:E.bmp.override_cost_base,override_cost_rate_per_watershed_area:E.bmp.override_cost_rate_per_watershed_area,override_cost_rate_per_footprint_area:E.bmp.override_cost_rate_per_footprint_area,notes:E.bmp.notes,owner_identifier:E.bmp.owner_identifier,field_identifier:E.bmp.field_identifier,outlet_fid:b,footprint_fid:F,watershed_fid:B});return s(s({},h),{},{storedBmpForm:T,updatingBmp:null});case n.HIDE_BMP_FORM:return s(s({},h),{},{visibleBmpForm:!1});case n.CLEAR_BMP_FORM:return s(s({},h),{},{creatingNewBmp:!1,storedBmpForm:null,BmpFormBmpTypeId:null,visibleBmpForm:!1,updatingBmp:null});case n.SUBMIT_BMP_FORM_SUCCESS:var S=null===(f=h.allBmps)||void 0===f?void 0:f.map((function(e){return e.id}));return console.log("allBmpIds:",S),S.indexOf(E.bmp.id)>-1?s(s({},h),{},{allBmps:h.allBmps.map((function(e){return e.id===E.bmp.id?E.bmp:e}))}):s(s({},h),{},{allBmps:[].concat(l(h.allBmps),[E.bmp])});case n.SUBMIT_BMP_FORM_ERROR:return s(s({},h),{},{showSubmitBmpFormError:!0});case n.UPDATE_BMP_FORM:return console.log("heard UPDATE_BMP_FORM",E),null!=E&&null!==(v=E.kv)&&void 0!==v&&null!==(_=v.type_data)&&void 0!==_&&_.id?s(s({},h),{},{BmpFormBmpTypeId:E.kv.type_data.id}):null!=E&&null!==(g=E.kv)&&void 0!==g&&g.group_profile?s(s({},h),{},{storedBmpForm:s(s(s({},h.storedBmpForm),E.kv),{},{group_profile:null==E||null===(w=E.kv)||void 0===w?void 0:w.group_profile,group_profile_id:null==E||null===(C=E.kv)||void 0===C||null===(M=C.group_profile)||void 0===M?void 0:M.pk})}):s(s({},h),{},{storedBmpForm:s(s({},h.storedBmpForm),E.kv)});var w,C,M;case n.SET_DRAWING_BMP_LAYER_NAME:var P=!1;return E.drawingBmpLayerName!==h.drawingBmpLayerName&&(P=E.drawingBmpLayerName),s(s({},h),{},{drawingBmpLayerName:P});case n.CLEAR_DRAWING_BMP_LAYER_NAME:return s(s({},h),{},{drawingBmpLayerName:null});case n.REGISTER_MISSING_BMP_FEATURE_ID:return s(s({},h),{},{missingBmpFeatureId:E.missingBmpFeatureId});case n.SET_COMPLEX_BMP_FORM:return s(s({},h),{},{complexBmpForm:E.complexBmpForm});case n.SET_EXPANDED_FILTER:return h.expandedFilter===E.expandedFilter?s(s({},h),{},{expandedFilter:null}):s(s({},h),{},{expandedFilter:E.expandedFilter});case n.SET_BMP_LAYERS:return s(s({},h),{},{bmpOutletLayer:E.bmpOutletLayer,bmpFootprintLayer:E.bmpFootprintLayer,bmpWatershedLayer:E.bmpWatershedLayer});case n.SET_CHANGING_BMP_TYPE:return s(s({},h),{},{changingBmpType:E.changingBmpType});case n.SET_EDITING_BMP_FEATURE_ID:return s(s({},h),{},{editingBmpFeatureId:E.editingBmpFeatureId});case n.CLEAR_EDITING_BMP_FEATURE_ID:return s(s({},h),{},{editingBmpFeatureId:null});case n.DELETE_BMP_SUCCESS:return s(s({},h),{},{allBmps:h.allBmps.filter((function(e){return e.id!==E.bmpId}))});case n.FETCH_SWAMM_TARGETS_SUCCESS:return s(s({},h),{},{fetchingTargets:!1,targets:E.targets});case n.SELECT_SWAMM_TARGET_ID:return s(s({},h),{},{selectedTargetId:E.selectedTargetId});case n.SET_BMP_FILTER_MODE:return s(s({},h),{},{bmpFilterMode:E.bmpFilterMode});case n.UPDATE_TARGET_FORM:return s(s({},h),{},{targetForm:s(s({},h.targetForm),E.kv)});case n.SHOW_TARGET_FORM:return E.target?s(s({},h),{},{visibleTargetForm:E.visibleTargetForm,targetForm:E.target}):s(s({},h),{},{visibleTargetForm:E.visibleTargetForm});case n.HIDE_TARGET_FORM:return s(s({},h),{},{visibleTargetForm:E.visibleTargetForm});case n.UPDATE_BMP_TYPE_GROUPS:return s(s({},h),{},{bmpTypeGroups:E.bmpTypeGroups});default:return h}}},epics:{startBmpCreateFeatureEpic:function(e,t){return e.ofType(h.Hu).filter((function(){var e,r,o,n;return console.log("startBmpCreateFeatureEpic1",!(null!==(e=t.getState())&&void 0!==e&&null!==(r=e.swamm)&&void 0!==r&&r.editingBmpFeatureId)),!(null!==(o=t.getState())&&void 0!==o&&null!==(n=o.swamm)&&void 0!==n&&n.editingBmpFeatureId)})).filter((function(e){var r,o,n,l,i,a;return console.log("startBmpCreateFeatureEpic2",null==e||null===(r=e.filterObj)||void 0===r?void 0:r.featureTypeName.includes(null===(o=t.getState())||void 0===o||null===(n=o.swamm)||void 0===n?void 0:n.drawingBmpLayerName)),null==e||null===(l=e.filterObj)||void 0===l?void 0:l.featureTypeName.includes(null===(i=t.getState())||void 0===i||null===(a=i.swamm)||void 0===a?void 0:a.drawingBmpLayerName)})).filter((function(e){return console.log("startBmpCreateFeatureEpic3","querySetNewBmpLayer"===(null==e?void 0:e.reason)),"querySetNewBmpLayer"===(null==e?void 0:e.reason)})).flatMap((function(){return De().Observable.of((0,_.lg)(),(0,_.lx)([{}]),(0,_.kA)(),(0,ke.WP)("draw.tempFeatures"),(0,n.hideLoadingBmp)())}))},saveBmpCreateFeatureEpic:function(e,t){return e.ofType(_.AY).filter((function(){var e,r,o,n;return console.log("saveBmpCreateFeatureEpic1",null===(e=t.getState())||void 0===e||null===(r=e.swamm)||void 0===r?void 0:r.drawingBmpLayerName),null===(o=t.getState())||void 0===o||null===(n=o.swamm)||void 0===n?void 0:n.drawingBmpLayerName})).filter((function(){var e,r,o,n;return console.log("WARNING: saveBmpCreateFeatureEpic2",!(null!==(e=t.getState())&&void 0!==e&&null!==(r=e.swamm)&&void 0!==r&&r.editingBmpFeatureId)),!(null!==(o=t.getState())&&void 0!==o&&null!==(n=o.swamm)&&void 0!==n&&n.editingBmpFeatureId)})).flatMap((function(){var e,r;return De().Observable.of((0,n.registerMissingBmpFeatureId)(null===(e=t.getState())||void 0===e||null===(r=e.swamm)||void 0===r?void 0:r.drawingBmpLayerName))}))},setCreateBmpDrawingLayerEpic:function(e,t){return e.ofType(h.u7).filter((function(e){var r,o,n,l,i,a,s,p;return console.log("setBmpDrawingLayerEpic1",null==e||null===(r=e.typeName)||void 0===r?void 0:r.includes((null===(o=t.getState())||void 0===o||null===(n=o.swamm)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.code)+"_bmp_")),null==e||null===(i=e.typeName)||void 0===i?void 0:i.includes((null===(a=t.getState())||void 0===a||null===(s=a.swamm)||void 0===s||null===(p=s.data)||void 0===p?void 0:p.code)+"_bmp_")})).flatMap((function(e){return De().Observable.of((0,h.IO)("http://localhost:8080/geoserver/wfs",{featureTypeName:null==e?void 0:e.typeName,filterType:"OGC",ogcVersion:"1.1.0"},{},"querySetNewBmpLayer"))}))},setEditBmpDrawingLayerEpic:function(e,t){return e.ofType(h.S0).filter((function(e){var r,o,n,l,i,a,s,p;return console.log("setBmpDrawingLayerEpic1",null==e||null===(r=e.typeName)||void 0===r?void 0:r.includes((null===(o=t.getState())||void 0===o||null===(n=o.swamm)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.code)+"_bmp_")),null==e||null===(i=e.typeName)||void 0===i?void 0:i.includes((null===(a=t.getState())||void 0===a||null===(s=a.swamm)||void 0===s||null===(p=s.data)||void 0===p?void 0:p.code)+"_bmp_")})).flatMap((function(e){return De().Observable.of((0,h.IO)("http://localhost:8080/geoserver/wfs",{featureTypeName:null==e?void 0:e.typeName,filterType:"OGC",ogcVersion:"1.1.0"},{},"querySetNewBmpLayer"))}))},startBmpEditFeatureEpic:function(e,t){return e.ofType(h.Hu).filter((function(){var e,r,o,n;return console.log("startBmpEditFeatureEpic1",null===(e=t.getState())||void 0===e||null===(r=e.swamm)||void 0===r?void 0:r.editingBmpFeatureId),null===(o=t.getState())||void 0===o||null===(n=o.swamm)||void 0===n?void 0:n.editingBmpFeatureId})).filter((function(e){return console.log("startBmpEditFeatureEpic2","querySetNewBmpLayer"===(null==e?void 0:e.reason)),"querySetNewBmpLayer"===(null==e?void 0:e.reason)})).flatMap((function(){var e,r,o;return De().Observable.of((0,_.KD)(null===(e=t.getState())||void 0===e||null===(r=e.query)||void 0===r||null===(o=r.result)||void 0===o?void 0:o.features.filter((function(e){var r,o;return(null==e?void 0:e.id)===(null===(r=t.getState())||void 0===r||null===(o=r.swamm)||void 0===o?void 0:o.editingBmpFeatureId)}))),(0,_.lg)(),(0,n.hideLoadingBmp)(),(0,h.zc)())}))},saveBmpEditFeatureEpic:function(e,t){return e.ofType(_.AY).filter((function(){var e,r,o,n;return console.log("saveBmpEditFeatureEpic",null===(e=t.getState())||void 0===e||null===(r=e.swamm)||void 0===r?void 0:r.editingBmpFeatureId),null===(o=t.getState())||void 0===o||null===(n=o.swamm)||void 0===n?void 0:n.editingBmpFeatureId})).flatMap((function(){var e,r,o,l,i,a,s,p;return De().Observable.of((0,n.clearEditingBmpFeatureId)(),(0,we.lo)(),(0,_.nY)(),(0,ke.WP)("highlight.emptyFeatures"),(0,n.submitBmpForm)(null===(e=t.getState())||void 0===e||null===(r=e.swamm)||void 0===r?void 0:r.storedBmpForm,null===(o=t.getState())||void 0===o||null===(l=o.swamm)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.base_map),(0,h.zc)(),(0,b.ct)(null===(a=t.getState())||void 0===a||null===(s=a.layers)||void 0===s||null===(p=s.flat)||void 0===p?void 0:p.filter((function(e){var r,o;return null==e?void 0:e.name.includes(null===(r=t.getState())||void 0===r||null===(o=r.swamm)||void 0===o?void 0:o.drawingBmpLayerName)}))[0].id),(0,n.clearDrawingBmpLayerName)())}))},finishBmpCreateFeatureEpic:function(e,t){return e.ofType(h.Hu).filter((function(){var e,r,o,n;return console.log("finishBmpCreateFeatureEpic1",!(null!==(e=t.getState())&&void 0!==e&&null!==(r=e.swamm)&&void 0!==r&&r.editingBmpFeatureId)),!(null!==(o=t.getState())&&void 0!==o&&null!==(n=o.swamm)&&void 0!==n&&n.editingBmpFeatureId)})).filter((function(){var e,r,o,n;return console.log("finishBmpCreateFeatureEpic2",null===(e=t.getState())||void 0===e||null===(r=e.swamm)||void 0===r?void 0:r.missingBmpFeatureId),null===(o=t.getState())||void 0===o||null===(n=o.swamm)||void 0===n?void 0:n.missingBmpFeatureId})).mergeMap((function(){var e,r,o,n,l,i,a=null===(e=t.getState())||void 0===e||null===(r=e.swamm)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.base_map,s=null===(n=t.getState())||void 0===n||null===(l=n.swamm)||void 0===l||null===(i=l.drawingBmpLayerName)||void 0===i?void 0:i.slice(8);return De().Observable.from(Ue.get("/swamm/api/".concat(a,"/bmps/get-latest-feature-id/").concat(s,"/")))})).mergeMap((function(e){var r,o,l,i,a,s,p,u;return De().Observable.of((0,n.updateBmpForm)(e.data),(0,n.registerMissingBmpFeatureId)(!1),(0,we.lo)(),(0,_.nY)(),(0,ke.WP)("highlight.emptyFeatures"),(0,n.submitBmpForm)(null===(r=t.getState())||void 0===r||null===(o=r.swamm)||void 0===o?void 0:o.storedBmpForm,null===(l=t.getState())||void 0===l||null===(i=l.swamm)||void 0===i||null===(a=i.data)||void 0===a?void 0:a.base_map),(0,h.zc)(),(0,b.ct)(null===(s=t.getState())||void 0===s||null===(p=s.layers)||void 0===p||null===(u=p.flat)||void 0===u?void 0:u.filter((function(e){var r,o;return null==e?void 0:e.name.includes(null===(r=t.getState())||void 0===r||null===(o=r.swamm)||void 0===o?void 0:o.drawingBmpLayerName)}))[0].id),(0,n.clearDrawingBmpLayerName)())}))},autoSaveBmpFormEpic:function(e,t){return e.ofType(n.MAKE_EXISTING_BMP_FORM).filter((function(){var e,r,o,n,l,i,a,s,p,u,m,d;return(null===(e=t.getState())||void 0===e||null===(r=e.swamm)||void 0===r||null===(o=r.storedBmpForm)||void 0===o?void 0:o.footprint_fid)&&!(null!==(n=t.getState())&&void 0!==n&&null!==(l=n.swamm)&&void 0!==l&&null!==(i=l.storedBmpForm)&&void 0!==i&&i.calculated_footprint_area)||(null===(a=t.getState())||void 0===a||null===(s=a.swamm)||void 0===s||null===(p=s.storedBmpForm)||void 0===p?void 0:p.watershed_fid)&&!(null!==(u=t.getState())&&void 0!==u&&null!==(m=u.swamm)&&void 0!==m&&null!==(d=m.storedBmpForm)&&void 0!==d&&d.calculated_watershed_area)})).flatMap((function(){var e,r,o,l,i;return De().Observable.of((0,n.submitBmpForm)(null===(e=t.getState())||void 0===e||null===(r=e.swamm)||void 0===r?void 0:r.storedBmpForm,null===(o=t.getState())||void 0===o||null===(l=o.swamm)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.base_map))}))},catchBmpFeatureClick:function(e,t){return e.ofType(g.XL).filter((function(e){var t,r;return!!(null==e||null===(t=e.data)||void 0===t||null===(r=t.features)||void 0===r?void 0:r.map((function(e){return/([a-zA-Z0-9]{3}_){2}outlet/.test(e.id)||/([a-zA-Z0-9]{3}_){2}footprint/.test(e.id)||/([a-zA-Z0-9]{3}_){2}watershed/.test(e.id)?e:null})))[0]})).mergeMap((function(e){var r,o,n,l,i,a,s,p=null==e||null===(r=e.data)||void 0===r||null===(o=r.features)||void 0===o?void 0:o.map((function(e){return/([a-zA-Z0-9]{3}_){2}outlet/.test(e.id)||/([a-zA-Z0-9]{3}_){2}footprint/.test(e.id)||/([a-zA-Z0-9]{3}_){2}watershed/.test(e.id)?e:null})),u=null===(n=t.getState())||void 0===n||null===(l=n.swamm)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.base_map;return De().Observable.from(Ue.get("/swamm/api/".concat(u,"/bmps/").concat(null===(a=p[0])||void 0===a||null===(s=a.properties)||void 0===s?void 0:s.id,"/")))})).mergeMap((function(e){return De().Observable.of((0,g.Mc)(),(0,n.getBmpFormSuccess)(e.data),(0,n.makeExistingBmpForm)(e.data),(0,n.setUpdatingBmp)(e.data),(0,n.showBmpForm)())}))},getBmpTypeGroups:function(e,t){return e.ofType(n.FETCH_PROJECT_MANAGER_CONFIG_SUCCESS).mergeMap((function(){var e,r,o,n=null===(e=t.getState())||void 0===e||null===(r=e.swamm)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.base_map;return De().Observable.from(Ue.get("/swamm/api/".concat(n,"/bmp-type/bmp_type_group_list/")))})).exhaustMap((function(e){var r,o,l,i,a,s,p,u,m,d=null===(r=t.getState())||void 0===r||null===(o=r.layers)||void 0===o||null===(l=o.flat)||void 0===l?void 0:l.filter((function(e){var r,o,n;return e.name.includes((null===(r=t.getState())||void 0===r||null===(o=r.swamm)||void 0===o||null===(n=o.data)||void 0===n?void 0:n.code)+"_bmp_outlet")}))[0],c=null===(i=t.getState())||void 0===i||null===(a=i.layers)||void 0===a||null===(s=a.flat)||void 0===s?void 0:s.filter((function(e){var r,o,n;return e.name.includes((null===(r=t.getState())||void 0===r||null===(o=r.swamm)||void 0===o||null===(n=o.data)||void 0===n?void 0:n.code)+"_bmp_footprint")}))[0],f=null===(p=t.getState())||void 0===p||null===(u=p.layers)||void 0===u||null===(m=u.flat)||void 0===m?void 0:m.filter((function(e){var r,o,n;return e.name.includes((null===(r=t.getState())||void 0===r||null===(o=r.swamm)||void 0===o||null===(n=o.data)||void 0===n?void 0:n.code)+"_bmp_watershed")}))[0];return De().Observable.of((0,n.updateBmpTypeGroups)(e.data),(0,n.setBmpLayers)(d,c,f))}))},downloadBmpReportEpic:function(e){return e.ofType(n.DOWNLOAD_BMP_REPORT).mergeMap((function(e){return De().Observable.from(window.open("/swamm/print/".concat(e.bmpId,"/download/"),"_blank"))}))},filterBmpEpic:function(e,t){return e.ofType(n.TOGGLE_BMP_TYPE_VISIBILITY,n.SET_ALL_BMP_TYPES_VISIBILITY,n.TOGGLE_BMP_PRIORITY_VISIBILITY,n.TOGGLE_BMP_STATUS_VISIBILITY,n.TOGGLE_BMP_GROUP_PROFILE_VISIBILITY).mergeMap((function(){var e,r,o,n,l,i,a,s,p,u,m,d,c,f,v,_,g,h,E,y,F,B,T,S,w,C,M=JSON.parse(JSON.stringify(je)),P=!1,I=!1;if(null===(e=t.getState())||void 0===e||null===(r=e.swamm)||void 0===r||r.bmpTypes.map((function(e){if(e.visibility){var t=He("type",e.id);M.filterObj.filterFields.push(t),P=!0}})),!P){var R=He("type",-1);M.filterObj.filterFields.push(R)}if(null===(o=t.getState())||void 0===o||null===(n=o.swamm)||void 0===n||n.priorities.map((function(e){if(e.visibility){var t=He("priority",e.id);M.filterObj.filterFields.push(t),I=!0}})),!I){var O=He("priority",-1);M.filterObj.filterFields.push(O)}null===(l=t.getState())||void 0===l||null===(i=l.swamm)||void 0===i||i.groupProfiles.map((function(e){if(e.visibility){var t=He("group_profile",e.id);M.filterObj.filterFields.push(t)}})),null===(a=t.getState())||void 0===a||null===(s=a.swamm)||void 0===s||s.statuses.map((function(e){if(e.visibility){var t=He("status",e.name);M.filterObj.filterFields.push(t)}}));var A=JSON.parse(JSON.stringify(M)),x=JSON.parse(JSON.stringify(M)),L=JSON.parse(JSON.stringify(M));return A.filterObj.featureTypeName=null===(p=t.getState())||void 0===p||null===(u=p.swamm)||void 0===u||null===(m=u.bmpOutletLayer)||void 0===m?void 0:m.name,x.filterObj.featureTypeName=null===(d=t.getState())||void 0===d||null===(c=d.swamm)||void 0===c||null===(f=c.bmpFootprintLayer)||void 0===f?void 0:f.name,L.filterObj.featureTypeName=null===(v=t.getState())||void 0===v||null===(_=v.swamm)||void 0===_||null===(g=_.bmpWatershedLayer)||void 0===g?void 0:g.name,console.log("watershed filter: ",L),De().Observable.of((0,b.He)(null===(h=t.getState())||void 0===h||null===(E=h.swamm)||void 0===E||null===(y=E.bmpOutletLayer)||void 0===y?void 0:y.id,A),(0,b.He)(null===(F=t.getState())||void 0===F||null===(B=F.swamm)||void 0===B||null===(T=B.bmpFootprintLayer)||void 0===T?void 0:T.id,x),(0,b.He)(null===(S=t.getState())||void 0===S||null===(w=S.swamm)||void 0===w||null===(C=w.bmpWatershedLayer)||void 0===C?void 0:C.id,L))}))}}})},52948:(e,t,r)=>{function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(75875),a="FETCH_SWAMM_BMPTYPES_SUCCESS",s="FETCH_GROUP_PROFILES_SUCCESS",p="FETCH_PROJECT_MANAGER_CONFIG_ERROR",u="FETCH_PROJECT_MANAGER_CONFIG_SUCCESS",m="FETCH_SWAMM_ALL_BMPS_SUCCESS",d="FETCH_SWAMM_BMP_STATUSES_SUCCESS",c="FETCH_SWAMM_TARGETS_ERROR",f="FETCH_SWAMM_TARGETS_SUCCESS",v="SELECT_SWAMM_TARGET_ID",_="SHOW_SWAMM_BMP_CHART",g="HIDE_SWAMM_BMP_CHART",h="SHOW_TARGET_FORM",E="HIDE_TARGET_FORM",y="UPDATE_TARGET_FORM",b="CLEAR_TARGET_FORM",F="SUBMIT_TARGET_FORM_SUCCESS",B="DELETE_TARGET_SUCCESS",T="DELETE_TARGET_ERROR",S="SHOW_SWAMM_DATA_GRID",w="HIDE_SWAMM_DATA_GRID",C="SHOW_SWAMM_FEATURE_GRID",M="SHOW_BMP_MANAGER",P="HIDE_BMP_MANAGER",I="TOGGLE_BMP_MANAGER",R="SET_MENU_GROUP",O="TOGGLE_BMP_TYPE_VISIBILITY",A="TOGGLE_BMP_PRIORITY_VISIBILITY",x="TOGGLE_BMP_GROUP_PROFILE_VISIBILITY",L="TOGGLE_BMP_STATUS_VISIBILITY",N="SET_ALL_BMP_TYPES_VISIBILITY",G="SET_CHANGING_BMP_TYPE",D="SET_COMPLEX_BMP_FORM",k="SET_EXPANDED_FILTER",U="SET_BMP_LAYERS",H="SET_STATUS_FILTER",j="SHOW_BMP_FORM",W="HIDE_BMP_FORM",Y="SHOW_LOADING_BMP",z="HIDE_LOADING_BMP",V="SUBMIT_BMP_FORM_SUCCESS",q="MAKE_BMP_FORM",K="CLEAR_BMP_FORM",J="MAKE_DEFAULTS_BMP_FORM",X="MAKE_EXISTING_BMP_FORM",Z="SET_UPDATING_BMP",$="UPDATE_BMP_FORM",Q="SET_DRAWING_BMP_LAYER_NAME",ee="START_DRAWING_BMP",te="CLEAR_DRAWING_BMP_LAYER_NAME",re="REGISTER_MISSING_BMP_FEATURE_ID",oe="SET_EDITING_BMP_FEATURE_ID",ne="CLEAR_EDITING_BMP_FEATURE_ID",le="UPDATE_BMP_TYPE_GROUPS",ie="DELETE_BMP_SUCCESS",ae="DELETE_BMP_ERROR",se="SET_BMP_FILTER_MODE",pe="DOWNLOAD_BMP_REPORT",ue=r(23570),me=r(97395).SHOW_NOTIFICATION,de=function(e){return e.map((function(e){return e.visibility=!0,e})),{type:a,bmpTypes:e}};function ce(e){return console.log("fetchSwammBmpTypesError",e),{type:me,title:"Fetch Swamm Bmp Types Error",autoDismiss:600,position:"tc",message:"".concat(null==e?void 0:e.data),uid:ue(),level:"error"}}var fe=function(e){return{type:u,payload:e}};function ve(e){return console.log("*** error:",e),{type:p,error:e}}var _e=function(e){var t=e.map((function(e){return n(n({},e),{},{id:e.pk,visibility:!0})}));return{type:s,groupProfiles:t}};function ge(e){return console.log("fetchGroupProfilesError",e),{type:me,title:"Fetch fetchGroupProfiles Error",autoDismiss:600,position:"tc",message:"".concat(null==e?void 0:e.data),uid:ue(),level:"error"}}var he=function(e){return{type:m,allBmps:e}};function Ee(e){return console.log("fetchSwammAllBmpsError",e),{type:me,title:"Fetch Swamm All Bmps Error",autoDismiss:600,position:"tc",message:"".concat(null==e?void 0:e.data),uid:ue(),level:"error"}}var ye=function(e){return{type:d,statuses:e}};function be(e){return console.log("fetchSwammBmpStatusesError",e),{type:me,title:"Fetch Swamm Bmp Statuses Error",autoDismiss:600,position:"tc",message:"".concat(null==e?void 0:e.data),uid:ue(),level:"error"}}var Fe=function(){return{type:W}},Be=function(e){return{type:G,changingBmpType:e}},Te=function(e){return{type:X,bmp:e}},Se=function(){return{type:K}},we=function(){return{type:te}},Ce=function(){return console.log("clearEditingBmpFeatureId"),{type:ne}},Me=function(e){return function(t){t({type:f,targets:e})}},Pe=function(e){return console.log("*** error:",e),function(t){t({type:me,title:"Failed to load Targets",autoDismiss:60,position:"tc",message:"".concat(null==e?void 0:e.data),uid:ue(),level:"error"}),t({type:c,error:e})}},Ie=function(e){return function(t){return i.get("/swamm/api/".concat(e,"/pollutant-loading-target/")).then((function(e){t(Me(e.data))})).catch((function(e){t(Pe(e))}))}},Re=function(e){return function(t){t({type:me,title:"Success",autoDismiss:6,position:"tc",message:"BMP ID: ".concat(e.id," saved"),uid:ue(),level:"success"}),t({type:V,bmp:e})}};function Oe(e){return console.log("submitBmpFormError",e),{type:me,title:"Submit Bmp Form Error",autoDismiss:600,position:"tc",message:"Error saving BMP: ".concat(null==e?void 0:e.data),uid:ue(),level:"error"}}var Ae=function(e){return function(t){t({type:me,title:"Delete BMP Success",autoDismiss:6,position:"tc",message:"Successfully deleted BMP: ".concat(e),uid:ue(),level:"success"}),t({type:ie,bmpId:e})}},xe=function(e){return console.log("*** error:",e),function(t){t({type:me,title:"Delete BMP Error",autoDismiss:60,position:"tc",message:"".concat(null==e?void 0:e.data),uid:ue(),level:"error"}),t({type:ae,error:e})}},Le=function(){return{type:E,visibleTargetForm:!1}},Ne=function(){return{type:b,targetForm:null}},Ge=function(e){return function(t){t({type:me,title:"Success",autoDismiss:6,position:"tc",message:"Target: ".concat(e.id," saved"),uid:ue(),level:"success"}),t({type:F,target:e})}};function De(e){return console.log("submitTargetFormError",e),{type:me,title:"Submit Target Form Error",autoDismiss:600,position:"tc",message:"Error saving Target: ".concat(null==e?void 0:e.data),uid:ue(),level:"error"}}var ke=function(e){return function(t){t({type:me,title:"Delete Target Success",autoDismiss:6,position:"tc",message:"Successfully deleted Target: ".concat(e),uid:ue(),level:"success"}),t({type:B,targetId:e})}},Ue=function(e){return console.log("*** error:",e),function(t){t({type:me,title:"Delete Target Error",autoDismiss:60,position:"tc",message:"".concat(null==e?void 0:e.data),uid:ue(),level:"error"}),t({type:T,error:e})}};e.exports={UPDATE_BMP_TYPE_GROUPS:le,updateBmpTypeGroups:function(e){return console.log("****"),{type:le,bmpTypeGroups:e}},FETCH_SWAMM_BMPTYPES:"FETCH_SWAMM_BMPTYPES",fetchSwammBmpTypes:function(e){return function(t){return i.get("/swamm/api/".concat(e,"/bmp-type/")).then((function(e){t(de(e.data))})).catch((function(e){t(ce(e))}))}},FETCH_SWAMM_BMPTYPES_ERROR:"FETCH_SWAMM_BMPTYPES_ERROR",fetchSwammBmpTypesError:ce,FETCH_SWAMM_BMPTYPES_SUCCESS:a,fetchSwammBmpTypesSuccess:de,FETCH_PROJECT_MANAGER_CONFIG:"FETCH_PROJECT_MANAGER_CONFIG",fetchProjectManagerConfig:function(e){return function(t){return i.get("/projects/api/maps/".concat(t,"/")).then((function(t){e(fe(t.data.project))})).catch((function(t){e(ve(t))}))}},FETCH_PROJECT_MANAGER_CONFIG_ERROR:p,fetchProjectManagerConfigError:ve,FETCH_PROJECT_MANAGER_CONFIG_SUCCESS:u,fetchProjectManagerConfigSuccess:fe,FETCH_GROUP_PROFILES:"FETCH_GROUP_PROFILES",fetchGroupProfiles:function(){return function(e){return i.get("/api/v2/groups?page_size=1000").then((function(t){e(_e(t.data.group_profiles))})).catch((function(t){e(ge(t))}))}},FETCH_GROUP_PROFILES_ERROR:"FETCH_GROUP_PROFILES_ERROR",fetchGroupProfilesError:ge,FETCH_GROUP_PROFILES_SUCCESS:s,fetchGroupProfilesSuccess:_e,FETCH_SWAMM_ALL_BMPS:"FETCH_SWAMM_ALL_BMPS",fetchSwammAllBmps:function(e){return function(t){return i.get("/swamm/api/".concat(e,"/bmps/")).then((function(e){t(he(e.data))})).catch((function(e){t(Ee(e))}))}},FETCH_SWAMM_ALL_BMPS_ERROR:"FETCH_SWAMM_ALL_BMPS_ERROR",fetchSwammAllBmpsError:Ee,FETCH_SWAMM_ALL_BMPS_SUCCESS:m,fetchSwammAllBmpsSuccess:he,FETCH_SWAMM_BMP_STATUSES:"FETCH_SWAMM_BMP_STATUSES",fetchSwammBmpStatuses:function(e){return function(t){return i.get("/swamm/api/".concat(e,"/bmps/status_list/")).then((function(e){t(ye(e.data))})).catch((function(e){t(be(e))}))}},FETCH_SWAMM_BMP_STATUSES_ERROR:"FETCH_SWAMM_BMP_STATUSES_ERROR",fetchSwammBmpStatusesError:be,FETCH_SWAMM_BMP_STATUSES_SUCCESS:d,fetchSwammBmpStatusesSuccess:ye,FETCH_SWAMM_TARGETS:"FETCH_SWAMM_TARGETS",fetchSwammTargets:Ie,FETCH_SWAMM_TARGETS_ERROR:c,fetchSwammTargetsError:Pe,FETCH_SWAMM_TARGETS_SUCCESS:f,fetchSwammTargetsSuccess:Me,SELECT_SWAMM_TARGET_ID:v,selectSwammTargetId:function(e){return{type:v,selectedTargetId:e}},SUBMIT_BMP_FORM:"SUBMIT_BMP_FORM",submitBmpForm:function(e,t){return e.id?function(r){return console.log("updating existing BMP: ",e),i.patch("/swamm/api/".concat(t,"/bmps/").concat(e.id,"/"),e).then((function(e){r(Re(e.data)),r(Be(!1)),r(Te(e.data)),r(Ie(t))})).catch((function(e){r(Oe(e))}))}:function(r){return console.log("creating new BMP: ",e),i.post("/swamm/api/".concat(t,"/bmps/"),e).then((function(e){r(Re(e.data)),r(Be(!1)),r(Te(e.data)),r(Ie(t))})).catch((function(e){r(Oe(e))}))}},SUBMIT_BMP_FORM_ERROR:"SUBMIT_BMP_FORM_ERROR",submitBmpFormError:Oe,SUBMIT_BMP_FORM_SUCCESS:V,submitBmpFormSuccess:Re,TOGGLE_BMP_TYPE:"TOGGLE_BMP_TYPE",toggleBmpType:function(e){return function(t){t({type:"TOGGLE_BMP_TYPE",bmpType:e})}},TOGGLE_BMP_TYPE_VISIBILITY:O,toggleBmpTypeVisibility:function(e){return{type:O,bmpType:e}},TOGGLE_BMP_PRIORITY_VISIBILITY:A,toggleBmpPriorityVisibility:function(e){return{type:A,priority:e}},TOGGLE_BMP_GROUP_PROFILE_VISIBILITY:x,toggleBmpGroupProfileVisibility:function(e){return{type:x,groupProfile:e}},TOGGLE_BMP_STATUS_VISIBILITY:L,toggleBmpStatusVisibility:function(e){return{type:L,status:e}},SET_ALL_BMP_TYPES_VISIBILITY:N,setAllBmpTypesVisibility:function(e){return{type:N,boolValue:e}},SET_BMP_TYPE:"SET_BMP_TYPE",setBmpType:function(e,t){return function(r){r({type:"SET_BMP_TYPE",bmpType:e,isVisible:t})}},SET_STATUS_FILTER:H,setStatusFilter:function(e){return{type:H,statuses:e}},SET_MENU_GROUP:R,setMenuGroup:function(e){return{type:R,payload:e}},SHOW_BMP_FORM:j,showBmpForm:function(){return{type:j}},HIDE_BMP_FORM:W,hideBmpForm:Fe,SHOW_LOADING_BMP:Y,showLoadingBmp:function(){return{type:Y}},HIDE_LOADING_BMP:z,hideLoadingBmp:function(){return{type:z}},SHOW_SWAMM_DATA_GRID:S,showSwammDataGrid:function(){return{type:S}},HIDE_SWAMM_DATA_GRID:w,hideSwammDataGrid:function(){return{type:w}},SHOW_SWAMM_FEATURE_GRID:C,showSwammFeatureGrid:function(e){return{type:C,layer:e}},SHOW_SWAMM_BMP_CHART:_,showSwammBmpChart:function(){return{type:_}},HIDE_SWAMM_BMP_CHART:g,hideSwammBmpChart:function(){return{type:g}},SHOW_BMP_MANAGER:M,showBmpManager:function(){return{type:M}},HIDE_BMP_MANAGER:P,hideBmpManager:function(){return{type:P}},TOGGLE_BMP_MANAGER:I,toggleBmpManager:function(){return{type:I}},CLEAR_BMP_FORM:K,clearBmpForm:Se,MAKE_BMP_FORM:q,makeBmpForm:function(e){return{type:q,groupProfile:e}},MAKE_DEFAULTS_BMP_FORM:J,makeDefaultsBmpForm:function(e){return{type:J,bmpType:e}},MAKE_EXISTING_BMP_FORM:X,makeExistingBmpForm:Te,SET_UPDATING_BMP:Z,setUpdatingBmp:function(e){return{type:Z,updatingBmp:e}},SET_CHANGING_BMP_TYPE:G,setChangingBmpType:Be,SET_COMPLEX_BMP_FORM:D,setComplexBmpForm:function(e){return{type:D,complexBmpForm:e}},SET_EXPANDED_FILTER:k,setExpandedFilter:function(e){return{type:k,expandedFilter:e}},SET_BMP_LAYERS:U,setBmpLayers:function(e,t,r){return{type:U,bmpOutletLayer:e,bmpFootprintLayer:t,bmpWatershedLayer:r}},getBmpFormSuccess:function(e){return console.log("getBmpFormSuccess bmp:",e),function(t){t({type:me,title:"Success",autoDismiss:6,position:"tc",message:"BMP ID: ".concat(e.id," found"),uid:ue(),level:"success"}),t({type:"GET_BMP_FORM_SUCCESS",bmp:e})}},getBmpFormError:function(e){return console.log("getBmpFormError",e),{type:me,title:"Get Bmp Form Error",autoDismiss:600,position:"tc",message:"Error getting BMP: ".concat(null==e?void 0:e.data),uid:ue(),level:"error"}},UPDATE_BMP_FORM:$,updateBmpForm:function(e){return{type:$,kv:e}},START_DRAWING_BMP:ee,startDrawingBmp:function(){return{type:ee}},SET_DRAWING_BMP_LAYER_NAME:Q,setDrawingBmpLayerName:function(e){return console.log("setDrawingBmpLayerName",e),{type:Q,drawingBmpLayerName:e}},CLEAR_DRAWING_BMP_LAYER_NAME:te,clearDrawingBmpLayerName:we,REGISTER_MISSING_BMP_FEATURE_ID:re,registerMissingBmpFeatureId:function(e){return{type:re,missingBmpFeatureId:e}},SET_EDITING_BMP_FEATURE_ID:oe,setEditingBmpFeatureId:function(e){return console.log("setEditingBmpFeatureId",e),{type:oe,editingBmpFeatureId:e}},CLEAR_EDITING_BMP_FEATURE_ID:ne,clearEditingBmpFeatureId:Ce,DELETE_BMP:"DELETE_BMP",deleteBmp:function(e,t){return function(r){return i.delete("/swamm/api/".concat(e,"/bmps/").concat(t,"/"),{}).then((function(e){r(Ae(t)),r(Fe()),r(Se()),r(Ce()),r(we())})).catch((function(e){r(xe(e))}))}},DELETE_BMP_ERROR:ae,deleteBmpError:xe,DELETE_BMP_SUCCESS:ie,deleteBmpSuccess:Ae,SET_BMP_FILTER_MODE:se,setBmpFilterMode:function(e){return{type:se,bmpFilterMode:e}},SHOW_TARGET_FORM:h,showTargetForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:h,visibleTargetForm:!0,target:e}},HIDE_TARGET_FORM:E,hideTargetForm:Le,UPDATE_TARGET_FORM:y,updateTargetForm:function(e){return{type:y,kv:e}},CLEAR_TARGET_FORM:b,clearTargetForm:Ne,SUBMIT_TARGET_FORM:"SUBMIT_TARGET_FORM",submitTargetForm:function(e,t){return e.id?function(r){return console.log("updating existing Target: ",e),i.patch("/swamm/api/".concat(t,"/pollutant-loading-target/").concat(e.id,"/"),e).then((function(e){r(Ge(e.data)),r(Ie(t)),r(Le()),r(Ne())})).catch((function(e){r(De(e))}))}:function(r){return console.log("creating new Target: ",e),i.post("/swamm/api/".concat(t,"/pollutant-loading-target/"),e).then((function(e){r(Ge(e.data)),r(Ie(t)),r(Le()),r(Ne())})).catch((function(e){r(De(e))}))}},SUBMIT_TARGET_FORM_SUCCESS:F,submitTargetFormSuccess:Ge,SUBMIT_TARGET_FORM_ERROR:"SUBMIT_TARGET_FORM_ERROR",submitTargetFormError:De,DELETE_TARGET:"DELETE_TARGET",deleteTarget:function(e,t){return function(r){return i.delete("/swamm/api/".concat(e,"/pollutant-loading-target/").concat(t,"/"),{}).then((function(o){r(ke(t)),r(Ie(e)),r(Le()),r(Ne())})).catch((function(e){r(Ue(e))}))}},DELETE_TARGET_SUCCESS:B,deleteTargetSuccess:ke,DELETE_TARGET_ERROR:T,deleteTargetError:Ue,DOWNLOAD_BMP_REPORT:pe,downloadBmpReport:function(e){return{type:pe,bmpId:e}}}},34088:e=>{e.exports=function(){for(var e=arguments.length,t=[],r=0;r<e;r++)t[r]=arguments[r];if(0!==(t=t.filter((function(e){return null!=e}))).length)return 1===t.length?t[0]:t.reduce((function(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}))}},89447:(e,t,r)=>{(e.exports=r(9252)()).push([e.id,".msgapi .bmp-progress-button-danger {\n    top: 80px;\n    left: 20px;\n    min-width: 135px;\n    position: absolute;\n    opacity: 0.9;\n    border-radius: 4px;\n    background-color: inherit;\n}\n\n.msgapi .bmp-progress-button-success {\n    top: 80px;\n    left: 20px;\n    min-width: 135px;\n    position: absolute;\n    opacity: 0.9;\n    border-radius: 4px;\n    background-color: inherit;\n}\n\n.msgapi .bmp-loading-button {\n    position: absolute;\n    top: 200px;\n    left: 50%;\n    margin-top: -100px;\n    margin-left: -100px;\n    width: 200px;\n    height: 100px;\n    border-radius: 4px;\n    border-color: white;\n    color: white;\n    background: rgb(0, 86, 187);\n    text-align: center;\n    z-index: 10000;\n}\n\n.msgapi .filter-row {\n    width: 240px;\n    font-size: 14px;\n    text-align: left;\n    text-overflow: ellipsis ellipsis;\n    white-space: nowrap;\n    overflow: hidden;\n}\n\n.msgapi .form-group {\n     margin-bottom: 5px;\n}",""])},45177:(e,t,r)=>{"use strict";var o=r(29059);t.__esModule=!0,t.default=void 0;var n,l=o(r(50139)),i="clearTimeout",a=function(e){var t=(new Date).getTime(),r=Math.max(0,16-(t-p)),o=setTimeout(e,r);return p=t,o},s=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};l.default&&["","webkit","moz","o","ms"].some((function(e){var t=s(e,"request");if(t in window)return i=s(e,"cancel"),a=function(e){return window[t](e)}}));var p=(new Date).getTime();(n=function(e){return a(e)}).cancel=function(e){window[i]&&"function"==typeof window[i]&&window[i](e)};var u=n;t.default=u,e.exports=t.default},73759:e=>{"use strict";e.exports=function(e,t,r,o,n,l,i,a){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var p=[r,o,n,l,i,a],u=0;(s=new Error(t.replace(/%s/g,(function(){return p[u++]})))).name="Invariant Violation"}throw s.framesToPop=1,s}}},19970:(e,t,r)=>{var o=r(89447);"string"==typeof o&&(o=[[e.id,o,""]]),r(14246)(o,{}),o.locals&&(e.exports=o.locals)}}]);