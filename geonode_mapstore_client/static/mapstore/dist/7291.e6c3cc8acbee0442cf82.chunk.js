(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[7291],{85148:(t,n,e)=>{"use strict";e.d(n,{Qw:()=>v,jo:()=>p,m$:()=>y,AF:()=>h,WT:()=>b,ns:()=>w,RP:()=>O,aK:()=>D,oP:()=>j});var r=e(75110),o=e(22222),i=e(57546),a=e.n(i),u=e(50542),c=e.n(u);function s(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return l(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?l(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function f(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function d(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?f(Object(e),!0).forEach((function(n){m(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):f(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function m(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var v=function(t,n){return function(e){return a()(e,"dimension.data[".concat(n,"][").concat(t,"]"))}},g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return c()(t.dimensions||[],{name:n})},p=function(t,n){return function(e){return v(t.id,n)(e)||g(t,n)}},y=function(t){return(0,r.l2)(t).reduce((function(n,e){var r=p(e,"time")(t);return r?d(d({},n),{},m({},e.id,r)):n}),{})},h=function(t){return(0,r.l2)(t).filter((function(n){var e=a()(t,"timeline.settings.showHiddenLayers"),r=g(n,"time");return(e||n.visibility)&&r}))},b=function(t){var n=a()(t,"dimension.currentTime");return n&&n.split("/")[0]},w=function(t){return a()(t,"dimension.offsetTime")},O=function(t){return!!w(t)},D=((0,o.P1)(y,(function(t){return Object.keys(t).reduce((function(n,e){return[].concat(s(n),s(t[e]&&t[e].values||[]))}),[]).sort()||[]})),function(t){return function(n){return s(a()(p(t,"time")(n),"values",[])).sort()}}),j=function(t,n){var e=v(n,"time")(t),r=e&&e.domain&&e.domain.split("--");if(r&&2===r.length)return r&&{start:r[0],end:r[1]};var o=e&&e.domain&&e.domain.split(",");return o&&o.length>0?{start:o[0],end:o[o.length-1]}:null}},97291:(t,n,e)=>{"use strict";e.d(n,{YK:()=>O,zb:()=>D,en:()=>j,cX:()=>S,__:()=>M,E2:()=>x,Li:()=>C,fP:()=>I,uy:()=>k,gB:()=>E,Ry:()=>_,m_:()=>U,dJ:()=>H,rV:()=>$,qJ:()=>F,pn:()=>B,F3:()=>N});var r=e(57546),o=e.n(r),i=e(20721),a=e.n(i),u=e(22222),c=e(84715),s=e(96309),l=e(55237),f=e(85148),d=e(827),m=e(75110);function v(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function g(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?v(Object(e),!0).forEach((function(n){p(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):v(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function p(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function y(t){return function(t){if(Array.isArray(t))return w(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||b(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var r,o,i=[],a=!0,u=!1;try{for(e=e.call(t);!(a=(r=e.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==e.return||e.return()}finally{if(u)throw o}}return i}}(t,n)||b(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,n){if(t){if("string"==typeof t)return w(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?w(t,n):void 0}}function w(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var O=function(t){return o()(t,"timeline.range")},D=function(t){return o()(t,"timeline.settings.collapsed")},j=function(t){return o()(t,"timeline.settings.autoSelect")},S=function(t){return o()(t,"timeline.settings.mapSync")},T=function(t,n){return(t||[]).reduce((function(t,e){return[].concat(y(t),y(function(t,n){var e=h(t.split("/"),3),r=e[0],o=e[1],i=e[2];if(i&&"0"!==i){var a=(0,l.Xu)({start:r,end:o,duration:i},n),u=a.count,c=a.start,s=a.end;return u>50?[{start:r,end:o,duration:i,type:"range",content:"".concat(u," items")}]:(0,l.tr)({start:c,end:s,duration:i}).map((function(t){return{start:new Date(t),end:new Date(t),type:"point"}}))}return isNaN(new Date(r).getTime())?null:[{start:new Date(r),end:new Date(o||r),type:o?"range":"point"}]}(e,n)))}),[]).filter((function(t){return t&&t.start}))},P=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(t.domain&&t.domain.values)return T(t.domain.values,n);if(t.histogram&&t.histogram.domain&&t.histogram.values){var e=t.histogram.domain.split("/"),r=h(e,3),o=r[0],i=r[1],a=r[2],u=Math.max.apply(Math,y(t.histogram.values)),c=(0,l.jb)({start:o,end:i,duration:a});return t.histogram.values.map((function(t,n){return g(g({},c[n]),{},{type:"range",itemType:"histogram",count:t,className:"histogram-item",content:'<div><div class="histogram-box" style="height: '.concat(100*t/u,'%"></div> <span class="histogram-count">').concat(t,"</span></div>")})}))}return[]},A=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,e=arguments.length>2?arguments[2]:void 0;return t&&t.values||t&&t.domain&&!(0,l._q)(t.domain)?T(t.values||t.domain.split(","),n):e&&e.histogram?P(e,n):[]},M=(0,c.y)(f.m$,O,(function(t){return o()(t,"timeline.rangeData")}),(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return y(Object.keys(t).map((function(r){return A(t[r],n,e[r]).map((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g(g({content:" "},t),{},{group:r})}))})).reduce((function(t,n){return[].concat(y(t),y(n))}),[]))})),x=function(t){return o()(t,"timeline.loading")},C=function(t){return o()(t,"timeline.selectedLayer")},I=function(t){return(0,m.CA)(t,C(t))},k=function(t){return I(t)&&I(t).name},E=function(t){return I(t)&&I(t).dimensions&&a()(I(t).dimensions.filter((function(t){return"time"===t.name})))},_=function(t){return o()(E(t),"source.url")},U=(0,u.P1)(f.WT,f.ns,(function(t,n){return{start:t,end:n}})),H=function(t){return(0,f.oP)(t,C(t))},$=f.AF,F=(0,u.P1)($,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.length>0})),B=function(t){return!D(t)&&F(t)},N=function(t){return function(n){var e=((0,d.Od)(n)||{}).bbox;if(!e)return{};var r=(0,f.Qw)(t,"time")(n),i=o()(r,"source.version"),a=Object.keys(e.bounds).reduce((function(t,n){return g(g({},t),{},p({},n,parseFloat(e.bounds[n])))}),{});if(!a||!S(n))return{};if("1.1"!==i){var u=(0,f.Qw)(t,"space")(n),c=o()(u,"domain.CRS");if(!c||!a||!S(n))return{};var l=h((0,s.reprojectBbox)(a,(0,d.uy)(n),c),4),m=l[0],v=l[1],y=l[2],b=l[3];return y<m&&"EPSG:4326"===c&&(y+=360),{bbox:"".concat(m,",").concat(v,",").concat(y,",").concat(b),crs:c}}var w=a.minx,O=a.miny,D=a.maxx,j=a.maxy,T=e.crs;return{bbox:"".concat(w,",").concat(O,",").concat(D,",").concat(j,",").concat(T)}}}},55237:(t,n,e)=>{"use strict";e.d(n,{tr:()=>h,jb:()=>b,Xu:()=>w,un:()=>D,Qn:()=>j,_q:()=>S,og:()=>T,$4:()=>P,kN:()=>A,oD:()=>M,V$:()=>x,uH:()=>C});var r=e(37153),o=e.n(r),i=e(16663),a=e.n(i),u=e(57546),c=e.n(u),s=e(9626),l=e.n(s),f=e(30381),d=e.n(f),m=e(86638),v=/PT?[\d\.]+[YMWDHMS]/,g=function(t){return t?o()(t)?new Date(t).getTime():(a()(t)&&t.getTime(),t):null},p=function(t,n){var e=g(n),r=1/0,o=-1;return t.forEach((function(t,n){var i=g(t),a=Math.abs(i-e);a<r&&(r=a,o=n)})),o},y=function(t){var n=t.start,e=t.end,r=t.duration,o=d().duration(r).asMilliseconds();return(new Date(e).getTime()-new Date(n).getTime())/o},h=function(t){for(var n=t.start,e=t.end,r=t.duration,o=d().duration(r).asMilliseconds(),i=[],a=new Date(n),u=new Date(e);a<=u;)i.push(new Date(a).toISOString()),a.setTime(a.getTime()+o);return i},b=function(t){var n=t.start,e=t.end,r=t.duration;return h({start:n,end:e,duration:r}).map((function(t){return{start:new Date(t),end:new Date(new Date(t).getTime()+d().duration(r).asMilliseconds())}}))},w=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.start,e=t.end,r=t.duration,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.start,a=o.end;if(!i||!a)return{count:y({start:n,end:e,duration:r}),start:n,end:e};var u=d().duration(r).asMilliseconds(),c=new Date(n).getTime(),s=new Date(e).getTime(),l=new Date(i).getTime(),f=new Date(a).getTime(),m=Math.ceil((l-c)/u),v=Math.floor((f-c)/u),g=Math.floor((s-c)/u);if(m>=0&&v<=g){var p=v-m;return{start:new Date(c+Math.max(0,m)*u),end:new Date(c+Math.min(g,v)*u),count:p}}return{count:y({start:n,end:e,duration:r}),start:n,end:e}},O=function(t){return t.match(v)[0]},D=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.start,e=t.end,r=arguments.length>1?arguments[1]:void 0,o=new Date(n),i=new Date(e),a=Math.floor(i.getTime()-o.getTime())/r,u=d().duration(a).toISOString(),c=O(u);return{range:{start:n,end:e},resolution:c}},j=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;return t[p(t,n)]},S=function(t){return t&&t.indexOf&&t.indexOf("--")>0},T=function(t,n){var e=d()(t).diff(n);return{start:e>=0?n:t,end:e>=0?t:n}},P=function(t){return 6e4*t.getTimezoneOffset()},A=function(t){var n=t;!a()(t)&o()(t)&&(n=new Date(t));var e=n.getUTCHours();e=e<10?"0"+e:e;var r=n.getUTCMinutes();r=r<10?"0"+r:r;var i=n.getUTCSeconds();return i=i<10?"0"+i:i,"".concat(e,":").concat(r,":").concat(i)},M=function(t){var n=t;!a()(t)&o()(t)&&(n=new Date(t));var e=n.getUTCMonth()+1,r=n.getUTCDate();return e=e<10?"0"+e:e,r=r<10?"0"+r:r,"".concat(n.getUTCFullYear(),"-").concat(e,"-").concat(r)},x=function(t,n){var e=(0,m.mh)(t),r="HH:mm:SS";switch(n){case"time":return r;case"date":return e;default:return e+" "+r}},C=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.Domains,e=void 0===n?{}:n,r=arguments.length>1?arguments[1]:void 0,o=l()(e.DimensionDomain||[]).concat(),i=e["@version"]||e.version,a=c()(e,"SpaceDomain.BoundingBox");return a&&o.push({Identifier:"space",Domain:a}),o.map((function(t){var n=t.Identifier,e=t.Domain;return{source:{type:"multidim-extension",version:i,url:r},name:n,domain:e}}))}}}]);