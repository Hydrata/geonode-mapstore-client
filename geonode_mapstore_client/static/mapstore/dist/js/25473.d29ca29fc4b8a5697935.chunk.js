(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[25473],{31935:(e,r,n)=>{"use strict";n.d(r,{YL:()=>l,B0:()=>c,Mz:()=>a,TC:()=>s,qS:()=>d,Pe:()=>v,TP:()=>f});var t=n(22222),o=n(675110),u=n(93152),i=n(624262),l=function(e){return e.backgroundSelector&&e.backgroundSelector.source},c=function(e){return e.backgroundSelector&&e.backgroundSelector.modalParams},a=function(e){return e.backgroundSelector&&e.backgroundSelector.backgrounds||[]},s=function(e){return e.backgroundSelector&&e.backgroundSelector.lastRemovedId},d=function(e){return e.backgroundSelector&&e.backgroundSelector.confirmDeleteBackgroundModal},v=function(e){return e.backgroundSelector&&e.backgroundSelector.allowDeletion},f=(0,t.P1)(o.l2,u.$v,u.lh,(function(e,r,n){var t=e.filter((function(e){return e&&"background"===e.group}));return n&&n[r]?t.map((function(e){return(0,i.kf)(e,r)}))||[]:t}))},76907:(e,r,n)=>{"use strict";n.d(r,{ez:()=>te,gH:()=>ae,il:()=>ne,iV:()=>ie,Il:()=>de,hs:()=>be,sF:()=>me,oS:()=>le,yK:()=>ue,uu:()=>X,YR:()=>pe,fg:()=>V,Yj:()=>q,HG:()=>W,UU:()=>Z,l_:()=>se,L4:()=>re,V$:()=>oe,km:()=>ee,Bs:()=>Q});var t=n(800827),o=n(552259),u=n(22222),i=n(788113),l=n(401757),c=n(307877),a=n(285148),s=n(997291),d=n(675110),v=n(31935);function f(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function p(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?f(Object(n),!0).forEach((function(r){b(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function b(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var m={},g=(0,u.zB)({catalogServices:(0,u.zB)({services:i.b6,selectedService:i.Cb}),widgetsConfig:(0,u.zB)({widgets:l.zm,layouts:l.p,collapsed:l.lF}),mapInfoConfiguration:c.bI,dimensionData:(0,u.zB)({currentTime:a.WT,offsetTime:a.ns}),timelineData:(0,u.zB)({selectedLayer:s.Li,endValuesSupport:s.Hc,snapRadioButtonEnabled:s.ei})}),y=["map"];function O(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function j(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?O(Object(n),!0).forEach((function(r){P(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function P(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var h=n(866113),w=n(367306),k=n(535721),S=n(452992),D=n(957557),E=n.n(D),I=n(701469),A=n.n(I),T=n(513218),C=n.n(T),x=n(618446),z=n.n(x),R=n(478718),B=n.n(R),M=n(441609),_=n.n(M),L=n(227361),U=n.n(L),K=["data"],F=["maps"];function Y(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n,t,o={},u=Object.keys(e);for(t=0;t<u.length;t++)n=u[t],r.indexOf(n)>=0||(o[n]=e[n]);return o}(e,r);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(t=0;t<u.length;t++)n=u[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function H(e){return function(e){if(Array.isArray(e))return J(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(e){if("string"==typeof e)return J(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(e,r):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function N(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function $(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?N(Object(n),!0).forEach((function(r){G(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function G(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var V=function(e){var r,n,t,o=null==e||null===(r=e.gnresource)||void 0===r?void 0:r.id,u=null==e||null===(n=e.gnresource)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.pk;return o||u},W=function(e){var r,n;return(null==e||null===(r=e.gnresource)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.perms)||[]},q=function(e){var r,n;return(null==e||null===(r=e.gnresource)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.title)||!1},X=function(e){var r,n;return(null==e||null===(r=e.gnresource)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.abstract)||!1},Z=function(e){var r,n;return(null==e||null===(r=e.gnresource)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.thumbnail_url)||!1},Q=function(e){var r,n;return(null==e||null===(r=e.gnresource)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.updatingThumbnail)||!1},ee=function(e){var r,n;return(null==e||null===(r=e.gnresource)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.thumbnailChanged)||!1},re=function(e){var r;return(null==e||null===(r=e.gnresource)||void 0===r?void 0:r.type)||!1},ne=function(e){var r,n,t,o,u=null==e||null===(r=e.gnresource)||void 0===r||null===(n=r.permissions)||void 0===n?void 0:n.canEdit,i=(null==e||null===(t=e.gnresource)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.perms)||[];return u||i.includes("change_resourcebase")},te=function(e){var r,n,t;return null==e||null===(r=e.security)||void 0===r||null===(n=r.user)||void 0===n||null===(t=n.perms)||void 0===t?void 0:t.includes("add_resource")},oe=function(e){var r;return!(null==e||null===(r=e.gnresource)||void 0===r||!r.isNew)},ue=function(e){var r;return null==e||null===(r=e.gnresource)||void 0===r?void 0:r.data},ie=function(e){var r;return(null==e||null===(r=e.gnresource)||void 0===r?void 0:r.compactPermissions)||{}},le=function(e){var r,n,t,o=null==e||null===(r=e.gnresource)||void 0===r?void 0:r.compactPermissions,u=null==e||null===(n=e.gnresource)||void 0===n?void 0:n.isCompactPermissionsChanged,i=null==e||null===(t=e.gnresource)||void 0===t?void 0:t.geoLimits;return{compactPermissions:(u||(null==i?void 0:i.length)>0)&&o?o:null,geoLimits:(null==i?void 0:i.length)>0?i:null}},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e&&r.some((function(r){return e.info.groups.some((function(e){return e===r.name}))&&"manage"===r.permissions}))||!1},ae=function(e){var r,n=ie(e),t=n.users||[],o=n.groups||[],u=n.organizations||[],i=null==e||null===(r=e.security)||void 0===r?void 0:r.user,l=(i&&t.find((function(e){return e.id===i.pk}))||{}).permissions;return["owner","manage"].includes(l)||ce(i,o)||ce(i,u)},se=function(e){var r;return null==e||null===(r=e.gnresource)||void 0===r?void 0:r.selectedLayerPermissions},de=function(e,r){var n;switch(r||(null==e||null===(n=e.gnresource)||void 0===n?void 0:n.type)){case k.P6.MAP:return(0,t.Od)(e)?function(e){var r=(0,d.l2)(e),n=function(e){var r=(0,t.Od)(e),n=(0,d.l2)(e),u=(0,d.Bt)(e),i=(0,v.Mz)(e),l=function(e){return e.searchconfig&&e.searchconfig.textSearchConfig}(e),c=function(e){return e.searchbookmarkconfig&&e.searchbookmarkconfig.bookmarkSearchConfig}(e),a=function(e){var r=Object.keys(m).reduce((function(r,n){return p(p({},r),{},b({},n,m[n](e)))}),{});return p(p({},g(e)),r)}(e);return o.default.saveMapConfiguration(r,n,u,i,l,c,a)}(e),u=n.map;return j(j({},function(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n,t,o={},u=Object.keys(e);for(t=0;t<u.length;t++)n=u[t],r.indexOf(n)>=0||(o[n]=e[n]);return o}(e,r);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(t=0;t<u.length;t++)n=u[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(n,y)),{},{map:j(j({},u),{},{layers:((null==u?void 0:u.layers)||[]).map((function(e){var n=r.find((function(r){return r.id===e.id}));if(n){var t=n.availableStyles;return j(j({},e),{},{availableStyles:t})}return e}))})})}(e):null;case k.P6.GEOSTORY:return(0,h.Kg)(e);case k.P6.DASHBOARD:return(0,l.md)(e);default:return null}};function ve(e,r){return A()(e)?e.map((function(e){return ve(e,r)})):C()(e)?Object.keys(E()(e,r)).reduce((function(n,t){return $($({},n),{},G({},t,ve(e[t],r)))}),{}):e}function fe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=1e-12;return e.crs===r.crs&&Math.abs(e.x-r.x)<n&&Math.abs(e.y-r.y)<n}var pe=function(e){var r,n,t,u=ae(e),i=(0,S.s2)(e),l=(0,S.SJ)(e);if(!u||i||l)return null;var c=null==e||null===(r=e.gnresource)||void 0===r?void 0:r.type,a=["title","abstract","data"],s=B()((null==e||null===(n=e.gnresource)||void 0===n?void 0:n.initialResource)||{},a),d=s.data,v=void 0===d?{}:d,f=Y(s,K),p=le(e),b=p.compactPermissions,m=p.geoLimits,g=JSON.parse(JSON.stringify(de(e)||{})),y=E()(null==e||null===(t=e.gnresource)||void 0===t?void 0:t.data,["thumbnail_url","thumbnailChanged","updatingThumbnail"])||{},O=B()(y,a),j=!function(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=null==e||null===(r=e.gnresource)||void 0===r?void 0:r.type;if(_()(n)||_()(t))return!0;switch(u){case k.P6.MAP:return(0,o.compareMapChanges)(ve(n,["extraParams","getFeatureInfo","store","capability","extendedParams","availableStyles","center","zoom","bbox"]),ve(t,["extraParams","getFeatureInfo","store","capability","extendedParams","availableStyles","center","zoom","bbox"]));case k.P6.GEOSTORY:return z()(ve(n,["fontFamilies"]),ve(t,["fontFamilies"]));case k.P6.DASHBOARD:var i=(null==n?void 0:n.widgets)||[],l=i.every((function(e){return"map"!==e.widgetType||!!e.maps})),c=!!((null==t?void 0:t.widgets)||[]).find((function(e){if("map"===e.widgetType){var r,n=i.find((function(r){return r.id===e.id})),t=H(e.maps),o=l?t.every((function(e){var r,t=(null==n||null===(r=n.maps)||void 0===r?void 0:r.find((function(r){return r.mapId===e.mapId})))||{};return fe(null==t?void 0:t.center,null==e?void 0:e.center)})):fe(null==n||null===(r=n.map)||void 0===r?void 0:r.center,t[0].center);return!n||!o}return!1})),a=l?t:$($({},t),{},{widgets:t.widgets.map((function(e){if(e.maps){var r=e.maps;delete e.maps,e.map=r[0]}return e}))}),s=["bbox","size","center","layouts"],d=l?s:["bbox","size","center","layouts","mapId","dependenciesMap","selectedMapId"];return z()(ve(n,s),ve(a,d))&&!c;default:return!0}}(e,v,g),P=!(_()(O)||_()(f)||z()(O,f));return b||m||j||P?{compactPermissions:b,geoLimits:m,resource:P?y:void 0,data:j?g:void 0,resourceType:c,pk:y.pk}:null},be=function(e){return U()((0,h.Kg)(e),"resources",[]).filter((function(e){var r;return"geonode"===(null==e||null===(r=e.data)||void 0===r?void 0:r.sourceId)})).reduce((function(e,r){return["image","video"].includes(r.type)&&r.id?$($({},e),{},{documents:[].concat(H(e.documents),[r.id])}):"map"===r.type&&r.id?$($({},e),{},{maps:[].concat(H(e.maps),[r.id])}):e}),{maps:[],documents:[]})},me=function(e){return U()((0,w.hS)(e),"widgets",[]).reduce((function(e,r){var n,t,o,u,i=r.maps,l=Y(r,F);return i&&"map"===l.widgetType?$($({},e),{},{maps:[].concat(H(e.maps),H(i.filter((function(e){var r;return!(null==e||null===(r=e.extraParams)||void 0===r||!r.pk)})).map((function(e){return e.extraParams.pk}))))}):"map"===l.widgetType&&null!==(n=l.map)&&void 0!==n&&null!==(t=n.extraParams)&&void 0!==t&&t.pk?$($({},e),{},{maps:[].concat(H(e.maps),[null===(o=l.map)||void 0===o||null===(u=o.extraParams)||void 0===u?void 0:u.pk])}):e}),{maps:[]})}},452992:(e,r,n)=>{"use strict";n.d(r,{jp:()=>d,WB:()=>v,zL:()=>f,aZ:()=>p,IX:()=>b,SJ:()=>m,s2:()=>g});var t=n(76907),o=n(12530),u=n(653488);function i(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function l(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?i(Object(n),!0).forEach((function(r){c(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function c(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(e){if("string"==typeof e)return s(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,r):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var d=function(e,r){var n,t;return((null==e||null===(n=e.resourceservice)||void 0===n||null===(t=n.processes)||void 0===t?void 0:t.find((function(e){var n,t;return(null==e||null===(n=e.resource)||void 0===n?void 0:n.pk)===(null==r||null===(t=r.resource)||void 0===t?void 0:t.pk)&&(null==e?void 0:e.processType)===(null==r?void 0:r.processType)})))||{}).completed},v=function(e){var r,n,o=(0,t.yK)(e);return!!(null==e||null===(r=e.resourceservice)||void 0===r||null===(n=r.downloads)||void 0===n?void 0:n.find((function(e){return(null==e?void 0:e.pk)===(null==o?void 0:o.pk)})))},f=function(e){var r,n=(0,u.BP)(e),t=(null==e||null===(r=e.resourceservice)||void 0===r?void 0:r.downloads)||[];return null==n?void 0:n.reduce((function(e,r){return t.find((function(e){return e.pk===r.pk}))?[].concat(a(e),[l({},r)]):a(e)}),[])},p=function(e){var r,n=(0,u.n)(e),t=(null==e||null===(r=e.resourceservice)||void 0===r?void 0:r.downloads)||[];return null==n?void 0:n.reduce((function(e,r){return t.find((function(e){return e.pk===r.pk}))?[].concat(a(e),[l({},r)]):a(e)}),[])},b=function(e){var r,n,u=(0,t.yK)(e),i=u&&(null==e||null===(r=e.resourceservice)||void 0===r||null===(n=r.processes)||void 0===n?void 0:n.find((function(e){var r;return(null==e||null===(r=e.resource)||void 0===r?void 0:r.pk)===(null==u?void 0:u.pk)&&(null==e?void 0:e.processType)===o.zj.PERMISSIONS_RESOURCE})));return!(!i||null!=i&&i.completed)},m=function(e){var r,n,u=(0,t.yK)(e),i=u&&(null==e||null===(r=e.resourceservice)||void 0===r||null===(n=r.processes)||void 0===n?void 0:n.find((function(e){var r;return(null==e||null===(r=e.resource)||void 0===r?void 0:r.pk)===(null==u?void 0:u.pk)&&(null==e?void 0:e.processType)===o.zj.COPY_RESOURCE})));return!(!i||null!=i&&i.completed)},g=function(e){var r,n,u=(0,t.yK)(e),i=u&&(null==e||null===(r=e.resourceservice)||void 0===r||null===(n=r.processes)||void 0===n?void 0:n.find((function(e){var r;return(null==e||null===(r=e.resource)||void 0===r?void 0:r.pk)===(null==u?void 0:u.pk)&&(null==e?void 0:e.processType)===o.zj.DELETE_RESOURCE})));return!(!i||null!=i&&i.completed)}},653488:(e,r,n)=>{"use strict";n.d(r,{BP:()=>l,n:()=>c,m0:()=>a,ak:()=>s});var t=n(535721);function o(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function u(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?o(Object(n),!0).forEach((function(r){i(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function i(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var l=function(e){var r,n,o=(null==e||null===(r=e.gnsearch)||void 0===r?void 0:r.resources)||[],i=(null==e||null===(n=e.resourceservice)||void 0===n?void 0:n.processes)||[],l=o.map((function(e){var r=i.filter((function(r){var n;return(null==r||null===(n=r.resource)||void 0===n?void 0:n.pk)===(null==e?void 0:e.pk)}));return r.length>0?u(u({},e),{},{processes:r}):e}));return(0,t.AU)(l)},c=function(e){var r,n,o,i=(null==e||null===(r=e.gnsearch)||void 0===r||null===(n=r.featuredResources)||void 0===n?void 0:n.resources)||[],l=(null==e||null===(o=e.resourceservice)||void 0===o?void 0:o.processes)||[],c=i.map((function(e){var r=l.filter((function(r){var n;return(null==r||null===(n=r.resource)||void 0===n?void 0:n.pk)===(null==e?void 0:e.pk)}));return r.length>0?u(u({},e),{},{processes:r}):e}));return(0,t.AU)(c)},a=function(e){var r,n=l(e).filter((function(e){return e["@temporary"]})).length;return((null==e||null===(r=e.gnsearch)||void 0===r?void 0:r.total)||0)+n},s=function(e){var r;return null==e||null===(r=e.gnsearch)||void 0===r?void 0:r.facetItems}}}]);