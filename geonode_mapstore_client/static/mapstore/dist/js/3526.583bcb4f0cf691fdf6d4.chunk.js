(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[3526],{903526:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});var n=t(253772),i=t.n(n);function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function a(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?o(Object(t),!0).forEach((function(r){c(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function c(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function l(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function u(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const s=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.drawIcons,n=r.getImageIdFromSymbolizer;l(this,e),this._parser=new(i()),this._drawIcons=t||function(){return Promise.resolve(null)},this._getImageIdFromSymbolizer=n||function(e){return e.symbolizerId}}var r,t;return r=e,(t=[{key:"readStyle",value:function(e){return e?this._parser.readStyle(e):Promise.reject("No style provided")}},{key:"writeStyle",value:function(e){var r=this;return e?this._drawIcons(e).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=a(a({},e),{},{rules:((null==e?void 0:e.rules)||[]).map((function(e){return a(a({},e),{},{symbolizers:((null==e?void 0:e.symbolizers)||[]).map((function(e){if("Icon"===e.kind){var n=t.find((function(t){return t.id===r._getImageIdFromSymbolizer(e)}))||{},i=n.image,o=n.width,c=n.height;if(i&&o&&c){var l=o>c?o:c,u=e.size/l;return a(a({},e),{},{size:u})}}return"Fill"===e.kind||"Mark"===e.kind?a(a({},e),{},{opacity:e.fillOpacity}):e}))})}))});return r._parser.writeStyle(n)})):Promise.reject("No style provided")}}])&&u(r.prototype,t),Object.defineProperty(r,"prototype",{writable:!1}),e}()}}]);