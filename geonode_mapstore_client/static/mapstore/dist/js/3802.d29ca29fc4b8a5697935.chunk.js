(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[3802],{691380:(e,t,n)=>{"use strict";n.d(t,{ZY:()=>u,Gv:()=>s});var r=n(124852),o=n.n(r),i=n(775382),a=n(867076),c=n(438482);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.overrideWidthProvider;return(0,a.compose)((0,a.defaultProps)({useDefaultWidthProvider:!t}),(function(e){return function(t){return o().createElement(i.Z,{handleWidth:!0},(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.width;return o().createElement(e,l({width:r},t))}))}}))},s=function(e){return(0,a.compose)((0,a.withStateHandlers)((function(){return{}}),{onResize:function(){return function(e){return{height:e.height}}}}),(0,c.Z)(e))}},264945:(e,t,n)=>{"use strict";n.d(t,{Z:()=>T});var r=n(124852),o=n.n(r),i=n(867076),a=n(313311),c=n.n(a),l=n(66604),u=n.n(l),s=n(669968),d=n(227361),p=n.n(d),f=n(91175),g=n.n(f);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){return p()(g()(e,(function(e){return e.color})),"color")};const h=(0,i.withProps)((function(e){var t=e.groups,n=e.showGroupColor,r=e.headerStyle,o=void 0===r?{borderTop:"3px solid rgba(0,0,0,0)",transition:"border-color .5s ease-out"}:r;return{headerStyle:n&&t&&b(t)?m(m({},o),{},{borderTop:"3px solid ".concat(b(t))}):o}}));n(889611);var O=["id","style","className","toolsOptions","rowHeight","breakpoints","cols","widgetOpts","widgets","layouts","dependencies","verticalCompact","compactMode","useDefaultWidthProvider","measureBeforeMount","width","showGroupColor","groups","canEdit","getWidgetClass","onWidgetClick","updateWidgetProperty","deleteWidget","toggleCollapse","toggleMaximize","editWidget","onLayoutChange","language","env"];function w(){return(w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var E=(0,i.branch)((function(e){var t=e.useDefaultWidthProvider;return void 0===t||t}),s.WidthProvider)(s.Responsive),C=h(n(394583).Z),x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.filter((function(e){return c()(e.widgets,(function(e){return e===t.id}))}))};const T=(0,i.pure)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.style,r=e.className,i=void 0===r?"":r,a=e.toolsOptions,l=void 0===a?{}:a,s=e.rowHeight,d=void 0===s?150:s,p=e.breakpoints,f=void 0===p?{lg:1200,md:996,sm:768,xs:480,xxs:0}:p,g=e.cols,v=void 0===g?{lg:6,md:6,sm:4,xs:2,xxs:1}:g,m=e.widgetOpts,y=void 0===m?{}:m,b=e.widgets,h=void 0===b?[]:b,j=e.layouts,S=e.dependencies,T=e.verticalCompact,k=void 0!==T&&T,I=e.compactMode,M=e.useDefaultWidthProvider,F=void 0===M||M,A=e.measureBeforeMount,R=e.width,Z=e.showGroupColor,W=e.groups,N=void 0===W?[]:W,G=e.canEdit,L=void 0===G||G,z=e.getWidgetClass,V=void 0===z?function(){}:z,_=e.onWidgetClick,q=void 0===_?function(){}:_,H=e.updateWidgetProperty,U=void 0===H?function(){}:H,$=e.deleteWidget,B=void 0===$?function(){}:$,Q=e.toggleCollapse,K=void 0===Q?function(){}:Q,J=e.toggleMaximize,Y=void 0===J?function(){}:J,X=e.editWidget,ee=void 0===X?function(){}:X,te=e.onLayoutChange,ne=void 0===te?function(){}:te,re=e.language,oe=e.env,ie=D(e,O),ae=h.filter((function(e){var t=e.mapSync,n=e.dependenciesMap;return t&&n})).map((function(e){return e.dependenciesMap})),ce=function(e){return"table"===e.widgetType&&ae.filter((function(t){return Object.keys(t).filter((function(n){return t[n]&&-1!==t[n].indexOf(e.id)})).length>0})).length>0};return o().createElement(E,{key:t||"widgets-view",useDefaultWidthProvider:F,measureBeforeMount:A,width:F?void 0:R,isResizable:L,isDraggable:L,draggableHandle:".draggableHandle",onLayoutChange:ne,preventCollision:!0,style:n,className:"widget-container ".concat(i," ").concat(L?"":"no-drag"),rowHeight:d,autoSize:!0,verticalCompact:k,compactMode:I,breakpoints:f,cols:v,layouts:j?JSON.parse(JSON.stringify(u()(j,(function(e){return e.map((function(e){var t=c()(h,{id:e.i});return t?P(P({},e),{},{isResizable:t.dataGrid&&t.dataGrid.isResizable,isDraggable:t.dataGrid&&t.dataGrid.isDraggable,static:t.dataGrid&&t.dataGrid.static}):e}))})))):void 0},h.map((function(e){return o().createElement("div",{key:e.id,"data-grid":e.dataGrid,onClick:function(){return q(e)},className:V(e)},o().createElement(C,w({"data-grid":e.dataGrid},ie,e,{widgetOpts:y,quickFilters:ce(e)?e.quickFilters:void 0,toolsOptions:l,groups:x(N,e),showGroupColor:Z,dependencies:S,enableColumnFilters:ce(e),canEdit:L,updateProperty:function(){return U.apply(void 0,arguments)},toggleCollapse:function(){return K(e)},toggleMaximize:function(){return Y(e)},onDelete:function(){return B(e)},onEdit:function(){return ee(e)},language:re,env:oe})))})))}))},394583:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Ht});var r=n(124852),o=n.n(r),i=n(867076),a=n(12425),c=n(839860);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const u=(0,i.compose)(a.Z,(0,i.compose)((0,i.withState)("showTable","setShowTable",!1),(0,i.withHandlers)({toggleTableView:function(e){var t=e.setShowTable,n=e.showTable;return function(){return t(!n)}}}),(0,i.withProps)((function(e){var t,n=e.widgetTools,r=void 0===n?[]:n,o=e.toggleTableView,i=void 0===o?function(){}:o;return{widgetTools:[].concat((t=r,function(e){if(Array.isArray(e))return l(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"features-grid",target:"menu",textId:"widgets.widget.menu.showChartData",onClick:function(){return i()}}])}}))),(0,c.tR)(),(0,c.AV)(),(0,c.E6)(),(0,i.branch)((function(e){return!e.showTable}),(0,c.um)())),s=(0,i.compose)(a.Z,(0,c.tR)(),(0,c.E6)(),(0,c.um)());var d=n(227361),p=n.n(d),f=n(23279),g=n.n(f);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const b=(0,i.compose)((0,i.withPropsOnChange)(["gridEvents"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.gridEvents,n=void 0===t?{}:t,r=e.updateProperty,o=void 0===r?function(){}:r,i=e.id,a=g()((function(){return o.apply(void 0,arguments)}),500);return{gridEvents:m(m({},n),{},{onAddFilter:function(e){return a(i,"quickFilters.".concat(e.attribute),e)},onColumnResize:function(e,t,n,r,a,c){return o(i,'options.columnSettings["'.concat(p()(c.filter((function(e){return!e.hide}))[e],"name"),'"].width'),t)}})}})),a.Z,(0,c.tR)(),(0,c.E6)(),(0,c.um)(),(0,i.withPropsOnChange)(["gridEvents"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.gridEvents,n=void 0===t?{}:t,r=e.updateProperty,o=void 0===r?function(){}:r,i=e.id;return{gridEvents:m(m({},n),{},{onGridSort:function(e,t){return o(i,"sortOptions",{sortBy:e,sortOrder:t})}})}})));var h=n(213314);const O=(0,i.compose)(a.Z,(0,c.tR)(),(0,c.G5)(),(0,c.E6)(),(0,c.um)()),w=(0,i.compose)(a.Z,(0,c.tR)(),(0,c.E6)(),(0,c.um)());var j=n(387017),P=n(39589),S=n(264721),D=n.n(S),E=n(682492),C=n.n(E),x=n(378889),T=n(273849),k=n(49977),I=n.n(k),M=n(886850),F=n(624262),A=n(196958);const R=function(e){return e.switchMap((function(e){var t=e.layer,n=void 0===t?{}:t,r=e.options,o=void 0===r?{}:r,i=e.filter,a=e.onLoad,c=void 0===a?function(){}:a,l=e.onLoadError,u=void 0===l?function(){}:l;return(0,M.Mc)(n,i,{timeout:15e3,params:{propertyName:(0,A._Q)(o.propertyName),viewParams:o.viewParams}}).map((function(){return{loading:!1,error:void 0}})).do((function(e){return c({features:e.features,pagination:{totalFeatures:e.totalFeatures}})})).catch((function(e){return I().Observable.of({loading:!1,error:e,data:[]}).do(u)}))}))};function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(49977);const G=function(e){return e.filter((function(e){var t=e.layer;return(void 0===t?{}:t).name})).distinctUntilChanged((function(e,t){var n=e.layer,r=void 0===n?{}:n,o=e.options,i=void 0===o?{}:o,a=e.filter,c=e.sortOptions;return t.layer&&r.name===t.layer.name&&r.loadingError===t.layer.loadingError&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.propertyName===t.propertyName&&e.viewParams===t.viewParams}(i,t.options)&&a===t.filter&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.sortBy===t.sortBy&&e.sortOrder===t.sortOrder}(c,t.sortOptions)})).map((function(e){return W(W({},e),{},{features:[],pages:[],pagination:{}})}))};function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){V(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const _=function(e){return function(t){return t.switchMap((function(t){var n=t.layer,r=void 0===n?{}:n,o=t.size,i=void 0===o?20:o,a=t.maxStoredPages,c=void 0===a?5:a,l=t.filter,u=t.options,s=void 0===u?{}:u,d=t.sortOptions,p=t.pages,f=t.features,g=void 0===f?[]:f,v=t.onLoad,m=void 0===v?function(){}:v,y=t.onLoadError,b=void 0===y?function(){}:y;return e.switchMap((function(e,t){var n=e.pagesRange,o=e.pagination,a=void 0===o?{}:o;return function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(t),(0,M.Mc)(r,l,z(z({},(0,A.S9)(n,p,i)),{},{sortOptions:d,timeout:15e3,totalFeatures:a.totalFeatures,propertyName:(0,A._Q)(s.propertyName),viewParams:s.viewParams})).do((function(e){return m(z(z({},(0,A.f1)(e,n,{pages:p,features:g},z(z({},(0,A.S9)(n,p,i)),{},{size:i,maxStoredPages:c}))),{},{pagination:{totalFeatures:e.totalFeatures}}))})).map((function(){return{loading:!1}})).catch((function(e){return I().Observable.of({loading:!1,error:e}).do(b)})).startWith({loading:!0})}))}))}};function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){U(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $=function(e){var t,n=(0,i.createEventHandler)(),r=n.handler,o=n.stream;return(t=e,t.distinctUntilChanged((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).layer,t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).layer;return(0,F.Tt)(e)===(0,F.Tt)(t)&&e.loadingError===t.loadingError})).switchMap((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).layer;return(0,M.v$)({layer:e}).map((function(e){return{describeFeatureType:e.data,loading:!1,error:void 0}})).catch((function(e){return I().Observable.of({loading:!1,error:e})}))}))).combineLatest(function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return G(e).let(n?_(t.withLatestFrom(e.map((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).pagination;return{pagination:void 0===e?{}:e}})),(function(e,t){return H({pagesRange:e},t)}))):R).startWith({})}(e,o.startWith({startPage:0,endPage:1})),(function(e,t){return H(H(H({},e),t),{},{pageEvents:{moreFeatures:r,onPageChange:function(){}}})})).startWith({loading:!0})};const B=(0,i.compose)((0,i.defaultProps)({virtualScroll:!0,size:20,maxStoredPages:5}),(0,i.withStateHandlers)({pages:[],features:[],pagination:{}},{setData:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pages,n=e.features,r=e.pagination;return{pages:t,features:n,pagination:r,error:void 0}}}}),(0,i.withHandlers)({onLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.setData,n=void 0===t?function(){}:t,r=e.onLoad,o=void 0===r?function(){}:r;return function(){n.apply(void 0,arguments),o.apply(void 0,arguments)}}}),(0,i.withProps)((function(){return{dataStreamFactory:$}})),T.Z,(0,i.withProps)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=e.describeFeatureType,o=e.columnSettings,i=void 0===o?{}:o;return{columnSettings:C()(r?(0,x.getFeatureTypeProperties)(r).filter((function(e){return!D()((0,A._Q)(n.propertyName)||[],e.name)})).reduce((function(e,t){return H(H({},e),{},U({},t.name,{hide:!0}))}),{}):{},n.columnSettings||{},i)}})));var Q=n(630881),K=n(908488),J=n(873339),Y=n(505055),X=n.n(Y),ee=n(441609),te=n.n(ee),ne=n(618446),re=n.n(ne),oe=n(670956),ie=n(199767),ae=n(27835),ce=function(e){var t=e.wfsGetFeature;return(0,ae.Uh)("gs:Bounds",[(0,ie.qP)("features",(0,ie.fA)("text/xml","http://geoserver/wfs","POST",t))],(0,ie.DK)((0,ie.En)("bounds","application/json")))};var le=n(47805),ue=n(761868),se=n(552259);function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ge=(0,i.compose)((0,i.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,n=e.dependencies;return t&&(!te()(n.quickFilters)||!te()(n.filter))}),(0,i.compose)((0,i.withPropsOnChange)(["id"],(function(e){var t=e.hookRegister;return{hookRegister:(void 0===t?null:t)||(0,se.createRegisterHooks)()}})),(0,i.mapPropsStream)((function(e){return e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return re()(e.dependencies.quickFilters,t.dependencies.quickFilters)&&re()(e.dependencies.filter,t.dependencies.filter)&&re()(e.dependencies.layer,t.dependencies.layer)})).debounceTime(500).switchMap((function(e){var t=e.mapSync,n=e.dependencies,r=void 0===n?{}:n,o=e.filter,i=e.hookRegister;if(!t||te()(r.layer))return k.Observable.of({loading:!1});var a={};r.quickFilters&&(a=pe(pe({},a),(0,oe.r$)(o,r.quickFilters,r.options))),r.filter&&(a=pe(pe({},a),(0,le.composeAttributeFilters)([a,r.filter])));var c=r&&r.layer&&r.layer.name;if(!te()(a)){a=pe(pe({},a),{},{options:pe(pe({},a.options||{}),{},{noSchemaLocation:!0})});var l=(0,le.toOGCFilter)(c,a,"1.1.0");return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,ae.mG)(e,ce(t),{},n)}((0,F.ZA)(r.layer),{wfsGetFeature:l}).switchMap((function(e){var t,n,r;if(X().parseString(e,{explicitArray:!1},(function(e,o){t=o["ows:BoundingBox"],n=t["ows:LowerCorner"].split(" "),r=t["ows:UpperCorner"].split(" ")})),"0.0 0.0"===t["ows:LowerCorner"]&&"-1.0 -1.0"===t["ows:UpperCorner"])return k.Observable.of({loading:!1});var o={minx:parseFloat(n[0]),miny:parseFloat(n[1]),maxx:parseFloat(r[0]),maxy:parseFloat(r[1])},a=i.getHook(se.ZOOM_TO_EXTENT_HOOK);return a&&a(o,{crs:"EPSG:4326",maxZoom:21}),k.Observable.of({loading:!1})})).startWith({loading:!0}).catch((function(e){return k.Observable.of({error:"error getting bounds from filter",details:e})}))}return k.Observable.of({loading:!1})})).combineLatest(e,(function(e){var t=e.loading,n=void 0!==t&&t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,ue.t8)("loading",n,r)}))})))));var ve=n(313311),me=n.n(ve),ye=n(143378);function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){Oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const we=(0,i.compose)((0,i.withPropsOnChange)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,n=e.dependencies,r=void 0===n?{}:n,o=e.maps,i=void 0===o?[]:o,a=e.selectedMapId,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2?arguments[2]:void 0;return t!==c.mapSync||!re()(r,c.dependencies)||!re()(i,c.maps)||l!==c.filter||a!==c.selectedMapId}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,n=e.dependencies,r=void 0===n?{}:n,o=e.filter,i=void 0===o?{}:o,a=e.maps,c=void 0===a?[]:a,l=e.selectedMapId,u=r&&r.layer&&r.layer.name,s=me()(c,(function(e){return e.mapId===l}));if(s){var d=me()(null==s?void 0:s.layers,{name:u})||{},p={},f={},g=void 0;return t&&!te()(d)&&(r.quickFilters&&(p=he(he({},p),(0,oe.r$)(i,r.quickFilters,r.options))),r.filter&&(p=he(he({},p),(0,le.composeAttributeFilters)([p,r.filter]))),!te()(p)&&(0,le.toCQLFilter)(p))?(g=(0,le.toCQLFilter)(p),f=(0,ue.cc)(!1,he(he({},d),{},{params:(0,ye.v)({params:{CQL_FILTER:g}},d&&d.params&&d.params.CQL_FILTER)}),{name:u},s.layers),{maps:(0,ue.cc)(!1,he(he({},s),{},{layers:f}),{mapId:l},c)}):(f=s.layers.map((function(e){return he(he({},e),{},{params:he(he({},e.params),{},{CQL_FILTER:void 0})})})),{maps:(0,ue.cc)(!1,he(he({},s),{},{layers:f}),{mapId:l},c)})}return{maps:c}}))),je=function(e){return(0,i.withPropsOnChange)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.mapSync,r=t.dependencies,o=void 0===r?{}:r,a=t.selectedMapId,c=arguments.length>1?arguments[1]:void 0,l=c.mapSync,u=c.dependencies,s=c.selectedMapId;return u&&(0,i.shallowEqual)(o[e],u[e])||n===l||a===s}),(function(t){var n=t.maps,r=void 0===n?[]:n,o=t.mapSync,i=t.dependencies,a=void 0===i?{}:i,c=t.selectedMapId,l=me()(r,{mapId:c})||{},u=a[e]&&o?(0,ue.t8)(e,a[e],l):l;return{mapStateSource:"__dependency_system__",maps:r.map((function(e){return e.mapId===u.mapId?u:e})),map:u}}))};var Pe=n(724469),Se=["data"];function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){Ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xe(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=void 0===t?[]:t,r=xe(e,Se),i=Object.keys(n.reduce((function(e,t){return Ee(Ee({},e),t)}),{}));return o().createElement("div",{className:"mapstore-widget-table"},o().createElement(Pe.Table,{striped:!0},o().createElement("thead",null,o().createElement("tr",null,i.map((function(e,t){return o().createElement("th",null,t+1===i.length&&r.yAxisLabel?r.yAxisLabel:t>0?"".concat(e):e)})))),o().createElement("tbody",null,n.map((function(e){return o().createElement("tr",null,i.map((function(t){return o().createElement("td",null,e[t])})))})))))};var ke=n(496259),Ie=n(173014),Me=n(342415),Fe=n(639837),Ae=n(351990),Re=(0,Ie.Z)()((0,Me.Z)((0,Fe.Z)(Ae.Z)));const Ze=function(e){return o().createElement("div",{className:"mapstore-widget-chart"},o().createElement(ke.Z,null,o().createElement(Re,e)))};var We=n(805346),Ne=n(965539),Ge=n(572688),Le=n(743129),ze=n(294184),Ve=n.n(ze),_e=n(38560);const qe=function(e){var t,n,i,a=e.options,c=a.dropdownWidgets.length>1,l=a.dropdownWidgets.length-1,u=a.dropdownWidgets.findIndex((function(e){return e.id===a.activeWidget.id})),s=u===l?0:u+1,d=0===u?l:u-1;return o().createElement("div",{className:"widget-selector"},c?o().createElement(_e.Z,{className:"previous-widget btn-sm no-border",onPointerDown:function(){return a.setActiveWidget(a.dropdownWidgets[d])}},o().createElement(Pe.Glyphicon,{glyph:"arrow-left"})):null,o().createElement(Le.ZP,{openOnFocus:!0,clearable:!1,searchable:!1,value:{id:a.activeWidget.id,label:null!==(t=a.activeWidget.title)&&void 0!==t?t:null===(n=a.activeWidget)||void 0===n||null===(i=n.layer)||void 0===i?void 0:i.title},onChange:function(e){return a.setActiveWidget(a.dropdownWidgets.find((function(t){return t.id===e.value})))},options:(0,r.useMemo)((function(){return a.dropdownWidgets.map((function(e){var t,n;return{value:e.id,label:null!==(t=e.title)&&void 0!==t?t:null==e||null===(n=e.layer)||void 0===n?void 0:n.title,active:e.id===a.activeWidget.id}}))}),[a.dropdownWidgets]),optionComponent:function(e){var t=e.option,n=e.onSelect;return o().createElement("div",{className:Ve()({"Select-option":!0,"is-focused":t.active}),onPointerDown:function(e){return n(t,e)}},t.label)}}),c?o().createElement(_e.Z,{className:"next-widget btn-sm no-border",onPointerDown:function(){return a.setActiveWidget(a.dropdownWidgets[s])}},o().createElement(Pe.Glyphicon,{glyph:"arrow-right"})):null)},He=function(e){var t=e.id,n=e.title,r=e.confirmDelete,i=void 0!==r&&r,a=e.className,c=e.isDraggable,l=void 0===c||c,u=e.toggleDeleteConfirm,s=void 0===u?function(){}:u,d=e.onDelete,p=void 0===d?function(){}:d,f=e.icons,g=e.topLeftItems,v=e.topRightItems,m=e.headerStyle,y=void 0===m?{}:m,b=e.options,h=void 0===b?{}:b,O=e.children;return o().createElement("div",{className:"mapstore-widget-card ".concat(h.singleWidget?"single-widget":""),id:t},o().createElement(Ne.Z,{className:a,header:o().createElement("div",{style:y,className:"mapstore-widget-info ".concat(l?"draggableHandle":"")},o().createElement("div",{className:"mapstore-widget-header"},o().createElement("span",{className:"widget-icons"},f),g,h.singleWidget?o().createElement(qe,{options:h}):o().createElement("span",{className:"widget-title"},n),o().createElement("span",{className:"mapstore-widget-options"},v)))},O),i?o().createElement(Ge.Z,{confirmText:o().createElement(We.Z,{msgId:"widgets.widget.menu.delete"}),titleText:o().createElement(We.Z,{msgId:"widgets.widget.menu.delete"}),body:o().createElement(We.Z,{msgId:"widgets.widget.menu.confirmDelete"}),show:i,onClose:function(){return s(!1)},onConfirm:function(){return p(t)}}):null)};var Ue=["id","title","description","headerStyle","data","series","loading","icons","showTable","topRightItems","confirmDelete","dataGrid","onDelete","toggleTableView","toggleDeleteConfirm"];function $e(){return($e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showTable,n=e.toggleTableView,r=void 0===n?function(){}:n;return t?o().createElement(Pe.Glyphicon,{onClick:function(){r()},glyph:"arrow-left pull-left"}):null};var Qe=n(982030),Ke=n(599707),Je=(0,Qe.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text;return!t}),(function(){return{glyph:"sheet",messageId:"widgets.errors.notext"}}),Ke.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text;return o().createElement("div",{className:"mapstore-widget-default-content ql-editor",dangerouslySetInnerHTML:{__html:t}})})),Ye=n(957557),Xe=n.n(Ye),et=n(975480),tt=n(892936),nt=n(193190),rt=["layers"];function ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function it(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(n),!0).forEach((function(t){at(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function at(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ct(e){return function(e){if(Array.isArray(e))return lt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return lt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ut=(0,i.withHandlers)({onMapViewChanges:function(e){var t=e.updateProperty,n=void 0===t?function(){}:t,r=e.id;return function(e){e.layers;var t=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,rt);return n(r,"maps",t,"merge")}}})(tt.Z),st=n(118027);function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(n),!0).forEach((function(t){ft(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ft(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gt=(0,i.compose)((0,i.mapPropsStream)((function(e){return e.combineLatest(e.pluck("quickFilterStream$").distinctUntilChanged().switchMap((function(e){return e})).startWith(void 0),(function(e,t){var n,r=t&&e.options&&me()((0,A._Q)(null===(n=e.options)||void 0===n?void 0:n.propertyName),(function(t){return t===e.attributeName}))&&t[e.attributeName]||{},o=r&&(r.rawValue||r.value);return pt(pt({},e),{},{value:o})}))}))),vt=function(e){var t=e.options,n=e.localType,r=e.attributeName,o=e.quickFilterStream$;return(0,i.compose)((0,i.withProps)({quickFilterStream$:o,attributeName:r,options:t}),gt)((0,st.Q)(n,{name:r}))},mt=(0,i.compose)((0,i.mapPropsStream)((function(e){return e.map((function(t){return pt(pt({},t),{},{quickFilterStream$:e.pluck("quickFilters").distinctUntilChanged()})}))}))),yt=(0,i.compose)(mt,(0,i.withPropsOnChange)(["describeFeatureType","options"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.describeFeatureType,n=e.options,r=e.quickFilterStream$;return t?{filterRenderers:(0,A.Lo)(t).reduce((function(e,t){var o=t.localType,i=t.name,a=vt({options:n,localType:o,attributeName:i,quickFilterStream$:r});return pt(pt({},e),{},ft({},i,a))}),{})}:{}}))),bt=n(830029);function ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(n),!0).forEach((function(t){wt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jt=(0,n(218291).Z)()((0,r.lazy)((function(){return Promise.all([n.e(53370),n.e(94192),n.e(21951),n.e(88300),n.e(47310)]).then(n.bind(n,588300))}))),Pt=(0,Me.Z)((0,Ie.Z)((function(e){return!e.describeFeatureType}))(jt)),St=["rowHeight","headerRowHeight","headerFiltersHeight"].reduce((function(e,t){return Ot(Ot({},e),{},wt({},t,28))}),"");const Dt=yt((function(e){var t=e.id,n=e.title,r=e.loading,i=e.confirmDelete,a=void 0!==i&&i,c=e.enableColumnFilters,l=void 0!==c&&c,u=e.headerStyle,s=e.icons,d=e.topRightItems,p=e.toggleDeleteConfirm,f=void 0===p?function(){}:p,g=e.onDelete,v=void 0===g?function(){}:g,m=e.gridEvents,y=void 0===m?function(){}:m,b=e.pageEvents,h=void 0===b?{moreFeatures:function(){}}:b,O=e.describeFeatureType,w=e.filterRenderers,j=e.columnSettings,P=e.features,S=e.size,D=e.pages,E=e.error,C=e.pagination,x=void 0===C?{}:C,T=e.dataGrid,k=void 0===T?{}:T,I=e.virtualScroll,M=void 0===I||I,F=e.gridOpts,A=void 0===F?St:F,R=e.options,Z=void 0===R?{}:R;return o().createElement(He,{id:"widget-chart-".concat(t),title:n,headerStyle:u,icons:s,isDraggable:k.isDraggable,confirmDelete:a,onDelete:v,toggleDeleteConfirm:f,topRightItems:d,options:Z},o().createElement(Ne.Z,{footer:x.totalFeatures?o().createElement("div",{className:"widget-footer"},r?o().createElement("span",{style:{float:"right"}},o().createElement(et.Z,null)):null,void 0===E&&o().createElement("span",{className:"result-info"},o().createElement(We.Z,{msgId:"featuregrid.resultInfoVirtual",msgParams:{total:x.totalFeatures}}))):null},o().createElement(Pt,{emptyRowsView:function(){return o().createElement(bt.Z,{loading:r},o().createElement(Ke.Z,{messageId:"featuregrid.noFeaturesAvailable",glyph:"features-grid"}))},gridEvents:y,sortable:!0,defaultSize:!1,columnSettings:j,pageEvents:h,virtualScroll:M,enableColumnFilters:l,filterRenderers:w,features:P,pages:D,error:E,size:S,rowKey:"id",describeFeatureType:O,pagination:x,gridOpts:A,options:Z})))}));var Et=n(980844),Ct=["id","title","description","data","series","loading","showTable","confirmDelete","headerStyle","icons","topRightItems","dataGrid","toggleTableView","toggleDeleteConfirm","onDelete"];function xt(){return(xt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showTable,n=e.toggleTableView,r=void 0===n?function(){}:n;return t?o().createElement(Pe.Glyphicon,{onClick:function(){r()},glyph:"arrow-left pull-left"}):null},kt=n(946173),It=n(70919),Mt=["toggleDeleteConfirm","id","title","icons","headerStyle","confirmDelete","topRightItems","dataGrid","onDelete"];function Ft(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var At=(0,kt.Z)()(It.Z),Rt=(0,i.compose)(J.Z,Q.Z,K.Z,j.Z,u)((function(e){var t=e.id,n=e.title,r=e.description,i=e.headerStyle,a=e.data,c=void 0===a?[]:a,l=e.series,u=void 0===l?[]:l,s=e.loading,d=e.icons,p=e.showTable,f=e.topRightItems,g=e.confirmDelete,v=void 0!==g&&g,m=e.dataGrid,y=void 0===m?{}:m,b=e.onDelete,h=void 0===b?function(){}:b,O=e.toggleTableView,w=void 0===O?function(){}:O,j=e.toggleDeleteConfirm,P=void 0===j?function(){}:j,S=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Ue);return o().createElement(He,{id:"widget-chart-".concat(t),headerStyle:i,isDraggable:y.isDraggable,title:n,icons:d,topLeftItems:Be({loading:s,title:n,description:r,showTable:p,toggleTableView:w}),confirmDelete:v,onDelete:h,toggleDeleteConfirm:P,topRightItems:f,options:null==S?void 0:S.options},p?o().createElement(Te,$e({data:c},S)):o().createElement(Ze,$e({id:t,isAnimationActive:!s,loading:s,data:c,series:u,iconFit:!0},S)))})),Zt=(0,i.compose)(O)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.toggleDeleteConfirm,n=void 0===t?function(){}:t,r=e.icons,i=e.topLeftItems,a=e.id,c=e.title,l=e.text,u=e.headerStyle,s=e.topRightItems,d=e.options,p=void 0===d?{}:d,f=e.dataGrid,g=void 0===f?{}:f,v=e.confirmDelete,m=void 0!==v&&v,y=e.onDelete,b=void 0===y?function(){}:y;return o().createElement(He,{id:"widget-text-".concat(a),title:c,confirmDelete:m,onDelete:b,toggleDeleteConfirm:n,headerStyle:u,isDraggable:g.isDraggable,icons:r,topLeftItems:i,topRightItems:s,options:p},o().createElement(Je,{text:l}))})),Wt=(0,i.compose)(J.Z,we,je("center"),je("zoom"),ge,w)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.updateProperty,n=void 0===t?function(){}:t,r=e.toggleDeleteConfirm,i=void 0===r?function(){}:r,a=e.id,c=e.title,l=e.map,u=void 0===l?{}:l,s=e.maps,d=void 0===s?[]:s,p=e.selectedMapId,f=e.icons,g=e.hookRegister,v=e.mapStateSource,m=e.topRightItems,y=e.options,b=void 0===y?{}:y,h=e.confirmDelete,O=void 0!==h&&h,w=e.loading,j=void 0!==w&&w,P=e.dataGrid,S=void 0===P?{}:P,D=e.onDelete,E=void 0===D?function(){}:D,C=e.headerStyle,x=e.env,T=e.selectionActive,k=u.size,I=(k=void 0===k?{}:k).height,M=k.width,F=u.mapInfoControl,A=I>400&&M>400&&F;return o().createElement(He,{className:"map-widget-view",id:"widget-text-".concat(a),title:c,confirmDelete:O,onDelete:E,toggleDeleteConfirm:i,headerStyle:C,icons:f,topRightItems:[o().createElement(nt.Z,{className:"map-switcher",maps:d,onChange:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.apply(void 0,[a].concat(t))},value:p,disabled:T})].concat(ct(m)),isDraggable:S.isDraggable,options:b},o().createElement(Ne.Z,{footer:j?o().createElement("div",{className:"widget-footer"},o().createElement("span",{style:{float:"right"}},o().createElement(et.Z,null))):null},o().createElement(ut,{tools:A?["popup"]:[],updateProperty:n,id:a,map:it({},Xe()(u,"mapStateSource")),mapStateSource:v,hookRegister:g,layers:u&&u.layers,options:{style:{margin:"0 10px 10px 10px",height:"calc(100% - 10px)"}},env:x})))})),Nt=(0,i.compose)(J.Z,K.Z,Q.Z,B,b)(Dt),Gt=(0,i.compose)(J.Z,Q.Z,K.Z,P.Z,s)((function(e){var t=e.id,n=e.title,r=e.description,i=e.data,a=void 0===i?[]:i,c=e.series,l=void 0===c?[]:c,u=e.loading,s=e.showTable,d=e.confirmDelete,p=void 0!==d&&d,f=e.headerStyle,g=e.icons,v=e.topRightItems,m=e.dataGrid,y=void 0===m?{}:m,b=e.toggleTableView,h=void 0===b?function(){}:b,O=e.toggleDeleteConfirm,w=void 0===O?function(){}:O,j=e.onDelete,P=void 0===j?function(){}:j,S=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Ct);return o().createElement(He,{className:"counter-widget",id:"widget-chart-".concat(t),title:n,isDraggable:y.isDraggable,icons:g,topLeftItems:Tt({loading:u,title:n,description:r,showTable:s,toggleTableView:h}),confirmDelete:p,onDelete:P,toggleDeleteConfirm:w,headerStyle:f,topRightItems:v,options:null==S?void 0:S.options},o().createElement(Et.Z,xt({id:t,isAnimationActive:!u,loading:u,data:a,series:l,iconFit:!0},S)))})),Lt=(0,i.compose)(J.Z,h.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.toggleDeleteConfirm,n=void 0===t?function(){}:t,r=e.id,i=e.title,a=e.icons,c=e.headerStyle,l=e.confirmDelete,u=void 0!==l&&l,s=e.topRightItems,d=e.dataGrid,p=void 0===d?{}:d,f=e.onDelete,g=void 0===f?function(){}:f,v=Ft(e,Mt);return o().createElement(He,{id:"widget-text-".concat(r),title:i,confirmDelete:u,onDelete:g,toggleDeleteConfirm:n,headerStyle:c,icons:a,topRightItems:s,isDraggable:p.isDraggable,options:null==v?void 0:v.options},o().createElement(At,v))})),zt=["dependencies","toggleCollapse","exportCSV","exportImage","onDelete","onEdit"];function Vt(){return(Vt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _t(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var qt=function(e){var t;return null==e||null===(t=e.widgetOpts)||void 0===t?void 0:t[e.widgetType]};const Ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dependencies,n=e.toggleCollapse,r=void 0===n?function(){}:n,i=e.exportCSV,a=void 0===i?function(){}:i,c=e.exportImage,l=void 0===c?function(){}:c,u=e.onDelete,s=void 0===u?function(){}:u,d=e.onEdit,p=void 0===d?function(){}:d,f=_t(e,zt);return"text"===f.widgetType?o().createElement(Zt,Vt({},f,{toggleCollapse:r,onDelete:s,onEdit:p})):"table"===f.widgetType?o().createElement(Nt,Vt({},f,qt(f),{toggleCollapse:r,exportCSV:a,dependencies:t,onDelete:s,onEdit:p})):"counter"===f.widgetType?o().createElement(Gt,Vt({},f,qt(f),{toggleCollapse:r,dependencies:t,onDelete:s,onEdit:p})):"map"===f.widgetType?o().createElement(Wt,Vt({},f,qt(f),{toggleCollapse:r,dependencies:t,onDelete:s,onEdit:p})):"legend"===f.widgetType?o().createElement(Lt,Vt({},f,qt(f),{toggleCollapse:r,dependencies:t,onDelete:s,onEdit:p})):o().createElement(Rt,Vt({},f,qt(f),{toggleCollapse:r,exportCSV:a,dependencies:t,exportImage:l,onDelete:s,onEdit:p}))}},688395:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>L});var r=n(49977),o=n.n(r),i=n(666654),a=n.n(i),c=n(218721),l=n.n(c),u=n(227361),s=n.n(u),d=n(264721),p=n.n(d),f=n(618446),g=n.n(f),v=n(957557),m=n.n(v),y=n(114176),b=n.n(y),h=n(557579),O=n(881808),w=n(401757),j=n(580416),P=n(675110),S=n(324684),D=n(769293),E=n(555927),C=n(275982),x=n(178598),T=n(989077),k=n(117542),I=n.n(k),M=n(246781);function F(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){W(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=function(e){return e.ofType(D.WC,D.a3,D.W5).startWith({type:O.ok}).switchMap((function(t){return t.type===D.WC?o().Observable.never():e})).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type;return t===C.nk}))},G=function(e,t,n,r){return o().Observable.of((0,h.Rz)("mapSync",e),(0,h.Rz)("dependenciesMap",function(e,t,n){var r,o=n.dependenciesMap,i=n.mappings,c=["layer","filter","quickFilters","options"],l=["layers","viewport","zoom","center"],u=(h.oU.exec(t)||[])[1],s=b()(o,(function(e){return-1===e.indexOf(u)})),d=Object.keys(i).filter((function(e){return void 0!==i[e]})).reduce((function(e,n){return!a()(t,"map")&&p()(c,n)?Z(Z({},e),{},W({},n,"".concat(t,".").concat(i[n]))):a()(t,"map")?p()(l,n)?Z(Z({},e),{},W({},n,"map"===t?i[n]:"".concat(t.replace(/.map$/,""),".").concat(i[n]))):Z(Z({},e),{},W({},n,"".concat(t.replace(/.map$/,""),".").concat(i[n]))):e}),{}),f=t.split(".maps")[0];return e?Z(Z(Z({},s),d),{},(W(r={},"dependenciesMap","".concat(f,".dependenciesMap")),W(r,"mapSync","".concat(f,".mapSync")),r)):m()(s,[Object.keys(i)])}(e,t,n)))};const L={exportWidgetData:function(e){return e.ofType(h.Km).do((function(e){var t=e.data,n=void 0===t?[]:t,r=e.title,o=void 0===r?"data":r;return I().json2csv(n,(function(e,t){return e?null:(0,x.saveAs)(new Blob([t],{type:"text/csv"}),o+".csv")}))})).filter((function(){return!1}))},alignDependenciesToWidgets:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(O.ok,E.E9,h.Jm).map((function(){return(0,w.jx)(r())})).pluck("availableDependencies").distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return g()(F(e),F(t))})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,h._k)(e.reduce((function(e,t){var n,r,o=t.split(".maps")[0],i=t.replace(/.map$/,"");return a()(t,"map")?Z(Z({},e),{},(W(n={},"".concat(o,".dependenciesMap"),"".concat(o,".dependenciesMap")),W(n,"".concat(o,".mapSync"),"".concat(o,".mapSync")),W(n,"map"===t?"viewport":"".concat(i,".viewport"),"".concat(i,".bbox")),W(n,"map"===t?"center":"".concat(i,".center"),"".concat(i,".center")),W(n,"map"===t?"zoom":"".concat(i,".zoom"),"".concat(i,".zoom")),W(n,"map"===t?"layers":"".concat(i,".layers"),"map"===t?"layers.flat":"".concat(i,".layers")),n)):Z(Z({},e),{},(W(r={},"".concat(t,".filter"),"".concat(t,".filter")),W(r,"".concat(t,".quickFilters"),"".concat(t,".quickFilters")),W(r,"".concat(o,".dependenciesMap"),"".concat(o,".dependenciesMap")),W(r,"".concat(o,".mapSync"),"".concat(o,".mapSync")),W(r,"".concat(t,".layer"),"".concat(t,".layer")),W(r,"".concat(t,".options"),"".concat(t,".options")),r))}),{}))}))},toggleWidgetConnectFlow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(h.LH).switchMap((function(t){var n=t.active,i=t.availableDependencies,a=void 0===i?[]:i,c=t.options;return n&&a.length>0?1===a.length?G(n,a[0],c):o().Observable.of((0,h.kr)(n,{availableDependencies:a})).merge(e.ofType(h.V5).filter((function(){return(0,w.xI)(r())})).switchMap((function(e){var t=e.widget,i=s()((0,w.r0)(r()),"availableDependencies").filter((function(e){return(h.oU.exec(e)||[])[1]===t.id}));return"map"===t.widgetType&&(i=i.filter((function(e){return(h.jB.exec(e)||[])[2]===t.selectedMapId}))),G(n,i[0],c,t.dependeciesMap).concat(o().Observable.of((0,h.kr)(!1,{})))})).takeUntil(e.ofType(C.nk).merge(e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=e.key;return t===h.Cz&&n===h.jv}))))):G(n,a[0],c)}))},clearWidgetsOnLocationChange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(O.ok).switchMap((function(){var t=(0,S.F)(r()).split("/"),n=t[t.length-1];return e.let(N).filter((function(){var e=(0,S.F)(r()).split("/");return e[e.length-1]!==n})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload,n=void 0===t?{}:t;return n&&n.location&&n.location.pathname?o().Observable.of((0,h.K4)()):o().Observable.empty()}))}))},exportWidgetImage:function(e){return e.ofType(h.pV).do((function(e){var t,r,o=e.widgetDivId,i=e.title,a=void 0===i?"data":i,c=document.createElement("canvas"),l=document.querySelector("#".concat(o," .recharts-wrapper svg")),u=l.outerHTML?l.outerHTML:(t=l,(r=document.createElement("div")).appendChild(t.cloneNode(!0)),r.innerHTML);n.e(59425).then(n.t.bind(n,459425,23)).then((function(e){(0,e.default)(c,u,{renderCallback:function(){var e=c.getContext("2d");e.globalCompositeOperation="destination-over",e.fillStyle="#fff",e.fillRect(0,0,c.width,c.height),(0,T.RP)(c.toDataURL("image/jpeg",1),"".concat(a,".jpg"),"image/jpeg")}})}))})).filter((function(){return!1}))},updateLayerOnLayerPropertiesChange:function(e,t){return e.ofType(j.yS).switchMap((function(e){var n,r=e.layer,i=e.newProperties,a=t.getState(),c=(0,P.CA)(a,r);return(n=o().Observable).of.apply(n,F(l()(i,"layerFilter")&&c?[(0,h.Ko)(c)]:[]))}))},updateLayerOnLoadingErrorChange:function(e,t){return e.ofType(j.x9,j.vs).groupBy((function(e){return e.layerId})).map((function(e){return e.switchMap((function(e){var n,r=e.layerId,i=t.getState(),a=(0,P.CA)(i,r);return(n=o().Observable).of.apply(n,F(a&&a.previousLoadingError!==a.loadingError?[(0,h.Ko)(a)]:[]))}))})).mergeAll()},updateDependenciesMapOnMapSwitch:function(e,t){return e.ofType(h.$A).filter((function(e){var t=e.key;return p()(["maps","selectedMapId"],t)})).switchMap((function(e){var n=e.id,r=e.value,i=o().Observable.empty(),a="string"==typeof r?r:null==r?void 0:r.mapId;if(a){var c=(0,w.zm)(t.getState()),l=(0,M.IO)(c,n,a);g()(c,l)||(i=o().Observable.of((0,h.sZ)(l)))}return i}))}}},875859:(e,t,n)=>{"use strict";n.d(t,{Z:()=>I});var r=n(557579),o=n(881808),i=n(555927),a=n(727418),c=n.n(a),l=n(728252),u=n.n(l),s=n(227361),d=n.n(s),p=n(313311),f=n.n(p),g=n(957557),v=n.n(g),m=n(66604),y=n.n(m),b=n(984596),h=n.n(b),O=n(414293),w=n.n(O),j=n(761868);function P(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||D(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||D(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){if(e){if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k={dependencies:{viewport:"map.bbox",center:"map.center",zoom:"map.zoom"},containers:{floating:{widgets:[]}},builder:{settings:{step:0}}};const I=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case r.Cz:return u()("builder.settings.".concat(n.key),n.value,t);case r.n8:return u()("builder.editor",n.widget,u()("builder.settings",n.settings||k.settings,t));case r.dm:return u()("builder.editor",x(x({},n.widget),{},{widgetType:n.widget&&n.widget.widgetType||"chart"}),u()("builder.settings.step","chart"===(n.widget&&n.widget.widgetType||"chart")?1:0,t));case r.BV:if(n.key.includes("maps")&&!w()(n.value)){var a,l=n.value,s=r.h9.exec(n.key)||[],p=S(s,3),g=p[1],m=p[2];if(g){var b=d()(t,"builder.editor.maps",[]);l=u()(m,n.value,b.find((function(e){return e.mapId===g})))}return(0,j.vy)("builder.editor.maps",l,{mapId:g||(null===(a=n.value)||void 0===a?void 0:a.mapId)},t)}return u()("builder.editor.".concat(n.key),n.value,t);case r.Jm:return(0,j.vy)("containers[".concat(n.target,"].widgets"),x(x({id:n.id},n.widget),{},{dataGrid:n.id&&{y:0,x:0,w:1,h:1}}),{id:n.widget.id||n.id},t);case r.J5:var O="containers[".concat(n.target,"].widgets"),D=d()(t,O);return D?u()(O,n.widgets,t):t;case r.$A:var E=f()(d()(t,"containers[".concat(n.target,"].widgets")),{id:n.id}),C=n.value;return"merge"===n.mode&&(C="maps"===n.key?E.maps.map((function(e){var t;return e.mapId===(null===(t=n.value)||void 0===t?void 0:t.mapId)?x(x({},e),null==n?void 0:n.value):e})):c()({},E[n.key],n.value)),(0,j.vy)("containers[".concat(n.target,"].widgets"),u()(n.key,C,E),{id:n.id},t);case r.eb:if(n.layer){var T=d()(t,"containers[".concat(r.VR,"].widgets"));if(T)return u()("containers[".concat(r.VR,"].widgets"),T.map((function(e){return d()(e,"layer.id")===n.layer.id?u()("layer",n.layer,e):e})),t)}return t;case r.yY:var I="containers[".concat(r.VR,"].widgets"),M=(0,j.z6)("containers[".concat(n.target,"].widgets"),{id:n.widget.id},t),F=d()(M,I,[]);return u()(I,F.map((function(e){if(e.dependenciesMap){var t=S(r.oU.exec((Object.values(e.dependenciesMap)||[])[0]),2)[1];if(t&&n.widget.id===t)return x(x({},v()(e,"dependenciesMap")),{},{mapSync:!1})}return e})),t);case i.E9:var A=n.data;return u()("containers[".concat(r.VR,"]"),x({},A),t);case o.ok:var R=n.config||{},Z=R.widgetsConfig;return u()("containers[".concat(r.VR,"]"),x({},Z),t);case r.v8:return u()("containers[".concat(n.target,"].layout"),n.layout)(u()("containers[".concat(n.target,"].layouts"),n.allLayouts,t));case r.ff:case i.R4:return u()("containers[".concat(r.VR,"]"),k.containers[r.VR],t);case r.S0:var W=n.key,N=n.value;return u()("dependencies[".concat(W,"]"),N,t);case r.Q6:var G=n.key;return u()("dependencies[".concat(G,"]"),null,t);case r.kb:var L=n.dependencies;return u()("dependencies",L,t);case r.GV:return u()("dependencies",k.dependencies,t);case r.Ym:var z=n.widget,V=void 0===z?{}:z;if(V.dataGrid&&V.dataGrid.static)return t;var _=d()(t,"containers[".concat(n.target,"].collapsed[").concat(V.id));if(_){var q=[].concat(P(d()(t,"containers[".concat(n.target,"].layout"),[])),P(h()(d()(_,"layout",[])))),H=y()(d()(t,"containers[".concat(n.target,"].layouts"),{}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return[].concat(P(e),P(h()(d()(_,"layouts[".concat(t,"]"),[]))))}));return v()((0,j.qC)(u()("containers[".concat(n.target,"].layout"),q),u()("containers[".concat(n.target,"].layouts"),H))(t),"containers[".concat(n.target,"].collapsed[").concat(V.id,"]"))}return u()("containers[".concat(n.target,"].collapsed[").concat(V.id,"]"),{layout:f()(d()(t,"containers[".concat(n.target,"].layout"),[]),{i:V.id}),layouts:y()(d()(t,"containers[".concat(n.target,"].layouts"),{}),(function(e){return f()(e,{i:V.id})}))},t);case r.ke:var U,$,B,Q,K,J,Y,X,ee,te,ne,re,oe,ie,ae,ce,le,ue,se=n.widget,de=null==t||null===(U=t.containers)||void 0===U||null===($=U[n.target])||void 0===$?void 0:$.maximized;if(!se||null!==(B=se.dataGrid)&&void 0!==B&&B.static)return t;if(null!=de&&de.widget)return(0,j.qC)(u()("containers[".concat(n.target,"].layout"),de.layout),u()("containers[".concat(n.target,"].layouts"),de.layouts),u()("containers[".concat(n.target,"].maximized"),{}),u()("containers[".concat(n.target,"].widgets"),null==t||null===(ce=t.containers)||void 0===ce||null===(le=ce[n.target])||void 0===le||null===(ue=le.widgets)||void 0===ue?void 0:ue.map((function(e){return e.id===de.widget.id?x(x({},e),{},{dataGrid:x(x({},e.dataGrid),{},{isDraggable:!0,isResizable:!0})}):e}))))(t);if(null!=t&&null!==(Q=t.containers)&&void 0!==Q&&null!==(K=Q[n.target])&&void 0!==K&&null!==(J=K.collapsed)&&void 0!==J&&J[se.id])return t;var pe={x:0,y:0,w:1,h:1},fe=f()(null==t||null===(Y=t.containers)||void 0===Y||null===(X=Y[n.target])||void 0===X?void 0:X.layout,{i:se.id}),ge=x(x({},fe),pe);return(0,j.qC)(u()("containers[".concat(n.target,"].maximized"),{widget:se,layout:null==t||null===(ee=t.containers)||void 0===ee||null===(te=ee[n.target])||void 0===te?void 0:te.layout,layouts:null==t||null===(ne=t.containers)||void 0===ne||null===(re=ne[n.target])||void 0===re?void 0:re.layouts}),u()("containers[".concat(n.target,"].layout"),[ge]),u()("containers[".concat(n.target,"].layouts"),{xxs:[ge]}),u()("containers[".concat(n.target,"].widgets"),null==t||null===(oe=t.containers)||void 0===oe||null===(ie=oe[n.target])||void 0===ie||null===(ae=ie.widgets)||void 0===ae?void 0:ae.map((function(e){return e.id===se.id?x(x({},e),{},{dataGrid:x(x({},e.dataGrid),{},{isDraggable:!1,isResizable:!1})}):e}))))(t);case r.uU:var ve=d()(t,"containers[".concat(n.target,"].widgets"),[]).filter((function(e){return!e.dataGrid||!e.dataGrid.static})),me=ve.filter((function(e){return d()(t,"containers[".concat(n.target,"].collapsed[").concat(e.id,"]"))})),ye=ve.filter((function(e){return!d()(t,"containers[".concat(n.target,"].collapsed[").concat(e.id,"]"))})),be=0===ye.length;return be?me.reduce((function(t,n){return e(t,(0,r.f)(n))}),t):ye.length>0?ye.reduce((function(t,n){return e(t,(0,r.f)(n))}),t):t;case r.nw:return u()("tray",n.value,t);default:return t}}},510284:(e,t,n)=>{"use strict";n.d(t,{sw:()=>y,oB:()=>b});var r=n(49977),o=n.n(r),i=n(227361),a=n.n(i),c=n(505055),l=n(507526);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){var t="function"==typeof Map?new Map:void 0;return(d=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return p(e,arguments,v(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),g(r,e)})(e)}function p(e,t,n){return(p=f()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&g(o,n.prototype),o}).apply(null,arguments)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(849843);var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(o,e);var t,n,r=(t=o,n=f(),function(){var e,r=v(t);if(n){var o=v(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return s(this,e)});function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=r.call(this,e)).name="OGCError",n.code=t,n}return o}(d(Error)),y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{tagNameProcessors:[l.stripPrefix],explicitArray:!1,mergeAttrs:!0};return o().Observable.bindNodeCallback((function(e,n){return(0,c.parseString)(e,t,n)}))(e)},b=function(e){return e.switchMap((function(e){return"string"==typeof e.data&&e.data.indexOf("ExceptionReport")>0?o().Observable.bindNodeCallback((function(e,t){return(0,c.parseString)(e,{tagNameProcessors:[l.stripPrefix],explicitArray:!1,mergeAttrs:!0},t)}))(e.data).map((function(e){var t=a()(e,"ExceptionReport.Exception.ExceptionText");throw new m(t||"Undefined OGC Service Error",a()(e,"ExceptionReport.Exception.exceptionCode"))})):o().Observable.of(e)}))}},55237:(e,t,n)=>{"use strict";n.d(t,{tr:()=>P,jb:()=>S,Xu:()=>D,un:()=>C,Qn:()=>x,_q:()=>T,og:()=>k,$4:()=>I,kN:()=>M,oD:()=>F,V$:()=>A,uH:()=>R,pC:()=>Z,tz:()=>W,p:()=>N});var r=n(747037),o=n.n(r),i=n(647960),a=n.n(i),c=n(227361),l=n.n(c),u=n(984596),s=n.n(u),d=n(730381),p=n.n(d),f=n(86638);function g(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=/PT?[\d\.]+[YMWDHMS]/,h=function(e){return e?o()(e)?new Date(e).getTime():(a()(e)&&e.getTime(),e):null},O=function(e,t){return t?e.map((function(e){var n=v(e.split("/"),2);return{start:n[0],end:n[1]}[t]})):e},w=function(e,t){var n=h(t),r=1/0,o=-1;return e.forEach((function(e,t){var i=h(e),a=Math.abs(i-n);a<r&&(r=a,o=t)})),o},j=function(e){var t=e.start,n=e.end,r=e.duration,o=p().duration(r).asMilliseconds();return(new Date(n).getTime()-new Date(t).getTime())/o},P=function(e){for(var t=e.start,n=e.end,r=e.duration,o=p().duration(r).asMilliseconds(),i=[],a=new Date(t),c=new Date(n);a<=c;)i.push(new Date(a).toISOString()),a.setTime(a.getTime()+o);return i},S=function(e){var t=e.start,n=e.end,r=e.duration;return P({start:t,end:n,duration:r}).map((function(e){return{start:new Date(e),end:new Date(new Date(e).getTime()+p().duration(r).asMilliseconds())}}))},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.start,n=e.end,r=e.duration,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.start,a=o.end;if(!i||!a)return{count:j({start:t,end:n,duration:r}),start:t,end:n};var c=p().duration(r).asMilliseconds(),l=new Date(t).getTime(),u=new Date(n).getTime(),s=new Date(i).getTime(),d=new Date(a).getTime(),f=Math.ceil((s-l)/c),g=Math.floor((d-l)/c),v=Math.floor((u-l)/c);if(f>=0&&g<=v){var m=g-f;return{start:new Date(l+Math.max(0,f)*c),end:new Date(l+Math.min(v,g)*c),count:m}}return{count:j({start:t,end:n,duration:r}),start:t,end:n}},E=function(e){return e.match(b)[0]},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.start,n=e.end,r=arguments.length>1?arguments[1]:void 0,o=new Date(t),i=new Date(n),a=Math.floor(i.getTime()-o.getTime())/r,c=p().duration(a).toISOString(),l=E(c);return{range:{start:t,end:n},resolution:l}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=O(e,n);return r[w(r,t)]},T=function(e){return e&&e.indexOf&&e.indexOf("--")>0},k=function(e,t){var n=p()(e).diff(t);return{start:n>=0?t:e,end:n>=0?e:t}},I=function(e){return 6e4*e.getTimezoneOffset()},M=function(e){var t=e;!a()(e)&o()(e)&&(t=new Date(e));var n=t.getUTCHours();n=n<10?"0"+n:n;var r=t.getUTCMinutes();r=r<10?"0"+r:r;var i=t.getUTCSeconds();return i=i<10?"0"+i:i,"".concat(n,":").concat(r,":").concat(i)},F=function(e){var t=e;!a()(e)&o()(e)&&(t=new Date(e));var n=t.getUTCMonth()+1,r=t.getUTCDate();return n=n<10?"0"+n:n,r=r<10?"0"+r:r,"".concat(t.getUTCFullYear(),"-").concat(n,"-").concat(r)},A=function(e,t){var n=(0,f.mh)(e),r="HH:mm:SS";switch(t){case"time":return r;case"date":return n;default:return n+" "+r}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.Domains,n=void 0===t?{}:t,r=arguments.length>1?arguments[1]:void 0,o=s()(n.DimensionDomain||[]).concat(),i=n["@version"]||n.version,a=l()(n,"SpaceDomain.BoundingBox");return a&&o.push({Identifier:"space",Domain:a}),o.map((function(e){var t=e.Identifier,n=e.Domain;return{source:{type:"multidim-extension",version:i,url:r},name:t,domain:n}}))},Z=function(e,t,n){var r=h(t),o=h(n);return e.reduce((function(e,t){var n=h(t);return h(r)<n&&h(o)>n?[].concat(g(e),[t]):g(e)}),[])},W=function(e){var t=e.reduce((function(e,t){if(-1!==t.indexOf("/")){var n=v(t.split("/"),2),r=n[0],o=n[1];return[].concat(g(e),[r,o])}return[].concat(g(e),[t])}),[]).sort();return[t[0],t[t.length-1]]},N=function(e,t,n){var r=p()(e);return("add"===n?r.add(t,"seconds"):r.subtract(t,"seconds")).toISOString()}}}]);