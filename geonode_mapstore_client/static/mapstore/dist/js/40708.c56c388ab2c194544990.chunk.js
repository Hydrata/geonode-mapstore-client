(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[40708],{580416:(e,t,r)=>{"use strict";r.d(t,{yS:()=>o,Zz:()=>n,ms:()=>i,ih:()=>l,OX:()=>a,sb:()=>u,K$:()=>p,k7:()=>c,cX:()=>s,x9:()=>d,vs:()=>f,oE:()=>y,Po:()=>b,qv:()=>m,cI:()=>v,g6:()=>g,I4:()=>h,l$:()=>E,Xv:()=>O,k3:()=>w,CQ:()=>F,R8:()=>P,HN:()=>S,sH:()=>T,c7:()=>j,_7:()=>I,eF:()=>D,O6:()=>_,ED:()=>R,RP:()=>C,sF:()=>k,VP:()=>x,He:()=>A,vO:()=>N,WO:()=>q,bh:()=>U,MK:()=>L,ZF:()=>M,tV:()=>V,Dv:()=>B,Yz:()=>Z,kI:()=>G,XG:()=>Y,A4:()=>W,Rp:()=>H,$o:()=>$,ct:()=>z,oZ:()=>Q,oh:()=>X,$h:()=>K,ud:()=>J,Qr:()=>ee,LR:()=>te,nN:()=>re,UG:()=>oe,c9:()=>ne,Xy:()=>ie});var o="CHANGE_LAYER_PROPERTIES",n="LAYERS:CHANGE_LAYER_PARAMS",i="CHANGE_GROUP_PROPERTIES",l="TOGGLE_NODE",a="SORT_NODE",u="REMOVE_NODE",p="UPDATE_NODE",c="MOVE_NODE",s="LAYER_LOADING",d="LAYER_LOAD",f="LAYER_ERROR",y="ADD_LAYER",b="ADD_GROUP",m="REMOVE_LAYER",v="SHOW_SETTINGS",g="HIDE_SETTINGS",h="UPDATE_SETTINGS",E="REFRESH_LAYERS",O="LAYERS:UPDATE_LAYERS_DIMENSION",w="LAYERS_REFRESHED",F="LAYERS_REFRESH_ERROR",P="LAYERS:BROWSE_DATA",S="LAYERS:DOWNLOAD",T="LAYERS:CLEAR_LAYERS",j="LAYERS:SELECT_NODE",I="LAYERS:FILTER_LAYERS",D="LAYERS:SHOW_LAYER_METADATA",_="LAYERS:HIDE_LAYER_METADATA",R="LAYERS:UPDATE_SETTINGS_PARAMS";function C(e,t,r){return{type:v,node:e,nodeType:t,options:r}}function k(){return{type:g}}function x(e){return{type:h,options:e}}function A(e,t){return{type:o,newProperties:t,layer:e}}function N(e,t){return{type:n,layer:e,params:t}}function q(e,t){return{type:i,newProperties:t,group:e}}function U(e,t,r){return{type:l,node:e,nodeType:t,status:!r}}function L(e,t){return{type:a,node:e,order:t,sortLayers:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null}}function M(e,t){return{type:u,node:e,nodeType:t,removeEmpty:arguments.length>2&&void 0!==arguments[2]&&arguments[2]}}function V(e,t,r){return{type:p,node:e,nodeType:t,options:r}}function B(e,t,r){return{type:c,node:e,groupId:t,index:r}}function Z(e){return{type:s,layerId:e}}function G(e,t){return{type:d,layerId:e,error:t}}function Y(e,t,r){return{type:f,layerId:e,tilesCount:t,tilesErrorCount:r}}function W(e){return{type:y,layer:e,foreground:!(arguments.length>1&&void 0!==arguments[1])||arguments[1]}}function H(e,t,r){return{type:b,group:e,parent:t,options:r,asFirst:arguments.length>3&&void 0!==arguments[3]&&arguments[3]}}function $(e){return{type:m,layerId:e}}function z(e,t){return{type:o,layer:e,newProperties:{_v_:t||(new Date).getTime()}}}function Q(e,t){return{type:E,layers:e,options:t}}function X(e){return{type:w,layers:e}}function K(e,t){return{type:F,layers:e,error:t}}function J(e,t,r,o){return{type:O,dimension:e,value:t,options:r,layers:o}}function ee(e){return{type:P,layer:e}}function te(e){return{type:S,layer:e}}function re(){return{type:T}}function oe(e,t,r){return{type:j,id:e,nodeType:t,ctrlKey:r}}function ne(e,t){return{type:D,metadataRecord:e,maskLoading:t}}function ie(e,t){return{type:R,newParams:e,update:t}}},531071:(e,t,r)=>{"use strict";r.d(t,{Z:()=>ft});var o=r(124852),n=r.n(o),i=r(45697),l=r.n(i),a=r(480681),u=r(80717),p=r(950966),c=r(704201),s=r(727418),d=r.n(s),f=r(993451);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function b(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,O(o.key),o)}}function m(e,t,r){return t=g(t),function(e,t){if(t&&("object"==y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,v()?Reflect.construct(t,r||[],g(e).constructor):t.apply(e,r))}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function E(e,t,r){return(t=O(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=y(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:t+""}var w=(0,f.Z)("placeholder")((0,f.Z)("fieldOptions","label","object")(c.Z)),F=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return E(e=m(this,t,[].concat(o)),"renderOperatorField",(function(){return n().createElement(c.Z,{dropUp:e.props.dropUp,fieldOptions:e.props.operatorOptions,fieldName:"operator",fieldRowId:e.props.filterField.rowId,fieldValue:e.props.filterField.operator,onUpdateField:e.updateFieldElement})})),E(e,"renderValueField",(function(t){return n().cloneElement(n().Children.toArray(e.props.children).filter((function(e){return e.props.attType===t.type}))[0],d()({fieldName:"value",fieldRowId:e.props.filterField.rowId,fieldValue:e.props.filterField.value,fieldException:e.props.filterField.exception,onUpdateField:e.updateFieldElement,toggleMenu:e.props.toggleMenu,maxFeaturesWPS:e.props.maxFeaturesWPS,onUpdateExceptionField:e.updateExceptionFieldElement},t.fieldOptions||{}))})),E(e,"updateExceptionFieldElement",(function(t,r){e.props.onUpdateExceptionField(t,r)})),E(e,"updateFieldElement",(function(t,r,o,n,i){var l;if("attribute"===r){var a=(l=e.props.attributes.filter((function(e){return e.attribute===o}))[0])&&l.type||n;e.props.onUpdateField(t,r,o,a,i),"array"===a&&e.props.onUpdateField(t,"operator","contains",a,i)}else e.props.onUpdateField(t,r,o,"boolean"===n?"string":n,i);if("value"===r){var u=e.props.attributes.filter((function(t){return t.dependson&&t.dependson.field===e.props.filterField.attribute}));u.length>0&&e.props.onChangeCascadingValue(u)}})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(t,e),r=t,(o=[{key:"render",value:function(){var e=this,t=this.props.attributes.filter((function(t){return t.attribute===e.props.filterField.attribute}))[0];return n().createElement("div",{className:"filter-field-row"},n().createElement("div",{className:"filter-field-attribute"},n().createElement(w,{dropUp:this.props.dropUp,valueField:"attribute",textField:"label",fieldOptions:this.props.attributes,placeholder:"queryform.attributefilter.combo_placeholder",fieldValue:this.props.filterField.attribute,attType:t&&t.type,fieldName:"attribute",fieldRowId:this.props.filterField.rowId,onUpdateField:this.updateFieldElement,comboFilter:"contains"})),n().createElement("div",{className:"filter-field-operator"},t?this.renderOperatorField():null),n().createElement("div",{className:"filter-field-value"},t&&this.props.filterField.operator?this.renderValueField(t):null),this.props.deleteButton?n().createElement("div",{className:"filter-field-tools"},this.props.deleteButton):null)}}])&&b(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o}(n().Component);E(F,"propTypes",{dropUp:l().bool,attributes:l().array,filterField:l().object,operatorOptions:l().array,onUpdateField:l().func,maxFeaturesWPS:l().number,toggleMenu:l().func,deleteButton:l().node,onUpdateExceptionField:l().func,onChangeCascadingValue:l().func}),E(F,"contextTypes",{messages:l().object}),E(F,"defaultProps",{attributes:[],filterField:null,operatorOptions:["=",">","<",">=","<=","<>","><"],onUpdateField:function(){},toggleMenu:function(){},onUpdateExceptionField:function(){},onChangeCascadingValue:function(){}});const P=F;var S=r(868195),T=r(867076),j=r(414293),I=r.n(j),D=r(441609),_=r.n(D),R=r(730381),C=r.n(R),k=r(93054),x=r.n(k),A=r(55237),N=r(86638),q=r(143146),U=r(805346),L=r(586266),M=r(786903),V=r(196958);function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function Z(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,z(o.key),o)}}function G(e,t,r){return t=W(t),function(e,t){if(t&&("object"==B(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Y()?Reflect.construct(t,r||[],W(e).constructor):t.apply(e,r))}function Y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Y=function(){return!!e})()}function W(e){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},W(e)}function H(e,t){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},H(e,t)}function $(e,t,r){return(t=z(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z(e){var t=function(e,t){if("object"!=B(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=B(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==B(t)?t:t+""}x()(C());var Q=[{type:V.DC.DATE,value:"{today}+P0D",labelId:"queryform.attributefilter.datefield.quickSelectors.today"},{type:V.DC.DATE,value:"{today}-P1D",labelId:"queryform.attributefilter.datefield.quickSelectors.yesterday"},{type:V.DC.DATE,value:"{today}+P1D",labelId:"queryform.attributefilter.datefield.quickSelectors.tomorrow"},{type:V.DC.DATE_TIME,value:"{now}+P0D",labelId:"queryform.attributefilter.datefield.quickSelectors.now"},{type:V.DC.DATE_TIME,value:"{now}-P1D",labelId:"queryform.attributefilter.datefield.quickSelectors.yesterday"},{type:V.DC.DATE_TIME,value:"{now}+P1D",labelId:"queryform.attributefilter.datefield.quickSelectors.tomorrow"},{type:V.DC.DATE,value:"{today}/{today}",labelId:"queryform.attributefilter.datefield.quickSelectors.today"},{type:V.DC.DATE,value:"{thisWeekStart}/{thisWeekEnd}",labelId:"queryform.attributefilter.datefield.quickSelectors.thisWeek"},{type:V.DC.DATE,value:"{thisMonthStart}/{thisMonthEnd}",labelId:"queryform.attributefilter.datefield.quickSelectors.thisMonth"},{type:V.DC.DATE,value:"{today}/{today}+P7D",labelId:"queryform.attributefilter.datefield.quickSelectors.nDaysFrom"},{type:V.DC.DATE,value:"{today}/{today}+P30D",labelId:"queryform.attributefilter.datefield.quickSelectors.nDaysFrom"},{type:V.DC.DATE,value:"{today}/{today}+P90D",labelId:"queryform.attributefilter.datefield.quickSelectors.nDaysFrom"},{type:V.DC.DATE_TIME,value:"{now}/{now}",labelId:"queryform.attributefilter.datefield.quickSelectors.now"},{type:V.DC.DATE_TIME,value:"{thisWeekStart}/{thisWeekEnd}",labelId:"queryform.attributefilter.datefield.quickSelectors.thisWeek"},{type:V.DC.DATE_TIME,value:"{thisMonthStart}/{thisMonthEnd}",labelId:"queryform.attributefilter.datefield.quickSelectors.thisMonth"},{type:V.DC.DATE_TIME,value:"{now}/{now}+P7D",labelId:"queryform.attributefilter.datefield.quickSelectors.nDaysFrom"},{type:V.DC.DATE_TIME,value:"{now}/{now}+P30D",labelId:"queryform.attributefilter.datefield.quickSelectors.nDaysFrom"},{type:V.DC.DATE_TIME,value:"{now}/{now}+P90D",labelId:"queryform.attributefilter.datefield.quickSelectors.nDaysFrom"}],X=(0,q.Z)({dateProp:"value",dateTypeProp:"type",setDateProp:"onChange"})(L.Z),K=(0,q.Z)({dateProp:"value",dateTypeProp:"type",setDateProp:"onChange"})(M.Z),J=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return $(e=G(this,t,[].concat(o)),"handleChange",(function(t){e.props.onUpdateExceptionField(e.props.fieldRowId,null),e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,{startDate:t},e.props.attType)})),$(e,"handleChangeRangeFilter",(function(t,r){var o,n,i={};i="end"===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"start")?{startDate:null===(o=e.props.fieldValue)||void 0===o?void 0:o.startDate,endDate:t}:{startDate:t,endDate:null===(n=e.props.fieldValue)||void 0===n?void 0:n.endDate},e.props.onUpdateExceptionField(e.props.fieldRowId,null),e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,i,e.props.attType)})),$(e,"getQuickTimeSelectors",(function(t){var r;return null===(r=e.props.quickDateTimeSelectors)||void 0===r?void 0:r.filter((function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.type,n=r.value;if(!_()(n)&&o===e.props.attType){var i,l=null===(i=n.split("/"))||void 0===i?void 0:i[1];return t?!I()(l):I()(l)}return!1}))})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H(e,t)}(t,e),r=t,(o=[{key:"render",value:function(){var e,t=(0,A.V$)(this.context.locale,this.props.attType),r=(0,N.S$)(this.context.messages,this.props.placeholderMsgId)||"Insert date",o=this.props.intl&&this.props.intl.formatMessage({id:"".concat(this.props.tooltipMsgId)},{format:t})||"Insert date in ".concat(t," format");return"><"===this.props.operator?n().createElement("div",{className:"query-field"},n().createElement(K,{isWithinAttrTbl:!0,key:"query-range",className:this.props.className,format:t,placeholder:r,value:this.props.fieldValue,toolTip:o,operator:this.props.operator,popupPosition:"bottom",type:this.props.attType,time:this.props.attType===V.DC.TIME,calendar:this.props.attType===V.DC.DATE_TIME||this.props.attType===V.DC.DATE,onChange:this.handleChangeRangeFilter,quickDateTimeSelectors:this.getQuickTimeSelectors(!0)})):n().createElement("div",null,this.props.showLabels&&n().createElement(U.Z,{msgId:"queryform.date"}),n().createElement(X,{isWithinAttrTbl:!0,key:"query-single",className:this.props.className,format:t,placeholder:r,value:null===(e=this.props.fieldValue)||void 0===e?void 0:e.startDate,toolTip:o,operator:this.props.operator,type:this.props.attType,popupPosition:"bottom",time:this.props.attType===V.DC.DATE_TIME||this.props.attType===V.DC.TIME,calendar:this.props.attType===V.DC.DATE_TIME||this.props.attType===V.DC.DATE,onChange:this.handleChange,quickDateTimeSelectors:this.getQuickTimeSelectors()}))}}])&&Z(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o}(n().Component);$(J,"propTypes",{attType:l().string,dateEnabled:l().bool,fieldName:l().string,fieldRowId:l().number,fieldValue:l().object,fieldException:l().string,operator:l().string,onUpdateField:l().func,onUpdateExceptionField:l().func,showLabels:l().bool,timeEnabled:l().bool,quickDateTimeSelectors:l().array,placeholderMsgId:l().string,tooltipMsgId:l().string,className:l().string}),$(J,"contextTypes",{messages:l().object,locale:l().string}),$(J,"defaultProps",{timeEnabled:!1,dateEnabled:!0,operator:null,fieldName:null,fieldRowId:null,attType:null,fieldValue:null,fieldException:null,onUpdateField:function(){},onUpdateExceptionField:function(){},showLabels:!1,className:"query-date",placeholderMsgId:"queryform.attributefilter.datefield.placeholder",tooltipMsgId:"queryform.attributefilter.datefield.tooltip",quickDateTimeSelectors:Q});const ee=(0,T.getContext)({intl:S.intlShape})(J);var te=r(509886),re=r.n(te),oe=r(200020);function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach((function(t){fe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ae(){return ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},ae.apply(null,arguments)}function ue(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,ye(o.key),o)}}function pe(e,t,r){return t=se(t),function(e,t){if(t&&("object"==ne(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ce()?Reflect.construct(t,r||[],se(e).constructor):t.apply(e,r))}function ce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ce=function(){return!!e})()}function se(e){return se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},se(e)}function de(e,t){return de=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},de(e,t)}function fe(e,t,r){return(t=ye(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ye(e){var t=function(e,t){if("object"!=ne(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=ne(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ne(t)?t:t+""}re()();var be=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return fe(e=pe(this,t,[].concat(o)),"renderPicker",(function(t){var r=e.props.label?n().createElement("label",null,e.props.label):null,o=e.props.lowLabel?n().createElement("label",null,e.props.lowLabel):null,i=e.props.upLabel?n().createElement("label",null,e.props.upLabel):null;return"><"===e.props.operator?n().createElement("div",{className:"query-field"},n().createElement("div",{className:"query-field-value"},o,n().createElement(oe.NumberPicker,ae({disabled:"isNull"===e.props.operator,style:t,value:e.props.fieldValue&&null!==e.props.fieldValue.lowBound&&void 0!==e.props.fieldValue.lowBound?e.props.fieldValue.lowBound:null,onChange:function(t){return!isNaN(t)&&e.changeNumber({lowBound:t,upBound:e.props.fieldValue&&null!==e.props.fieldValue.upBound&&void 0!==e.props.fieldValue.upBound?e.props.fieldValue.upBound:null})}},e.props.options))),n().createElement("div",{className:"query-field-value"},i,n().createElement(oe.NumberPicker,ae({disabled:"isNull"===e.props.operator,style:t,value:e.props.fieldValue&&null!==e.props.fieldValue.upBound&&void 0!==e.props.fieldValue.upBound?e.props.fieldValue.upBound:null,onChange:function(t){return!isNaN(t)&&e.changeNumber({upBound:t,lowBound:e.props.fieldValue&&null!==e.props.fieldValue.lowBound&&void 0!==e.props.fieldValue.lowBound?e.props.fieldValue.lowBound:null})}},e.props.options)))):n().createElement("div",null,r,n().createElement(oe.NumberPicker,ae({disabled:"isNull"===e.props.operator,style:t,value:e.props.fieldValue&&null!==e.props.fieldValue.lowBound&&void 0!==e.props.fieldValue.lowBound?e.props.fieldValue.lowBound:e.props.fieldValue,onChange:function(t){return!isNaN(t)&&e.changeNumber(t)}},e.props.options)))})),fe(e,"changeNumber",(function(t){"><"===e.props.operator?null!==t.lowBound&&void 0!==t.lowBound&&null!==t.upBound&&void 0!==t.upBound&&t.lowBound>=t.upBound?e.props.onUpdateExceptionField(e.props.fieldRowId,(0,N.S$)(e.context.messages,"queryform.attributefilter.numberfield.wrong_range")):e.props.fieldException&&e.props.onUpdateExceptionField(e.props.fieldRowId,null):e.props.isRequired&&null==t?e.props.onUpdateExceptionField(e.props.fieldRowId,(0,N.S$)(e.context.messages,"queryform.attributefilter.numberfield.isRequired")):e.props.fieldException&&e.props.onUpdateExceptionField(e.props.fieldRowId,null),e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,t,e.props.attType)})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&de(e,t)}(t,e),r=t,(o=[{key:"render",value:function(){var e=this.props.style;return this.props.fieldException&&(e=le(le({},this.props.style),{},{borderColor:"#FF0000"})),n().createElement(p.Z,{placement:"bottom",overlay:this.props.fieldException?n().createElement(a.u,{id:this.props.fieldRowId+"_tooltip"},n().createElement("strong",null,this.props.fieldException)):n().createElement("noscript",null)},this.renderPicker(e))}}])&&ue(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o}(n().Component);fe(be,"propTypes",{operator:l().string,fieldName:l().string,fieldRowId:l().number,attType:l().string,fieldValue:l().oneOfType([l().number,l().object]),fieldException:l().oneOfType([l().object,l().bool,l().string]),onUpdateField:l().func,onUpdateExceptionField:l().func,isRequired:l().bool,label:l().string,lowLabel:l().string,upLabel:l().string,options:l().shape({format:l().string,min:l().number,max:l().number,step:l().number,precision:l().number}),style:l().object}),fe(be,"contextTypes",{messages:l().object}),fe(be,"defaultProps",{style:{borderColor:"#dedede"},operator:"=",fieldName:null,fieldRowId:null,attType:"number",fieldValue:null,fieldException:null,isRequired:!1,label:null,lowLabel:null,upLabel:null,options:{},onUpdateField:function(){},onUpdateExceptionField:function(){}});const me=be;var ve=r(615402),ge=r(86686);function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function Ee(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Te(o.key),o)}}function Oe(e,t,r){return t=Fe(t),function(e,t){if(t&&("object"==he(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,we()?Reflect.construct(t,r||[],Fe(e).constructor):t.apply(e,r))}function we(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(we=function(){return!!e})()}function Fe(e){return Fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fe(e)}function Pe(e,t){return Pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Pe(e,t)}function Se(e,t,r){return(t=Te(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Te(e){var t=function(e,t){if("object"!=he(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=he(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==he(t)?t:t+""}var je=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Se(e=Oe(this,t,[].concat(o)),"renderField",(function(){var t,r=(0,N.S$)(e.context.messages,"queryform.attributefilter.text_placeholder"),o=n().createElement(a.u,{id:"textField-tooltip"+e.props.fieldRowId},n().createElement(ve.Z,{msgId:null!==(t=e.props.tooltipMessage)&&void 0!==t?t:"queryform.attributefilter.tooltipTextField"})),i=n().createElement(a.NI,{disabled:"isNull"===e.props.operator,placeholder:r,onChange:e.changeText,type:"text",value:e.props.fieldValue||""});return(0,ge.isLikeOrIlike)(e.props.operator)?n().createElement(p.Z,{key:"textField-overlay"+e.props.fieldRowId,placement:"top",overlay:o},i):i})),Se(e,"changeText",(function(t){e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,t.target.value,e.props.attType)})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pe(e,t)}(t,e),r=t,(o=[{key:"componentDidMount",value:function(){"isNull"!==this.props.operator||this.props.fieldValue||this.props.onUpdateField(this.props.fieldRowId,this.props.fieldName," ",this.props.attType)}},{key:"componentDidUpdate",value:function(){"isNull"!==this.props.operator||this.props.fieldValue||this.props.onUpdateField(this.props.fieldRowId,this.props.fieldName," ",this.props.attType)}},{key:"render",value:function(){var e=this.props.label?n().createElement("label",null,this.props.label):n().createElement("span",null);return n().createElement("div",{className:"textField"},e,this.renderField())}}])&&Ee(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o}(n().Component);Se(je,"propTypes",{operator:l().string,fieldName:l().string,fieldRowId:l().number,attType:l().string,fieldValue:l().string,label:l().string,tooltipMessage:l().string,fieldException:l().oneOfType([l().object,l().string]),onUpdateField:l().func,onUpdateExceptionField:l().func,style:l().object}),Se(je,"contextTypes",{messages:l().object}),Se(je,"defaultProps",{operator:"like",fieldName:null,fieldRowId:null,attType:"string",fieldValue:null,label:null,fieldException:null,onUpdateField:function(){},onUpdateExceptionField:function(){},style:{}});const Ie=je;var De=r(848384),_e=r(749902);function Re(e){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function Ce(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Ue(o.key),o)}}function ke(e,t,r){return t=Ae(t),function(e,t){if(t&&("object"==Re(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,xe()?Reflect.construct(t,r||[],Ae(e).constructor):t.apply(e,r))}function xe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xe=function(){return!!e})()}function Ae(e){return Ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ae(e)}function Ne(e,t){return Ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ne(e,t)}function qe(e,t,r){return(t=Ue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ue(e){var t=function(e,t){if("object"!=Re(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=Re(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Re(t)?t:t+""}var Le=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return qe(e=ke(this,t,[].concat(o)),"getOptions",(function(){return e.props.filterField&&e.props.filterField.options&&e.props.filterField.options[e.props.filterField.attribute]&&e.props.filterField.options[e.props.filterField.attribute].map((function(e){return{value:e,label:e}}))})),qe(e,"getPagination",(function(t){if(!e.props.filterField.options)return{};var r=Math.ceil(e.props.filterField.fieldOptions.valuesCount/e.props.maxFeaturesWPS),o=1===e.props.filterField.fieldOptions.currentPage||!e.props.filterField.fieldOptions.currentPage,n=e.props.filterField.fieldOptions.currentPage===r||!e.props.filterField.fieldOptions.currentPage;return d()({},e.props.pagination,{paginated:0!==t.length&&!(o&&1===t.length),firstPage:o,lastPage:n,loadPrevPage:function(){return e.props.onUpdateField(e.props.filterField.rowId,"value",e.props.filterField.value,"string",{currentPage:e.props.filterField.fieldOptions.currentPage-1,delayDebounce:0})},loadNextPage:function(){return e.props.onUpdateField(e.props.filterField.rowId,"value",e.props.filterField.value,"string",{currentPage:e.props.filterField.fieldOptions.currentPage+1,delayDebounce:0})}})})),qe(e,"getTooltip",(function(){return d()({},e.props.tooltip,{enabled:(0,ge.isLikeOrIlike)(e.props.filterField.operator),id:"autocompleteField-tooltip"+e.props.filterField&&e.props.filterField.rowId,message:n().createElement(ve.Z,{msgId:"queryform.attributefilter.tooltipTextField"}),overlayTriggerKey:"autocompleteField-overlay"+e.props.filterField&&e.props.filterField.rowId,placement:"top"})})),qe(e,"renderField",(function(){var t;e.props.filterField&&e.props.filterField.value&&"*"!==e.props.filterField.value&&(t={value:e.props.filterField.value,label:e.props.filterField.value});var r=e.getOptions()?e.getOptions().slice(0):[];return n().createElement(_e.Z,{dropUp:e.props.dropUp,busy:e.props.filterField.loading,data:e.props.filterField.loading?[]:r,disabled:"isNull"===e.props.filterField.operator,itemComponent:e.props.itemComponent,open:e.props.filterField.openAutocompleteMenu,onChange:function(t){return e.handleChange(t)},onFocus:function(){return e.handleFocus(r)},onSelect:function(){return e.handleSelect()},onToggle:function(){return e.handleToggle(r)},pagination:e.getPagination(r),selectedValue:t&&t.value,tooltip:e.getTooltip()})})),qe(e,"handleSelect",(function(){e.selected=!0})),qe(e,"handleChange",(function(t){e.selected?(e.selected=!1,t&&""!==t.value&&e.props.onUpdateField(e.props.filterField.rowId,"value",t.value,"string",{currentPage:1,selected:"selected",delayDebounce:0})):e.props.onUpdateField(e.props.filterField.rowId,"value","string"==typeof t?t:t.value,"string",{currentPage:1,delayDebounce:1e3})})),qe(e,"handleFocus",(function(t){e.loadWithoutfilter(t)})),qe(e,"handleToggle",(function(){e.props.toggleMenu(e.props.filterField.rowId,!e.props.filterField.openAutocompleteMenu)})),qe(e,"loadWithoutfilter",(function(t){0!==t.length||e.props.filterField.value||e.props.onUpdateField(e.props.filterField.rowId,"value","","string",{currentPage:1,delayDebounce:0})})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ne(e,t)}(t,e),r=t,(o=[{key:"render",value:function(){var e=this.props.label?n().createElement("label",null,this.props.label):n().createElement("span",null);return n().createElement("div",{className:"autocompleteField"},e,this.renderField())}}])&&Ce(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o}(n().Component);qe(Le,"propTypes",{dropUp:l().bool,disabled:l().bool,filterField:l().object,label:l().string,itemComponent:l().oneOfType([l().object,l().func]),maxFeaturesWPS:l().number,onUpdateField:l().func,pagination:l().object,textField:l().string,tooltip:l().object,toggleMenu:l().func,valueField:l().string}),qe(Le,"contextTypes",{messages:l().object}),qe(Le,"defaultProps",{label:null,onUpdateField:function(){},pagination:{paginated:!0,nextPageIcon:"chevron-right",prevPageIcon:"chevron-left"},itemComponent:De.Z,toggleMenu:function(){},filterField:{fieldOptions:{}}});const Me=Le;var Ve=r(112346),Be=r(313311),Ze=r.n(Be);function Ge(e){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(e)}function Ye(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Xe(o.key),o)}}function We(e,t,r){return t=$e(t),function(e,t){if(t&&("object"==Ge(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,He()?Reflect.construct(t,r||[],$e(e).constructor):t.apply(e,r))}function He(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(He=function(){return!!e})()}function $e(e){return $e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$e(e)}function ze(e,t){return ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ze(e,t)}function Qe(e,t,r){return(t=Xe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xe(e){var t=function(e,t){if("object"!=Ge(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=Ge(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ge(t)?t:t+""}var Ke=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return Qe(e=We(this,t,[].concat(o)),"state",{open:!1}),Qe(e,"getSelected",(function(){return Ze()(e.props.options,e.getFindFunciton())})),Qe(e,"getValue",(function(t){return e.props.valueField&&t&&t[e.props.valueField]?t[e.props.valueField]:t})),Qe(e,"getLabel",(function(t){return e.props.labelField&&t&&t[e.props.labelField]?t[e.props.labelField]:e.getValue(t)})),Qe(e,"getFindFunciton",(function(){return e.props.valueField?Qe({},e.props.valueField,e.props.value):e.props.value})),Qe(e,"renderLabel",(function(t){return e.props.labelRenderer?e.props.labelRenderer(t):e.getLabel(t)})),Qe(e,"handleOutsideClick",(function(t){e.node&&e.node.contains&&!e.node.contains(t.target)&&e.state.open?e.handleClick():document&&!e.node&&e.handleOutsideClick&&document.removeEventListener("click",e.handleOutsideClick,!1)})),Qe(e,"handleClick",(function(){document&&!e.state.open?document.addEventListener("click",e.handleOutsideClick,!1):document.removeEventListener("click",e.handleOutsideClick,!1);var t=!e.state.open;e.setState({open:t})})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ze(e,t)}(t,e),r=t,(o=[{key:"render",value:function(){var e=this;return n().createElement("span",{ref:function(t){e.node=t},className:"mapstore-string-select"},n().createElement("span",{onClick:this.handleClick},n().createElement("strong",null,this.renderLabel(this.getSelected())),n().createElement(a.gG,{glyph:"chevron-down"})),this.state.open&&n().createElement("div",{className:"m-options"},n().createElement("ul",null,this.props.options.map((function(t,r){return n().createElement("li",{key:r,onClick:function(){e.setState({open:!1}),e.props.onSelect(e.getValue(t),t)}},e.renderLabel(t))})))))}}])&&Ye(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o}(n().Component);Qe(Ke,"propTypes",{options:l().array,value:l().any,onSelect:l().func,valueField:l().string,labelField:l().string,labelRenderer:l().any}),Qe(Ke,"defaultProps",{onSelect:function(){},options:[]});const Je=Ke;var et=r(838167),tt=r(38560);function rt(e){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rt(e)}function ot(e){return function(e){if(Array.isArray(e))return nt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return nt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}function it(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,st(o.key),o)}}function lt(e,t,r){return t=ut(t),function(e,t){if(t&&("object"==rt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,at()?Reflect.construct(t,r||[],ut(e).constructor):t.apply(e,r))}function at(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(at=function(){return!!e})()}function ut(e){return ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ut(e)}function pt(e,t){return pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pt(e,t)}function ct(e,t,r){return(t=st(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function st(e){var t=function(e,t){if("object"!=rt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=rt(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==rt(t)?t:t+""}var dt=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return ct(e=lt(this,t,[].concat(o)),"getComboValues",(function(t,r){if(t&&t.dependson){var o=e.props.filterFields.filter((function(e){return e.attribute===t.dependson.field}))[0];if(o&&o.value){var n=r.filter((function(e){return e.attribute===o.attribute}))[0],i=n.values.filter((function(e){return e[n.valueId]===o.value}))[0][t.dependson.from],l=t.values.filter((function(e){return e[t.dependson.to]===i}));return t&&"list"===t.type?l.map((function(e){return{id:t.fidPrefix?t.fidPrefix+"."+e[t.valueId]:e[t.valueId],name:e[t.valueLabel]}})):null}}return t&&"list"===t.type?t.values.map((function(e){return{id:t.fidPrefix?t.fidPrefix+"."+e[t.valueId]:e[t.valueId],name:e[t.valueLabel]}})):null})),ct(e,"getOperator",(function(t){switch(t&&t.type?t.type:""){case"list":return e.props.listOperators;case"string":return e.props.stringOperators;case"boolean":return e.props.booleanOperators;case"array":return e.props.arrayOperators;default:return e.props.defaultOperators}})),ct(e,"renderFilterField",(function(t){var r=e.props.attributes.filter((function(e){return e.attribute===t.attribute}))[0],o=e.getComboValues(r,e.props.attributes),i=t.exception?n().createElement(p.Z,{placement:"bottom",overlay:n().createElement(a.u,{id:t.rowId+"tooltip"},n().createElement("strong",null,n().createElement(et.ZP.Message,{msgId:t.exception||""})))},n().createElement(tt.Z,{id:"remove-filter-field",className:"filter-buttons no-border",bsStyle:e.props.buttonStyle,style:{backgroundColor:"red"},onClick:function(){return e.props.actions.onRemoveFilterField(t.rowId)}},n().createElement(a.gG,{style:{color:"white"},glyph:"glyphicon glyphicon-warning-sign"}))):n().createElement(p.Z,{placement:"top",overlay:n().createElement(a.u,{id:t.rowId+"tooltip"},n().createElement("strong",null,n().createElement(et.ZP.Message,{msgId:"queryform.attributefilter.delete"})))},n().createElement(tt.Z,{id:"remove-filter-field",bsStyle:e.props.buttonStyle,className:"filter-buttons no-border",onClick:function(){return e.props.actions.onRemoveFilterField(t.rowId)}},n().createElement(a.gG,{glyph:e.props.removeButtonIcon})));return n().createElement(P,{dropUp:e.props.dropUp,key:t.rowId,deleteButton:i,attributes:e.props.attributes,filterField:t,operatorOptions:e.getOperator(r),onUpdateField:e.props.actions.onUpdateFilterField,toggleMenu:e.props.actions.toggleMenu,maxFeaturesWPS:e.props.maxFeaturesWPS,onUpdateExceptionField:e.props.actions.onUpdateExceptionField,onChangeCascadingValue:e.props.actions.onChangeCascadingValue},n().createElement(c.Z,{dropUp:e.props.dropUp,attType:"list",valueField:"id",textField:"name",fieldOptions:o||[],comboFilter:"contains"}),n().createElement(ee,{attType:"date",dateEnabled:!0,operator:t.operator,quickDateTimeSelectors:e.props.quickDateTimeSelectors}),n().createElement(ee,{attType:"date-time",timeEnabled:!0,dateEnabled:!0,operator:t.operator,quickDateTimeSelectors:e.props.quickDateTimeSelectors}),n().createElement(Ie,{attType:"array",operator:t.operator}),n().createElement(ee,{attType:"time",timeEnabled:!0,dateEnabled:!1,operator:t.operator}),n().createElement(me,{operator:t.operator,attType:"number"}),e.props.autocompleteEnabled?n().createElement(Me,{dropUp:e.props.dropUp,filterField:t,attType:"string"}):n().createElement(Ie,{tooltipMessage:e.props.textFieldTooltipMessageId,operator:t.operator,attType:"string"}),n().createElement(c.Z,{dropUp:e.props.dropUp,fieldOptions:["true","false"],attType:"boolean",comboFilter:"contains"}))})),ct(e,"renderGroupButtons",(function(t){var r=[];return t.index<=e.props.groupLevels&&r.push({key:"add-condition-group",id:"add-condition-group",className:"filter-buttons no-border",glyph:"list-alt",bsStyle:e.props.buttonStyle,tooltipId:"queryform.attributefilter.add_group",onClick:function(){return e.props.actions.onAddGroupField(t.id,t.index)}}),r.push({key:"add-filter-field",id:"add-filter-field",className:"filter-buttons no-border",glyph:e.props.addButtonIcon,bsStyle:e.props.buttonStyle,tooltipId:"queryform.attributefilter.add_condition",onClick:function(){return e.props.actions.onAddFilterField(t.id)}}),t.groupId&&r.push({key:"remove-group",className:"filter-buttons no-border",bsStyle:e.props.buttonStyle,tooltipId:"queryform.attributefilter.deleteGroup",glyph:e.props.removeGroupButtonIcon,onClick:function(){return e.props.actions.onRemoveGroupField(t.id)}}),n().createElement(u.Z,{buttons:r,btnDefaultProps:{}})})),ct(e,"renderGroupHeader",(function(t){return n().createElement("div",{className:"logicHeader filter-logic-header"},n().createElement("div",{key:"filter-logic-header",className:"filter-logic-header-text m-label"},n().createElement("span",{className:"group_label_a"},n().createElement(et.ZP.Message,{msgId:"queryform.attributefilter.group_label_a"}))," ",n().createElement(Je,{options:e.props.logicComboOptions,valueField:"logic",value:t.logic,onSelect:function(r){return e.props.actions.onUpdateLogicCombo(t.id,r)},labelRenderer:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).name;return n().createElement(et.ZP.Message,{msgId:e})}})," ",n().createElement("span",{className:"group_label_b"},n().createElement(et.ZP.Message,{msgId:"queryform.attributefilter.group_label_b"}))),e.renderGroupButtons(t))})),ct(e,"renderGroupField",(function(t){var r=e.props.filterFields.filter((function(e){return e.groupId===t.id})),o=e.props.groupFields.filter((function(e){return e.groupId===t.id})),i=[].concat(ot(r),ot(o)).map((function(t){return void 0!==t.rowId?e.renderFilterField(t):e.renderGroupField(t)}));return n().createElement("div",{className:"mapstore-conditions-group",key:t.id},e.renderGroupHeader(t),n().createElement("div",{className:"query-content"},i))})),ct(e,"renderHeader",(function(){return(0,N.S$)(e.context.messages,"queryform.attributefilter.attribute_filter_header")})),ct(e,"updateLogicCombo",(function(t,r,o){var n=e.props.logicComboOptions.filter((function(t){return o===(0,N.S$)(e.context.messages,t.name)}))[0].logic;e.props.actions.onUpdateLogicCombo(t,n)})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pt(e,t)}(t,e),r=t,(o=[{key:"render",value:function(){var e=this;return this.props.withContainer?n().createElement(Ve.Z,{id:"attributeFilterPanel",className:"query-filter-container",header:this.renderHeader(),collapsible:!0,expanded:this.props.attributePanelExpanded,onSwitch:function(t){return e.props.actions.onExpandAttributeFilterPanel(t)}},this.props.groupFields.filter((function(e){return!e.groupId})).map(this.renderGroupField)):n().createElement("div",{className:"query-filter-container"},this.props.groupFields.filter((function(e){return!e.groupId})).map(this.renderGroupField))}}])&&it(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o}(n().Component);ct(dt,"propTypes",{dropUp:l().bool,groupLevels:l().number,withContainer:l().bool,autocompleteEnabled:l().bool,maxFeaturesWPS:l().number,groupFields:l().array,filterFields:l().array,attributes:l().array,fieldWidth:l().string,removeButtonIcon:l().string,addButtonIcon:l().string,removeGroupButtonIcon:l().string,buttonStyle:l().string,logicComboOptions:l().array,attributePanelExpanded:l().bool,actions:l().object,arrayOperators:l().array,listOperators:l().array,stringOperators:l().array,booleanOperators:l().array,defaultOperators:l().array,comboOptions:l().object,textFieldTooltipMessageId:l().string}),ct(dt,"contextTypes",{messages:l().object}),ct(dt,"defaultProps",{autocompleteEnabled:!0,withContainer:!0,groupLevels:1,groupFields:[],filterFields:[],attributes:[],removeButtonIcon:"trash",removeGroupButtonIcon:"trash",bsStyle:"default",addButtonIcon:"glyphicon glyphicon-plus",attributePanelExpanded:!0,logicComboOptions:[{logic:"OR",name:"queryform.attributefilter.groupField.any"},{logic:"AND",name:"queryform.attributefilter.groupField.all"},{logic:"NOR",name:"queryform.attributefilter.groupField.none"}],actions:{onAddGroupField:function(){},onAddFilterField:function(){},onRemoveFilterField:function(){},onUpdateFilterField:function(){},onUpdateExceptionField:function(){},onUpdateLogicCombo:function(){},onRemoveGroupField:function(){},onChangeCascadingValue:function(){},onExpandAttributeFilterPanel:function(){},toggleMenu:function(){}},listOperators:["="],stringOperators:["=","<>","like","ilike","isNull"],arrayOperators:["contains"],booleanOperators:["="],defaultOperators:["=",">","<",">=","<=","<>","><","isNull"],textFieldTooltipMessageId:"queryform.attributefilter.tooltipTextField"});const ft=dt},532425:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var o=r(45697),n=r.n(o),i=r(124852),l=r.n(i);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=a(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(e){return e>100?"full":e>40?"medium":"small"},d=function(e){var t=e.size,r=e.style,o=void 0===r?{}:r,n=e.className,i=e.hidden;return l().createElement("div",{className:n,style:p({width:t,height:t,overflow:"hidden"},o)},!i&&l().createElement("div",{className:"mapstore-".concat(s(t),"-size-loader")}))};d.propTypes={size:n().number,className:n().string,style:n().object};const f=d},82110:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var o=r(124852),n=r.n(o),i=r(496259),l=r(532425);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=a(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const s=function(e){var t=e.width,r=e.height,o=e.className,a=void 0===o?"loader-container":o,u=e.contentStyle,c=void 0===u?{}:u;return n().createElement("div",{className:a},n().createElement(i.Z,null,(function(e){var o=e.width,i=void 0===o?200:o,a=e.height,u=void 0===a?200:a,s=t||(u>0?Math.min(i,u):i),d=r||(u>0?Math.min(i,u):i),f=Math.min(s,d);return n().createElement(l.Z,{size:f,style:p({padding:f/10,margin:"auto",display:"flex"},c)})})))}},399534:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var o=r(461365),n=r(356936);const i=(0,o.Z)(n.h_)}}]);