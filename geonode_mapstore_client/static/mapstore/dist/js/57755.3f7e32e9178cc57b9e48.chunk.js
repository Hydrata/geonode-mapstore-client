(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[57755],{807691:(e,r,t)=>{"use strict";t.d(r,{ZP:()=>A});var n=t(49977),o=t.n(n),a=t(557579),i=t(555927),s=t(782904),c=t(95797),u=t(197395),l=t(807878),d=t(263516),f=t(367306),v=t(274621),b=t(401757),p=t(324684),g=t(989077),y=t(291312),h=t(589919),O=t(275982),m=t(246781),w=["data"],S=["status","statusText","data","message"];function j(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function D(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(e){if("string"==typeof e)return P(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?P(e,r):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function k(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function E(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?k(Object(t),!0).forEach((function(r){M(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function M(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var T=function(e){var r=(0,b.JT)(e);return[r.search&&r.search.url,r.name]};const A={openDashboardWidgetEditor:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.getState,n=void 0===t?function(){}:t;return e.ofType(a.AE,a.dm).filter((function(){return(0,f.Wy)(n())})).switchMap((function(){return o().Observable.of((0,i.D_)(!0))}))},closeDashboardWidgetEditorOnFinish:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.getState,n=void 0===t?function(){}:t;return e.ofType(a.Jm).filter((function(){return(0,f.Wy)(n())})).switchMap((function(){return o().Observable.of((0,i.D_)(!1))}))},initDashboardEditorOnNew:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.getState,n=void 0===t?function(){}:t;return e.ofType(a.AE).filter((function(){return(0,f.Wy)(n())})).switchMap((function(e){return o().Observable.of((0,a.bS)(E(E({legend:!1,mapSync:!1,cartesian:!0,yAxis:!0},e),{},{type:void 0}),{step:0}))}))},closeDashboardEditorOnExit:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.getState,n=void 0===t?function(){}:t;return e.ofType(O.nk).filter((function(){return(0,f.Wy)(n())})).filter((function(){return(0,f.i$)(n())})).switchMap((function(){return o().Observable.of((0,i.D_)(!1))}))},handleDashboardWidgetsFilterPanel:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.getState,n=void 0===t?function(){}:t;return e.ofType(a.lG).filter((function(){return(0,f.Wy)(n())})).switchMap((function(){return o().Observable.of(c.gT.apply(void 0,D(T(n()))),(0,l.F)((0,b.um)(n())),(0,s.Xg)("queryPanel","enabled",!0)).concat(o().Observable.race(e.ofType(l.Wm).take(1),e.ofType(s.kM).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.control,t=e.property;return"queryPanel"===r&&(!t||"enabled"===t)})).take(1)).switchMap((function(e){return(e.filterObj?o().Observable.of((0,a.Rz)("filter",e.filterObj)):o().Observable.empty()).merge(o().Observable.of((0,s.Xg)("widgetBuilder","enabled",!0)))}))).takeUntil(e.ofType(O.nk,a.dm).merge(e.ofType(s.kM).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.control,t=e.property;return"widgetBuilder"===r&&0==!t})))).concat(o().Observable.of((0,s.Xg)("queryPanel","enabled",!1)))}))},filterAnonymousUsersForDashboard:function(e,r){return e.ofType(d.c8,d.Nv).filter((function(){return"/dashboard"===(0,p.F)(r.getState())})).switchMap((function(e){return function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(e),(0,v.jl)(r.getState())?o().Observable.empty():o().Observable.of((0,i.AN)({status:403}))}))},loadDashboardStream:function(e,r){var t=r.getState,n=void 0===t?function(){}:t;return e.ofType(i.zX).switchMap((function(e){var r=e.id;return(0,y.RX)(r).map((function(e){var r=e.data,t=j(e,w);return(0,i.rR)(t,(0,m.sq)(r))})).let((0,h.hP)((0,i.vM)(!0,"loading"),(0,i.vM)(!1,"loading"),(function(e){var r=window.location.href.match("dashboard-embedded")?"dashboardEmbedded":"dashboard",t=r+".errors.loading.unknownError";return 403===e.status&&(t=r+".errors.loading.pleaseLogin",(0,v.jl)(n())&&(t=r+".errors.loading.dashboardNotAccessible")),404===e.status&&(t=r+".errors.loading.dashboardDoesNotExist"),o().Observable.of((0,u.error)({title:r+".errors.loading.title",message:t}),(0,i.AN)(E(E({},e),{},{messageId:t})))})))}))},reloadDashboardOnLoginLogout:function(e){return e.ofType(i.zX).switchMap((function(r){var t=r.id;return e.ofType(d.XP,d.Nv).switchMap((function(){return o().Observable.of((0,i.o2)(t)).delay(1e3)})).takeUntil(e.ofType(O.nk))}))},saveDashboard:function(e){return e.ofType(i.aR).exhaustMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.resource;return(r.id?(0,y.id)(r):(0,y.SN)(r)).switchMap((function(e){return o().Observable.of((0,i.sA)(e),r.id?(0,i.gE)(!1):(0,i.pB)(!1),r.id?(0,i.o2)(e):(0,O.VF)("/dashboard/".concat(e))).merge(o().Observable.of((0,u.show)({id:"DASHBOARD_SAVE_SUCCESS",title:"saveDialog.saveSuccessTitle",message:"saveDialog.saveSuccessMessage"})).delay(r.id?0:1e3))})).let((0,h.hP)((0,i.vM)(!0,"saving"),(0,i.vM)(!1,"saving"))).catch((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.status,t=e.statusText,n=e.data,a=e.message,s=j(e,S);return o().Observable.of((0,i.GD)(r?{status:r,statusText:t,data:n}:a||s),(0,i.vM)(!1,"saving"))}))}))},exportDashboard:function(e){return e.ofType(i.Kv).switchMap((function(e){var r=e.data,t=e.fileName;return o().Observable.of([JSON.stringify(E({},r)),t,"application/json"]).do((function(e){return g.LR.apply(void 0,D(e))})).map((function(){return(0,s.Xi)("export")}))}))},importDashboard:function(e){return e.ofType(i.zV).switchMap((function(e){var r=e.file,t=e.resource;return o().Observable.defer((function(){return(0,g.zr)(r[0]).then((function(e){return e}))})).switchMap((function(e){return o().Observable.of((0,i.rR)(t,e),(0,s.Xi)("import"))})).catch((function(e){return o().Observable.of((0,u.error)({title:"dashboard.errors.loading.title"}),(0,i.AN)(E({},e)))}))}))}}},24412:(e,r,t)=>{"use strict";t.d(r,{Z:()=>d});var n=t(555927),o=t(557579),a=t(761868),i=t(984596),s=t.n(i);function c(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function u(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?c(Object(t),!0).forEach((function(r){l(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function l(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{showConnections:!0,services:null,saveServiceLoading:!1},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case n.BJ:return(0,a.t8)("editor.available",r.available,e);case n._y:return(0,a.t8)("editing",r.editing,e);case o.wb:case o.Jm:case o.yY:return(0,a.t8)("editing",r.editing,e);case n.vk:return(0,a.t8)("showConnections",r.show,e);case n.uI:return(0,a.t8)("showSaveModal",r.show,(0,a.t8)("saveErrors",void 0,e));case n.mg:return(0,a.t8)("showSaveAsModal",r.show,(0,a.t8)("saveErrors",void 0,e));case n.E9:var t;return u(u({},e),{},{originalData:r.data,resource:r.resource,services:null===(t=r.data)||void 0===t?void 0:t.catalogs});case n.R4:return u(u({},e),{},{originalData:void 0,resource:void 0,mode:"view",services:void 0});case n.SW:return(0,a.t8)("saveErrors",s()(r.error),e);case n.$l:return(0,a.t8)("saveErrors",void 0,e);case n.E5:var i;return u(u({},e),{},{services:e.services||r.services,selectedService:(null===(i=r.service)||void 0===i?void 0:i.key)||""});case n.s6:return(0,a.t8)("services",r.services,e);case n.B_:return u(u({},e),{},{mode:r.mode,isNew:r.isNew,saveServiceLoading:!1});case n.TA:return u(u({},e),{},{saveServiceLoading:r.loading});case n.CF:var c=r.services,l=r.service;l.isNew=!1,l.showAdvancedSettings=!1,delete l.old,c[l.key]=l;var d=l.key;return u(u({},e),{},{services:c,selectedService:d,mode:"view"});case n.js:var f,v,b=r.services,p=r.service;(b[p.key]||b[null===(f=p.old)||void 0===f?void 0:f.key])&&(delete b[p.key]||b[null===(v=p.old)||void 0===v?void 0:v.key]);var g=Object.keys(b)[0]||"";return u(u({},e),{},{services:b,mode:"view",selectedService:g});case n.CP:return(0,a.t8)("loading"===r.name?"loading":"loadFlags.".concat(r.name),r.value,(0,a.t8)("loading",r.value,e));default:return e}}}}]);