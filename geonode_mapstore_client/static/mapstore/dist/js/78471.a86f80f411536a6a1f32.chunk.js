(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[78471],{29217:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});var o=i(949179),r=i(66575),n=i(173381);const s=function(t){function e(e,i,o,r){t.call(this),this.extent=e,this.pixelRatio_=o,this.resolution=i,this.state=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.changed=function(){this.dispatchEvent(n.Z.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return(0,o.O3)()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){(0,o.O3)()},e}(r.Z)},978471:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>Je});var o=i(949179),r=i(378426),n=i(919629),s=i(232062),a=i(591358),h=i(30006),l=i(486968),p=i(613002),c=i(66575);const u="pointermove",d="pointerdown";var _=i(468338),g=i(634681),y=["","unavailable","touch","pen","mouse"];function f(t){this.pointerMap[t.pointerId.toString()]=t;var e=this.prepareEvent_(t);this.dispatcher.down(e,t)}function v(t){var e=this.prepareEvent_(t);this.dispatcher.move(e,t)}function m(t){var e=this.prepareEvent_(t);this.dispatcher.up(e,t),this.cleanup(t.pointerId)}function S(t){var e=this.prepareEvent_(t);this.dispatcher.leaveOut(e,t)}function T(t){var e=this.prepareEvent_(t);this.dispatcher.enterOver(e,t)}function E(t){var e=this.prepareEvent_(t);this.dispatcher.cancel(e,t),this.cleanup(t.pointerId)}function x(t){var e=this.dispatcher.makeEvent("lostpointercapture",t,t);this.dispatcher.dispatchEvent(e)}function R(t){var e=this.dispatcher.makeEvent("gotpointercapture",t,t);this.dispatcher.dispatchEvent(e)}const C=function(t){function e(e){var i={MSPointerDown:f,MSPointerMove:v,MSPointerUp:m,MSPointerOut:S,MSPointerOver:T,MSPointerCancel:E,MSGotPointerCapture:R,MSLostPointerCapture:x};t.call(this,e,i),this.pointerMap=e.pointerMap}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvent_=function(t){var e=t;return"number"==typeof t.pointerType&&((e=this.dispatcher.cloneEvent(t,t)).pointerType=y[t.pointerType]),e},e.prototype.cleanup=function(t){delete this.pointerMap[t.toString()]},e}(g.Z);function L(t){this.dispatcher.fireNativeEvent(t)}function I(t){this.dispatcher.fireNativeEvent(t)}function w(t){this.dispatcher.fireNativeEvent(t)}function b(t){this.dispatcher.fireNativeEvent(t)}function O(t){this.dispatcher.fireNativeEvent(t)}function Z(t){this.dispatcher.fireNativeEvent(t)}function k(t){this.dispatcher.fireNativeEvent(t)}function A(t){this.dispatcher.fireNativeEvent(t)}const M=function(t){function e(e){var i={pointerdown:L,pointermove:I,pointerup:w,pointerout:b,pointerover:O,pointercancel:Z,gotpointercapture:A,lostpointercapture:k};t.call(this,e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(g.Z);var D=i(9520),P=!1,F=function(t){function e(e,i,o){t.call(this,e),this.originalEvent=i;var r=o||{};this.buttons=function(t){var e;if(t.buttons||P)e=t.buttons;else switch(t.which){case 1:e=1;break;case 2:e=4;break;case 3:e=2;break;default:e=0}return e}(r),this.pressure=function(t,e){return t.pressure?t.pressure:e?.5:0}(r,this.buttons),this.bubbles="bubbles"in r&&r.bubbles,this.cancelable="cancelable"in r&&r.cancelable,this.view="view"in r?r.view:null,this.detail="detail"in r?r.detail:null,this.screenX="screenX"in r?r.screenX:0,this.screenY="screenY"in r?r.screenY:0,this.clientX="clientX"in r?r.clientX:0,this.clientY="clientY"in r?r.clientY:0,this.ctrlKey="ctrlKey"in r&&r.ctrlKey,this.altKey="altKey"in r&&r.altKey,this.shiftKey="shiftKey"in r&&r.shiftKey,this.metaKey="metaKey"in r&&r.metaKey,this.button="button"in r?r.button:0,this.relatedTarget="relatedTarget"in r?r.relatedTarget:null,this.pointerId="pointerId"in r?r.pointerId:0,this.width="width"in r?r.width:0,this.height="height"in r?r.height:0,this.tiltX="tiltX"in r?r.tiltX:0,this.tiltY="tiltY"in r?r.tiltY:0,this.pointerType="pointerType"in r?r.pointerType:"",this.hwTimestamp="hwTimestamp"in r?r.hwTimestamp:0,this.isPrimary="isPrimary"in r&&r.isPrimary,i.preventDefault&&(this.preventDefault=function(){i.preventDefault()})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(D.ZP);!function(){try{var t=new MouseEvent("click",{buttons:1});P=1===t.buttons}catch(t){}}();const N=F;var G=i(179682);function K(t){this.vacuumTouches_(t),this.setPrimaryTouch_(t.changedTouches[0]),this.dedupSynthMouse_(t),this.clickCount_++,this.processTouches_(t,this.overDown_)}function W(t){this.processTouches_(t,this.moveOverOut_)}function Y(t){this.dedupSynthMouse_(t),this.processTouches_(t,this.upOut_)}function H(t){this.processTouches_(t,this.cancelOut_)}const z=function(t){function e(e,i){var o={touchstart:K,touchmove:W,touchend:Y,touchcancel:H};t.call(this,e,o),this.pointerMap=e.pointerMap,this.mouseSource=i,this.firstTouchId_=void 0,this.clickCount_=0,this.resetId_,this.dedupTimeout_=2500}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isPrimaryTouch_=function(t){return this.firstTouchId_===t.identifier},e.prototype.setPrimaryTouch_=function(t){var e=Object.keys(this.pointerMap).length;(0===e||1===e&&_.yA.toString()in this.pointerMap)&&(this.firstTouchId_=t.identifier,this.cancelResetClickCount_())},e.prototype.removePrimaryPointer_=function(t){t.isPrimary&&(this.firstTouchId_=void 0,this.resetClickCount_())},e.prototype.resetClickCount_=function(){this.resetId_=setTimeout(this.resetClickCountHandler_.bind(this),200)},e.prototype.resetClickCountHandler_=function(){this.clickCount_=0,this.resetId_=void 0},e.prototype.cancelResetClickCount_=function(){void 0!==this.resetId_&&clearTimeout(this.resetId_)},e.prototype.touchToPointer_=function(t,e){var i=this.dispatcher.cloneEvent(t,e);return i.pointerId=e.identifier+2,i.bubbles=!0,i.cancelable=!0,i.detail=this.clickCount_,i.button=0,i.buttons=1,i.width=e.radiusX||0,i.height=e.radiusY||0,i.pressure=e.force||.5,i.isPrimary=this.isPrimaryTouch_(e),i.pointerType="touch",i.clientX=e.clientX,i.clientY=e.clientY,i.screenX=e.screenX,i.screenY=e.screenY,i},e.prototype.processTouches_=function(t,e){var i=Array.prototype.slice.call(t.changedTouches),o=i.length;function r(){t.preventDefault()}for(var n=0;n<o;++n){var s=this.touchToPointer_(t,i[n]);s.preventDefault=r,e.call(this,t,s)}},e.prototype.findTouch_=function(t,e){for(var i=t.length,o=0;o<i;o++)if(t[o].identifier===e)return!0;return!1},e.prototype.vacuumTouches_=function(t){var e=t.touches,i=Object.keys(this.pointerMap),o=i.length;if(o>=e.length){for(var r=[],n=0;n<o;++n){var s=Number(i[n]),a=this.pointerMap[s];s==_.yA||this.findTouch_(e,s-2)||r.push(a.out)}for(var h=0;h<r.length;++h)this.cancelOut_(t,r[h])}},e.prototype.overDown_=function(t,e){this.pointerMap[e.pointerId]={target:e.target,out:e,outTarget:e.target},this.dispatcher.over(e,t),this.dispatcher.enter(e,t),this.dispatcher.down(e,t)},e.prototype.moveOverOut_=function(t,e){var i=e,o=this.pointerMap[i.pointerId];if(o){var r=o.out,n=o.outTarget;this.dispatcher.move(i,t),r&&n!==i.target&&(r.relatedTarget=i.target,i.relatedTarget=n,r.target=n,i.target?(this.dispatcher.leaveOut(r,t),this.dispatcher.enterOver(i,t)):(i.target=n,i.relatedTarget=null,this.cancelOut_(t,i))),o.out=i,o.outTarget=i.target}},e.prototype.upOut_=function(t,e){this.dispatcher.up(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},e.prototype.cancelOut_=function(t,e){this.dispatcher.cancel(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},e.prototype.cleanUpPointer_=function(t){delete this.pointerMap[t.pointerId],this.removePrimaryPointer_(t)},e.prototype.dedupSynthMouse_=function(t){var e=this.mouseSource.lastTouches,i=t.changedTouches[0];if(this.isPrimaryTouch_(i)){var o=[i.clientX,i.clientY];e.push(o),setTimeout((function(){(0,G.Od)(e,o)}),this.dedupTimeout_)}},e}(g.Z);var V=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]];const U=function(t){function e(e){t.call(this),this.element_=e,this.pointerMap={},this.eventMap_={},this.eventSourceList_=[],this.registerSources()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.registerSources=function(){if(a.GQ)this.registerSource("native",new M(this));else if(a.NL)this.registerSource("ms",new C(this));else{var t=new _.ZP(this);this.registerSource("mouse",t),a.Qm&&this.registerSource("touch",new z(this,t))}this.register_()},e.prototype.registerSource=function(t,e){var i=e,o=i.getEvents();o&&(o.forEach(function(t){var e=i.getHandlerForEvent(t);e&&(this.eventMap_[t]=e.bind(i))}.bind(this)),this.eventSourceList_.push(i))},e.prototype.register_=function(){for(var t=this.eventSourceList_.length,e=0;e<t;e++){var i=this.eventSourceList_[e];this.addEvents_(i.getEvents())}},e.prototype.unregister_=function(){for(var t=this.eventSourceList_.length,e=0;e<t;e++){var i=this.eventSourceList_[e];this.removeEvents_(i.getEvents())}},e.prototype.eventHandler_=function(t){var e=t.type,i=this.eventMap_[e];i&&i(t)},e.prototype.addEvents_=function(t){t.forEach(function(t){(0,p.oL)(this.element_,t,this.eventHandler_,this)}.bind(this))},e.prototype.removeEvents_=function(t){t.forEach(function(t){(0,p.Ev)(this.element_,t,this.eventHandler_,this)}.bind(this))},e.prototype.cloneEvent=function(t,e){for(var i={},o=0,r=V.length;o<r;o++){var n=V[o][0];i[n]=t[n]||e[n]||V[o][1]}return i},e.prototype.down=function(t,e){this.fireEvent(d,t,e)},e.prototype.move=function(t,e){this.fireEvent(u,t,e)},e.prototype.up=function(t,e){this.fireEvent("pointerup",t,e)},e.prototype.enter=function(t,e){t.bubbles=!1,this.fireEvent("pointerenter",t,e)},e.prototype.leave=function(t,e){t.bubbles=!1,this.fireEvent("pointerleave",t,e)},e.prototype.over=function(t,e){t.bubbles=!0,this.fireEvent("pointerover",t,e)},e.prototype.out=function(t,e){t.bubbles=!0,this.fireEvent("pointerout",t,e)},e.prototype.cancel=function(t,e){this.fireEvent("pointercancel",t,e)},e.prototype.leaveOut=function(t,e){this.out(t,e),this.contains_(t.target,t.relatedTarget)||this.leave(t,e)},e.prototype.enterOver=function(t,e){this.over(t,e),this.contains_(t.target,t.relatedTarget)||this.enter(t,e)},e.prototype.contains_=function(t,e){return!(!t||!e)&&t.contains(e)},e.prototype.makeEvent=function(t,e,i){return new N(t,i,e)},e.prototype.fireEvent=function(t,e,i){var o=this.makeEvent(t,e,i);this.dispatchEvent(o)},e.prototype.fireNativeEvent=function(t){var e=this.makeEvent(t.type,t,t);this.dispatchEvent(e)},e.prototype.wrapMouseEvent=function(t,e){return this.makeEvent(t,(0,_.R)(e,this),e)},e.prototype.disposeInternal=function(){this.unregister_(),t.prototype.disposeInternal.call(this)},e}(c.Z),B=function(t){function e(e,i){t.call(this),this.map_=e,this.clickTimeoutId_,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=i?i*a.MP:a.MP,this.down_=null;var o=this.map_.getViewport();this.activePointers_=0,this.trackedTouches_={},this.pointerEventHandler_=new U(o),this.documentPointerEventHandler_=null,this.pointerdownListenerKey_=(0,p.oL)(this.pointerEventHandler_,d,this.handlePointerDown_,this),this.relayedListenerKey_=(0,p.oL)(this.pointerEventHandler_,u,this.relayEvent_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.emulateClick_=function(t){var e=new l.Z(h.Z.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new l.Z(h.Z.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var e=new l.Z(h.Z.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==h.Z.POINTERUP||e.type==h.Z.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==h.Z.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new l.Z(h.Z.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(p.bN),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null,this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var e=new l.Z(h.Z.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&(this.documentPointerEventHandler_=new U(document),this.dragListenerKeys_.push((0,p.oL)(this.documentPointerEventHandler_,h.Z.POINTERMOVE,this.handlePointerMove_,this),(0,p.oL)(this.documentPointerEventHandler_,h.Z.POINTERUP,this.handlePointerUp_,this),(0,p.oL)(this.pointerEventHandler_,h.Z.POINTERCANCEL,this.handlePointerUp_,this)))},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new l.Z(h.Z.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}t.preventDefault()},e.prototype.relayEvent_=function(t){var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new l.Z(t.type,this.map_,t,e))},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&((0,p.bN)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.pointerdownListenerKey_&&((0,p.bN)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(p.bN),this.dragListenerKeys_.length=0,this.documentPointerEventHandler_&&(this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null),this.pointerEventHandler_&&(this.pointerEventHandler_.dispose(),this.pointerEventHandler_=null),t.prototype.disposeInternal.call(this)},e}(c.Z);var X=i(110255),j=i(540188),q=i(739850),J=i(397208),Q=i(558493),$=i(713910),tt=i(859900),et=i(173381),it=i(438906),ot=i(913580),rt=1/0,nt=function(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}};nt.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,(0,ot.ZH)(this.queuedElements_)},nt.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var o=this.keyFunction_(i);return delete this.queuedElements_[o],i},nt.prototype.enqueue=function(t){(0,it.h)(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=rt&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},nt.prototype.getCount=function(){return this.elements_.length},nt.prototype.getLeftChildIndex_=function(t){return 2*t+1},nt.prototype.getRightChildIndex_=function(t){return 2*t+2},nt.prototype.getParentIndex_=function(t){return t-1>>1},nt.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},nt.prototype.isEmpty=function(){return 0===this.elements_.length},nt.prototype.isKeyQueued=function(t){return t in this.queuedElements_},nt.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},nt.prototype.siftUp_=function(t){for(var e=this.elements_,i=this.priorities_,o=e.length,r=e[t],n=i[t],s=t;t<o>>1;){var a=this.getLeftChildIndex_(t),h=this.getRightChildIndex_(t),l=h<o&&i[h]<i[a]?h:a;e[t]=e[l],i[t]=i[l],t=l}e[t]=r,i[t]=n,this.siftDown_(s,t)},nt.prototype.siftDown_=function(t,e){for(var i=this.elements_,o=this.priorities_,r=i[e],n=o[e];e>t;){var s=this.getParentIndex_(e);if(!(o[s]>n))break;i[e]=i[s],o[e]=o[s],e=s}i[e]=r,o[e]=n},nt.prototype.reprioritize=function(){var t,e,i,o=this.priorityFunction_,r=this.elements_,n=this.priorities_,s=0,a=r.length;for(e=0;e<a;++e)(i=o(t=r[e]))==rt?delete this.queuedElements_[this.keyFunction_(t)]:(n[s]=i,r[s++]=t);r.length=s,n.length=s,this.heapify_()};const st=function(t){function e(e,i){t.call(this,(function(t){return e.apply(null,t)}),(function(t){return t[0].getKey()})),this.tileChangeCallback_=i,this.tilesLoading_=0,this.tilesLoadingKeys_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.enqueue=function(e){var i=t.prototype.enqueue.call(this,e);if(i){var o=e[0];(0,p.oL)(o,et.Z.CHANGE,this.handleTileChange,this)}return i},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,i=e.getState();if(i===tt.Z.LOADED||i===tt.Z.ERROR||i===tt.Z.EMPTY||i===tt.Z.ABORT){(0,p.Ev)(e,et.Z.CHANGE,this.handleTileChange,this);var o=e.getKey();o in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[o],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var i,o,r,n=0,s=!1;this.tilesLoading_<t&&n<e&&this.getCount()>0;)r=(o=this.dequeue()[0]).getKey(),(i=o.getState())===tt.Z.ABORT?s=!0:i!==tt.Z.IDLE||r in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[r]=!0,++this.tilesLoading_,++n,o.load());0===n&&s&&this.tileChangeCallback_()},e}(nt);var at=i(276773),ht=i(706908),lt=i(85386),pt=i(421915),ct=i(864011),ut=i(531742),dt=i(450596),_t=i(782359);const gt=function(t){function e(e){t.call(this);var i=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var i,o,n,s={},a=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new ut.default({layers:t.layers});return s[q.Z.LAYERGROUP]=a,s[q.Z.TARGET]=t.target,s[q.Z.VIEW]=void 0!==t.view?t.view:new at.ZP,void 0!==t.controls&&(Array.isArray(t.controls)?i=new r.Z(t.controls.slice()):((0,it.h)("function"==typeof t.controls.getArray,47),i=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?o=new r.Z(t.interactions.slice()):((0,it.h)("function"==typeof t.interactions.getArray,48),o=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?n=new r.Z(t.overlays.slice()):((0,it.h)("function"==typeof t.overlays.getArray,49),n=t.overlays):n=new r.Z,{controls:i,interactions:o,keyboardEventTarget:e,overlays:n,values:s}}(e);this.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,this.loadTilesWhileAnimating_=void 0!==e.loadTilesWhileAnimating&&e.loadTilesWhileAnimating,this.loadTilesWhileInteracting_=void 0!==e.loadTilesWhileInteracting&&e.loadTilesWhileInteracting,this.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:a.MP,this.animationDelayKey_,this.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_.call(this,Date.now())}.bind(this),this.coordinateToPixelTransform_=(0,_t.Ue)(),this.pixelToCoordinateTransform_=(0,_t.Ue)(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+(a.Qm?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.viewport_.style.msTouchAction="none",this.viewport_.style.touchAction="none",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent";for(var o=[et.Z.CLICK,et.Z.DBLCLICK,et.Z.MOUSEDOWN,et.Z.TOUCHSTART,et.Z.MSPOINTERDOWN,h.Z.POINTERDOWN,et.Z.MOUSEWHEEL,et.Z.WHEEL],s=0,l=o.length;s<l;++s)(0,p.oL)(this.overlayContainerStopEvent_,o[s],D.UW);for(var c in this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=new B(this,e.moveTolerance),h.Z)(0,p.oL)(this.mapBrowserEventHandler_,h.Z[c],this.handleMapBrowserEvent,this);this.keyboardEventTarget_=i.keyboardEventTarget,this.keyHandlerKeys_=null,(0,p.oL)(this.viewport_,et.Z.CONTEXTMENU,this.handleBrowserEvent,this),(0,p.oL)(this.viewport_,et.Z.WHEEL,this.handleBrowserEvent,this),(0,p.oL)(this.viewport_,et.Z.MOUSEWHEEL,this.handleBrowserEvent,this),this.controls=i.controls||new r.Z,this.interactions=i.interactions||new r.Z,this.overlays_=i.overlays,this.overlayIdIndex_={},this.renderer_=this.createRenderer(),this.handleResize_,this.focus_=null,this.postRenderFunctions_=[],this.tileQueue_=new st(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.skippedFeatureUids_={},(0,p.oL)(this,(0,Q.v_)(q.Z.LAYERGROUP),this.handleLayerGroupChanged_,this),(0,p.oL)(this,(0,Q.v_)(q.Z.VIEW),this.handleViewChanged_,this),(0,p.oL)(this,(0,Q.v_)(q.Z.SIZE),this.handleSizeChanged_,this),(0,p.oL)(this,(0,Q.v_)(q.Z.TARGET),this.handleTargetChanged_,this),this.setProperties(i.values),this.controls.forEach(function(t){t.setMap(this)}.bind(this)),(0,p.oL)(this.controls,n.Z.ADD,(function(t){t.element.setMap(this)}),this),(0,p.oL)(this.controls,n.Z.REMOVE,(function(t){t.element.setMap(null)}),this),this.interactions.forEach(function(t){t.setMap(this)}.bind(this)),(0,p.oL)(this.interactions,n.Z.ADD,(function(t){t.element.setMap(this)}),this),(0,p.oL)(this.interactions,n.Z.REMOVE,(function(t){t.element.setMap(null)}),this),this.overlays_.forEach(this.addOverlayInternal_.bind(this)),(0,p.oL)(this.overlays_,n.Z.ADD,(function(t){this.addOverlayInternal_(t.element)}),this),(0,p.oL)(this.overlays_,n.Z.REMOVE,(function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}),this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),(0,p.Ev)(this.viewport_,et.Z.CONTEXTMENU,this.handleBrowserEvent,this),(0,p.Ev)(this.viewport_,et.Z.WHEEL,this.handleBrowserEvent,this),(0,p.Ev)(this.viewport_,et.Z.MOUSEWHEEL,this.handleBrowserEvent,this),void 0!==this.handleResize_&&(removeEventListener(et.Z.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,i){if(this.frameState_){var o=this.getCoordinateFromPixel(t),r=void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0,n=void 0!==i.layerFilter?i.layerFilter:ct.uX;return this.renderer_.forEachFeatureAtCoordinate(o,this.frameState_,r,e,null,n,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var i=null;return this.forEachFeatureAtPixel(t,(function(t){i||(i=[]),i.push(t)}),e),i},e.prototype.forEachLayerAtPixel=function(t,e,i){if(this.frameState_){var o=i||{},r=void 0!==o.hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0,n=o.layerFilter||ct.uX;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,r,e,null,n,null)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var i=this.getCoordinateFromPixel(t),o=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:ct.uX,r=void 0!==e.hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,r,o,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),i="changedTouches"in t?t.changedTouches[0]:t;return[i.clientX-e.left,i.clientY-e.top]},e.prototype.getTarget=function(){return this.get(q.Z.TARGET)},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){var e=this.frameState_;return e?(0,_t.nn)(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(q.Z.LAYERGROUP)},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getPixelFromCoordinate=function(t){var e=this.frameState_;return e?(0,_t.nn)(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(q.Z.SIZE)},e.prototype.getView=function(){return this.get(q.Z.VIEW)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getTilePriority=function(t,e,i,o){var r=this.frameState_;if(!r||!(e in r.wantedTiles))return rt;if(!r.wantedTiles[e][t.getKey()])return rt;var n=i[0]-r.focus[0],s=i[1]-r.focus[1];return 65536*Math.log(o)+Math.sqrt(n*n+s*s)/o},e.prototype.handleBrowserEvent=function(t,e){var i=e||t.type,o=new s.Z(i,this,t);this.handleMapBrowserEvent(o)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){this.focus_=t.coordinate,t.frameState=this.frameState_;var e=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(var i=e.length-1;i>=0;i--){var o=e[i];if(o.getActive()&&!o.handleEvent(t))break}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var i=this.maxTilesLoading_,o=i;if(t){var r=t.viewHints;r[ht.Z.ANIMATING]&&(i=this.loadTilesWhileAnimating_?8:0,o=2),r[ht.Z.INTERACTING]&&(i=this.loadTilesWhileInteracting_?8:0,o=2)}e.getTilesLoading()<i&&(e.reprioritize(),e.loadMoreTiles(i,o))}!t||!this.hasListener(J.Z.RENDERCOMPLETE)||t.animate||this.tileQueue_.getTilesLoading()||yt(this.getLayers().getArray())||this.renderer_.dispatchRenderEvent(J.Z.RENDERCOMPLETE,t);for(var n=this.postRenderFunctions_,s=0,a=n.length;s<a;++s)n[s](this,t);n.length=0},e.prototype.handleSizeChanged_=function(){this.render()},e.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.keyHandlerKeys_){for(var e=0,i=this.keyHandlerKeys_.length;e<i;++e)(0,p.bN)(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null}if(t){t.appendChild(this.viewport_);var o=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[(0,p.oL)(o,et.Z.KEYDOWN,this.handleBrowserEvent,this),(0,p.oL)(o,et.Z.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),addEventListener(et.Z.RESIZE,this.handleResize_,!1))}else this.renderer_.removeLayerRenderers(),(0,lt.ZF)(this.viewport_),void 0!==this.handleResize_&&(removeEventListener(et.Z.RESIZE,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&((0,p.bN)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&((0,p.bN)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.viewport_.setAttribute("data-view",(0,o.sq)(t)),this.viewPropertyListenerKey_=(0,p.oL)(t,$.Z.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=(0,p.oL)(t,et.Z.CHANGE,this.handleViewPropertyChanged_,this)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(p.bN),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[(0,p.oL)(t,$.Z.PROPERTYCHANGE,this.render,this),(0,p.oL)(t,et.Z.CHANGE,this.render,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.render=function(){void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var e,i=this.getSize(),r=this.getView(),n=(0,pt.lJ)(),s=this.frameState_,a=null;if(void 0!==i&&(0,dt.py)(i)&&r&&r.isDef()){for(var h=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),l=this.getLayerGroup().getLayerStatesArray(),p={},c=0,u=l.length;c<u;++c)p[(0,o.sq)(l[c].layer)]=l[c];e=r.getState(this.pixelRatio_),a={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,extent:n,focus:this.focus_?this.focus_:e.center,index:this.frameIndex_++,layerStates:p,layerStatesArray:l,pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:i,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:e,viewHints:h,wantedTiles:{}}}a&&(a.extent=(0,pt.p8)(e.center,e.resolution,e.rotation,a.size,n)),this.frameState_=a,this.renderer_.renderFrame(a),a&&(a.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,a.postRenderFunctions),s&&(!this.previousExtent_||!(0,pt.xb)(this.previousExtent_)&&!(0,pt.fS)(a.extent,this.previousExtent_))&&(this.dispatchEvent(new X.Z(j.Z.MOVESTART,this,s)),this.previousExtent_=(0,pt.YN)(this.previousExtent_)),this.previousExtent_&&!a.viewHints[ht.Z.ANIMATING]&&!a.viewHints[ht.Z.INTERACTING]&&!(0,pt.fS)(a.extent,this.previousExtent_)&&(this.dispatchEvent(new X.Z(j.Z.MOVEEND,this,a)),(0,pt.d9)(a.extent,this.previousExtent_))),this.dispatchEvent(new X.Z(j.Z.POSTRENDER,this,a)),setTimeout(this.handlePostRender.bind(this),0)},e.prototype.setLayerGroup=function(t){this.set(q.Z.LAYERGROUP,t)},e.prototype.setSize=function(t){this.set(q.Z.SIZE,t)},e.prototype.setTarget=function(t){this.set(q.Z.TARGET,t)},e.prototype.setView=function(t){this.set(q.Z.VIEW,t)},e.prototype.skipFeature=function(t){this.skippedFeatureUids_[(0,o.sq)(t)]=!0,this.render()},e.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0)},e.prototype.unskipFeature=function(t){delete this.skippedFeatureUids_[(0,o.sq)(t)],this.render()},e}(Q.ZP);function yt(t){for(var e=0,i=t.length;e<i;++e){var o=t[e];if("function"==typeof o.getLayers)return yt(o.getLayers().getArray());var r=o.getSource();if(r&&r.loading)return!0}return!1}var ft=i(370878),vt=i(537566),mt=i(435211),St=i(29217),Tt=i(611256);const Et=function(t){function e(e,i,o,r,n){var s=void 0!==n?Tt.Z.IDLE:Tt.Z.LOADED;t.call(this,e,i,o,s),this.loader_=void 0!==n?n:null,this.canvas_=r,this.error_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getError=function(){return this.error_},e.prototype.handleLoad_=function(t){t?(this.error_=t,this.state=Tt.Z.ERROR):this.state=Tt.Z.LOADED,this.changed()},e.prototype.load=function(){this.state==Tt.Z.IDLE&&(this.state=Tt.Z.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))},e.prototype.getImage=function(){return this.canvas_},e}(St.Z);var xt=i(666901),Rt=i(556510),Ct=i(267644),Lt=i(677701);const It=function(t){function e(e,i,o,r,n){t.call(this,e),this.vectorContext=i,this.frameState=o,this.context=r,this.glContext=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(D.ZP);var wt=i(968509),bt=i(545120),Ot=i(28795),Zt=i(432538),kt=i(517882),At=function(){};At.prototype.drawCustom=function(t,e,i){},At.prototype.drawGeometry=function(t){},At.prototype.setStyle=function(t){},At.prototype.drawCircle=function(t,e){},At.prototype.drawFeature=function(t,e){},At.prototype.drawGeometryCollection=function(t,e){},At.prototype.drawLineString=function(t,e){},At.prototype.drawMultiLineString=function(t,e){},At.prototype.drawMultiPoint=function(t,e){},At.prototype.drawMultiPolygon=function(t,e){},At.prototype.drawPoint=function(t,e){},At.prototype.drawPolygon=function(t,e){},At.prototype.drawText=function(t,e){},At.prototype.setFillStrokeStyle=function(t,e){},At.prototype.setImageStyle=function(t,e){},At.prototype.setTextStyle=function(t,e){};const Mt=At,Dt=function(t){function e(e,i,o,r,n){t.call(this),this.context_=e,this.pixelRatio_=i,this.extent_=o,this.transform_=r,this.viewRotation_=n,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=0,this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=0,this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,_t.Ue)()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawImages_=function(t,e,i,o){if(this.image_){var r=(0,kt.vT)(t,e,i,2,this.transform_,this.pixelCoordinates_),n=this.context_,s=this.tmpLocalTransform_,a=n.globalAlpha;1!=this.imageOpacity_&&(n.globalAlpha=a*this.imageOpacity_);var h=this.imageRotation_;this.imageRotateWithView_&&(h+=this.viewRotation_);for(var l=0,p=r.length;l<p;l+=2){var c=r[l]-this.imageAnchorX_,u=r[l+1]-this.imageAnchorY_;if(0!==h||1!=this.imageScale_){var d=c+this.imageAnchorX_,_=u+this.imageAnchorY_;(0,_t.qC)(s,d,_,this.imageScale_,this.imageScale_,h,-d,-_),n.setTransform.apply(n,s)}n.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,c,u,this.imageWidth_,this.imageHeight_)}0===h&&1==this.imageScale_||n.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(n.globalAlpha=a)}},e.prototype.drawText_=function(t,e,i,o){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var r=(0,kt.vT)(t,e,i,o,this.transform_,this.pixelCoordinates_),n=this.context_,s=this.textRotation_;for(this.textRotateWithView_&&(s+=this.viewRotation_);e<i;e+=o){var a=r[e]+this.textOffsetX_,h=r[e+1]+this.textOffsetY_;if(0!==s||1!=this.textScale_){var l=(0,_t.qC)(this.tmpLocalTransform_,a,h,this.textScale_,this.textScale_,s,-a,-h);n.setTransform.apply(n,l)}this.textStrokeState_&&n.strokeText(this.text_,a,h),this.textFillState_&&n.fillText(this.text_,a,h)}0===s&&1==this.textScale_||n.setTransform(1,0,0,1,0,0)}},e.prototype.moveToLineTo_=function(t,e,i,o,r){var n=this.context_,s=(0,kt.vT)(t,e,i,o,this.transform_,this.pixelCoordinates_);n.moveTo(s[0],s[1]);var a=s.length;r&&(a-=2);for(var h=2;h<a;h+=2)n.lineTo(s[h],s[h+1]);return r&&n.closePath(),i},e.prototype.drawRings_=function(t,e,i,o){for(var r=0,n=i.length;r<n;++r)e=this.moveToLineTo_(t,e,i[r],o,!0);return e},e.prototype.drawCircle=function(t){if((0,pt.kK)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=(0,Zt.Kr)(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],o=e[3]-e[1],r=Math.sqrt(i*i+o*o),n=this.context_;n.beginPath(),n.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.drawGeometry=function(t){switch(t.getType()){case Ot.Z.POINT:this.drawPoint(t);break;case Ot.Z.LINE_STRING:this.drawLineString(t);break;case Ot.Z.POLYGON:this.drawPolygon(t);break;case Ot.Z.MULTI_POINT:this.drawMultiPoint(t);break;case Ot.Z.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case Ot.Z.MULTI_POLYGON:this.drawMultiPolygon(t);break;case Ot.Z.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case Ot.Z.CIRCLE:this.drawCircle(t)}},e.prototype.drawFeature=function(t,e){var i=e.getGeometryFunction()(t);i&&(0,pt.kK)(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),i=0,o=e.length;i<o;++i)this.drawGeometry(e[i])},e.prototype.drawPoint=function(t){var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawMultiPoint=function(t){var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawLineString=function(t){if((0,pt.kK)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var o=t.getFlatMidpoint();this.drawText_(o,0,2,2)}}},e.prototype.drawMultiLineString=function(t){var e=t.getExtent();if((0,pt.kK)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,o=t.getFlatCoordinates(),r=0,n=t.getEnds(),s=t.getStride();i.beginPath();for(var a=0,h=n.length;a<h;++a)r=this.moveToLineTo_(o,r,n[a],s,!1);i.stroke()}if(""!==this.text_){var l=t.getFlatMidpoints();this.drawText_(l,0,l.length,2)}}},e.prototype.drawPolygon=function(t){if((0,pt.kK)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if((0,pt.kK)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getOrientedFlatCoordinates(),o=0,r=t.getEndss(),n=t.getStride();e.beginPath();for(var s=0,a=r.length;s<a;++s){var h=r[s];o=this.drawRings_(i,o,h,n)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var l=t.getFlatInteriorPoints();this.drawText_(l,0,l.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=e.lineCap=t.lineCap),a.XQ&&((0,G.fS)(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,a.XQ&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,i=this.contextTextState_,o=t.textAlign?t.textAlign:wt.PH;i?(i.font!=t.font&&(i.font=e.font=t.font),i.textAlign!=o&&(i.textAlign=e.textAlign=o),i.textBaseline!=t.textBaseline&&(i.textBaseline=e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=o,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:o,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){if(t){var i=t.getColor();this.fillState_={fillStyle:(0,bt.y)(i||wt.bL)}}else this.fillState_=null;if(e){var o=e.getColor(),r=e.getLineCap(),n=e.getLineDash(),s=e.getLineDashOffset(),a=e.getLineJoin(),h=e.getWidth(),l=e.getMiterLimit();this.strokeState_={lineCap:void 0!==r?r:wt.mb,lineDash:n||wt.X9,lineDashOffset:s||wt.He,lineJoin:void 0!==a?a:wt.rc,lineWidth:this.pixelRatio_*(void 0!==h?h:wt.yC),miterLimit:void 0!==l?l:wt.V4,strokeStyle:(0,bt.y)(o||wt.Tx)}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){if(t){var e=t.getAnchor(),i=t.getImage(1),o=t.getOrigin(),r=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=r[1],this.image_=i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageWidth_=r[0]}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var i=e.getColor();this.textFillState_={fillStyle:(0,bt.y)(i||wt.bL)}}else this.textFillState_=null;var o=t.getStroke();if(o){var r=o.getColor(),n=o.getLineCap(),s=o.getLineDash(),a=o.getLineDashOffset(),h=o.getLineJoin(),l=o.getWidth(),p=o.getMiterLimit();this.textStrokeState_={lineCap:void 0!==n?n:wt.mb,lineDash:s||wt.X9,lineDashOffset:a||wt.He,lineJoin:void 0!==h?h:wt.rc,lineWidth:void 0!==l?l:wt.yC,miterLimit:void 0!==p?p:wt.V4,strokeStyle:(0,bt.y)(r||wt.Tx)}}else this.textStrokeState_=null;var c=t.getFont(),u=t.getOffsetX(),d=t.getOffsetY(),_=t.getRotateWithView(),g=t.getRotation(),y=t.getScale(),f=t.getText(),v=t.getTextAlign(),m=t.getTextBaseline();this.textState_={font:void 0!==c?c:wt.Df,textAlign:void 0!==v?v:wt.PH,textBaseline:void 0!==m?m:wt.ru},this.text_=void 0!==f?f:"",this.textOffsetX_=void 0!==u?this.pixelRatio_*u:0,this.textOffsetY_=void 0!==d?this.pixelRatio_*d:0,this.textRotateWithView_=void 0!==_&&_,this.textRotation_=void 0!==g?g:0,this.textScale_=this.pixelRatio_*(void 0!==y?y:1)}else this.text_=""},e}(Mt);var Pt=i(580967),Ft=i(516250);function Nt(t,e){Ft.c.expire()}function Gt(t,e){return t.zIndex-e.zIndex}const Kt=function(t){function e(e){t.call(this),this.map_=e,this.layerRenderers_={},this.layerRendererListeners_={},this.layerRendererConstructors_=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.dispatchRenderEvent=function(t,e){(0,o.O3)()},e.prototype.registerLayerRenderers=function(t){this.layerRendererConstructors_.push.apply(this.layerRendererConstructors_,t)},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,i=t.coordinateToPixelTransform,o=t.pixelToCoordinateTransform;(0,_t.qC)(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),(0,_t.U_)((0,_t.lk)(o,i))},e.prototype.removeLayerRenderers=function(){for(var t in this.layerRenderers_)this.removeLayerRendererByKey_(t).dispose()},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,n,s,a){var h,l=e.viewState,p=l.resolution;function c(t,i){var s=e.layerStates[(0,o.sq)(i)].managed;if(!((0,o.sq)(t)in e.skippedFeatureUids)||s)return r.call(n,t,s?i:null)}var u=l.projection,d=t;if(u.canWrapX()){var _=u.getExtent(),g=(0,pt.dz)(_),y=t[0];(y<_[0]||y>_[2])&&(d=[y+g*Math.ceil((_[0]-y)/g),t[1]])}var f,v=e.layerStatesArray;for(f=v.length-1;f>=0;--f){var m=v[f],S=m.layer;if((0,Lt.l)(m,p)&&s.call(a,S)){var T=this.getLayerRenderer(S),E=S.getSource();if(E&&(h=T.forEachFeatureAtCoordinate(E.getWrapX()?d:t,e,i,c)),h)return h}}},e.prototype.forEachLayerAtPixel=function(t,e,i,r,n,s,a){return(0,o.O3)()},e.prototype.hasFeatureAtCoordinate=function(t,e,i,o,r){return void 0!==this.forEachFeatureAtCoordinate(t,e,i,ct.uX,this,o,r)},e.prototype.getLayerRenderer=function(t){var e=(0,o.sq)(t);if(e in this.layerRenderers_)return this.layerRenderers_[e];for(var i,r=0,n=this.layerRendererConstructors_.length;r<n;++r){var s=this.layerRendererConstructors_[r];if(s.handles(t)){i=s.create(this,t);break}}if(!i)throw new Error("Unable to create renderer for layer: "+t.getType());return this.layerRenderers_[e]=i,this.layerRendererListeners_[e]=(0,p.oL)(i,et.Z.CHANGE,this.handleLayerRendererChange_,this),i},e.prototype.getLayerRendererByKey=function(t){return this.layerRenderers_[t]},e.prototype.getLayerRenderers=function(){return this.layerRenderers_},e.prototype.getMap=function(){return this.map_},e.prototype.handleLayerRendererChange_=function(){this.map_.render()},e.prototype.removeLayerRendererByKey_=function(t){var e=this.layerRenderers_[t];return delete this.layerRenderers_[t],(0,p.bN)(this.layerRendererListeners_[t]),delete this.layerRendererListeners_[t],e},e.prototype.removeUnusedLayerRenderers_=function(t,e){for(var i in this.layerRenderers_)e&&i in e.layerStates||this.removeLayerRendererByKey_(i).dispose()},e.prototype.renderFrame=function(t){(0,o.O3)()},e.prototype.scheduleExpireIconCache=function(t){t.postRenderFunctions.push(Nt)},e.prototype.scheduleRemoveUnusedLayerRenderers=function(t){for(var e in this.layerRenderers_)if(!(e in t.layerStates))return void t.postRenderFunctions.push(this.removeUnusedLayerRenderers_.bind(this))},e}(Pt.Z);var Wt=i(582418),Yt=[];const Ht=function(t){function e(e){t.call(this,e);var i=e.getViewport();this.context_=(0,lt.E4)(),this.canvas_=this.context_.canvas,this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className=Ct.XV,i.insertBefore(this.canvas_,i.childNodes[0]||null),this.renderedVisible_=!0,this.transform_=(0,_t.Ue)()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.dispatchRenderEvent=function(t,e){var i=this.getMap(),o=this.context_;if(i.hasListener(t)){var r=e.extent,n=e.pixelRatio,s=e.viewState.rotation,a=this.getTransform(e),h=new Dt(o,n,r,a,s),l=new It(t,h,e,o,null);i.dispatchEvent(l)}},e.prototype.getTransform=function(t){var e=t.viewState,i=this.canvas_.width/2,o=this.canvas_.height/2,r=t.pixelRatio/e.resolution,n=-r,s=-e.rotation,a=-e.center[0],h=-e.center[1];return(0,_t.qC)(this.transform_,i,o,r,n,s,a,h)},e.prototype.renderFrame=function(t){if(t){var e=this.context_,i=t.pixelRatio,o=Math.round(t.size[0]*i),r=Math.round(t.size[1]*i);this.canvas_.width!=o||this.canvas_.height!=r?(this.canvas_.width=o,this.canvas_.height=r):e.clearRect(0,0,o,r);var n=t.viewState.rotation;this.calculateMatrices2D(t),this.dispatchRenderEvent(J.Z.PRECOMPOSE,t);var s=t.layerStatesArray;(0,G.XV)(s,Gt),n&&(e.save(),(0,wt.qs)(e,n,o/2,r/2));var a,h,l=t.viewState.resolution;for(a=0,h=s.length;a<h;++a){var p=s[a],c=p.layer,u=this.getLayerRenderer(c);(0,Lt.l)(p,l)&&p.sourceState==Wt.Z.READY&&u.prepareFrame(t,p)&&u.composeFrame(t,p,e)}n&&e.restore(),this.dispatchRenderEvent(J.Z.POSTCOMPOSE,t),this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.scheduleRemoveUnusedLayerRenderers(t),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,i,o,r,n,s){var a,h,l=e.viewState.resolution,p=e.layerStatesArray,c=p.length,u=(0,_t.nn)(e.pixelToCoordinateTransform,t.slice());for(h=c-1;h>=0;--h){var d=p[h],_=d.layer;if((0,Lt.l)(d,l)&&n.call(s,_)&&(a=this.getLayerRenderer(_).forEachLayerAtCoordinate(u,e,i,o,r)))return a}},e.prototype.registerLayerRenderers=function(e){t.prototype.registerLayerRenderers.call(this,e);for(var i=0,o=e.length;i<o;++i){var r=e[i];(0,G.q9)(Yt,r)||Yt.push(r)}},e}(Kt);var zt=i(690728);const Vt=function(t){function e(e){t.call(this,e),this.renderedResolution,this.transform_=(0,_t.Ue)()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clip=function(t,e,i){var o=e.pixelRatio,r=e.size[0]*o,n=e.size[1]*o,s=e.viewState.rotation,a=(0,pt.rL)(i),h=(0,pt.Xv)(i),l=(0,pt.w$)(i),p=(0,pt.hC)(i);(0,_t.nn)(e.coordinateToPixelTransform,a),(0,_t.nn)(e.coordinateToPixelTransform,h),(0,_t.nn)(e.coordinateToPixelTransform,l),(0,_t.nn)(e.coordinateToPixelTransform,p),t.save(),(0,wt.qs)(t,-s,r/2,n/2),t.beginPath(),t.moveTo(a[0]*o,a[1]*o),t.lineTo(h[0]*o,h[1]*o),t.lineTo(l[0]*o,l[1]*o),t.lineTo(p[0]*o,p[1]*o),t.clip(),(0,wt.qs)(t,s,r/2,n/2)},e.prototype.dispatchComposeEvent_=function(t,e,i,o){var r=this.getLayer();if(r.hasListener(t)){var n=i.size[0]*i.pixelRatio,s=i.size[1]*i.pixelRatio,a=i.viewState.rotation;(0,wt.qs)(e,-a,n/2,s/2);var h=void 0!==o?o:this.getTransform(i,0),l=new Dt(e,i.pixelRatio,i.extent,h,i.viewState.rotation),p=new It(t,l,i,e,null);r.dispatchEvent(p),(0,wt.qs)(e,a,n/2,s/2)}},e.prototype.forEachLayerAtCoordinate=function(t,e,i,o,r){return this.forEachFeatureAtCoordinate(t,e,i,ct.uX)?o.call(r,this.getLayer(),null):void 0},e.prototype.postCompose=function(t,e,i,o){this.dispatchComposeEvent_(J.Z.POSTCOMPOSE,t,e,o)},e.prototype.preCompose=function(t,e,i){this.dispatchComposeEvent_(J.Z.PRECOMPOSE,t,e,i)},e.prototype.dispatchRenderEvent=function(t,e,i){this.dispatchComposeEvent_(J.Z.RENDER,t,e,i)},e.prototype.getTransform=function(t,e){var i=t.viewState,o=t.pixelRatio,r=o*t.size[0]/2,n=o*t.size[1]/2,s=o/i.resolution,a=-s,h=-i.rotation,l=-i.center[0]+e,p=-i.center[1];return(0,_t.qC)(this.transform_,r,n,s,a,h,l,p)},e.prototype.composeFrame=function(t,e,i){(0,o.O3)()},e.prototype.prepareFrame=function(t,e){return(0,o.O3)()},e}(function(t){function e(e){t.call(this),this.layer_=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createLoadedTileFinder=function(t,e,i){return function(o,r){return t.forEachLoadedTile(e,o,r,(function(t){i[o]||(i[o]={}),i[o][t.tileCoord.toString()]=t}))}},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,o){},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleImageChange_=function(t){t.target.getState()===Tt.Z.LOADED&&this.renderIfReadyAndVisible()},e.prototype.hasFeatureAtCoordinate=function(t,e){return!1},e.prototype.loadImage=function(t){var e=t.getState();return e!=Tt.Z.LOADED&&e!=Tt.Z.ERROR&&(0,p.oL)(t,et.Z.CHANGE,this.handleImageChange_,this),e==Tt.Z.IDLE&&(t.load(),e=t.getState()),e==Tt.Z.LOADED},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==Wt.Z.READY&&this.changed()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var i=function(t,e,i){var r=(0,o.sq)(t);r in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[r])}.bind(null,e);t.postRenderFunctions.push(i)}},e.prototype.updateUsedTiles=function(t,e,i,r){var n=(0,o.sq)(e),s=i.toString();n in t?s in t[n]?t[n][s].extend(r):t[n][s]=r:(t[n]={},t[n][s]=r)},e.prototype.manageTilePyramid=function(t,e,i,r,n,s,a,h,l,p){var c=(0,o.sq)(e);c in t.wantedTiles||(t.wantedTiles[c]={});var u,d,_,g,y,f,v=t.wantedTiles[c],m=t.tileQueue;for(f=i.getMinZoom();f<=a;++f)for(d=i.getTileRangeForExtentAndZ(s,f,d),_=i.getResolution(f),g=d.minX;g<=d.maxX;++g)for(y=d.minY;y<=d.maxY;++y)a-f<=h?((u=e.getTile(f,g,y,r,n)).getState()==tt.Z.IDLE&&(v[u.getKey()]=!0,m.isKeyQueued(u.getKey())||m.enqueue([u,c,i.getTileCoordCenter(u.tileCoord),_])),void 0!==l&&l.call(p,u)):e.useTile(f,g,y,n)},e}(i(756834).Z)),Ut=function(t){function e(e){t.call(this,e),this.coordinateToCanvasPixelTransform=(0,_t.Ue)(),this.hitCanvasContext_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.composeFrame=function(t,e,i){this.preCompose(i,t);var o=this.getImage();if(o){var r=e.extent,n=void 0!==r&&!(0,pt.r4)(r,t.extent)&&(0,pt.kK)(r,t.extent);n&&this.clip(i,t,r);var s=this.getImageTransform(),a=i.globalAlpha;i.globalAlpha=e.opacity;var h=s[4],l=s[5],p=o.width*s[0],c=o.height*s[3];p>=.5&&c>=.5&&i.drawImage(o,0,0,+o.width,+o.height,Math.round(h),Math.round(l),Math.round(p),Math.round(c)),i.globalAlpha=a,n&&i.restore()}this.postCompose(i,t,e)},e.prototype.getImage=function(){return(0,o.O3)()},e.prototype.getImageTransform=function(){return(0,o.O3)()},e.prototype.forEachLayerAtCoordinate=function(t,e,i,o,r){if(this.getImage()){var n=(0,_t.nn)(this.coordinateToCanvasPixelTransform,t.slice());(0,zt.bA)(n,e.viewState.resolution/this.renderedResolution),this.hitCanvasContext_||(this.hitCanvasContext_=(0,lt.E4)(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.getImage(),n[0],n[1],1,1,0,0,1,1);var s=this.hitCanvasContext_.getImageData(0,0,1,1).data;return s[3]>0?o.call(r,this.getLayer(),s):void 0}},e}(Vt);var Bt=function(t){function e(i){if(t.call(this,i),this.image_=null,this.imageTransform_=(0,_t.Ue)(),this.skippedFeatures_=[],this.vectorRenderer_=null,i.getType()===xt.Z.VECTOR)for(var o=0,r=Yt.length;o<r;++o){var n=Yt[o];if(n!==e&&n.handles(i)){this.vectorRenderer_=new n(i);break}}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.vectorRenderer_&&this.vectorRenderer_.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.image_?this.image_.getImage():null},e.prototype.getImageTransform=function(){return this.imageTransform_},e.prototype.prepareFrame=function(t,e){var i,o=t.pixelRatio,r=t.size,n=t.viewState,s=n.center,a=n.resolution,h=this.getLayer().getSource(),l=t.viewHints,p=this.vectorRenderer_,c=t.extent;if(p||void 0===e.extent||(c=(0,pt.Ed)(c,e.extent)),!l[ht.Z.ANIMATING]&&!l[ht.Z.INTERACTING]&&!(0,pt.xb)(c)){var u=n.projection;if(!mt.j){var d=h.getProjection();d&&(u=d)}var _=this.skippedFeatures_;if(p){var g=p.context,y=(0,ot.f0)({},t,{size:[(0,pt.dz)(c)/a,(0,pt.Cr)(c)/a],viewState:(0,ot.f0)({},t.viewState,{rotation:0})}),f=Object.keys(y.skippedFeatureUids).sort();i=new Et(c,a,o,g.canvas,(function(t){!p.prepareFrame(y,e)||!p.replayGroupChanged&&(0,G.fS)(_,f)||(g.canvas.width=y.size[0]*o,g.canvas.height=y.size[1]*o,p.compose(g,y,e),_=f,t())}))}else i=h.getImage(c,a,o,u);i&&this.loadImage(i)&&(this.image_=i,this.skippedFeatures_=_)}if(this.image_){var v=(i=this.image_).getExtent(),m=i.getResolution(),S=i.getPixelRatio(),T=o*m/(a*S),E=(0,_t.qC)(this.imageTransform_,o*r[0]/2,o*r[1]/2,T,T,0,S*(v[0]-s[0])/m,S*(s[1]-v[3])/m);(0,_t.qC)(this.coordinateToCanvasPixelTransform,o*r[0]/2-E[4],o*r[1]/2-E[5],o/a,-o/a,0,-s[0],-s[1]),this.renderedResolution=m*o/S}return!!this.image_},e.prototype.forEachFeatureAtCoordinate=function(e,i,o,r){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,i,o,r):t.prototype.forEachFeatureAtCoordinate.call(this,e,i,o,r)},e}(Ut);Bt.handles=function(t){return t.getType()===xt.Z.IMAGE||t.getType()===xt.Z.VECTOR&&t.getRenderMode()===Rt.Z.IMAGE},Bt.create=function(t,e){return new Bt(e)};const Xt=Bt;var jt=i(19473),qt=function(t){function e(e,i){t.call(this,e),this.context=i?null:(0,lt.E4)(),this.oversampling_,this.renderedExtent_=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=(0,pt.lJ)(),this.tmpTileRange_=new jt.Z(0,0,0,0),this.imageTransform_=(0,_t.Ue)(),this.zDirection=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isDrawableTile_=function(t){var e=this.getLayer(),i=t.getState(),o=e.getUseInterimTilesOnError();return i==tt.Z.LOADED||i==tt.Z.EMPTY||i==tt.Z.ERROR&&!o},e.prototype.getTile=function(t,e,i,o,r){var n=this.getLayer(),s=n.getSource().getTile(t,e,i,o,r);return s.getState()==tt.Z.ERROR&&(n.getUseInterimTilesOnError()?n.getPreload()>0&&(this.newTiles_=!0):s.setState(tt.Z.LOADED)),this.isDrawableTile_(s)||(s=s.getInterimTile()),s},e.prototype.prepareFrame=function(t,e){var i=t.pixelRatio,r=t.size,n=t.viewState,s=n.projection,a=n.resolution,h=n.center,l=this.getLayer(),p=l.getSource(),c=p.getRevision(),u=p.getTileGridForProjection(s),d=u.getZForResolution(a,this.zDirection),_=u.getResolution(d),g=Math.round(a/_)||1,y=t.extent;if(void 0!==e.extent&&(y=(0,pt.Ed)(y,e.extent)),(0,pt.xb)(y))return!1;var f=u.getTileRangeForExtentAndZ(y,d),v=u.getTileRangeExtent(d,f),m=p.getTilePixelRatio(i),S={};S[d]={};var T,E,x,R=this.createLoadedTileFinder(p,s,S),C=t.viewHints,L=C[ht.Z.ANIMATING]||C[ht.Z.INTERACTING],I=this.tmpExtent,w=this.tmpTileRange_;for(this.newTiles_=!1,E=f.minX;E<=f.maxX;++E)for(x=f.minY;x<=f.maxY;++x)if(!(Date.now()-t.time>16&&L)){if(T=this.getTile(d,E,x,i,s),this.isDrawableTile_(T)){var b=(0,o.sq)(this);if(T.getState()==tt.Z.LOADED){S[d][T.tileCoord.toString()]=T;var O=T.inTransition(b);this.newTiles_||!O&&-1!==this.renderedTiles.indexOf(T)||(this.newTiles_=!0)}if(1===T.getAlpha(b,t.time))continue}var Z=u.getTileCoordChildTileRange(T.tileCoord,w,I),k=!1;Z&&(k=R(d+1,Z)),k||u.forEachTileCoordParentTileRange(T.tileCoord,R,null,w,I)}var A=_*i/m*g;if(!(this.renderedResolution&&Date.now()-t.time>16&&L)&&(this.newTiles_||!this.renderedExtent_||!(0,pt.r4)(this.renderedExtent_,y)||this.renderedRevision!=c||g!=this.oversampling_||!L&&A!=this.renderedResolution)){var M=this.context;if(M){var D=p.getTilePixelSize(d,i,s),P=Math.round(f.getWidth()*D[0]/g),F=Math.round(f.getHeight()*D[1]/g),N=M.canvas;N.width!=P||N.height!=F?(this.oversampling_=g,N.width=P,N.height=F):(this.renderedExtent_&&!(0,pt.fS)(v,this.renderedExtent_)&&M.clearRect(0,0,P,F),g=this.oversampling_)}this.renderedTiles.length=0;var G,K,W,Y,H,z,V,U,B,X,j=Object.keys(S).map(Number);for(j.sort((function(t,e){return t===d?1:e===d?-1:t>e?1:t<e?-1:0})),Y=0,H=j.length;Y<H;++Y)for(var q in W=j[Y],K=p.getTilePixelSize(W,i,s),G=u.getResolution(W)/_,V=m*p.getGutterForProjection(s),U=S[W])T=U[q],E=((z=u.getTileCoordExtent(T.getTileCoord(),I))[0]-v[0])/_*m/g,x=(v[3]-z[3])/_*m/g,B=K[0]*G/g,X=K[1]*G/g,this.drawTileImage(T,t,e,E,x,B,X,V,d===W),this.renderedTiles.push(T);this.renderedRevision=c,this.renderedResolution=_*i/m*g,this.renderedExtent_=v}var J=this.renderedResolution/a,Q=(0,_t.qC)(this.imageTransform_,i*r[0]/2,i*r[1]/2,J,J,0,(this.renderedExtent_[0]-h[0])/this.renderedResolution*i,(h[1]-this.renderedExtent_[3])/this.renderedResolution*i);return(0,_t.qC)(this.coordinateToCanvasPixelTransform,i*r[0]/2-Q[4],i*r[1]/2-Q[5],i/a,-i/a,0,-h[0],-h[1]),this.updateUsedTiles(t.usedTiles,p,d,f),this.manageTilePyramid(t,p,u,i,s,y,d,l.getPreload()),this.scheduleExpireCache(t,p),this.renderedTiles.length>0},e.prototype.drawTileImage=function(t,e,i,r,n,s,a,h,l){var p=this.getTileImage(t);if(p){var c=(0,o.sq)(this),u=l?t.getAlpha(c,e.time):1,d=this.getLayer().getSource();1!==u||d.getOpaque(e.viewState.projection)||this.context.clearRect(r,n,s,a);var _=u!==this.context.globalAlpha;_&&(this.context.save(),this.context.globalAlpha=u),this.context.drawImage(p,h,h,p.width-2*h,p.height-2*h,r,n,s,a),_&&this.context.restore(),1!==u?e.animate=!0:l&&t.endTransition(c)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getImageTransform=function(){return this.imageTransform_},e.prototype.getTileImage=function(t){return t.getImage()},e}(Ut);qt.handles=function(t){return t.getType()===xt.Z.TILE},qt.create=function(t,e){return new qt(e)},qt.prototype.getLayer;const Jt=qt;var Qt=i(65510),$t=i.n(Qt),te=function(){};te.prototype.getReplay=function(t,e){return(0,o.O3)()},te.prototype.isEmpty=function(){return(0,o.O3)()},te.prototype.addDeclutter=function(t){return(0,o.O3)()};const ee=te,ie="Circle",oe="Default",re="Image",ne="LineString",se="Polygon",ae="Text";var he=i(434178),le=i(686204),pe=i(804027),ce=i(921882);function ue(t,e,i,o,r,n,s,a){for(var h,l,p,c=[],u=t[e]>t[i-o],d=r.length,_=t[e],g=t[e+1],y=t[e+=o],f=t[e+1],v=0,m=Math.sqrt(Math.pow(y-_,2)+Math.pow(f-g,2)),S="",T=0,E=0;E<d;++E){l=u?d-E-1:E;var x=r.charAt(l),R=n(S=u?x+S:S+x)-T;T+=R;for(var C=s+R/2;e<i-o&&v+m<C;)_=y,g=f,y=t[e+=o],f=t[e+1],v+=m,m=Math.sqrt(Math.pow(y-_,2)+Math.pow(f-g,2));var L=C-v,I=Math.atan2(f-g,y-_);if(u&&(I+=I>0?-Math.PI:Math.PI),void 0!==p){var w=I-p;if(w+=w>Math.PI?-2*Math.PI:w<-Math.PI?2*Math.PI:0,Math.abs(w)>a)return null}var b=L/m,O=(0,ce.t7)(_,y,b),Z=(0,ce.t7)(g,f,b);p==I?(u&&(h[0]=O,h[1]=Z,h[2]=R/2),h[4]=S):(T=R,h=[O,Z,R/2,I,S=x],u?c.unshift(h):c.push(h),p=I),s+=R}return c}var de={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},_e=[de.FILL],ge=[de.STROKE],ye=[de.BEGIN_PATH],fe=[de.CLOSE_PATH];const ve=de;var me=[se,ie,ne,re,ae,oe],Se={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},Te=(0,pt.lJ)(),Ee=(0,_t.Ue)();const xe=function(t){function e(e,i,o,r,n,s){t.call(this),this.declutterTree=s,this.tolerance=e,this.maxExtent=i,this.overlaps=n,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=o,this.alignFill_,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.coordinateCache_={},this.renderedTransform_=(0,_t.Ue)(),this.hitDetectionInstructions=[],this.pixelCoordinates_=null,this.state={},this.viewRotation_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.replayTextBackground_=function(t,e,i,o,r,n,s){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,o),t.lineTo.apply(t,r),t.lineTo.apply(t,e),n&&(this.alignFill_=n[2],this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())},e.prototype.replayImage_=function(t,e,i,o,r,n,s,a,h,l,p,c,u,d,_,g,y,f){var v=y||f;e-=r*=u,i-=n*=u;var m,S,T,E,x=_+l>o.width?o.width-l:_,R=a+p>o.height?o.height-p:a,C=g[3]+x*u+g[1],L=g[0]+R*u+g[2],I=e-g[3],w=i-g[0];(v||0!==c)&&(m=[I,w],S=[I+C,w],T=[I+C,w+L],E=[I,w+L]);var b=null;if(0!==c){var O=e+r,Z=i+n;b=(0,_t.qC)(Ee,O,Z,1,1,c,-O,-Z),(0,pt.YN)(Te),(0,pt.Wj)(Te,(0,_t.nn)(Ee,m)),(0,pt.Wj)(Te,(0,_t.nn)(Ee,S)),(0,pt.Wj)(Te,(0,_t.nn)(Ee,T)),(0,pt.Wj)(Te,(0,_t.nn)(Ee,E))}else(0,pt.T9)(I,w,I+C,w+L,Te);var k=t.canvas,A=f?f[2]*u/2:0,M=Te[0]-A<=k.width&&Te[2]+A>=0&&Te[1]-A<=k.height&&Te[3]+A>=0;if(d&&(e=Math.round(e),i=Math.round(i)),s){if(!M&&1==s[4])return;(0,pt.l7)(s,Te);var D=M?[t,b?b.slice(0):null,h,o,l,p,x,R,e,i,u]:null;D&&v&&D.push(y,f,m,S,T,E),s.push(D)}else M&&(v&&this.replayTextBackground_(t,m,S,T,E,y,f),(0,wt.AE)(t,b,h,o,l,p,x,R,e,i,u))},e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))},e.prototype.appendFlatCoordinates=function(t,e,i,o,r,n){var s=this.coordinates.length,a=this.getBufferedMaxExtent();n&&(e+=o);var h,l,p,c=[t[e],t[e+1]],u=[NaN,NaN],d=!0;for(h=e+o;h<i;h+=o)u[0]=t[h],u[1]=t[h+1],(p=(0,pt.pX)(a,u))!==l?(d&&(this.coordinates[s++]=c[0],this.coordinates[s++]=c[1]),this.coordinates[s++]=u[0],this.coordinates[s++]=u[1],d=!1):p===he.Z.INTERSECTING?(this.coordinates[s++]=u[0],this.coordinates[s++]=u[1],d=!1):d=!0,c[0]=u[0],c[1]=u[1],l=p;return(r&&d||h===e+o)&&(this.coordinates[s++]=c[0],this.coordinates[s++]=c[1]),s},e.prototype.drawCustomCoordinates_=function(t,e,i,o,r){for(var n=0,s=i.length;n<s;++n){var a=i[n],h=this.appendFlatCoordinates(t,e,a,o,!1,!1);r.push(h),e=a}return e},e.prototype.drawCustom=function(t,e,i){this.beginGeometry(t,e);var o,r,n,s,a,h=t.getType(),l=t.getStride(),p=this.coordinates.length;if(h==Ot.Z.MULTI_POLYGON){o=(t=t).getOrientedFlatCoordinates(),s=[];var c=t.getEndss();a=0;for(var u=0,d=c.length;u<d;++u){var _=[];a=this.drawCustomCoordinates_(o,a,c[u],l,_),s.push(_)}this.instructions.push([ve.CUSTOM,p,s,t,i,le.ug])}else h==Ot.Z.POLYGON||h==Ot.Z.MULTI_LINE_STRING?(n=[],o=h==Ot.Z.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),a=this.drawCustomCoordinates_(o,0,t.getEnds(),l,n),this.instructions.push([ve.CUSTOM,p,n,t,i,le.o1])):h==Ot.Z.LINE_STRING||h==Ot.Z.MULTI_POINT?(o=t.getFlatCoordinates(),r=this.appendFlatCoordinates(o,0,o.length,l,!1,!1),this.instructions.push([ve.CUSTOM,p,r,t,i,le.Ml])):h==Ot.Z.POINT&&(o=t.getFlatCoordinates(),this.coordinates.push(o[0],o[1]),r=this.coordinates.length,this.instructions.push([ve.CUSTOM,p,r,t,i]));this.endGeometry(t,e)},e.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[ve.BEGIN_GEOMETRY,e,0],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[ve.BEGIN_GEOMETRY,e,0],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){},e.prototype.fill_=function(t){if(this.alignFill_){var e=(0,_t.nn)(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.setTransform.apply(t,wt.Oz)},e.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],a.XQ&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},e.prototype.renderDeclutter_=function(t,e){if(t&&t.length>5){var i=t[4];if(1==i||i==t.length-5){var o={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};if(!this.declutterTree.collides(o)){this.declutterTree.insert(o);for(var r=5,n=t.length;r<n;++r){var s=t[r];s&&(s.length>11&&this.replayTextBackground_(s[0],s[13],s[14],s[15],s[16],s[11],s[12]),wt.AE.apply(void 0,s))}}t.length=5,(0,pt.YN)(t)}}},e.prototype.replay_=function(t,e,i,r,n,s,a){var h;this.pixelCoordinates_&&(0,G.fS)(e,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=(0,kt.vT)(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),(0,_t.lk)(this.renderedTransform_,e));for(var l,p,c,u,d,_,g,y,f,v,m,S,T=!(0,ot.xb)(i),E=0,x=r.length,R=0,C=0,L=0,I=null,w=null,b=this.coordinateCache_,O=this.viewRotation_,Z={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:O},k=this.instructions!=r||this.overlaps?0:200;E<x;){var A=r[E];switch(A[0]){case ve.BEGIN_GEOMETRY:v=A[1],T&&i[(0,o.sq)(v)]||!v.getGeometry()?E=A[2]:void 0===a||(0,pt.kK)(a,v.getGeometry().getExtent())?++E:E=A[2]+1;break;case ve.BEGIN_PATH:C>k&&(this.fill_(t),C=0),L>k&&(t.stroke(),L=0),C||L||(t.beginPath(),u=d=NaN),++E;break;case ve.CIRCLE:var M=h[R=A[1]],D=h[R+1],P=h[R+2]-M,F=h[R+3]-D,N=Math.sqrt(P*P+F*F);t.moveTo(M+N,D),t.arc(M,D,N,0,2*Math.PI,!0),++E;break;case ve.CLOSE_PATH:t.closePath(),++E;break;case ve.CUSTOM:R=A[1],l=A[2];var K=A[3],W=A[4],Y=6==A.length?A[5]:void 0;Z.geometry=K,Z.feature=v,E in b||(b[E]=[]);var H=b[E];Y?Y(h,R,l,2,H):(H[0]=h[R],H[1]=h[R+1],H.length=2),W(H,Z),++E;break;case ve.DRAW_IMAGE:R=A[1],l=A[2],f=A[3],p=A[4],c=A[5],y=s?null:A[6];var z=A[7],V=A[8],U=A[9],B=A[10],X=A[11],j=A[12],q=A[13],J=A[14],Q=void 0,$=void 0,tt=void 0;for(A.length>16?(Q=A[15],$=A[16],tt=A[17]):(Q=wt.oB,$=tt=!1),X&&(j+=O);R<l;R+=2)this.replayImage_(t,h[R],h[R+1],f,p,c,y,z,V,U,B,j,q,n,J,Q,$?I:null,tt?w:null);this.renderDeclutter_(y,v),++E;break;case ve.DRAW_CHARS:var et=A[1],it=A[2],rt=A[3];y=s?null:A[4];var nt=A[5],st=A[6],at=A[7],ht=A[8],lt=A[9],ct=A[10],ut=A[11],dt=A[12],gt=A[13],yt=A[14],ft=(0,pe.W)(h,et,it,2),vt=ht(dt);if(nt||vt<=ft){var mt=this,St=mt.textStates[gt].textAlign,Tt=ue(h,et,it,2,dt,ht,(ft-vt)*Se[St],at);if(Tt){var Et=void 0,xt=void 0,Rt=void 0,Ct=void 0,Lt=void 0;if(ct)for(Et=0,xt=Tt.length;Et<xt;++Et)Rt=(Lt=Tt[Et])[4],Ct=mt.getImage(Rt,gt,"",ct),p=Lt[2]+ut,c=rt*Ct.height+2*(.5-rt)*ut-lt,this.replayImage_(t,Lt[0],Lt[1],Ct,p,c,y,Ct.height,1,0,0,Lt[3],yt,!1,Ct.width,wt.oB,null,null);if(st)for(Et=0,xt=Tt.length;Et<xt;++Et)Rt=(Lt=Tt[Et])[4],Ct=mt.getImage(Rt,gt,st,""),p=Lt[2],c=rt*Ct.height-lt,this.replayImage_(t,Lt[0],Lt[1],Ct,p,c,y,Ct.height,1,0,0,Lt[3],yt,!1,Ct.width,wt.oB,null,null)}}this.renderDeclutter_(y,v),++E;break;case ve.END_GEOMETRY:if(void 0!==s){var It=s(v=A[1]);if(It)return It}++E;break;case ve.FILL:k?C++:this.fill_(t),++E;break;case ve.MOVE_TO_LINE_TO:for(R=A[1],l=A[2],m=h[R],g=(S=h[R+1])+.5|0,(_=m+.5|0)===u&&g===d||(t.moveTo(m,S),u=_,d=g),R+=2;R<l;R+=2)_=(m=h[R])+.5|0,g=(S=h[R+1])+.5|0,R!=l-2&&_===u&&g===d||(t.lineTo(m,S),u=_,d=g);++E;break;case ve.SET_FILL_STYLE:I=A,this.alignFill_=A[2],C&&(this.fill_(t),C=0,L&&(t.stroke(),L=0)),t.fillStyle=A[1],++E;break;case ve.SET_STROKE_STYLE:w=A,L&&(t.stroke(),L=0),this.setStrokeStyle_(t,A),++E;break;case ve.STROKE:k?L++:t.stroke(),++E;break;default:++E}}C&&this.fill_(t),L&&t.stroke()},e.prototype.replay=function(t,e,i,o,r){this.viewRotation_=i,this.replay_(t,e,o,this.instructions,r,void 0,void 0)},e.prototype.replayHitDetection=function(t,e,i,o,r,n){return this.viewRotation_=i,this.replay_(t,e,o,this.hitDetectionInstructions,!0,r,n)},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var i,o,r=e.length,n=-1;for(t=0;t<r;++t)(o=(i=e[t])[0])==ve.END_GEOMETRY?n=t:o==ve.BEGIN_GEOMETRY&&(i[2]=t,(0,G.FZ)(this.hitDetectionInstructions,n,t),n=-1)},e.prototype.setFillStrokeStyle=function(t,e){var i=this.state;if(t){var o=t.getColor();i.fillStyle=(0,bt.y)(o||wt.bL)}else i.fillStyle=void 0;if(e){var r=e.getColor();i.strokeStyle=(0,bt.y)(r||wt.Tx);var n=e.getLineCap();i.lineCap=void 0!==n?n:wt.mb;var s=e.getLineDash();i.lineDash=s?s.slice():wt.X9;var a=e.getLineDashOffset();i.lineDashOffset=a||wt.He;var h=e.getLineJoin();i.lineJoin=void 0!==h?h:wt.rc;var l=e.getWidth();i.lineWidth=void 0!==l?l:wt.yC;var p=e.getMiterLimit();i.miterLimit=void 0!==p?p:wt.V4,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},e.prototype.createFill=function(t,e){var i=t.fillStyle,o=[ve.SET_FILL_STYLE,i];return"string"!=typeof i&&o.push(!0),o},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[ve.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e,i){var o=t.fillStyle;"string"==typeof o&&t.currentFillStyle==o||(void 0!==o&&this.instructions.push(e.call(this,t,i)),t.currentFillStyle=o)},e.prototype.updateStrokeStyle=function(t,e){var i=t.strokeStyle,o=t.lineCap,r=t.lineDash,n=t.lineDashOffset,s=t.lineJoin,a=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=o||r!=t.currentLineDash&&!(0,G.fS)(t.currentLineDash,r)||t.currentLineDashOffset!=n||t.currentLineJoin!=s||t.currentLineWidth!=a||t.currentMiterLimit!=h)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=o,t.currentLineDash=r,t.currentLineDashOffset=n,t.currentLineJoin=s,t.currentLineWidth=a,t.currentMiterLimit=h)},e.prototype.endGeometry=function(t,e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var i=[ve.END_GEOMETRY,e];this.instructions.push(i),this.hitDetectionInstructions.push(i)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,pt.d9)(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;(0,pt.f3)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(Mt),Re=function(t){function e(e,i,o,r,n,s){t.call(this,e,i,o,r,n,s),this.declutterGroup_=null,this.hitDetectionImage_=null,this.image_=null,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawCoordinates_=function(t,e,i,o){return this.appendFlatCoordinates(t,e,i,o,!1,!1)},e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),o=t.getStride(),r=this.coordinates.length,n=this.drawCoordinates_(i,0,i.length,o);this.instructions.push([ve.DRAW_IMAGE,r,n,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([ve.DRAW_IMAGE,r,n,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(t,e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),o=t.getStride(),r=this.coordinates.length,n=this.drawCoordinates_(i,0,i.length,o);this.instructions.push([ve.DRAW_IMAGE,r,n,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([ve.DRAW_IMAGE,r,n,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(t,e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0},e.prototype.setImageStyle=function(t,e){var i=t.getAnchor(),o=t.getSize(),r=t.getHitDetectionImage(1),n=t.getImage(1),s=t.getOrigin();this.anchorX_=i[0],this.anchorY_=i[1],this.declutterGroup_=e,this.hitDetectionImage_=r,this.image_=n,this.height_=o[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.width_=o[0]},e}(xe),Ce=function(t){function e(e,i,o,r,n,s){t.call(this,e,i,o,r,n,s)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawFlatCoordinates_=function(t,e,i,o){var r=this.coordinates.length,n=this.appendFlatCoordinates(t,e,i,o,!1,!1),s=[ve.MOVE_TO_LINE_TO,r,n];return this.instructions.push(s),this.hitDetectionInstructions.push(s),i},e.prototype.drawLineString=function(t,e){var i=this.state,o=i.strokeStyle,r=i.lineWidth;if(void 0!==o&&void 0!==r){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([ve.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],ye);var n=t.getFlatCoordinates(),s=t.getStride();this.drawFlatCoordinates_(n,0,n.length,s),this.hitDetectionInstructions.push(ge),this.endGeometry(t,e)}},e.prototype.drawMultiLineString=function(t,e){var i=this.state,o=i.strokeStyle,r=i.lineWidth;if(void 0!==o&&void 0!==r){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([ve.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],ye);for(var n=t.getEnds(),s=t.getFlatCoordinates(),a=t.getStride(),h=0,l=0,p=n.length;l<p;++l)h=this.drawFlatCoordinates_(s,h,n[l],a);this.hitDetectionInstructions.push(ge),this.endGeometry(t,e)}},e.prototype.finish=function(){var t=this.state;null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(ge),this.reverseHitDetectionInstructions(),this.state=null},e.prototype.applyStroke=function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(ge),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(ye)},e}(xe);var Le=i(208913),Ie=i(862418);const we=function(t){function e(e,i,o,r,n,s){t.call(this,e,i,o,r,n,s)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawFlatCoordinatess_=function(t,e,i,o){var r=this.state,n=void 0!==r.fillStyle,s=null!=r.strokeStyle,a=i.length;this.instructions.push(ye),this.hitDetectionInstructions.push(ye);for(var h=0;h<a;++h){var l=i[h],p=this.coordinates.length,c=this.appendFlatCoordinates(t,e,l,o,!0,!s),u=[ve.MOVE_TO_LINE_TO,p,c];this.instructions.push(u),this.hitDetectionInstructions.push(u),s&&(this.instructions.push(fe),this.hitDetectionInstructions.push(fe)),e=l}return n&&(this.instructions.push(_e),this.hitDetectionInstructions.push(_e)),s&&(this.instructions.push(ge),this.hitDetectionInstructions.push(ge)),e},e.prototype.drawCircle=function(t,e){var i=this.state,o=i.fillStyle,r=i.strokeStyle;if(void 0!==o||void 0!==r){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([ve.SET_FILL_STYLE,(0,Le.XC)(wt.bL)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([ve.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var n=t.getFlatCoordinates(),s=t.getStride(),a=this.coordinates.length;this.appendFlatCoordinates(n,0,n.length,s,!1,!1);var h=[ve.CIRCLE,a];this.instructions.push(ye,h),this.hitDetectionInstructions.push(ye,h),this.hitDetectionInstructions.push(_e),void 0!==i.fillStyle&&this.instructions.push(_e),void 0!==i.strokeStyle&&(this.instructions.push(ge),this.hitDetectionInstructions.push(ge)),this.endGeometry(t,e)}},e.prototype.drawPolygon=function(t,e){var i=this.state,o=i.fillStyle,r=i.strokeStyle;if(void 0!==o||void 0!==r){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([ve.SET_FILL_STYLE,(0,Le.XC)(wt.bL)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([ve.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var n=t.getEnds(),s=t.getOrientedFlatCoordinates(),a=t.getStride();this.drawFlatCoordinatess_(s,0,n,a),this.endGeometry(t,e)}},e.prototype.drawMultiPolygon=function(t,e){var i=this.state,o=i.fillStyle,r=i.strokeStyle;if(void 0!==o||void 0!==r){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([ve.SET_FILL_STYLE,(0,Le.XC)(wt.bL)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([ve.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var n=t.getEndss(),s=t.getOrientedFlatCoordinates(),a=t.getStride(),h=0,l=0,p=n.length;l<p;++l)h=this.drawFlatCoordinatess_(s,h,n[l],a);this.endGeometry(t,e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(0!==t)for(var e=this.coordinates,i=0,o=e.length;i<o;++i)e[i]=(0,Ie.uZ)(e[i],t)},e.prototype.setFillStrokeStyles_=function(t){var e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill,t),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)},e}(xe);function be(t,e,i,o,r){var n,s,a,h,l,p,c,u,d,_=i,g=i,y=0,f=0,v=i;for(n=i;n<o;n+=r){var m=e[n],S=e[n+1];void 0!==h&&(u=m-h,d=S-l,a=Math.sqrt(u*u+d*d),void 0!==p&&(f+=s,Math.acos((p*u+c*d)/(s*a))>t&&(f>y&&(y=f,_=v,g=n),f=0,v=n-r)),s=a,p=u,c=d),h=m,l=S}return(f+=a)>y?[v,n]:[_,g]}var Oe=i(378288),Ze={Circle:we,Default:xe,Image:Re,LineString:Ce,Polygon:we,Text:function(t){function e(e,i,o,r,n,s){t.call(this,e,i,o,r,n,s),this.declutterGroup_,this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.widths_={},wt.GK.prune()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawText=function(t,e){var i=this.textFillState_,o=this.textStrokeState_,r=this.textState_;if(""!==this.text_&&r&&(i||o)){var n,s,a=this.coordinates.length,h=t.getType(),l=null,p=2,c=2;if(r.placement===Oe.Z.LINE){if(!(0,pt.kK)(this.getBufferedMaxExtent(),t.getExtent()))return;var u;if(l=t.getFlatCoordinates(),c=t.getStride(),h==Ot.Z.LINE_STRING)u=[l.length];else if(h==Ot.Z.MULTI_LINE_STRING)u=t.getEnds();else if(h==Ot.Z.POLYGON)u=t.getEnds().slice(0,1);else if(h==Ot.Z.MULTI_POLYGON){var d=t.getEndss();for(u=[],n=0,s=d.length;n<s;++n)u.push(d[n][0])}this.beginGeometry(t,e);for(var _,g=r.textAlign,y=0,f=0,v=u.length;f<v;++f){if(null==g){var m=be(r.maxAngle,l,y,u[f],c);y=m[0],_=m[1]}else _=u[f];for(n=y;n<_;n+=c)this.coordinates.push(l[n],l[n+1]);p=this.coordinates.length,y=u[f],this.drawChars_(a,p,this.declutterGroup_),a=p}this.endGeometry(t,e)}else{var S=this.getImage(this.text_,this.textKey_,this.fillKey_,this.strokeKey_),T=S.width/this.pixelRatio;switch(h){case Ot.Z.POINT:case Ot.Z.MULTI_POINT:p=(l=t.getFlatCoordinates()).length;break;case Ot.Z.LINE_STRING:l=t.getFlatMidpoint();break;case Ot.Z.CIRCLE:l=t.getCenter();break;case Ot.Z.MULTI_LINE_STRING:p=(l=t.getFlatMidpoints()).length;break;case Ot.Z.POLYGON:if(l=t.getFlatInteriorPoint(),!r.overflow&&l[2]/this.resolution<T)return;c=3;break;case Ot.Z.MULTI_POLYGON:var E=t.getFlatInteriorPoints();for(l=[],n=0,s=E.length;n<s;n+=3)(r.overflow||E[n+2]/this.resolution>=T)&&l.push(E[n],E[n+1]);if(0==(p=l.length))return}p=this.appendFlatCoordinates(l,0,p,c,!1,!1),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&(this.updateFillStyle(this.state,this.createFill,t),this.hitDetectionInstructions.push(this.createFill(this.state,t))),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e),this.drawTextImage_(S,a,p),this.endGeometry(t,e)}}},e.prototype.getImage=function(t,e,i,o){var r,n=o+e+t+i+this.pixelRatio;if(!wt.GK.containsKey(n)){var s=o?this.strokeStates[o]||this.textStrokeState_:null,h=i?this.fillStates[i]||this.textFillState_:null,l=this.textStates[e]||this.textState_,p=this.pixelRatio,c=l.scale*p,u=Se[l.textAlign||wt.PH],d=o&&s.lineWidth?s.lineWidth:0,_=t.split("\n"),g=_.length,y=[],f=function(t,e,i){for(var o=e.length,r=0,n=0;n<o;++n){var s=(0,wt.Ux)(t,e[n]);r=Math.max(r,s),i.push(s)}return r}(l.font,_,y),v=(0,wt.fk)(l.font),m=v*g,S=f+d,T=(0,lt.E4)(Math.ceil(S*c),Math.ceil((m+d)*c));r=T.canvas,wt.GK.set(n,r),1!=c&&T.scale(c,c),T.font=l.font,o&&(T.strokeStyle=s.strokeStyle,T.lineWidth=d,T.lineCap=s.lineCap,T.lineJoin=s.lineJoin,T.miterLimit=s.miterLimit,a.XQ&&s.lineDash.length&&(T.setLineDash(s.lineDash),T.lineDashOffset=s.lineDashOffset)),i&&(T.fillStyle=h.fillStyle),T.textBaseline="middle",T.textAlign="center";var E,x=.5-u,R=u*r.width/c+x*d;if(o)for(E=0;E<g;++E)T.strokeText(_[E],R+x*y[E],.5*(d+v)+E*v);if(i)for(E=0;E<g;++E)T.fillText(_[E],R+x*y[E],.5*(d+v)+E*v)}return wt.GK.get(n)},e.prototype.drawTextImage_=function(t,e,i){var o=this.textState_,r=this.textStrokeState_,n=this.pixelRatio,s=Se[o.textAlign||wt.PH],a=Se[o.textBaseline],h=r&&r.lineWidth?r.lineWidth:0,l=s*t.width/n+2*(.5-s)*h,p=a*t.height/n+2*(.5-a)*h;this.instructions.push([ve.DRAW_IMAGE,e,i,t,(l-this.textOffsetX_)*n,(p-this.textOffsetY_)*n,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1,t.width,o.padding==wt.oB?wt.oB:o.padding.map((function(t){return t*n})),!!o.backgroundFill,!!o.backgroundStroke]),this.hitDetectionInstructions.push([ve.DRAW_IMAGE,e,i,t,(l-this.textOffsetX_)*n,(p-this.textOffsetY_)*n,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1/n,t.width,o.padding,!!o.backgroundFill,!!o.backgroundStroke])},e.prototype.drawChars_=function(t,e,i){var o=this.textStrokeState_,r=this.textState_,n=this.textFillState_,s=this.strokeKey_;o&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:o.strokeStyle,lineCap:o.lineCap,lineDashOffset:o.lineDashOffset,lineWidth:o.lineWidth,lineJoin:o.lineJoin,miterLimit:o.miterLimit,lineDash:o.lineDash}));var a=this.textKey_;this.textKey_ in this.textStates||(this.textStates[this.textKey_]={font:r.font,textAlign:r.textAlign||wt.PH,scale:r.scale});var h=this.fillKey_;n&&(h in this.fillStates||(this.fillStates[h]={fillStyle:n.fillStyle}));var l=this.pixelRatio,p=Se[r.textBaseline],c=this.textOffsetY_*l,u=this.text_,d=r.font,_=r.scale,g=o?o.lineWidth*_/2:0,y=this.widths_[d];y||(this.widths_[d]=y={}),this.instructions.push([ve.DRAW_CHARS,t,e,p,i,r.overflow,h,r.maxAngle,function(t){var e=y[t];return e||(e=y[t]=(0,wt.Ux)(d,t)),e*_*l},c,s,g*l,u,a,1]),this.hitDetectionInstructions.push([ve.DRAW_CHARS,t,e,p,i,r.overflow,h,r.maxAngle,function(t){var e=y[t];return e||(e=y[t]=(0,wt.Ux)(d,t)),e*_},c,s,g,u,a,1/l])},e.prototype.setTextStyle=function(t,e){var i,r,n;if(t){this.declutterGroup_=e;var s=t.getFill();s?((r=this.textFillState_)||(r=this.textFillState_={}),r.fillStyle=(0,bt.y)(s.getColor()||wt.bL)):r=this.textFillState_=null;var a=t.getStroke();if(a){(n=this.textStrokeState_)||(n=this.textStrokeState_={});var h=a.getLineDash(),l=a.getLineDashOffset(),p=a.getWidth(),c=a.getMiterLimit();n.lineCap=a.getLineCap()||wt.mb,n.lineDash=h?h.slice():wt.X9,n.lineDashOffset=void 0===l?wt.He:l,n.lineJoin=a.getLineJoin()||wt.rc,n.lineWidth=void 0===p?wt.yC:p,n.miterLimit=void 0===c?wt.V4:c,n.strokeStyle=(0,bt.y)(a.getColor()||wt.Tx)}else n=this.textStrokeState_=null;i=this.textState_;var u=t.getFont()||wt.Df;(0,wt.Uh)(u);var d=t.getScale();i.overflow=t.getOverflow(),i.font=u,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.textBaseline=t.getTextBaseline()||wt.ru,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||wt.oB,i.scale=void 0===d?1:d;var _=t.getOffsetX(),g=t.getOffsetY(),y=t.getRotateWithView(),f=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===_?0:_,this.textOffsetY_=void 0===g?0:g,this.textRotateWithView_=void 0!==y&&y,this.textRotation_=void 0===f?0:f,this.strokeKey_=n?("string"==typeof n.strokeStyle?n.strokeStyle:(0,o.sq)(n.strokeStyle))+n.lineCap+n.lineDashOffset+"|"+n.lineWidth+n.lineJoin+n.miterLimit+"["+n.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?"),this.fillKey_=r?"string"==typeof r.fillStyle?r.fillStyle:"|"+(0,o.sq)(r.fillStyle):""}else this.text_=""},e}(xe)},ke=function(t){function e(e,i,o,r,n,s,a){t.call(this),this.declutterTree_=s,this.declutterGroup_=null,this.tolerance_=e,this.maxExtent_=i,this.overlaps_=n,this.pixelRatio_=r,this.resolution_=o,this.renderBuffer_=a,this.replaysByZIndex_={},this.hitDetectionContext_=(0,lt.E4)(1,1),this.hitDetectionTransform_=(0,_t.Ue)()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addDeclutter=function(t){var e=null;return this.declutterTree_&&(t?(e=this.declutterGroup_)[4]++:(e=this.declutterGroup_=(0,pt.lJ)()).push(1)),e},e.prototype.clip=function(t,e){var i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()},e.prototype.hasReplays=function(t){for(var e in this.replaysByZIndex_)for(var i=this.replaysByZIndex_[e],o=0,r=t.length;o<r;++o)if(t[o]in i)return!0;return!1},e.prototype.finish=function(){for(var t in this.replaysByZIndex_){var e=this.replaysByZIndex_[t];for(var i in e)e[i].finish()}},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,o,r,n,s){var a,h=2*(o=Math.round(o))+1,l=(0,_t.qC)(this.hitDetectionTransform_,o+.5,o+.5,1/e,-1/e,-i,-t[0],-t[1]),p=this.hitDetectionContext_;p.canvas.width!==h||p.canvas.height!==h?(p.canvas.width=h,p.canvas.height=h):p.clearRect(0,0,h,h),void 0!==this.renderBuffer_&&(a=(0,pt.lJ)(),(0,pt.Wj)(a,t),(0,pt.f3)(a,e*(this.renderBuffer_+o),a));var c,u,d=function(t){if(void 0!==Ae[t])return Ae[t];for(var e=2*t+1,i=new Array(e),o=0;o<e;o++)i[o]=new Array(e);for(var r=t,n=0,s=0;r>=n;)Me(i,t+r,t+n),Me(i,t+n,t+r),Me(i,t-n,t+r),Me(i,t-r,t+n),Me(i,t-r,t-n),Me(i,t-n,t-r),Me(i,t+n,t-r),Me(i,t+r,t-n),2*((s+=1+2*++n)-r)+1>0&&(s+=1-2*(r-=1));return Ae[t]=i,i}(o);function _(t){for(var e=p.getImageData(0,0,h,h).data,i=0;i<h;i++)for(var o=0;o<h;o++)if(d[i][o]&&e[4*(o*h+i)+3]>0){var r=void 0;return(!c||u!=re&&u!=ae||-1!==c.indexOf(t))&&(r=n(t)),r||void p.clearRect(0,0,h,h)}}this.declutterTree_&&(c=this.declutterTree_.all().map((function(t){return t.value})));var g,y,f,v,m,S=Object.keys(this.replaysByZIndex_).map(Number);for(S.sort(G.kK),g=S.length-1;g>=0;--g){var T=S[g].toString();for(f=this.replaysByZIndex_[T],y=me.length-1;y>=0;--y)if(void 0!==(v=f[u=me[y]]))if(!s||u!=re&&u!=ae){if(m=v.replayHitDetection(p,l,i,r,_,a))return m}else{var E=s[T];E?E.push(v,l.slice(0)):s[T]=[v,l.slice(0)]}}},e.prototype.getClipCoords=function(t){var e=this.maxExtent_,i=e[0],o=e[1],r=e[2],n=e[3],s=[i,o,i,n,r,n,r,o];return(0,kt.vT)(s,0,8,2,t,s),s},e.prototype.getReplay=function(t,e){var i=void 0!==t?t.toString():"0",o=this.replaysByZIndex_[i];void 0===o&&(o={},this.replaysByZIndex_[i]=o);var r=o[e];return void 0===r&&(r=new(0,Ze[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_,this.overlaps_,this.declutterTree_),o[e]=r),r},e.prototype.getReplays=function(){return this.replaysByZIndex_},e.prototype.isEmpty=function(){return(0,ot.xb)(this.replaysByZIndex_)},e.prototype.replay=function(t,e,i,o,r,n,s){var a=Object.keys(this.replaysByZIndex_).map(Number);a.sort(G.kK),t.save(),this.clip(t,e);var h,l,p,c,u,d,_=n||me;for(h=0,l=a.length;h<l;++h){var g=a[h].toString();for(u=this.replaysByZIndex_[g],p=0,c=_.length;p<c;++p){var y=_[p];if(void 0!==(d=u[y]))if(!s||y!=re&&y!=ae)d.replay(t,e,i,o,r);else{var f=s[g];f?f.push(d,e.slice(0)):s[g]=[d,e.slice(0)]}}}t.restore()},e}(ee),Ae={0:[[!0]]};function Me(t,e,i){var o,r=Math.floor(t.length/2);if(e>=r)for(o=r;o<e;o++)t[o][i]=!0;else if(e<r)for(o=e+1;o<r;o++)t[o][i]=!0}const De=ke;var Pe={Point:function(t,e,i,o){var r=i.getImage();if(r){if(r.getImageState()!=Tt.Z.LOADED)return;var n=t.getReplay(i.getZIndex(),re);n.setImageStyle(r,t.addDeclutter(!1)),n.drawPoint(e,o)}var s=i.getText();if(s){var a=t.getReplay(i.getZIndex(),ae);a.setTextStyle(s,t.addDeclutter(!!r)),a.drawText(e,o)}},LineString:function(t,e,i,o){var r=i.getStroke();if(r){var n=t.getReplay(i.getZIndex(),ne);n.setFillStrokeStyle(null,r),n.drawLineString(e,o)}var s=i.getText();if(s){var a=t.getReplay(i.getZIndex(),ae);a.setTextStyle(s,t.addDeclutter(!1)),a.drawText(e,o)}},Polygon:function(t,e,i,o){var r=i.getFill(),n=i.getStroke();if(r||n){var s=t.getReplay(i.getZIndex(),se);s.setFillStrokeStyle(r,n),s.drawPolygon(e,o)}var a=i.getText();if(a){var h=t.getReplay(i.getZIndex(),ae);h.setTextStyle(a,t.addDeclutter(!1)),h.drawText(e,o)}},MultiPoint:function(t,e,i,o){var r=i.getImage();if(r){if(r.getImageState()!=Tt.Z.LOADED)return;var n=t.getReplay(i.getZIndex(),re);n.setImageStyle(r,t.addDeclutter(!1)),n.drawMultiPoint(e,o)}var s=i.getText();if(s){var a=t.getReplay(i.getZIndex(),ae);a.setTextStyle(s,t.addDeclutter(!!r)),a.drawText(e,o)}},MultiLineString:function(t,e,i,o){var r=i.getStroke();if(r){var n=t.getReplay(i.getZIndex(),ne);n.setFillStrokeStyle(null,r),n.drawMultiLineString(e,o)}var s=i.getText();if(s){var a=t.getReplay(i.getZIndex(),ae);a.setTextStyle(s,t.addDeclutter(!1)),a.drawText(e,o)}},MultiPolygon:function(t,e,i,o){var r=i.getFill(),n=i.getStroke();if(n||r){var s=t.getReplay(i.getZIndex(),se);s.setFillStrokeStyle(r,n),s.drawMultiPolygon(e,o)}var a=i.getText();if(a){var h=t.getReplay(i.getZIndex(),ae);h.setTextStyle(a,t.addDeclutter(!1)),h.drawText(e,o)}},GeometryCollection:function(t,e,i,o){var r,n,s=e.getGeometriesArray();for(r=0,n=s.length;r<n;++r)(0,Pe[s[r].getType()])(t,s[r],i,o)},Circle:function(t,e,i,o){var r=i.getFill(),n=i.getStroke();if(r||n){var s=t.getReplay(i.getZIndex(),ie);s.setFillStrokeStyle(r,n),s.drawCircle(e,o)}var a=i.getText();if(a){var h=t.getReplay(i.getZIndex(),ae);h.setTextStyle(a,t.addDeclutter(!1)),h.drawText(e,o)}}};function Fe(t,e){return parseInt((0,o.sq)(t),10)-parseInt((0,o.sq)(e),10)}function Ne(t,e){var i=Ge(t,e);return i*i}function Ge(t,e){return.5*t/e}function Ke(t,e,i,o,r,n){var s=!1,a=i.getImage();if(a){var h=a.getImageState();h==Tt.Z.LOADED||h==Tt.Z.ERROR?a.unlistenImageChange(r,n):(h==Tt.Z.IDLE&&a.load(),h=a.getImageState(),a.listenImageChange(r,n),s=!0)}return function(t,e,i,o){var r=i.getGeometryFunction()(e);if(r){var n=r.getSimplifiedGeometry(o);i.getRenderer()?We(t,n,i,e):(0,Pe[n.getType()])(t,n,i,e)}}(t,e,i,o),s}function We(t,e,i,o){if(e.getType()!=Ot.Z.GEOMETRY_COLLECTION)t.getReplay(i.getZIndex(),oe).drawCustom(e,o,i.getRenderer());else for(var r=e.getGeometries(),n=0,s=r.length;n<s;++n)We(t,r[n],i,o)}var Ye=function(t){function e(e){t.call(this,e),this.declutterTree_=e.getDeclutter()?$t()(9,void 0):null,this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,pt.lJ)(),this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.context=(0,lt.E4)(),(0,p.oL)(wt.GK,et.Z.CLEAR,this.handleFontsChanged_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){(0,p.Ev)(wt.GK,et.Z.CLEAR,this.handleFontsChanged_,this),t.prototype.disposeInternal.call(this)},e.prototype.compose=function(t,e,i){var o=e.extent,r=e.pixelRatio,n=i.managed?e.skippedFeatureUids:{},s=e.viewState,a=s.projection,h=s.rotation,l=a.getExtent(),p=this.getLayer().getSource(),c=this.getTransform(e,0),u=i.extent,d=void 0!==u;d&&this.clip(t,e,u);var _=this.replayGroup_;if(_&&!_.isEmpty()){this.declutterTree_&&this.declutterTree_.clear();var g,y=this.getLayer(),f=0,v=0,m=1!==i.opacity,S=y.hasListener(J.Z.RENDER);if(m||S){var T=t.canvas.width,E=t.canvas.height;if(h){var x=Math.round(Math.sqrt(T*T+E*E));f=(x-T)/2,v=(x-E)/2,T=E=x}this.context.canvas.width=T,this.context.canvas.height=E,g=this.context}else g=t;var R=g.globalAlpha;m||(g.globalAlpha=i.opacity),g!=t&&g.translate(f,v);var C=e.viewHints,L=!(C[ht.Z.ANIMATING]||C[ht.Z.INTERACTING]),I=e.size[0]*r,w=e.size[1]*r;if((0,wt.qs)(g,-h,I/2,w/2),_.replay(g,c,h,n,L),p.getWrapX()&&a.canWrapX()&&!(0,pt.r4)(l,o)){for(var b,O=o[0],Z=(0,pt.dz)(l),k=0;O<l[0];)b=Z*--k,c=this.getTransform(e,b),_.replay(g,c,h,n,L),O+=Z;for(k=0,O=o[2];O>l[2];)b=Z*++k,c=this.getTransform(e,b),_.replay(g,c,h,n,L),O-=Z}if((0,wt.qs)(g,h,I/2,w/2),S&&this.dispatchRenderEvent(g,e,c),g!=t){if(m){var A=t.globalAlpha;t.globalAlpha=i.opacity,t.drawImage(g.canvas,-f,-v),t.globalAlpha=A}else t.drawImage(g.canvas,-f,-v);g.translate(-f,-v)}m||(g.globalAlpha=R)}d&&t.restore()},e.prototype.composeFrame=function(t,e,i){var o=this.getTransform(t,0);this.preCompose(i,t,o),this.compose(i,t,e),this.postCompose(i,t,e,o)},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,n){if(this.replayGroup_){var s=e.viewState.resolution,a=e.viewState.rotation,h=this.getLayer(),l={};return this.replayGroup_.forEachFeatureAtCoordinate(t,s,a,i,{},(function(t){var e=(0,o.sq)(t);if(!(e in l))return l[e]=!0,r.call(n,t,h)}),null)}},e.prototype.handleFontsChanged_=function(t){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t,e){var i=this.getLayer(),o=i.getSource(),r=t.viewHints[ht.Z.ANIMATING],n=t.viewHints[ht.Z.INTERACTING],s=i.getUpdateWhileAnimating(),a=i.getUpdateWhileInteracting();if(!this.dirty_&&!s&&r||!a&&n)return!0;var h=t.extent,l=t.viewState,p=l.projection,c=l.resolution,u=t.pixelRatio,d=i.getRevision(),_=i.getRenderBuffer(),g=i.getRenderOrder();void 0===g&&(g=Fe);var y=(0,pt.f3)(h,_*c),f=l.projection.getExtent();if(o.getWrapX()&&l.projection.canWrapX()&&!(0,pt.r4)(f,t.extent)){var v=(0,pt.dz)(f),m=Math.max((0,pt.dz)(y)/2,v);y[0]=f[0]-m,y[2]=f[2]+m}if(!this.dirty_&&this.renderedResolution_==c&&this.renderedRevision_==d&&this.renderedRenderOrder_==g&&(0,pt.r4)(this.renderedExtent_,y))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var S=new De(Ge(c,u),y,c,u,o.getOverlaps(),this.declutterTree_,i.getRenderBuffer());o.loadFeatures(y,c,p);var T=function(t){var e,o=t.getStyleFunction()||i.getStyleFunction();if(o&&(e=o(t,c)),e){var r=this.renderFeature(t,c,u,e,S);this.dirty_=this.dirty_||r}}.bind(this);if(g){var E=[];o.forEachFeatureInExtent(y,(function(t){E.push(t)})),E.sort(g);for(var x=0,R=E.length;x<R;++x)T(E[x])}else o.forEachFeatureInExtent(y,T);return S.finish(),this.renderedResolution_=c,this.renderedRevision_=d,this.renderedRenderOrder_=g,this.renderedExtent_=y,this.replayGroup_=S,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,i,o,r){if(!o)return!1;var n=!1;if(Array.isArray(o))for(var s=0,a=o.length;s<a;++s)n=Ke(r,t,o[s],Ne(e,i),this.handleStyleImageChange_,this)||n;else n=Ke(r,t,o,Ne(e,i),this.handleStyleImageChange_,this);return n},e}(Vt);Ye.handles=function(t){return t.getType()===xt.Z.VECTOR},Ye.create=function(t,e){return new Ye(e)};const He=Ye;var ze=i(878181),Ve=i(218672),Ue=i(440868),Be={image:[se,ie,ne,re,ae],hybrid:[se,ne]},Xe={image:[oe],hybrid:[re,ae,oe],vector:me},je=function(t){function e(e){t.call(this,e,!0),this.declutterTree_=e.getDeclutter()?$t()(9,void 0):null,this.dirty_=!1,this.renderedLayerRevision_,this.tmpTransform_=(0,_t.Ue)();var i=e.getRenderMode();this.zDirection=i===ze.Z.VECTOR?1:0,i!==ze.Z.VECTOR&&(this.context=(0,lt.E4)()),(0,p.oL)(wt.GK,et.Z.CLEAR,this.handleFontsChanged_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){(0,p.Ev)(wt.GK,et.Z.CLEAR,this.handleFontsChanged_,this),t.prototype.disposeInternal.call(this)},e.prototype.getTile=function(e,i,o,r,n){var s=t.prototype.getTile.call(this,e,i,o,r,n);return s.getState()===tt.Z.LOADED&&(this.createReplayGroup_(s,r,n),this.context&&this.renderTileImage_(s,r,n)),s},e.prototype.getTileImage=function(t){var e=this.getLayer();return t.getImage(e)},e.prototype.prepareFrame=function(e,i){var o=this.getLayer().getRevision();return this.renderedLayerRevision_!=o&&(this.renderedTiles.length=0),this.renderedLayerRevision_=o,t.prototype.prepareFrame.call(this,e,i)},e.prototype.createReplayGroup_=function(t,e,i){var o=this,r=this.getLayer(),n=r.getRevision(),s=r.getRenderOrder()||null,a=t.getReplayState(r);if(a.dirty||a.renderedRevision!=n||a.renderedRenderOrder!=s){for(var h=r.getSource(),l=h.getTileGrid(),p=h.getTileGridForProjection(i).getResolution(t.tileCoord[0]),c=t.extent,u=function(n,u){var d=t.getTile(t.tileKeys[n]);if(d.getState()==tt.Z.LOADED){var _=d.tileCoord,g=l.getTileCoordExtent(_),y=(0,pt.Ed)(c,g),f=(0,pt.fS)(g,y)?null:(0,pt.f3)(y,r.getRenderBuffer()*p,o.tmpExtent),v=d.getProjection(),m=!1;(0,Ve.OP)(i,v)||(m=!0,d.setProjection(i)),a.dirty=!1;var S=new De(0,y,p,e,h.getOverlaps(),o.declutterTree_,r.getRenderBuffer()),T=Ne(p,e),E=function(t){var e,i=t.getStyleFunction()||r.getStyleFunction();if(i&&(e=i(t,p)),e){var o=this.renderFeature(t,T,e,S);this.dirty_=this.dirty_||o,a.dirty=a.dirty||o}},x=d.getFeatures();s&&s!==a.renderedRenderOrder&&x.sort(s);for(var R=0,C=x.length;R<C;++R){var L=x[R];m&&(v.getUnits()==Ue.default.TILE_PIXELS&&(v.setWorldExtent(g),v.setExtent(d.getExtent())),L.getGeometry().transform(v,i)),f&&!(0,pt.kK)(f,L.getGeometry().getExtent())||E.call(o,L)}S.finish(),d.setReplayGroup(r,t.tileCoord.toString(),S)}},d=0,_=t.tileKeys.length;d<_;++d)u(d);a.renderedRevision=n,a.renderedRenderOrder=s}},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,n){var s=e.viewState.resolution,a=e.viewState.rotation;i=null==i?0:i;var h,l,p,c,u=this.getLayer(),d={},_=this.renderedTiles;for(p=0,c=_.length;p<c;++p){var g=_[p];if(h=(0,pt.f3)(g.extent,i*s,h),(0,pt.b8)(h,t))for(var y=0,f=g.tileKeys.length;y<f;++y){var v=g.getTile(g.tileKeys[y]);if(v.getState()==tt.Z.LOADED){var m=v.getReplayGroup(u,g.tileCoord.toString());l=l||m.forEachFeatureAtCoordinate(t,s,a,i,{},(function(t){var e=(0,o.sq)(t);if(!(e in d))return d[e]=!0,r.call(n,t,u)}),null)}}}return l},e.prototype.getReplayTransform_=function(t,e){var i=this.getLayer().getSource().getTileGrid(),o=t.tileCoord,r=i.getResolution(o[0]),n=e.viewState,s=e.pixelRatio,a=n.resolution/s,h=i.getTileCoordExtent(o,this.tmpExtent),l=n.center,p=(0,pt.rL)(h),c=e.size,u=Math.round(s*c[0]/2),d=Math.round(s*c[1]/2);return(0,_t.qC)(this.tmpTransform_,u,d,r/a,r/a,n.rotation,(p[0]-l[0])/r,(l[1]-p[1])/r)},e.prototype.handleFontsChanged_=function(t){var e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.postCompose=function(e,i,o){var r=this.getLayer(),n=r.getRenderMode();if(n!=ze.Z.IMAGE){var s,a,h=r.getDeclutter()?{}:null,l=r.getSource(),p=Xe[n],c=i.pixelRatio,u=i.viewState.rotation,d=i.size;u&&(s=Math.round(c*d[0]/2),a=Math.round(c*d[1]/2),(0,wt.qs)(e,-u,s,a)),h&&this.declutterTree_.clear();for(var _=i.viewHints,g=!(_[ht.Z.ANIMATING]||_[ht.Z.INTERACTING]),y=this.renderedTiles,f=l.getTileGridForProjection(i.viewState.projection),v=[],m=[],S=y.length-1;S>=0;--S){var T=y[S];if(T.getState()!=tt.Z.ABORT)for(var E=T.tileCoord,x=f.getTileCoordExtent(E,this.tmpExtent)[0]-T.extent[0],R=void 0,C=0,L=T.tileKeys.length;C<L;++C){var I=T.getTile(T.tileKeys[C]);if(I.getState()==tt.Z.LOADED){var w=I.getReplayGroup(r,E.toString());if(w&&w.hasReplays(p)){R||(R=this.getTransform(i,x));var b=I.tileCoord[0],O=w.getClipCoords(R);e.save(),e.globalAlpha=o.opacity;for(var Z=0,k=v.length;Z<k;++Z){var A=v[Z];b<m[Z]&&(e.beginPath(),e.moveTo(O[0],O[1]),e.lineTo(O[2],O[3]),e.lineTo(O[4],O[5]),e.lineTo(O[6],O[7]),e.moveTo(A[6],A[7]),e.lineTo(A[4],A[5]),e.lineTo(A[2],A[3]),e.lineTo(A[0],A[1]),e.clip())}w.replay(e,R,u,{},g,p,h),e.restore(),v.push(O),m.push(b)}}}}h&&function(t,e,i,o){for(var r=Object.keys(t).map(Number).sort(G.kK),n={},s=0,a=r.length;s<a;++s)for(var h=t[r[s].toString()],l=0,p=h.length;l<p;){var c=h[l++],u=h[l++];c.replay(e,u,i,n,o)}}(h,e,u,g),u&&(0,wt.qs)(e,u,s,a)}t.prototype.postCompose.call(this,e,i,o)},e.prototype.renderFeature=function(t,e,i,o){if(!i)return!1;var r=!1;if(Array.isArray(i))for(var n=0,s=i.length;n<s;++n)r=Ke(o,t,i[n],e,this.handleStyleImageChange_,this)||r;else r=Ke(o,t,i,e,this.handleStyleImageChange_,this);return r},e.prototype.renderTileImage_=function(t,e,i){var o=this.getLayer(),r=t.getReplayState(o),n=o.getRevision(),s=Be[o.getRenderMode()];if(s&&r.renderedTileRevision!==n){r.renderedTileRevision=n;var a=t.wrappedTileCoord,h=a[0],l=o.getSource(),p=l.getTileGridForProjection(i),c=p.getResolution(h),u=t.getContext(o),d=l.getTilePixelSize(h,e,i);u.canvas.width=d[0],u.canvas.height=d[1];for(var _=p.getTileCoordExtent(a,this.tmpExtent),g=0,y=t.tileKeys.length;g<y;++g){var f=t.getTile(t.tileKeys[g]);if(f.getState()==tt.Z.LOADED){var v=e/c,m=(0,_t.mc)(this.tmpTransform_);(0,_t.bA)(m,v,-v),(0,_t.Iu)(m,-_[0],-_[3]),f.getReplayGroup(o,t.tileCoord.toString()).replay(u,m,0,{},!0,s)}}}},e}(Jt);je.handles=function(t){return t.getType()===xt.Z.VECTOR_TILE},je.create=function(t,e){return new je(e)};const qe=je,Je=function(t){function e(e){(e=(0,ot.f0)({},e)).controls||(e.controls=(0,ft.c)()),e.interactions||(e.interactions=(0,vt.ce)()),t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createRenderer=function(){var t=new Ht(this);return t.registerLayerRenderers([Xt,Jt,He,qe]),t},e}(gt)},540188:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});const o={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"}},739850:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});const o={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"}},276773:(t,e,i)=>{"use strict";i.d(e,{ZP:()=>R});var o=i(810508),r=i(949179),n=i(864011),s=i(921882);function a(t){return t}var h=i(558493),l=i(179682),p=i(938642),c=i(706908),u=i(86340),d=i(438906),_=i(690728),g=i(286320),y=i(421915),f=i(28795),v=i(640353),m=i(913580),S=i(218672),T=i(440868);function E(t,e){setTimeout((function(){t(e)}),0)}function x(t){return!(t.sourceCenter&&t.targetCenter&&!(0,_.fS)(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}const R=function(t){function e(e){t.call(this);var i=(0,m.f0)({},e);this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.updateAnimations_=this.updateAnimations_.bind(this),this.projection_=(0,S.UQ)(i.projection,"EPSG:3857"),this.applyOptions_(i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.applyOptions_=function(t){var e={};e[u.Z.CENTER]=void 0!==t.center?t.center:null;var i=function(t){var e,i,r,n=void 0!==t.minZoom?t.minZoom:0,a=void 0!==t.maxZoom?t.maxZoom:28,h=void 0!==t.zoomFactor?t.zoomFactor:2;if(void 0!==t.resolutions){var p=t.resolutions;i=p[n],r=void 0!==p[a]?p[a]:p[p.length-1],e=function(t){return function(e,i,o){if(void 0!==e){var r=(0,l.h7)(t,e,o);r=(0,s.uZ)(r+i,0,t.length-1);var n=Math.floor(r);if(r!=n&&n<t.length-1){var a=t[n]/t[n+1];return t[n]/Math.pow(a,r-n)}return t[n]}}}(p)}else{var c=(0,S.UQ)(t.projection,"EPSG:3857"),u=c.getExtent(),d=(u?Math.max((0,y.dz)(u),(0,y.Cr)(u)):360*T.METERS_PER_UNIT[T.default.DEGREES]/c.getMetersPerUnit())/o.S/Math.pow(2,0),_=d/Math.pow(2,28);void 0!==(i=t.maxResolution)?n=0:i=d/Math.pow(h,n),void 0===(r=t.minResolution)&&(r=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(h,a):d/Math.pow(h,a):_),a=n+Math.floor(Math.log(i/r)/Math.log(h)),r=i/Math.pow(h,a-n),e=function(t,e,i){return function(o,r,n){if(void 0!==o){var s=-n/2+.5,a=Math.floor(Math.log(e/o)/Math.log(t)+s),h=Math.max(a+r,0);return void 0!==i&&(h=Math.min(h,i)),e/Math.pow(t,h)}}}(h,i,a-n)}return{constraint:e,maxResolution:i,minResolution:r,minZoom:n,zoomFactor:h}}(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=i.minZoom;var r=function(t){return void 0!==t.extent?(e=t.extent,function(t){return t?[(0,s.uZ)(t[0],e[0],e[2]),(0,s.uZ)(t[1],e[1],e[3])]:void 0}):a;var e}(t),n=i.constraint,h=function(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?(0,p.Gw)():!1===e?p.YP:"number"==typeof e?(0,p.gE)(e):p.YP}return p.h$}(t);this.constraints_={center:r,resolution:n,rotation:h},void 0!==t.resolution?e[u.Z.RESOLUTION]=t.resolution:void 0!==t.zoom&&(e[u.Z.RESOLUTION]=this.constrainResolution(this.maxResolution_,t.zoom-this.minZoom_),this.resolutions_&&(e[u.Z.RESOLUTION]=(0,s.uZ)(Number(this.getResolution()||e[u.Z.RESOLUTION]),this.minResolution_,this.maxResolution_))),e[u.Z.ROTATION]=void 0!==t.rotation?t.rotation:0,this.setProperties(e),this.options_=t},e.prototype.getUpdatedOptions_=function(t){var e=(0,m.f0)({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenter(),e.rotation=this.getRotation(),(0,m.f0)({},e,t)},e.prototype.animate=function(t){var e,i=arguments,o=arguments.length;if(o>1&&"function"==typeof arguments[o-1]&&(e=arguments[o-1],--o),!this.isDef()){var r=arguments[o-1];return r.center&&this.setCenter(r.center),void 0!==r.zoom&&this.setZoom(r.zoom),void 0!==r.rotation&&this.setRotation(r.rotation),void(e&&E(e,!0))}for(var n=Date.now(),a=this.getCenter().slice(),h=this.getResolution(),l=this.getRotation(),p=[],u=0;u<o;++u){var d=i[u],_={start:n,complete:!1,anchor:d.anchor,duration:void 0!==d.duration?d.duration:1e3,easing:d.easing||g.rd};if(d.center&&(_.sourceCenter=a,_.targetCenter=d.center,a=_.targetCenter),void 0!==d.zoom?(_.sourceResolution=h,_.targetResolution=this.constrainResolution(this.maxResolution_,d.zoom-this.minZoom_,0),h=_.targetResolution):d.resolution&&(_.sourceResolution=h,_.targetResolution=d.resolution,h=_.targetResolution),void 0!==d.rotation){_.sourceRotation=l;var y=(0,s.$W)(d.rotation-l+Math.PI,2*Math.PI)-Math.PI;_.targetRotation=l+y,l=_.targetRotation}_.callback=e,x(_)?_.complete=!0:n+=_.duration,p.push(_)}this.animations_.push(p),this.setHint(c.Z.ANIMATING,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[c.Z.ANIMATING]>0},e.prototype.getInteracting=function(){return this.hints_[c.Z.INTERACTING]>0},e.prototype.cancelAnimations=function(){this.setHint(c.Z.ANIMATING,-this.hints_[c.Z.ANIMATING]);for(var t=0,e=this.animations_.length;t<e;++t){var i=this.animations_[t];i[0].callback&&E(i[0].callback,!1)}this.animations_.length=0},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,i=this.animations_.length-1;i>=0;--i){for(var o=this.animations_[i],r=!0,n=0,a=o.length;n<a;++n){var h=o[n];if(!h.complete){var l=t-h.start,p=h.duration>0?l/h.duration:1;p>=1?(h.complete=!0,p=1):r=!1;var d=h.easing(p);if(h.sourceCenter){var _=h.sourceCenter[0],g=h.sourceCenter[1],y=_+d*(h.targetCenter[0]-_),f=g+d*(h.targetCenter[1]-g);this.set(u.Z.CENTER,[y,f])}if(h.sourceResolution&&h.targetResolution){var v=1===d?h.targetResolution:h.sourceResolution+d*(h.targetResolution-h.sourceResolution);h.anchor&&this.set(u.Z.CENTER,this.calculateCenterZoom(v,h.anchor)),this.set(u.Z.RESOLUTION,v)}if(void 0!==h.sourceRotation&&void 0!==h.targetRotation){var m=1===d?(0,s.$W)(h.targetRotation+Math.PI,2*Math.PI)-Math.PI:h.sourceRotation+d*(h.targetRotation-h.sourceRotation);h.anchor&&this.set(u.Z.CENTER,this.calculateCenterRotate(m,h.anchor)),this.set(u.Z.ROTATION,m)}if(e=!0,!h.complete)break}}if(r){this.animations_[i]=null,this.setHint(c.Z.ANIMATING,-1);var S=o[0].callback;S&&E(S,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_))}},e.prototype.calculateCenterRotate=function(t,e){var i,o=this.getCenter();return void 0!==o&&(i=[o[0]-e[0],o[1]-e[1]],(0,_.U1)(i,t-this.getRotation()),(0,_.IH)(i,e)),i},e.prototype.calculateCenterZoom=function(t,e){var i,o=this.getCenter(),r=this.getResolution();return void 0!==o&&void 0!==r&&(i=[e[0]-t*(e[0]-o[0])/r,e[1]-t*(e[1]-o[1])/r]),i},e.prototype.getSizeFromViewport_=function(){var t=[100,100],e='.ol-viewport[data-view="'+(0,r.sq)(this)+'"]',i=document.querySelector(e);if(i){var o=getComputedStyle(i);t[0]=parseInt(o.width,10),t[1]=parseInt(o.height,10)}return t},e.prototype.constrainCenter=function(t){return this.constraints_.center(t)},e.prototype.constrainResolution=function(t,e,i){var o=e||0,r=i||0;return this.constraints_.resolution(t,o,r)},e.prototype.constrainRotation=function(t,e){var i=e||0;return this.constraints_.rotation(t,i)},e.prototype.getCenter=function(){return this.get(u.Z.CENTER)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){var e=t||this.getSizeFromViewport_(),i=this.getCenter();(0,d.h)(i,1);var o=this.getResolution();(0,d.h)(void 0!==o,2);var r=this.getRotation();return(0,d.h)(void 0!==r,3),(0,y.p8)(i,o,r,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(u.Z.RESOLUTION)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){var i=e||this.getSizeFromViewport_(),o=(0,y.dz)(t)/i[0],r=(0,y.Cr)(t)/i[1];return Math.max(o,r)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,i=this.maxResolution_,o=this.minResolution_,r=Math.log(i/o)/Math.log(e);return function(t){return i/Math.pow(e,t*r)}},e.prototype.getRotation=function(){return this.get(u.Z.ROTATION)},e.prototype.getValueForResolutionFunction=function(t){var e=t||2,i=this.maxResolution_,o=this.minResolution_,r=Math.log(i/o)/Math.log(e);return function(t){return Math.log(i/t)/Math.log(e)/r}},e.prototype.getState=function(t){var e=this.getCenter(),i=this.getProjection(),o=this.getResolution(),r=o/t,n=this.getRotation();return{center:[Math.round(e[0]/r)*r,Math.round(e[1]/r)*r],projection:void 0!==i?i:null,resolution:o,rotation:n,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,i,o=this.minZoom_||0;if(this.resolutions_){var r=(0,l.h7)(this.resolutions_,t,1);o=r,e=this.resolutions_[r],i=r==this.resolutions_.length-1?2:e/this.resolutions_[r+1]}else e=this.maxResolution_,i=this.zoomFactor_;return o+Math.log(e/t)/Math.log(i)},e.prototype.getResolutionForZoom=function(t){return this.constrainResolution(this.maxResolution_,t-this.minZoom_,0)},e.prototype.fit=function(t,e){var i,o=e||{},r=o.size;r||(r=this.getSizeFromViewport_()),(0,d.h)(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)?((0,d.h)(!(0,y.xb)(t),25),i=(0,v.oJ)(t)):t.getType()===f.Z.CIRCLE?(t=t.getExtent(),(i=(0,v.oJ)(t)).rotate(this.getRotation(),(0,y.qg)(t))):i=t;var s,a=void 0!==o.padding?o.padding:[0,0,0,0],h=void 0===o.constrainResolution||o.constrainResolution,l=void 0!==o.nearest&&o.nearest;s=void 0!==o.minResolution?o.minResolution:void 0!==o.maxZoom?this.constrainResolution(this.maxResolution_,o.maxZoom-this.minZoom_,0):0;for(var p=i.getFlatCoordinates(),c=this.getRotation(),u=Math.cos(-c),_=Math.sin(-c),g=1/0,m=1/0,S=-1/0,T=-1/0,x=i.getStride(),R=0,C=p.length;R<C;R+=x){var L=p[R]*u-p[R+1]*_,I=p[R]*_+p[R+1]*u;g=Math.min(g,L),m=Math.min(m,I),S=Math.max(S,L),T=Math.max(T,I)}var w=this.getResolutionForExtent([g,m,S,T],[r[0]-a[1]-a[3],r[1]-a[0]-a[2]]);if(w=isNaN(w)?s:Math.max(w,s),h){var b=this.constrainResolution(w,0,0);!l&&b<w&&(b=this.constrainResolution(b,-1,0)),w=b}_=-_;var O=(g+S)/2,Z=(m+T)/2,k=[(O+=(a[1]-a[3])/2*w)*u-(Z+=(a[0]-a[2])/2*w)*_,Z*u+O*_],A=o.callback?o.callback:n.Zn;void 0!==o.duration?this.animate({resolution:w,center:k,duration:o.duration,easing:o.easing},A):(this.setResolution(w),this.setCenter(k),E(A,!0))},e.prototype.centerOn=function(t,e,i){var o=this.getRotation(),r=Math.cos(-o),n=Math.sin(-o),s=t[0]*r-t[1]*n,a=t[1]*r+t[0]*n,h=this.getResolution(),l=(s+=(e[0]/2-i[0])*h)*r-(a+=(i[1]-e[1]/2)*h)*(n=-n),p=a*r+s*n;this.setCenter([l,p])},e.prototype.isDef=function(){return!!this.getCenter()&&void 0!==this.getResolution()},e.prototype.rotate=function(t,e){if(void 0!==e){var i=this.calculateCenterRotate(t,e);this.setCenter(i)}this.setRotation(t)},e.prototype.setCenter=function(t){this.set(u.Z.CENTER,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.set(u.Z.RESOLUTION,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setRotation=function(t){this.set(u.Z.ROTATION,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e}(h.ZP)},86340:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});const o={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"}},819530:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var o=i(864011),r=i(540188),n=i(558493),s=i(85386),a=i(613002);const h=function(t){function e(e){t.call(this),this.element=e.element?e.element:null,this.target_=null,this.map_=null,this.listenerKeys=[],this.render=e.render?e.render:o.Zn,e.target&&this.setTarget(e.target)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){(0,s.ZF)(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&(0,s.ZF)(this.element);for(var e=0,i=this.listenerKeys.length;e<i;++e)(0,a.bN)(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,this.map_&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==o.Zn&&this.listenerKeys.push((0,a.oL)(t,r.Z.POSTRENDER,this.render,this)),t.render())},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(n.ZP)},99937:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var o=i(613002),r=i(173381),n=i(819530),s=i(267644),a=i(286320);const h=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),target:i.target});var n=void 0!==i.className?i.className:"ol-zoom",a=void 0!==i.delta?i.delta:1,h=void 0!==i.zoomInLabel?i.zoomInLabel:"+",l=void 0!==i.zoomOutLabel?i.zoomOutLabel:"−",p=void 0!==i.zoomInTipLabel?i.zoomInTipLabel:"Zoom in",c=void 0!==i.zoomOutTipLabel?i.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=n+"-in",u.setAttribute("type","button"),u.title=p,u.appendChild("string"==typeof h?document.createTextNode(h):h),(0,o.oL)(u,r.Z.CLICK,this.handleClick_.bind(this,a));var d=document.createElement("button");d.className=n+"-out",d.setAttribute("type","button"),d.title=c,d.appendChild("string"==typeof l?document.createTextNode(l):l),(0,o.oL)(d,r.Z.CLICK,this.handleClick_.bind(this,-a));var _=n+" "+s.XV+" "+s.hg,g=this.element;g.className=_,g.appendChild(u),g.appendChild(d),this.duration_=void 0!==i.duration?i.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var i=e.getResolution();if(i){var o=e.constrainResolution(i,t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:o,duration:this.duration_,easing:a.Vv})):e.setResolution(o)}}},e}(n.Z)},370878:(t,e,i)=>{"use strict";i.d(e,{c:()=>f});var o=i(378426),r=i(179682),n=i(819530),s=i(267644),a=i(85386),h=i(613002),l=i(173381),p=i(677701);function c(t){this.updateElement_(t.frameState)}const u=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),render:i.render||c,target:i.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===i.collapsed||i.collapsed,this.overrideCollapsible_=void 0!==i.collapsible,this.collapsible_=void 0===i.collapsible||i.collapsible,this.collapsible_||(this.collapsed_=!1);var o=void 0!==i.className?i.className:"ol-attribution",r=void 0!==i.tipLabel?i.tipLabel:"Attributions",n=void 0!==i.collapseLabel?i.collapseLabel:"»";"string"==typeof n?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=n):this.collapseLabel_=n;var a=void 0!==i.label?i.label:"i";"string"==typeof a?(this.label_=document.createElement("span"),this.label_.textContent=a):this.label_=a;var p=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,u=document.createElement("button");u.setAttribute("type","button"),u.title=r,u.appendChild(p),(0,h.oL)(u,l.Z.CLICK,this.handleClick_,this);var d=o+" "+s.XV+" "+s.hg+(this.collapsed_&&this.collapsible_?" "+s.hN:"")+(this.collapsible_?"":" ol-uncollapsible"),_=this.element;_.className=d,_.appendChild(this.ulElement_),_.appendChild(u),this.renderedAttributions_=[],this.renderedVisible_=!0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.collectSourceAttributions_=function(t){for(var e={},i=[],o=t.layerStatesArray,r=t.viewState.resolution,n=0,s=o.length;n<s;++n){var a=o[n];if((0,p.l)(a,r)){var h=a.layer.getSource();if(h){var l=h.getAttributions();if(l){var c=l(t);if(c)if(this.overrideCollapsible_||!1!==h.getAttributionsCollapsible()||this.setCollapsible(!1),Array.isArray(c))for(var u=0,d=c.length;u<d;++u)c[u]in e||(i.push(c[u]),e[c[u]]=!0);else c in e||(i.push(c),e[c]=!0)}}}}return i},e.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),i=e.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!(0,r.fS)(e,this.renderedAttributions_)){(0,a.ep)(this.ulElement_);for(var o=0,n=e.length;o<n;++o){var s=document.createElement("li");s.innerHTML=e[o],this.ulElement_.appendChild(s)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle(s.hN),this.collapsed_?(0,a.$H)(this.collapseLabel_,this.label_):(0,a.$H)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e}(n.Z);var d=i(286320);function _(t){var e=t.frameState;if(e){var i=e.viewState.rotation;if(i!=this.rotation_){var o="rotate("+i+"rad)";if(this.autoHide_){var r=this.element.classList.contains(s.oj);r||0!==i?r&&0!==i&&this.element.classList.remove(s.oj):this.element.classList.add(s.oj)}this.label_.style.msTransform=o,this.label_.style.webkitTransform=o,this.label_.style.transform=o}this.rotation_=i}}const g=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),render:i.render||_,target:i.target});var o=void 0!==i.className?i.className:"ol-rotate",r=void 0!==i.label?i.label:"⇧";this.label_=null,"string"==typeof r?(this.label_=document.createElement("span"),this.label_.className="ol-compass",this.label_.textContent=r):(this.label_=r,this.label_.classList.add("ol-compass"));var n=i.tipLabel?i.tipLabel:"Reset rotation",a=document.createElement("button");a.className=o+"-reset",a.setAttribute("type","button"),a.title=n,a.appendChild(this.label_),(0,h.oL)(a,l.Z.CLICK,this.handleClick_,this);var p=o+" "+s.XV+" "+s.hg,c=this.element;c.className=p,c.appendChild(a),this.callResetNorth_=i.resetNorth?i.resetNorth:void 0,this.duration_=void 0!==i.duration?i.duration:250,this.autoHide_=void 0===i.autoHide||i.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(s.oj)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();t&&void 0!==t.getRotation()&&(this.duration_>0?t.animate({rotation:0,duration:this.duration_,easing:d.Vv}):t.setRotation(0))},e}(n.Z);var y=i(99937);function f(t){var e=t||{},i=new o.Z;return(void 0===e.zoom||e.zoom)&&i.push(new y.Z(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&i.push(new g(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&i.push(new u(e.attributionOptions)),i}},537566:(t,e,i)=>{"use strict";i.d(e,{ce:()=>y});var o=i(378426),r=function(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0};r.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},r.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},r.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var i=e-3;i>0&&this.points_[i+2]>t;)i-=3;var o=this.points_[e+2]-this.points_[i+2];if(o<1e3/60)return!1;var r=this.points_[e]-this.points_[i],n=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(n,r),this.initialVelocity_=Math.sqrt(r*r+n*n)/o,this.initialVelocity_>this.minVelocity_},r.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},r.prototype.getAngle=function(){return this.angle_};const n=r;var s=i(718369),a=i(573800),h=i(497950),l=i(878516),p=i(345801),c=i(500052),u=i(386306),d=i(978653),_=i(848041),g=i(436403);function y(t){var e=t||{},i=new o.Z,r=new n(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&i.push(new h.Z),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&i.push(new s.Z({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&i.push(new a.Z({condition:e.onFocusOnly?g.T_:void 0,kinetic:r})),(void 0===e.pinchRotate||e.pinchRotate)&&i.push(new d.Z),(void 0===e.pinchZoom||e.pinchZoom)&&i.push(new _.Z({constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(i.push(new p.Z),i.push(new c.Z({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&i.push(new u.Z({condition:e.onFocusOnly?g.T_:void 0,constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&i.push(new l.Z({duration:e.zoomDuration})),i}},531742:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>y});var o=i(949179),r=i(378426),n=i(919629),s=i(558493),a=i(713910),h=i(438906),l=i(613002),p=i(173381),c=i(421915),u=i(910410),d=i(913580),_=i(582418),g="layers";const y=function(t){function e(e){var i=e||{},o=(0,d.f0)({},i);delete o.layers;var n=i.layers;t.call(this,o),this.layersListenerKeys_=[],this.listenerKeys_={},(0,l.oL)(this,(0,s.v_)(g),this.handleLayersChanged_,this),n?Array.isArray(n)?n=new r.Z(n.slice(),{unique:!0}):(0,h.h)("function"==typeof n.getArray,43):n=new r.Z(void 0,{unique:!0}),this.setLayers(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(l.bN),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push((0,l.oL)(t,n.Z.ADD,this.handleLayersAdd_,this),(0,l.oL)(t,n.Z.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(l.bN);(0,d.ZH)(this.listenerKeys_);for(var i=t.getArray(),r=0,s=i.length;r<s;r++){var h=i[r];this.listenerKeys_[(0,o.sq)(h)]=[(0,l.oL)(h,a.Z.PROPERTYCHANGE,this.handleLayerChange_,this),(0,l.oL)(h,p.Z.CHANGE,this.handleLayerChange_,this)]}this.changed()},e.prototype.handleLayersAdd_=function(t){var e=t.element;this.listenerKeys_[(0,o.sq)(e)]=[(0,l.oL)(e,a.Z.PROPERTYCHANGE,this.handleLayerChange_,this),(0,l.oL)(e,p.Z.CHANGE,this.handleLayerChange_,this)],this.changed()},e.prototype.handleLayersRemove_=function(t){var e=t.element,i=(0,o.sq)(e);this.listenerKeys_[i].forEach(l.bN),delete this.listenerKeys_[i],this.changed()},e.prototype.getLayers=function(){return this.get(g)},e.prototype.setLayers=function(t){this.set(g,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach((function(t){t.getLayersArray(e)})),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],i=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));for(var o=this.getLayerState(),r=i,n=e.length;r<n;r++){var s=e[r];s.opacity*=o.opacity,s.visible=s.visible&&o.visible,s.maxResolution=Math.min(s.maxResolution,o.maxResolution),s.minResolution=Math.max(s.minResolution,o.minResolution),void 0!==o.extent&&(void 0!==s.extent?s.extent=(0,c.Ed)(s.extent,o.extent):s.extent=o.extent)}return e},e.prototype.getSourceState=function(){return _.Z.READY},e}(u.default)},878181:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});const o={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"}}}]);