(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[88113],{501157:(e,t,n)=>{"use strict";n.d(t,{en:()=>q,FU:()=>G,gs:()=>k,tt:()=>F,jY:()=>A,QQ:()=>E,B8:()=>W,T6:()=>U,ZP:()=>N});var r=n(472500),a=n.n(r),o=n(701469),i=n.n(o),u=n(984596),c=n.n(u),l=n(227361),s=n.n(l),g=n(441609),f=n.n(g),p=n(264721),m=n.n(p),d=n(944908),v=n.n(d),y=n(727418),b=n.n(y),h=n(505055),L=n.n(h),S=n(375875),O=n.n(S),x=n(737275),B=n(896309),w=n(396606);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){M(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R={},q=function(e){var t=(i()(e)&&e||e.split(","))[0],n=a().parse(t,!0);return a().format(b()({},n,{search:null},{query:b()({service:"WMS",version:"1.3.0",request:"GetCapabilities"},n.query)}))},C=function(e){var t=e&&e.Title,n=e.LogoURL&&j(j({},s()(e,"LogoURL.$")||{}),{},{format:s()(e,"LogoURL.Format")}),r=s()(e,'OnlineResource.$["xlink:href"]');return{title:t,logo:n,imageUrl:s()(e,'LogoURL.OnlineResource.$["xlink:href"]'),link:r}},_=function e(t){return t.Layer?(i()(t.Layer)&&t.Layer||[t.Layer]).reduce((function(t,n){return t.concat(e(n)).concat(n.Layer&&n.Name?[n]:[])}),[]):t.Name&&[t]||[]},D=function(e){return e.Request&&e.Request.GetMap&&e.Request.GetMap.DCPType&&e.Request.GetMap.DCPType.HTTP&&e.Request.GetMap.DCPType.HTTP.Get&&e.Request.GetMap.DCPType.HTTP.Get.OnlineResource&&e.Request.GetMap.DCPType.HTTP.Get.OnlineResource.$||void 0},T=function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0,c=(r.WMS_Capabilities||r.WMT_MS_Capabilities||{}).Capability,l=(r.WMS_Capabilities||r.WMT_MS_Capabilities||{}).Service,s=D(c),g=c.Layer&&(null===(e=c.Layer.SRS||c.Layer.CRS)||void 0===e?void 0:e.map((function(e){return e.toUpperCase()})))||[],f=c.Layer&&c.Layer.Attribution&&C(c.Layer.Attribution),p=c.Request&&c.Request.GetMap&&c.Request.GetMap.Format||[],m=_(c),d=i()(m)?m:[m],v=d.filter((function(e){return!u||-1!==e.Name.toLowerCase().indexOf(u.toLowerCase())||e.Title&&-1!==e.Title.toLowerCase().indexOf(u.toLowerCase())||e.Abstract&&-1!==e.Abstract.toLowerCase().indexOf(u.toLowerCase())}));return{numberOfRecordsMatched:v.length,numberOfRecordsReturned:Math.min(o,v.length),nextRecord:a+Math.min(o,v.length)+1,service:l,layerOptions:{version:(null===(t=r.WMS_Capabilities||r.WMT_MS_Capabilities)||void 0===t||null===(n=t.$)||void 0===n?void 0:n.version)||"1.3.0"},records:v.filter((function(e,t){return t>=a-1&&t<a-1+o})).map((function(e){return b()({},e,{formats:p,onlineResource:s,SRS:g,credits:e.Attribution?C(e.Attribution):f})}))}},G=function(e,t){var r=a().parse(e,!0),o=a().format(b()({},r,{query:b()({service:"WMS",version:"1.1.1",request:"GetCapabilities"},r.query)}));return new Promise((function(e){Promise.all([n.e(99942),n.e(67260)]).then(function(){var r=n(967260).unmarshaller;e(O().get(q(o)).then((function(e){var n;if(t)return L().parseString(e.data,{explicitArray:!1},(function(e,t){n=t})),n;var a=r.unmarshalString(e.data);return a&&a.value})))}.bind(null,n)).catch(n.oe)}))},$=function(e,t,n,r){var a=R[e];return a&&(new Date).getTime()<a.timestamp+1e3*((0,x.u8)("cacheExpire")||60)?new Promise((function(e){e(T(a.data,t,n,r))})):O().get(q(e)).then((function(a){var o;return L().parseString(a.data,{explicitArray:!1},(function(e,t){o=t})),R[e]={timestamp:(new Date).getTime(),data:o},T(o,t,n,r)}))},k=function(e,t){var n=a().parse(e,!0),r=a().format(b()({},n,{query:b()({service:"WMS",version:"1.1.1",layers:t,request:"DescribeLayer"},n.query)}));return O().get(q(r)).then((function(e){var t;return L().parseString(e.data,{explicitArray:!1},(function(e,n){t=n&&n.WMS_DescribeLayerResponse&&n.WMS_DescribeLayerResponse.LayerDescription})),(t=Array.isArray(t)?t:[t]).map((function(e){return j(j({},e&&e.$||{}),{},{layerName:e&&e.$&&e.$.name,query:j({},e&&e.query&&e.query.$||{})})}))}))},F=function(e,t,n,r){return $(e,t,n,r)},A=function(e,t){for(var n=e,r=n.EX_GeographicBoundingBox||n.exGeographicBoundingBox||(0,B.getWMSBoundingBox)(n.BoundingBox)||n.LatLonBoundingBox&&n.LatLonBoundingBox.$||n.latLonBoundingBox;!r&&n.Layer&&n.Layer.length;)r=(n=n.Layer[0]).EX_GeographicBoundingBox||n.exGeographicBoundingBox||(0,B.getWMSBoundingBox)(n.BoundingBox)||n.LatLonBoundingBox&&n.LatLonBoundingBox.$||n.latLonBoundingBox;r||(r={westBoundLongitude:-180,southBoundLatitude:-90,eastBoundLongitude:180,northBoundLatitude:90});var a={extent:[r.westBoundLongitude||r.minx,r.southBoundLatitude||r.miny,r.eastBoundLongitude||r.maxx,r.northBoundLatitude||r.maxy],crs:"EPSG:4326"};return t?{crs:a.crs,bounds:{minx:a.extent[0],miny:a.extent[1],maxx:a.extent[2],maxy:a.extent[3]}}:a},E=[{label:"image/png",value:"image/png"},{label:"image/png8",value:"image/png8"},{label:"image/jpeg",value:"image/jpeg"},{label:"image/vnd.jpeg-png",value:"image/vnd.jpeg-png"},{label:"image/vnd.jpeg-png8",value:"image/vnd.jpeg-png8"},{label:"image/gif",value:"image/gif"}],W=function(){return v()(Object.values((0,w.eq)()))},U=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return G(e).then((function(e){var n,r,a=s()(e,"capability.request.getMap.format",[]);if(f()(a))n=E;else{var o=E.map((function(e){return e.value}));n=(a=a.map((function(e){var t=e.value;return{label:t,value:t}}))).filter((function(e){var t=e.value;return m()(o,t)}))||[]}if(t){var i=s()(e,"capability.request.getFeatureInfo.format",[]),u=W();f()(i)?r=u:(i=i.map((function(e){return e.value})),r=v()(i.filter((function(e){return m()(u,e)})))||[])}return t?{imageFormats:n,infoFormats:r}:n})).catch((function(){return t?{imageFormats:E,infoFormats:W()}:E}))};const N={flatLayers:_,parseUrl:q,getDimensions:function(e){return c()(e.Dimension||e.dimension||[]).map((function(t,n){var r=e.Extent&&c()(e.Extent)[n]||e.extent&&c()(e.extent)[n];return{name:t.$.name,units:t.$.units,unitSymbol:t.$.unitSymbol,default:t.$.default||r&&r.$.default,values:t._&&t.split(",")||r&&r._&&r.split(",")}}))},getCapabilities:G,describeLayer:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a().parse(e,!0),i=a().format(b()({},o,{query:b()({service:"WMS",version:"1.1.1",layers:t,request:"DescribeLayer"},o.query,r.query||{})}));return new Promise((function(e){Promise.all([n.e(99942),n.e(67260)]).then(function(){var t=n(967260).unmarshaller;e(O().get(q(i)).then((function(e){var n=t.unmarshalString(e.data);return n&&n.value&&n.value.layerDescription&&n.value.layerDescription[0]})))}.bind(null,n)).catch(n.oe)}))},getRecords:$,describeLayers:k,textSearch:F,parseLayerCapabilities:function e(t,n,r){return c()(r||s()(t,"capability.layer.layer")).reduce((function(r,a){return r||(!a.name&&a.layer?e(t,n,c()(a.layer)):2===n.name.split(":").length&&a.name&&2===a.name.split(":").length?n.name===a.name&&a:a.name&&2===a.name.split(":").length?n.name===a.name.split(":")[1]&&a:2===n.name.split(":").length?n.name.split(":")[1]===a.name&&a:n.name===a.name&&a)}),null)},getBBox:A,reset:function(){Object.keys(R).forEach((function(e){delete R[e]}))},getUniqueInfoFormats:W,getSupportedFormat:U}},788113:(e,t,n)=>{"use strict";n.d(t,{b6:()=>g,PG:()=>f,_x:()=>p,Mm:()=>m,dP:()=>d,SX:()=>v,ZL:()=>y,_S:()=>b,iH:()=>h,R7:()=>L,Q7:()=>S,n7:()=>O,bA:()=>x,hm:()=>B,E2:()=>w,Cb:()=>P,eK:()=>j,Im:()=>M,e8:()=>R,JF:()=>q,kS:()=>C,y:()=>_,l2:()=>D,HN:()=>T,BM:()=>G,am:()=>$,LV:()=>k,CK:()=>F,jU:()=>A});var r=n(22222),a=n(227361),o=n.n(a),i=n(800827),u=n(501157);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){return o()(e,"catalog.services")},f=(0,r.P1)((function(e){return o()(e,"catalog.default.staticServices")}),g,(function(e,t){var n=null==e?void 0:e.default_map_backgrounds;return n?(n.readOnly=!0,l(l({},t),{},{default_map_backgrounds:n})):t})),p=function(e){return o()(e,"catalog.default.tileSizes",[256,512])},m=function(e){return o()(e,"controls.metadataexplorer.group")},d=function(e){return o()(e,"catalog.saving")},v=function(e){return o()(e,"catalog.result")},y=function(e){return o()(e,"catalog.openCatalogServiceList")},b=function(e){return o()(e,"catalog.newService")},h=function(e){return o()(e,"catalog.newService.type","csw")},L=function(e){return o()(e,'catalog.services["'.concat(o()(e,"catalog.selectedService"),'"]'))},S=function(e){return o()(e,'catalog.services["'.concat(o()(e,"catalog.selectedService"),'"].type'),function(e){return o()(e,'catalog.default.staticServices["'.concat(o()(e,"catalog.selectedService"),'"].type'),"csw")}(e))},O=function(e){return o()(e,'catalog.services["'.concat(o()(e,"catalog.selectedService"),'"].layerOptions'),{})},x=function(e){return o()(e,"catalog.searchOptions")},B=function(e){return o()(e,"catalog.loadingError")},w=function(e){return o()(e,"catalog.loading",!1)},P=function(e){return o()(e,"catalog.selectedService")},j=function(e){return o()(e,"catalog.mode","view")},M=function(e){return o()(e,"catalog.layerError")},R=function(e){return o()(e,"catalog.searchOptions.text","")},q=function(e){return"metadataexplorer"===o()(e,"controls.toolbar.active")||o()(e,"controls.metadataexplorer.enabled")},C=function(e){return(o()(e,"localConfig.authenticationRules")||[]).filter((function(e){return"authkey"===e.method})).map((function(e){return e.authkeyParamName}))||[]},_=function(e){return o()(e,"catalog.pageSize",4)},D=function(e){return o()(e,"catalog.delayAutoSearch",1e3)},T=(0,r.zB)({projection:i.uy}),G=function(e){return o()(e,"catalog.formatsLoading",!1)},$=function(e){return o()(e,"catalog.newService.supportedFormats.imageFormats",u.QQ)},k=function(e){return o()(e,"catalog.newService.supportedFormats.infoFormats",(0,u.B8)())},F=function(e){return o()(e,"catalog.newService.formatUrlUsed","")},A=function(e){return o()(e,"catalog.isNewServiceAdded",!1)}}}]);