(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[44995,47310],{604206:(e,t,n)=>{"use strict";n.d(t,{hZ:()=>r,pb:()=>o,kD:()=>i,DI:()=>a,IC:()=>l,iU:()=>u,W7:()=>s,uB:()=>c,Rh:()=>p,G_:()=>d,vU:()=>m,Vw:()=>f,KD:()=>v,uj:()=>g,lo:()=>b,Yf:()=>y,fo:()=>h,PY:()=>_,bp:()=>E,oJ:()=>w,k4:()=>A,sc:()=>S,Li:()=>T});var r="CHANGE_DRAWING_STATUS",o="DRAW:END_DRAWING",i="DRAW:SET_CURRENT_STYLE",a="DRAW:GEOMETRY_CHANGED",l="DRAW:DRAW_SUPPORT_STOPPED",u="DRAW:FEATURES_SELECTED",s="DRAW:DRAWING_FEATURES",c="DRAW:SET_SNAPPING_LAYER",p="DRAW:SNAPPING_IS_LOADING",d="DRAW:TOGGLE_SNAPPING",m="DRAW:SET_SNAPPING_CONFIG";function f(e,t,n,r,o){return{type:a,features:e,owner:t,enableEdit:n,textChanged:r,circleChanged:o}}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:u,features:e}}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:s,features:e}}function b(){return{type:l}}function y(e,t,n,o,i,a){return{type:r,status:e,method:t,owner:n,features:o,options:i,style:a}}function h(e,t){return{type:o,geometry:e,owner:t}}function _(e){return{type:i,currentStyle:e}}var E=function(e){return y("clean","",e,[],{})};function w(){return{type:d}}function A(e){return{type:c,snappingLayer:e}}function S(){return{type:p}}function T(e,t,n){return{type:m,value:e,prop:t,pluginCfg:n}}},129386:(e,t,n)=>{"use strict";n.d(t,{F2:()=>r,fu:()=>o,NF:()=>i,WP:()=>a,_E:()=>l});var r="HIGHLIGHT_STATUS",o="UPDATE_HIGHLIGHTED",i="HIGHLIGHT:SET_HIGHLIGHT_FEATURES_PATH";function a(e){return{type:i,featuresPath:e}}function l(e,t){return{type:o,features:e,status:t}}},801550:(e,t,n)=>{"use strict";n.d(t,{pP:()=>r,TR:()=>o,N7:()=>i,mq:()=>a,uv:()=>l,Qy:()=>u,IL:()=>s,Li:()=>c,OW:()=>p,ZO:()=>d,Um:()=>m,TF:()=>f,Ls:()=>v,Ec:()=>g,Eu:()=>b,JJ:()=>y,nZ:()=>h,YD:()=>_,GI:()=>E,Jb:()=>w,Uh:()=>A,e$:()=>S,eh:()=>T,$j:()=>O,bJ:()=>N,Mk:()=>M,xy:()=>P,o6:()=>B,FP:()=>F,Mo:()=>R,sO:()=>I,Px:()=>C,hd:()=>x,Ju:()=>D,BV:()=>L,SO:()=>G,H0:()=>k,$X:()=>j,ou:()=>U,NE:()=>W,Lq:()=>H,aN:()=>V});var r="CHANGE_MAP_VIEW",o="CLICK_ON_MAP",i="CHANGE_MOUSE_POINTER",a="CHANGE_ZOOM_LVL",l="PAN_TO",u="ZOOM_TO_EXTENT",s="ZOOM_TO_POINT",c="CHANGE_MAP_CRS",p="CHANGE_MAP_SCALES",d="CHANGE_MAP_STYLE",m="CHANGE_ROTATION",f="CREATION_ERROR_LAYER",v="UPDATE_VERSION",g="INIT_MAP",b="RESIZE_MAP",y="CHANGE_MAP_LIMITS",h="SET_MAP_RESOLUTIONS",_="REGISTER_EVENT_LISTENER",E="UNREGISTER_EVENT_LISTENER",w="MOUSE_MOVE",A="MOUSE_OUT",S="MAP:MAP_PLUGIN_LOAD",T="MAP:ORIENTATION",O="MAP:UPDATE_MAP_VIEW",N="MAP:UPDATE_MAP_OPTIONS";function M(e,t,n,r){return{type:S,mapType:t,loading:e,loaded:n,error:r}}function P(e,t,n){return{type:s,pos:e,zoom:t,crs:n}}function B(e,t,n,o,i,a,l,u){return{type:r,center:e,zoom:t,bbox:n,size:o,mapStateSource:i,projection:a,viewerOptions:l,resolution:u}}function F(e,t){return{type:o,point:e,layer:t}}function R(e){return{type:i,pointer:e}}function I(e,t){return{type:a,zoom:e,mapStateSource:t}}function C(e,t,n,r){return{type:u,extent:e,crs:t,maxZoom:n,options:r}}function x(e,t){return{type:d,style:e,mapStateSource:t}}function D(){return{type:b}}function L(e){var t=e.restrictedExtent,n=e.crs,r=e.minZoom;return{type:y,restrictedExtent:t,crs:n,minZoom:r}}function G(e){return{type:h,resolutions:e}}var k=function(e,t){return{type:_,eventName:e,toolName:t}},j=function(e,t){return{type:E,eventName:e,toolName:t}},U=function(e){return{type:w,position:e}},W=function(){return{type:A}},H=function(e){return{type:T,orientation:e}},V=function(e){return{type:N,configUpdate:e}}},921914:(e,t,n)=>{"use strict";n.d(t,{XL:()=>o,km:()=>i,Ih:()=>a,Xw:()=>l,Pn:()=>u,DZ:()=>s,e8:()=>c,E0:()=>p,F9:()=>d,X_:()=>m,pb:()=>f,qb:()=>v,Re:()=>g,ih:()=>b,xy:()=>y,jL:()=>h,oz:()=>_,ph:()=>E,lF:()=>w,gG:()=>A,cb:()=>S,GI:()=>T,B1:()=>O,fv:()=>N,gc:()=>M,zX:()=>P,ZF:()=>B,Zb:()=>F,DW:()=>R,Xp:()=>I,Fm:()=>C,sV:()=>x,Mn:()=>D,LU:()=>L,XP:()=>G,WU:()=>k,JB:()=>j,g:()=>U,ws:()=>W,HP:()=>H,aN:()=>V,Pg:()=>z,u0:()=>K,TM:()=>q,PM:()=>Z,lK:()=>J,sv:()=>X,MO:()=>$,oO:()=>Q,Mc:()=>ee,Zw:()=>te,RA:()=>ne,am:()=>re,ZM:()=>oe,wm:()=>ie,Y$:()=>ae,Qu:()=>le,kT:()=>ue});var r=n(647310),o="LOAD_FEATURE_INFO",i="ERROR_FEATURE_INFO",a="EXCEPTIONS_FEATURE_INFO",l="CHANGE_MAPINFO_STATE",u="NEW_MAPINFO_REQUEST",s="PURGE_MAPINFO_RESULTS",c="CHANGE_MAPINFO_FORMAT",p="SHOW_MAPINFO_MARKER",d="HIDE_MAPINFO_MARKER",m="SHOW_REVERSE_GEOCODE",f="HIDE_REVERSE_GEOCODE",v="GET_VECTOR_INFO",g="NO_QUERYABLE_LAYERS",b="CLEAR_WARNING",y="FEATURE_INFO_CLICK",h="IDENTIFY:UPDATE_FEATURE_INFO_CLICK_POINT",_="IDENTIFY:TOGGLE_HIGHLIGHT_FEATURE",E="TOGGLE_MAPINFO_STATE",w="UPDATE_CENTER_TO_MARKER",A="IDENTIFY:CHANGE_PAGE",S="IDENTIFY:CLOSE_IDENTIFY",T="IDENTIFY:CHANGE_FORMAT",O="IDENTIFY:TOGGLE_SHOW_COORD_EDITOR",N="IDENTIFY:EDIT_LAYER_FEATURES",M="IDENTIFY:CURRENT_EDIT_FEATURE_QUERY",P="IDENTIFY:SET_MAP_TRIGGER",B="IDENTIFY:TOGGLE_EMPTY_MESSAGE_GFI",F="IDENTIFY:SET_SHOW_IN_MAP_POPUP",R="IDENTIFY:IDENTIFY_IS_MOUNTED",I="IDENTIFY:INIT_PLUGIN";function C(e,t,n,r,i){return{type:o,data:t,reqId:e,requestParams:n,layerMetadata:r,layer:i}}function x(e,t,n,r){return{type:i,error:t,reqId:e,requestParams:n,layerMetadata:r}}function D(e,t,n,r){return{type:a,reqId:e,exceptions:t,requestParams:n,layerMetadata:r}}function L(){return{type:g}}function G(){return{type:b}}function k(e,t){return{type:u,reqId:e,request:t}}function j(e,t,n,r){return{type:v,layer:e,request:t,metadata:n,queryableLayers:r}}function U(){return{type:s}}function W(e){return{type:c,infoFormat:e}}function H(){return{type:p}}function V(){return{type:d}}function Y(e){return{type:m,reverseGeocodeData:e.data}}function z(e){return function(t){r.Z.reverseGeocode(e).then((function(e){t(Y(e))})).catch((function(e){t(Y(e))}))}}function K(){return{type:f}}function q(){return{type:E}}function Z(e){return{type:w,status:e}}function J(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return{type:y,point:e,layer:t,filterNameList:n,overrideParams:r,itemId:o}}function X(e){return{type:h,point:e}}function $(e){return{type:_,enabled:e}}function Q(e){return{type:A,index:e}}var ee=function(){return{type:S}},te=function(e){return{type:T,format:e}},ne=function(e){return{type:O,showCoordinateEditor:e}},re=function(e){return{type:N,layer:e}},oe=function(e){return{type:M,query:e}},ie=function(e){return{type:P,trigger:e}},ae=function(e){return{type:F,value:e}},le=function(e){return{type:R,isMounted:e}},ue=function(e){return{type:I,cfg:e}}},647310:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(375875),o=n.n(r),i=n(472500),a=n.n(i),l=n(727418),u=n.n(l),s={format:"json",bounded:0,polygon_geojson:1,priority:5};const c={geocode:function(e,t){var n=u()({q:e},s,t||{}),r=a().format({protocol:"https",host:"nominatim.openstreetmap.org",query:n});return o().get(r)},reverseGeocode:function(e,t){var n=u()({lat:e.lat,lon:e.lng},t||{},s),r=a().format({protocol:"https",host:"nominatim.openstreetmap.org/reverse",query:n});return o().get(r)}}},615402:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n(45697),o=n.n(r),i=n(124852),a=n.n(i);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n(868195).FormattedHTMLMessage,v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(l,e);var t,n,r,o,i=(r=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(r);if(o){var n=d(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return p(this,e)});function l(){return u(this,l),i.apply(this,arguments)}return t=l,(n=[{key:"render",value:function(){return this.context.intl?a().createElement(f,{id:this.props.msgId,values:this.props.msgParams}):a().createElement("span",null,this.props.msgId||"")}}])&&s(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(a().Component);m(v,"propTypes",{msgId:o().string.isRequired,msgParams:o().object}),m(v,"contextTypes",{intl:o().object});const g=v},838167:(e,t,n)=>{"use strict";n.d(t,{t6:()=>w,k9:()=>E,v0:()=>_,ZP:()=>A});var r=n(45697),o=n.n(r),i=n(124852),a=n.n(i),l=n(868195);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(r);if(o){var n=f(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return m(this,e)});function u(){return c(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"render",value:function(){return this.context.intl?a().createElement(l.FormattedDate,s({value:this.props.value},this.props.dateParams)):a().createElement("span",null,this.props.value&&this.props.value.toString()||"")}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(a().Component);v(g,"propTypes",{value:o().object,dateParams:o().object}),v(g,"contextTypes",{intl:o().object}),v(g,"defaultProps",{value:new Date});const b=g;var y=n(615402),h=n(805346),_=h.Z,E=y.Z,w=b;const A={Message:h.Z,HTML:E,DateFormat:w}},73443:(e,t,n)=>{"use strict";n.d(t,{rs:()=>r,AY:()=>o,SW:()=>i,yB:()=>a,oG:()=>l,oz:()=>u,id:()=>s,gc:()=>c,cE:()=>p,rG:()=>d,Vj:()=>m,nY:()=>f});var r="GEONODE:SAVING_RESOURCE",o="GEONODE:SAVE_SUCCESS",i="GEONODE:SAVE_ERROR",a="GEONODE:CLEAR_SAVE",l="GEONODE:SAVE_CONTENT",u="GEONODE:SAVE_DIRECT_CONTENT";function s(){return{type:r}}function c(e){return{type:o,success:e}}function p(e){return{type:i,error:e}}function d(){return{type:a}}function m(e,t,n,r){return{type:l,id:e,metadata:t,reload:n,showNotifications:r}}function f(){return{type:u}}},726580:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>lt});var r=n(322843),o=n(368658),i=n(351288);function a(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p={showAddAnugaElevationData:!1,visibleAnugaScenarioLogId:!1,scenarios:[]},d=n(124852),m=n.n(d),f=n(171703);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e){var t,n,r,o,i,a,l=null==e||null===(t=e.security)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.pk,u=null==e||null===(r=e.gnresource)||void 0===r||null===(o=r.compactPermissions)||void 0===o||null===(i=o.users)||void 0===i||null===(a=i.filter((function(e){return e.id===l}))[0])||void 0===a?void 0:a.permissions;return["view","edit","manage","owner"].includes(u)},h=function(e){var t,n,r,o,i,a,l=null==e||null===(t=e.security)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.pk,u=null==e||null===(r=e.gnresource)||void 0===r||null===(o=r.compactPermissions)||void 0===o||null===(i=o.users)||void 0===i||null===(a=i.filter((function(e){return e.id===l}))[0])||void 0===a?void 0:a.permissions;return["edit","manage","owner"].includes(u)},_=function(e){var t;return null==e||null===(t=e.anuga)||void 0===t?void 0:t.scenarios.filter((function(e){return null==e?void 0:e.selected}))},E=n(724469),w=n(893379),A=n.n(w),S=n(273454);A()(S.Z,{insert:"head",singleton:!1}),S.Z.locals,n(472619);var T=n(388380),O=n(427995);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){return(P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function B(e,t){if(t&&("object"===N(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=n(45697),C=n(472986),x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=F(r);if(o){var n=F(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return B(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={showAdvanced:!1,boundaryTitle:"",frictionTitle:"",inflowTitle:"",structureTitle:"",meshRegionTitle:"",networkTitle:"",catchmentTitle:"",nodesTitle:"",linksTitle:""},t}return t=a,(n=[{key:"componentDidMount",value:function(){this.props.startAnugaModelCreationPolling(),this.props.startAnugaElevationPolling()}},{key:"componentWillUnmount",value:function(){this.props.stopAnugaModelCreationPolling(),this.props.stopAnugaElevationPolling()}},{key:"render",value:function(){var e,t,n,r,o,i,a,l,u,s,c,p,d,f,v,g,b,y,h=this;return m().createElement("div",{id:"anuga-input-menu",className:"simple-view-panel",style:{top:"70px",width:"560px"}},m().createElement("div",{className:"menu-rows-container",style:{border:"1px solid rgba(255, 255, 255, 1)",borderRadius:"3px",margin:"3px 0"}},m().createElement("div",{className:"row menu-row menu-row-header",style:{width:"540px",textAlign:"left",border:"none"}},m().createElement("span",{className:"menu-row-text"},"Elevations"),m().createElement(E.OverlayTrigger,{placement:"right",overlay:m().createElement(E.Tooltip,null,"Upload a new *.tiff elevation")},m().createElement("span",{className:"btn pull-right glyphicon menu-row-glyph glyphicon-upload",style:{color:"limegreen",fontSize:"smaller",textAlign:"right",marginRight:"8px"},onClick:function(){h.props.setVisibleUploaderPanel(!0,"elevation",null),h.props.startAnugaElevationPolling()}}))),null===(e=this.props.elevationLayers)||void 0===e?void 0:e.map((function(e){return m().createElement(T.j,{layer:e})})),0===(null===(t=this.props.elevationLayers)||void 0===t?void 0:t.length)?m().createElement("div",{className:"row menu-row menu-row",style:{width:"540px",textAlign:"left",border:"none"}},"No elevations available"):null),null!==(n=this.props.projectData)&&void 0!==n&&n.projection?m().createElement(m().Fragment,null,m().createElement("div",{className:"menu-rows-container",style:{border:"1px solid rgba(255, 255, 255)",borderRadius:"3px",margin:"3px 0"}},m().createElement("div",{className:"row menu-row menu-row-header",style:{width:"540px",textAlign:"left",border:"none"}},m().createElement("span",{className:"pull-left menu-row-text"},"Boundaries"),this.props.canEditAnugaMap?m().createElement(m().Fragment,null,m().createElement("span",{className:"btn glyphicon menu-row-glyph glyphicon-plus".concat(this.state.boundaryTitle?"":" disabled"),style:{color:"limegreen",fontSize:"smaller",textAlign:"right",marginRight:"8px",float:"right"},onClick:function(){h.props.setCreatingAnugaLayer(!0),h.props.createAnugaBoundary(h.state.boundaryTitle),h.setState({boundaryTitle:""})}}),this.props.isCreatingAnugaLayer?m().createElement("span",null,m().createElement(C,{color:"white",style:{display:"inline-block",position:"absolute",right:"45px"},spinnerName:"circle",noFadeIn:!0})):m().createElement("input",{id:"boundary-input",key:"boundary-input",className:"data-title-input",style:{marginTop:"3px",marginRight:"5px"},type:"text",value:this.state.boundaryTitle,onChange:function(e){return h.setState({boundaryTitle:e.target.value})}})):null),null===(r=this.props.boundaryLayers)||void 0===r?void 0:r.map((function(e){return m().createElement(T.j,{layer:e})})),0===(null===(o=this.props.boundaryLayers)||void 0===o?void 0:o.length)?m().createElement("div",{className:"row menu-row menu-row",style:{width:"540px",textAlign:"left",border:"none"}},"None"):null),m().createElement("div",{className:"menu-rows-container",style:{border:"1px solid rgba(255, 255, 255)",borderRadius:"3px",margin:"3px 0"}},m().createElement("div",{className:"row menu-row menu-row-header",style:{width:"540px",textAlign:"left",border:"none"}},m().createElement("span",{className:"pull-left menu-row-text"},"Inflows"),this.props.canEditAnugaMap?m().createElement(m().Fragment,null,m().createElement("span",{className:"btn glyphicon menu-row-glyph glyphicon-plus".concat(this.state.inflowTitle?"":" disabled"),style:{color:"limegreen",fontSize:"smaller",textAlign:"right",marginRight:"8px",float:"right"},onClick:function(){h.props.setCreatingAnugaLayer(!0),h.props.createAnugaInflow(h.state.inflowTitle),h.setState({inflowTitle:""})}}),this.props.isCreatingAnugaLayer?m().createElement("span",null,m().createElement(C,{color:"white",style:{display:"inline-block",position:"absolute",right:"45px"},spinnerName:"circle",noFadeIn:!0})):m().createElement("input",{id:"inflow-input",key:"inflow-input",className:"data-title-input",style:{marginTop:"3px",marginRight:"5px"},type:"text",value:this.state.inflowTitle,onChange:function(e){return h.setState({inflowTitle:e.target.value})}})):null),null===(i=this.props.inflowLayers)||void 0===i?void 0:i.map((function(e){return m().createElement(T.j,{layer:e})})),0===(null===(a=this.props.inflowLayers)||void 0===a?void 0:a.length)?m().createElement("div",{className:"row menu-row menu-row",style:{width:"540px",textAlign:"left",border:"none"}},"None"):null),m().createElement("div",{className:"menu-rows-container",style:{border:"1px solid rgba(255, 255, 255)",borderRadius:"3px",margin:"3px 0"}},m().createElement("div",{className:"row menu-row menu-row-header",style:{width:"540px",textAlign:"left",border:"none"}},m().createElement("span",{className:"pull-left menu-row-text"},"Advanced"),m().createElement("span",{className:"btn glyphicon menu-row-glyph ".concat(this.state.showAdvanced?"glyphicon-chevron-down":"glyphicon-chevron-right"),style:{color:"#325f93",fontSize:"smaller",textAlign:"right",marginRight:"8px",float:"right"},onClick:function(){h.setState((function(e){return{showAdvanced:!e.showAdvanced}}))}}))),this.state.showAdvanced?m().createElement("div",{id:"advancedInputs"},m().createElement("div",{className:"menu-rows-container",style:{border:"1px solid rgba(255, 255, 255)",borderRadius:"3px",margin:"3px 0"}},m().createElement("div",{className:"row menu-row menu-row-header",style:{width:"540px",textAlign:"left",border:"none"}},m().createElement("span",{className:"pull-left menu-row-text"},"Full Mesh")),null===(l=this.props.fullMeshLayers)||void 0===l?void 0:l.map((function(e){return m().createElement(T.j,{layer:e})})),0===(null===(u=this.props.fullMeshLayers)||void 0===u?void 0:u.length)?m().createElement("div",{className:"row menu-row menu-row",style:{width:"540px",textAlign:"left",border:"none"}},"Mesh will appear here when a Scenario is built."):null),m().createElement("div",{className:"menu-rows-container",style:{border:"1px solid rgba(255, 255, 255)",borderRadius:"3px",margin:"3px 0"}},m().createElement("div",{className:"row menu-row menu-row-header",style:{width:"540px",textAlign:"left",border:"none"}},m().createElement("span",{className:"pull-left menu-row-text"},"Mesh Regions"),this.props.canEditAnugaMap?m().createElement(m().Fragment,null,m().createElement("span",{className:"btn glyphicon menu-row-glyph glyphicon-plus".concat(this.state.meshRegionTitle?"":" disabled"),style:{color:"limegreen",fontSize:"smaller",textAlign:"right",marginRight:"8px",float:"right"},onClick:function(){h.props.setCreatingAnugaLayer(!0),h.props.createAnugaMeshRegion(h.state.meshRegionTitle),h.setState({meshRegionTitle:""})}}),this.props.isCreatingAnugaLayer?m().createElement("span",null,m().createElement(C,{color:"white",style:{display:"inline-block",position:"absolute",right:"45px"},spinnerName:"circle",noFadeIn:!0})):m().createElement("input",{id:"mesh-region-input",key:"mesh-region-input",className:"data-title-input",style:{marginTop:"3px",marginRight:"5px"},type:"text",value:this.state.meshRegionTitle,onChange:function(e){return h.setState({meshRegionTitle:e.target.value})}})):null),null===(s=this.props.meshRegionLayers)||void 0===s?void 0:s.map((function(e){return m().createElement(T.j,{layer:e})})),0===(null===(c=this.props.meshRegionLayers)||void 0===c?void 0:c.length)?m().createElement("div",{className:"row menu-row menu-row",style:{width:"540px",textAlign:"left",border:"none"}},"None"):null),m().createElement("div",{className:"menu-rows-container",style:{border:"1px solid rgba(255, 255, 255)",borderRadius:"3px",margin:"3px 0"}},m().createElement("div",{className:"row menu-row menu-row-header",style:{width:"540px",textAlign:"left",border:"none"}},m().createElement("span",{className:"pull-left menu-row-text"},"Friction Maps"),this.props.canEditAnugaMap?m().createElement(m().Fragment,null,m().createElement("span",{className:"btn glyphicon menu-row-glyph glyphicon-plus".concat(this.state.frictionTitle?"":" disabled"),style:{color:"limegreen",fontSize:"smaller",textAlign:"right",marginRight:"8px",float:"right"},onClick:function(){h.props.setCreatingAnugaLayer(!0),h.props.createAnugaFriction(h.state.frictionTitle),h.setState({frictionTitle:""})}}),this.props.isCreatingAnugaLayer?m().createElement("span",null,m().createElement(C,{color:"white",style:{display:"inline-block",position:"absolute",right:"45px"},spinnerName:"circle",noFadeIn:!0})):m().createElement("input",{id:"friction-input",key:"friction-input",className:"data-title-input",style:{marginTop:"3px",marginRight:"5px"},type:"text",value:this.state.frictionTitle,onChange:function(e){return h.setState({frictionTitle:e.target.value})}})):null),null===(p=this.props.frictionLayers)||void 0===p?void 0:p.map((function(e){return m().createElement(T.j,{layer:e})})),0===(null===(d=this.props.frictionLayers)||void 0===d?void 0:d.length)?m().createElement("div",{className:"row menu-row menu-row",style:{width:"540px",textAlign:"left",border:"none"}},"None"):null),m().createElement("div",{className:"menu-rows-container",style:{border:"1px solid rgba(255, 255, 255)",borderRadius:"3px",margin:"3px 0"}},m().createElement("div",{className:"row menu-row menu-row-header",style:{width:"540px",textAlign:"left",border:"none"}},m().createElement("span",{className:"pull-left menu-row-text"},"Structures"),this.props.canEditAnugaMap?m().createElement(m().Fragment,null,m().createElement("span",{className:"btn glyphicon menu-row-glyph glyphicon-plus".concat(this.state.structureTitle?"":" disabled"),style:{color:"limegreen",fontSize:"smaller",textAlign:"right",marginRight:"8px",float:"right"},onClick:function(){h.props.setCreatingAnugaLayer(!0),h.props.createAnugaStructure(h.state.structureTitle),h.setState({structureTitle:""})}}),this.props.isCreatingAnugaLayer?m().createElement("span",null,m().createElement(C,{color:"white",style:{display:"inline-block",position:"absolute",right:"45px"},spinnerName:"circle",noFadeIn:!0})):m().createElement("input",{id:"structure-input",key:"structure-input",className:"data-title-input",style:{marginTop:"3px",marginRight:"5px"},type:"text",value:this.state.structureTitle,onChange:function(e){return h.setState({structureTitle:e.target.value})}})):null),null===(f=this.props.structureLayers)||void 0===f?void 0:f.map((function(e){return m().createElement(T.j,{layer:e})})),0===(null===(v=this.props.structureLayers)||void 0===v?void 0:v.length)?m().createElement("div",{className:"row menu-row menu-row",style:{width:"540px",textAlign:"left",border:"none"}},"None"):null),m().createElement("div",{className:"menu-rows-container",style:{border:"1px solid rgba(255, 255, 255)",borderRadius:"3px",margin:"3px 0"}},m().createElement("div",{className:"row menu-row menu-row-header",style:{width:"540px",textAlign:"left",border:"none"}},m().createElement("span",{className:"pull-left menu-row-text",style:{marginTop:"4px"}},"Networks"),m().createElement("span",{className:"btn glyphicon menu-row-glyph glyphicon-cog",style:{color:"#325f93",fontSize:"smaller",textAlign:"right",marginLeft:"8px",float:"left"},onClick:function(){h.props.setNetworkMenu(!0),h.props.setAnugaInputMenu(!1)}}),this.props.canEditAnugaMap?m().createElement(m().Fragment,null,m().createElement("span",{className:"btn glyphicon menu-row-glyph glyphicon-plus".concat(this.state.networkTitle?"":" disabled"),style:{color:"limegreen",fontSize:"smaller",textAlign:"right",marginRight:"8px",float:"right"},onClick:function(){h.props.setCreatingAnugaLayer(!0),h.props.createNetwork(h.state.networkTitle),h.setState({networkTitle:""})}}),this.props.isCreatingAnugaLayer?m().createElement("span",null,m().createElement(C,{color:"white",style:{display:"inline-block",position:"absolute",right:"45px"},spinnerName:"circle",noFadeIn:!0})):m().createElement("input",{id:"network-input",key:"network-input",className:"data-title-input",style:{marginTop:"3px",marginRight:"5px"},type:"text",value:this.state.networkTitle,onChange:function(e){return h.setState({networkTitle:e.target.value})}})):null),m().createElement("div",null,m().createElement("div",{className:"menu-row-mini-container"},m().createElement("p",{className:"menu-row-mini-heading"},"Catchments"),null===(g=this.props.catchmentLayers)||void 0===g?void 0:g.map((function(e){return m().createElement(T.j,{layer:e})}))),m().createElement("div",{className:"menu-row-mini-container"},m().createElement("p",{className:"menu-row-mini-heading"},"Nodes"),null===(b=this.props.nodesLayers)||void 0===b?void 0:b.map((function(e){return m().createElement(T.j,{layer:e})}))),m().createElement("div",{className:"menu-row-mini-container"},m().createElement("p",{className:"menu-row-mini-heading"},"Links"),null===(y=this.props.linksLayers)||void 0===y?void 0:y.map((function(e){return m().createElement(T.j,{layer:e})})))))):null):null,m().createElement(O.h,{fileType:"elevation"}))}}])&&M(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(m().Component);R(x,"propTypes",{projectData:I.object,setVisibleUploaderPanel:I.func,anugaGroupLength:I.number,elevationLayers:I.array,boundaryLayers:I.array,createAnugaBoundary:I.func,createAnugaFriction:I.func,createAnugaInflow:I.func,createAnugaStructure:I.func,createAnugaMeshRegion:I.func,createNetwork:I.func,createCatchment:I.func,createNodes:I.func,createLinks:I.func,frictionLayers:I.array,inflowLayers:I.array,structureLayers:I.array,fullMeshLayers:I.array,meshRegionLayers:I.array,catchmentLayers:I.array,nodesLayers:I.array,linksLayers:I.array,startAnugaElevationPolling:I.func,stopAnugaElevationPolling:I.func,startAnugaModelCreationPolling:I.func,stopAnugaModelCreationPolling:I.func,isCreatingAnugaLayer:I.bool,setCreatingAnugaLayer:I.func,canEditAnugaMap:I.func,addAnugaBoundary:I.func,addAnugaFriction:I.func,addAnugaInflow:I.func,addAnugaStructure:I.func,addAnugaFullMesh:I.func,addAnugaMeshRegion:I.func,addCatchment:I.func,addNodes:I.func,addLinks:I.func,networks:I.array,setNetworkMenu:I.func,boundaryModels:I.array,frictionModels:I.array,inflowModels:I.array,structureModels:I.array,fullMeshModels:I.array,meshRegionModels:I.array,catchmentModels:I.array,nodesModels:I.array,linksModels:I.array,setAnugaInputMenu:I.func}),R(x,"defaultProps",{});var D=(0,f.connect)((function(e){var t,n,r,o,i,a,l,u,s,c,p,d,m,f,v,g,b,y,_,E,w,A,S,T,O,N,M,P,B,F,R,I,C,x;return{projectData:null==e||null===(t=e.anuga)||void 0===t?void 0:t.projectData,elevationLayers:null==e||null===(n=e.layers)||void 0===n||null===(r=n.flat)||void 0===r?void 0:r.filter((function(e){return"Input Data.Elevations"===(null==e?void 0:e.group)})),boundaryLayers:null==e||null===(o=e.layers)||void 0===o||null===(i=o.flat)||void 0===i?void 0:i.filter((function(e){return"Input Data.Boundaries"===(null==e?void 0:e.group)})),inflowLayers:null==e||null===(a=e.layers)||void 0===a||null===(l=a.flat)||void 0===l?void 0:l.filter((function(e){return"Input Data.Inflows"===(null==e?void 0:e.group)})),frictionLayers:null==e||null===(u=e.layers)||void 0===u||null===(s=u.flat)||void 0===s?void 0:s.filter((function(e){return"Input Data.Friction Maps"===(null==e?void 0:e.group)})),structureLayers:null==e||null===(c=e.layers)||void 0===c||null===(p=c.flat)||void 0===p?void 0:p.filter((function(e){return"Input Data.Structures"===(null==e?void 0:e.group)})),fullMeshLayers:null==e||null===(d=e.layers)||void 0===d||null===(m=d.flat)||void 0===m?void 0:m.filter((function(e){return"Input Data.Full Mesh"===(null==e?void 0:e.group)})),meshRegionLayers:null==e||null===(f=e.layers)||void 0===f||null===(v=f.flat)||void 0===v?void 0:v.filter((function(e){return"Input Data.Mesh Regions"===(null==e?void 0:e.group)})),networkLayers:null==e||null===(g=e.layers)||void 0===g||null===(b=g.flat)||void 0===b?void 0:b.filter((function(e){return"Input Data.Networks"===(null==e?void 0:e.group)})),catchmentLayers:null==e||null===(y=e.layers)||void 0===y||null===(_=y.flat)||void 0===_?void 0:_.filter((function(e){return"Input Data.Catchments"===(null==e?void 0:e.group)})),nodesLayers:null==e||null===(E=e.layers)||void 0===E||null===(w=E.flat)||void 0===w?void 0:w.filter((function(e){return"Input Data.Nodes"===(null==e?void 0:e.group)})),linksLayers:null==e||null===(A=e.layers)||void 0===A||null===(S=A.flat)||void 0===S?void 0:S.filter((function(e){return"Input Data.Links"===(null==e?void 0:e.group)})),elevationModels:null==e||null===(T=e.anuga)||void 0===T?void 0:T.elevations,boundaryModels:null==e||null===(O=e.anuga)||void 0===O?void 0:O.boundaries,inflowModels:null==e||null===(N=e.anuga)||void 0===N?void 0:N.inflows,frictionModels:null==e||null===(M=e.anuga)||void 0===M?void 0:M.frictions,structureModels:null==e||null===(P=e.anuga)||void 0===P?void 0:P.structures,fullMeshModels:null==e||null===(B=e.anuga)||void 0===B?void 0:B.fullMeshes,meshRegionModels:null==e||null===(F=e.anuga)||void 0===F?void 0:F.meshRegions,catchmentModels:null==e||null===(R=e.anuga)||void 0===R?void 0:R.catchments,nodesModels:null==e||null===(I=e.anuga)||void 0===I?void 0:I.nodes,linksModels:null==e||null===(C=e.anuga)||void 0===C?void 0:C.links,isCreatingAnugaLayer:null==e||null===(x=e.anuga)||void 0===x?void 0:x.isCreatingAnugaLayer,canEditAnugaMap:h(e)}}),(function(e){return{addAnugaBoundary:function(){return e((0,o.addAnugaBoundary)())},addAnugaFriction:function(){return e((0,o.addAnugaFriction)())},addAnugaInflow:function(){return e((0,o.addAnugaInflow)())},addAnugaStructure:function(){return e((0,o.addAnugaStructure)())},addAnugaFullMesh:function(){return e((0,o.addAnugaFullMesh)())},addAnugaMeshRegion:function(){return e((0,o.addAnugaMeshRegion)())},addCatchment:function(){return e((0,o.addCatchment)())},setNetworkMenu:function(t){return e((0,o.setNetworkMenu)(t))},setAnugaInputMenu:function(t){return e((0,o.setAnugaInputMenu)(t))},addNetwork:function(){return e((0,o.addNetwork)())},addNodes:function(){return e((0,o.addNodes)())},addLinks:function(){return e((0,o.addLinks)())},startAnugaElevationPolling:function(){return e((0,o.startAnugaElevationPolling)())},stopAnugaElevationPolling:function(){return e((0,o.stopAnugaElevationPolling)())},startAnugaModelCreationPolling:function(){return e((0,o.startAnugaModelCreationPolling)())},stopAnugaModelCreationPolling:function(){return e((0,o.stopAnugaModelCreationPolling)())},setVisibleUploaderPanel:function(t,n,r){return e((0,i.setVisibleUploaderPanel)(t,n,r))},setCreatingAnugaLayer:function(t){return e((0,o.setCreatingAnugaLayer)(t))},createAnugaBoundary:function(t){return e((0,o.createAnugaBoundary)(t))},createAnugaInflow:function(t){return e((0,o.createAnugaInflow)(t))},createAnugaStructure:function(t){return e((0,o.createAnugaStructure)(t))},createAnugaFriction:function(t){return e((0,o.createAnugaFriction)(t))},createAnugaMeshRegion:function(t){return e((0,o.createAnugaMeshRegion)(t))},createNetwork:function(t){return e((0,o.createNetwork)(t))}}}))(x);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||k(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t){return(W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function H(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return V(e)}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var K=n(45697),q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Y(r);if(o){var n=Y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return H(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),z(V(t=i.call(this,e)),"getSecondsFromHHMM",(function(e){console.log("userInputValue",e);var t,n,r=(t=e.split(":"),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(t,n)||k(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1],a=Number(o),l=Number(i);return console.log("hoursNumber",a),console.log("minutesNumber",l),!isNaN(a)&&isNaN(l)?(console.log("returning:",60*a),60*a):isNaN(a)||isNaN(l)?0:(console.log("returning:",60*(60*a+l)),60*(60*a+l))})),z(V(t),"findScenarioStatus",(function(e){var t;return"building server"===e.status?e.status:null!=e&&e.latest_run_is_valid||"error"===(null==e||null===(t=e.latest_run)||void 0===t?void 0:t.status)?e.latest_run.status:e.status})),z(V(t),"handleTextChange",(function(e,n){var r={};r[e.target.id]=e.target.value,t.props.updateAnugaScenario(n,r)})),z(V(t),"handleBoolChange",(function(e,n){var r={};r[e.target.id]=!n[e.target.id],t.props.updateAnugaScenario(n,r)})),z(V(t),"handleIntChange",(function(e,n){var r={};r[e.target.id]=parseInt(e.target.value,10),t.props.updateAnugaScenario(n,r)})),z(V(t),"handleNumberChange",(function(e,n){var r={};r[e.target.id]=parseFloat(e.target.value),t.props.updateAnugaScenario(n,r)})),z(V(t),"toHHMM",(function(e){if(!e)return"hh:mm";var t=parseInt(e.toString(),10);return[Math.floor(t/3600),Math.floor(t/60)%60,t%60].map((function(e){return e<10?"0".concat(e):e})).filter((function(e,t){return"00"!==e||t>0})).join(":").replace(/^0/,"").slice(0,-3)})),z(V(t),"handleTimeChange",(function(e,n){var r={tempTimeString:e.target.value};t.props.updateAnugaScenario(n,r)})),z(V(t),"handleTimeBlur",(function(e,n){var r=e.target.value;console.log("targetValue",r);var o=Math.max(0,t.getSecondsFromHHMM(r));console.log("seconds",o);var i={};i[e.target.id]=o,delete i.tempTimeString,t.props.updateAnugaScenario(n,i)})),t.state={scenarioTableTabs:["manage","compare"]},t.handleTextChange=t.handleTextChange.bind(V(t)),t.handleBoolChange=t.handleBoolChange.bind(V(t)),t.handleIntChange=t.handleIntChange.bind(V(t)),t.handleTimeChange=t.handleTimeChange.bind(V(t)),t.handleTimeBlur=t.handleTimeBlur.bind(V(t)),t}return t=a,(n=[{key:"render",value:function(){var e,t,n,r,o,i,a=this;return m().createElement("div",{id:"anuga-scenario-menu",className:"simple-view-panel",style:{top:"70px"}},m().createElement("div",{className:"menu-rows-container"},m().createElement("div",{className:"row menu-row-header",style:{height:"40px",textAlign:"left",fontSize:"large"}},"Scenarios",m().createElement("span",{id:"scenario-tab-button-group"},m().createElement(E.Button,{bsSize:"medium",style:{margin:"2px 0 -17px 20px",borderRadius:"6px 6px 0 0",color:this.state.scenarioTableTabs.includes("manage")?"#3363a0":"white",backgroundColor:this.state.scenarioTableTabs.includes("manage")?"white":"#6085b5"},onClick:function(){return a.state.scenarioTableTabs.includes("manage")?a.setState((function(e){return{scenarioTableTabs:G(e.scenarioTableTabs.filter((function(e,t){return"manage"!==e})))}})):a.setState((function(e){return{scenarioTableTabs:[].concat(G(e.scenarioTableTabs),["manage"])}}))}},"Manage"),m().createElement(E.Button,{bsSize:"medium",style:{margin:"2px 0 -17px 8px",borderRadius:"6px 6px 0 0",color:this.state.scenarioTableTabs.includes("advanced")?"#3363a0":"white",backgroundColor:this.state.scenarioTableTabs.includes("advanced")?"white":"#6085b5"},onClick:function(){return a.state.scenarioTableTabs.includes("advanced")?a.setState((function(e){return{scenarioTableTabs:G(e.scenarioTableTabs.filter((function(e,t){return"advanced"!==e})))}})):a.setState((function(e){return{scenarioTableTabs:[].concat(G(e.scenarioTableTabs),["advanced"])}}))}},"Advanced"),m().createElement(E.Button,{bsSize:"medium",style:{margin:"2px 0 -17px 8px",borderRadius:"6px 6px 0 0",color:this.state.scenarioTableTabs.includes("compare")?"#3363a0":"white",backgroundColor:this.state.scenarioTableTabs.includes("compare")?"white":"#6085b5"},onClick:function(){return a.state.scenarioTableTabs.includes("compare")?a.setState((function(e){return{scenarioTableTabs:G(e.scenarioTableTabs.filter((function(e,t){return"compare"!==e})))}})):a.setState((function(e){return{scenarioTableTabs:[].concat(G(e.scenarioTableTabs),["compare"])}}))}},"Compare")),m().createElement("span",{id:"new-scenario-button"},m().createElement(E.Button,{bsStyle:"success",bsSize:"xsmall",style:{margin:"2px",borderRadius:"2px"},onClick:function(){a.props.addAnugaScenario()}},"New Scenario")),m().createElement("span",{className:"btn glyphicon glyphicon-remove legend-close",onClick:function(){a.props.setAnugaScenarioMenu(!1),a.props.stopAnugaScenarioPolling()}})),m().createElement(E.Table,{className:"scenario-table"},m().createElement("thead",null,m().createElement("tr",{className:"scenario-table-header"},m().createElement("th",null,"Id"),m().createElement("th",null,"Name"),null!==(e=this.state.scenarioTableTabs)&&void 0!==e&&e.includes("manage")?m().createElement(m().Fragment,null,m().createElement("th",null,"Elevation"),m().createElement("th",null,"Boundary"),m().createElement("th",null,"Inflow")):null,null!==(t=this.state.scenarioTableTabs)&&void 0!==t&&t.includes("advanced")?m().createElement(m().Fragment,null,m().createElement("th",null,"Friction Map"),m().createElement("th",null,"Structures"),m().createElement("th",null,"Mesh Regions"),m().createElement("th",null,"Network"),null!==(n=this.state.scenarioTableTabs)&&void 0!==n&&n.includes("manage")?null:m().createElement("th",null)):null,null!==(r=this.state.scenarioTableTabs)&&void 0!==r&&r.includes("manage")?m().createElement(m().Fragment,null,m().createElement("th",null,"Resolution(m2)"),m().createElement("th",null,"Duration"),m().createElement("th",null,"Status"),m().createElement("th",null),m().createElement("th",null),m().createElement("th",null),m().createElement("th",null)):null,null!==(o=this.state.scenarioTableTabs)&&void 0!==o&&o.includes("compare")?m().createElement(m().Fragment,null,m().createElement("th",null,m().createElement("span",{id:"depth-difference-button"},m().createElement(E.Button,{bsStyle:"success",bsSize:"xsmall",className:this.props.readyToCompare?"":"disabled",style:{margin:"2px",borderRadius:"2px"},onClick:function(){a.props.compareScenarios(a.props.selectedScenarios)}},"Compare")))):null)),m().createElement("tbody",null,null===(i=this.props.scenarios)||void 0===i?void 0:i.map((function(e){var t,n,r,o,i,l,u,s,c,p,d,f;return m().createElement("tr",{className:"scenario-table-row"},m().createElement("td",null,e.id),m().createElement("td",null,m().createElement("input",{id:"name",key:"name-".concat(e.id),type:"text",className:"scenario-input",value:e.name,onChange:function(t){return a.handleTextChange(t,e)}})),null!==(t=a.state.scenarioTableTabs)&&void 0!==t&&t.includes("manage")?m().createElement(m().Fragment,null,m().createElement("td",null,m().createElement("select",{id:"elevation",key:"elevation-".concat(e.id),value:null==e?void 0:e.elevation,className:"scenario-select",onChange:function(t){return a.handleIntChange(t,e)}},m().createElement("option",{value:""},"-"),null===(n=a.props.elevations)||void 0===n?void 0:n.map((function(e){return m().createElement("option",{value:null==e?void 0:e.id},null==e?void 0:e.title)})))),m().createElement("td",null,m().createElement("select",{id:"boundary",key:"boundary-".concat(e.id),value:null==e?void 0:e.boundary,className:"scenario-select",onChange:function(t){return a.handleIntChange(t,e)}},m().createElement("option",{value:""},"-"),null===(r=a.props.boundaries)||void 0===r?void 0:r.map((function(e){return m().createElement("option",{value:null==e?void 0:e.id},null==e?void 0:e.title)})))),m().createElement("td",null,m().createElement("select",{id:"inflow",key:"inflow-".concat(e.id),value:null==e?void 0:e.inflow,className:"scenario-select",onChange:function(t){return a.handleIntChange(t,e)}},m().createElement("option",{value:""},"-"),null===(o=a.props.inflows)||void 0===o?void 0:o.map((function(e){return m().createElement("option",{value:null==e?void 0:e.id},null==e?void 0:e.title)}))))):null,null!==(i=a.state.scenarioTableTabs)&&void 0!==i&&i.includes("advanced")?m().createElement(m().Fragment,null,m().createElement("td",null,m().createElement("select",{id:"friction",key:"friction-".concat(e.id),value:null==e?void 0:e.friction,className:"scenario-select",onChange:function(t){return a.handleIntChange(t,e)}},m().createElement("option",{value:""},"-"),null===(l=a.props.frictions)||void 0===l?void 0:l.map((function(e){return m().createElement("option",{value:null==e?void 0:e.id},null==e?void 0:e.title)})))),m().createElement("td",null,m().createElement("select",{id:"structure",key:"structure-".concat(e.id),value:null==e?void 0:e.structure,className:"scenario-select",onChange:function(t){return a.handleIntChange(t,e)}},m().createElement("option",{value:""},"-"),null===(u=a.props.structures)||void 0===u?void 0:u.map((function(e){return m().createElement("option",{value:null==e?void 0:e.id},null==e?void 0:e.title)})))),m().createElement("td",null,m().createElement("select",{id:"mesh_region",key:"meshRegion-".concat(e.id),value:null==e?void 0:e.mesh_region,className:"scenario-select",onChange:function(t){return a.handleIntChange(t,e)}},m().createElement("option",{value:""},"-"),null===(s=a.props.meshRegions)||void 0===s?void 0:s.map((function(e){return m().createElement("option",{value:null==e?void 0:e.id},null==e?void 0:e.title)})))),m().createElement("td",null,m().createElement("select",{id:"network",key:"network-".concat(e.id),value:null==e?void 0:e.network,className:"scenario-select",onChange:function(t){return a.handleIntChange(t,e)}},m().createElement("option",{value:""},"-"),null===(c=a.props.networks)||void 0===c?void 0:c.map((function(e){return m().createElement("option",{value:null==e?void 0:e.id},null==e?void 0:e.title)})))),null!==(p=a.state.scenarioTableTabs)&&void 0!==p&&p.includes("manage")?null:m().createElement("td",null,m().createElement(E.Button,{bsStyle:"success",bsSize:"xsmall",style:{margin:"2px",borderRadius:"2px"},className:e.unsaved?null:"disabled",onClick:function(){a.props.saveAnugaScenario(e),a.props.setOpenMenuGroupId(null)}},"Build"))):null,null!==(d=a.state.scenarioTableTabs)&&void 0!==d&&d.includes("manage")?m().createElement(m().Fragment,null,m().createElement("td",null,m().createElement("input",{id:"resolution",key:"resolution-".concat(e.id),type:"number",className:"scenario-input",style:{width:"80px"},value:null==e?void 0:e.resolution,onChange:function(t){return a.handleNumberChange(t,e)}})),m().createElement("td",null,m().createElement("input",{id:"duration",key:"duration-".concat(e.id),type:"text",className:"scenario-input",style:{width:"80px"},value:e.tempTimeString||a.toHHMM(e.duration),onChange:function(t){return a.handleTimeChange(t,e)},onBlur:function(t){return a.handleTimeBlur(t,e)}})),m().createElement("td",null,a.findScenarioStatus(e)),m().createElement("td",null,m().createElement(E.Button,{bsStyle:"success",bsSize:"xsmall",style:{margin:"2px",borderRadius:"2px"},className:e.unsaved?null:"disabled",onClick:function(){a.props.saveAnugaScenario(e),a.props.setOpenMenuGroupId(null)}},"Build")),m().createElement("td",null,function(){var t;switch(a.findScenarioStatus(e)){case"built":return m().createElement(E.Button,{bsStyle:"success",bsSize:"xsmall",style:{margin:"2px",borderRadius:"2px"},onClick:function(){a.props.setAnugaScenarioMenu(!1),a.props.selectAnugaScenario(e),a.props.showAnugaRunMenu(!0)}},"Run");case"complete":return m().createElement(E.Button,{download:!0,href:null==e||null===(t=e.latest_run)||void 0===t?void 0:t.s3_package_url,bsStyle:"success",bsSize:"xsmall",style:{margin:"2px",borderRadius:"2px"}},m().createElement("span",{className:"glyphicon glyphicon-download","aria-hidden":"true"}));default:return m().createElement(E.Button,{bsStyle:"success",bsSize:"xsmall",className:"disabled",style:{margin:"2px",borderRadius:"2px"}},"Run")}}()),m().createElement("td",null,m().createElement(E.Button,{bsStyle:"info",bsSize:"xsmall",style:{margin:"2px",borderRadius:"2px"},onClick:function(){a.props.selectAnugaScenario(e),a.props.showAnugaScenarioLog(e.id)}},"Log")),m().createElement("td",null,m().createElement(E.Button,{bsStyle:"danger",bsSize:"xsmall",style:{margin:"2px",borderRadius:"2px",backgroundColor:"#622b2b"},onClick:a.findScenarioStatus(e).includes("%")?function(){confirm("Cancel Run?")&&a.props.cancelAnugaRun(e)}:function(){confirm("Delete Scenario?")&&a.props.deleteAnugaScenario(e)}},m().createElement("span",{className:"glyphicon glyphicon-trash","aria-hidden":"true"})))):null,null!==(f=a.state.scenarioTableTabs)&&void 0!==f&&f.includes("compare")?m().createElement(m().Fragment,null,m().createElement("td",null,m().createElement("span",{className:"btn glyphicon menu-row-glyph "+(null!=e&&e.selected?"glyphicon-ok":"glyphicon-remove"),style:{color:null!=e&&e.selected?"limegreen":"red",fontSize:"10px"},onClick:function(){a.props.toggleScenarioSelected(e)}}))):null)}))))))}}])&&U(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(m().Component);z(q,"propTypes",{anugaGroupLength:K.number,scenarios:K.array,boundaries:K.array,elevations:K.array,frictions:K.array,inflows:K.array,structures:K.array,meshRegions:K.array,networks:K.array,setOpenMenuGroupId:K.func,saveAnugaScenario:K.func,runAnugaScenario:K.func,updateAnugaScenario:K.func,selectAnugaScenario:K.func,showAnugaScenarioLog:K.func,setAnugaScenarioMenu:K.func,stopAnugaScenarioPolling:K.func,addAnugaScenario:K.func,deleteAnugaScenario:K.func,cancelAnugaRun:K.func,showAnugaRunMenu:K.func,toggleScenarioSelected:K.func,selectedScenarios:K.array,compareScenarios:K.func,readyToCompare:K.number}),z(q,"defaultProps",{});var Z=(0,f.connect)((function(e){var t,n,r,o,i,a,l,u,s;return{scenarios:null==e||null===(t=e.anuga)||void 0===t||null===(n=t.scenarios)||void 0===n?void 0:n.sort((function(e,t){return e.id-t.id})),selectedScenarios:_(e),readyToCompare:2===_(e).length,boundaries:null==e||null===(r=e.anuga)||void 0===r?void 0:r.boundaries,elevations:null==e||null===(o=e.anuga)||void 0===o?void 0:o.elevations,frictions:null==e||null===(i=e.anuga)||void 0===i?void 0:i.frictions,inflows:null==e||null===(a=e.anuga)||void 0===a?void 0:a.inflows,structures:null==e||null===(l=e.anuga)||void 0===l?void 0:l.structures,meshRegions:null==e||null===(u=e.anuga)||void 0===u?void 0:u.meshRegions,networks:null==e||null===(s=e.anuga)||void 0===s?void 0:s.networks}}),(function(e){return{setOpenMenuGroupId:function(t){return e((0,i.setOpenMenuGroupId)(t))},setAnugaScenarioMenu:function(t){return e((0,o.setAnugaScenarioMenu)(t))},runAnugaScenario:function(t){return e((0,o.runAnugaScenario)(t))},saveAnugaScenario:function(t){return e((0,o.saveAnugaScenario)(t))},updateAnugaScenario:function(t,n){return e((0,o.updateAnugaScenario)(t,n))},selectAnugaScenario:function(t){return e((0,o.selectAnugaScenario)(t))},showAnugaScenarioLog:function(t){return e((0,o.showAnugaScenarioLog)(t))},stopAnugaScenarioPolling:function(){return e((0,o.stopAnugaScenarioPolling)())},addAnugaScenario:function(){return e((0,o.addAnugaScenario)())},deleteAnugaScenario:function(t){return e((0,o.deleteAnugaScenario)(t))},cancelAnugaRun:function(t){return e((0,o.cancelAnugaRun)(t))},showAnugaRunMenu:function(t){return e((0,o.showAnugaRunMenu)(t))},toggleScenarioSelected:function(t){return e((0,o.toggleScenarioSelected)(t))},compareScenarios:function(t){return e((0,o.compareScenarios)(t))}}}))(q);function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t){return(Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ee(e,t){if(t&&("object"===J(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var re=n(45697),oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Q(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=te(r);if(o){var n=te(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ee(this,e)});function a(){return X(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=this;return m().createElement("div",{id:"publication-panel",className:"simple-view-panel",style:{top:"70px"}},m().createElement("div",{className:"menu-rows-container"},m().createElement("div",{className:"row menu-row-header",style:{height:"40px",textAlign:"left",fontSize:"large"}},"-- Under development -- Model review process.",m().createElement("span",{className:"btn glyphicon glyphicon-remove legend-close",onClick:function(){e.props.setReviewPanel(!1)}})),m().createElement("div",null,"Content")))}}])&&$(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(m().Component);function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e,t){return(le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ue(e,t){if(t&&("object"===ie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ne(oe,"propTypes",{setReviewPanel:re.func}),ne(oe,"defaultProps",{}),(0,f.connect)((function(e){var t,n;return{review:null==e||null===(t=e.anuga)||void 0===t||null===(n=t.projectData)||void 0===n?void 0:n.review}}),(function(e){return{setOpenMenuGroupId:function(t){return e((0,i.setOpenMenuGroupId)(t))},setReviewPanel:function(t){return e((0,o.setReviewPanel)(t))}}}))(oe);var pe=n(45697),de=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&le(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=se(r);if(o){var n=se(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ue(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={figureTitle:""},t}return t=a,(n=[{key:"render",value:function(){var e,t=this;return m().createElement("div",{id:"publication-panel",className:"simple-view-panel",style:{top:"70px"}},m().createElement("div",{className:"menu-rows-container"},m().createElement("div",{className:"row",style:{height:"20px",textAlign:"left",fontSize:"large"}},m().createElement("span",{className:"btn glyphicon glyphicon-remove legend-close",onClick:function(){t.props.setPublicationPanel(!1)}})),null===(e=this.props.publications)||void 0===e?void 0:e.map((function(e){var n,r;return m().createElement("div",{className:"row menu-row-header",style:{height:"40px",textAlign:"left",fontSize:"large"}},m().createElement("span",{style:{lineHeight:"40px"}},"Publish: ",null==e||null===(n=e.geostory)||void 0===n?void 0:n.title),m().createElement(E.Button,{bsStyle:"success",bsSize:"xlarge",style:{marginTop:"4px",borderRadius:"2px",float:"right",display:"inlineBlock"},onClick:function(){var t;window.open(null==e||null===(t=e.geostory)||void 0===t?void 0:t.detail_url,"_blank")}},"Edit Publication"),m().createElement("h3",{style:{display:"inlineBlock"}},"Figures"),null==e||null===(r=e.figures)||void 0===r?void 0:r.map((function(e){return m().createElement(E.Button,{bsStyle:"success",bsSize:"xsmall",style:{borderRadius:"2px",marginTop:"5px",display:"block",width:"375px",textAlign:"left"},onClick:function(){window.open(null==e?void 0:e.detail_url,"_blank")}},null==e?void 0:e.title)})),m().createElement("div",{style:{borderTop:"2px solid #ffffffad",paddingTop:"15px",marginTop:"5px",marginBottom:"10px"}},m().createElement("input",{id:"figure-input",key:"figure-input",className:"data-title-input",style:{width:"375px",marginTop:"3px",marginRight:"5px",float:"left"},type:"text",value:t.state.figureTitle,onChange:function(e){return t.setState({figureTitle:e.target.value})}}),m().createElement(E.Button,{bsStyle:"success",bsSize:"xsmall",style:{margin:"2px",borderRadius:"2px",float:"left"},onClick:function(){t.props.createFigure(t.state.figureTitle,e.id),t.setState({networkTitle:""})}},"Create Figure")))}))))}}])&&ae(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(m().Component);ce(de,"propTypes",{publications:pe.array,setPublicationPanel:pe.func,createFigure:pe.func,geonodeUrl:pe.string,figureTitle:pe.string}),ce(de,"defaultProps",{});var me=(0,f.connect)((function(e){var t,n;return{publications:(null==e||null===(t=e.anuga)||void 0===t?void 0:t.publications)||[],geonodeUrl:null==e||null===(n=e.gnsettings)||void 0===n?void 0:n.geonodeUrl}}),(function(e){return{setOpenMenuGroupId:function(t){return e((0,i.setOpenMenuGroupId)(t))},setPublicationPanel:function(t){return e((0,o.setPublicationPanel)(t))},createFigure:function(t,n){return e((0,o.createFigure)(t,n))}}}))(de);function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(e,t){return(ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function be(e,t){if(t&&("object"===fe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function he(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _e=n(45697),Ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ge(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ye(r);if(o){var n=ye(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return be(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={},t}return t=a,(n=[{key:"render",value:function(){var e,t=this;return m().createElement("div",{id:"anuga-scenario-log-viewer-container"},m().createElement("h5",{style:{marginLeft:"9px"}},"Scenario: ",null===(e=this.props.selectedScenario)||void 0===e?void 0:e.name,m().createElement("span",{className:"btn glyphicon glyphicon-remove legend-close",onClick:function(){return t.props.showAnugaScenarioLog(!1)}})),m().createElement("pre",{id:"anuga-scenario-log-viewer",style:{color:"white",background:"black"}},this.props.logText))}}])&&ve(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(m().Component);he(Ee,"propTypes",{selectedScenario:_e.object,showAnugaScenarioLog:_e.func,logText:_e.string}),he(Ee,"defaultProps",{});var we=(0,f.connect)((function(e){var t;return{selectedScenario:null==e||null===(t=e.anuga)||void 0===t?void 0:t.selectedScenario}}),(function(e){return{showAnugaScenarioLog:function(t){return e((0,o.showAnugaScenarioLog)(t))}}}))(Ee);function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Te(e,t){return(Te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Oe(e,t){if(t&&("object"===Ae(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ne(e)}function Ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Me(e){return(Me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Be=n(45697),Fe=(n(472986),function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Te(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Me(r);if(o){var n=Me(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Oe(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Pe(Ne(t=i.call(this,e)),"handleTextChange",(function(e,n){var r={};r[e.target.id]=e.target.value,t.props.updateNetwork(n,r)})),Pe(Ne(t),"handleBoolChange",(function(e,n){var r={};r[e.target.id]=!n[e.target.id],t.props.updateNetwork(n,r)})),Pe(Ne(t),"handleIntChange",(function(e,n){var r={};r[e.target.id]=parseInt(e.target.value,10),t.props.updateNetwork(n,r)})),Pe(Ne(t),"handleNumberChange",(function(e,n){var r={};r[e.target.id]=parseFloat(e.target.value),t.props.updateNetwork(n,r)})),t.state={},t}return t=a,(n=[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e,t=this;return m().createElement("div",{id:"anuga-network-container",className:"simple-view-panel",style:{top:"70px",height:"80%",width:"80%"}},m().createElement("div",{className:"menu-rows-container"},m().createElement("div",{className:"row menu-row-header"},m().createElement("h3",null,"Hydrology"),m().createElement("span",{className:"btn glyphicon glyphicon-remove legend-close",onClick:function(){t.props.setNetworkMenu(!1)}}),m().createElement("div",null,m().createElement(E.Table,{className:"network-table"},m().createElement("thead",null,m().createElement("tr",{className:"network-table-header"},m().createElement("th",null,"Id"),m().createElement("th",null,"Name"),m().createElement("th",null,"Elevation"),m().createElement("th",null,"Nodes"),m().createElement("th",null,"Links"),m().createElement("th",null,"Method"),m().createElement("th",null,"Inflow Dataset",m().createElement("br",null),"to Store Results"),m().createElement("th",null))),m().createElement("tbody",null,null===(e=this.props.networks)||void 0===e?void 0:e.map((function(e){var n,r,o,i;return m().createElement("tr",{className:"scenario-table-row"},m().createElement("td",null,e.id),m().createElement("td",null,e.title),m().createElement("td",null,m().createElement("select",{id:"elevation",key:"elevation-".concat(e.id),value:null==e?void 0:e.elevation,className:"scenario-select",onChange:function(n){return t.handleIntChange(n,e)}},m().createElement("option",{value:""},"-"),null===(n=t.props.elevations)||void 0===n?void 0:n.map((function(e){return m().createElement("option",{value:null==e?void 0:e.id},null==e?void 0:e.title)})))),m().createElement("td",null,m().createElement("select",{id:"node",key:"node-".concat(e.id),value:null==e?void 0:e.node,className:"scenario-select",onChange:function(n){return t.handleIntChange(n,e)}},m().createElement("option",{value:""},"-"),null===(r=t.props.nodes)||void 0===r?void 0:r.map((function(e){return m().createElement("option",{value:null==e?void 0:e.id},null==e?void 0:e.title)})))),m().createElement("td",null,m().createElement("select",{id:"links",key:"links-".concat(e.id),value:null==e?void 0:e.links,className:"scenario-select",onChange:function(n){return t.handleIntChange(n,e)}},m().createElement("option",{value:""},"-"),null===(o=t.props.links)||void 0===o?void 0:o.map((function(e){return m().createElement("option",{value:null==e?void 0:e.id},null==e?void 0:e.title)})))),m().createElement("td",null,m().createElement("select",{id:"method",key:"method",value:"rational",className:"scenario-select"},m().createElement("option",{value:"rational"},"rational"))),m().createElement("td",null,m().createElement("select",{id:"inflow",key:"inflow-".concat(e.id),value:null==e?void 0:e.inflow,className:"scenario-select",onChange:function(n){return t.handleIntChange(n,e)}},m().createElement("option",{value:""},"-"),null===(i=t.props.inflows)||void 0===i?void 0:i.map((function(e){return m().createElement("option",{value:null==e?void 0:e.id},null==e?void 0:e.title)})))),m().createElement("td",null,m().createElement(E.Button,{bsStyle:"success",bsSize:"xsmall",style:{margin:"2px",borderRadius:"2px"},onClick:function(){t.props.runNetwork(e)}},"Run")))}))))))))}}])&&Se(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(m().Component));Pe(Fe,"propTypes",{setNetworkMenu:Be.func,updateNetwork:Be.func,runNetwork:Be.func,nodes:Be.array,links:Be.array,inflows:Be.array,elevations:Be.array,networks:Be.array}),Pe(Fe,"defaultProps",{});var Re=(0,f.connect)((function(e){var t,n,r,o,i,a;return{networks:null==e||null===(t=e.anuga)||void 0===t||null===(n=t.networks)||void 0===n?void 0:n.sort((function(e,t){return e.id-t.id})),elevations:null==e||null===(r=e.anuga)||void 0===r?void 0:r.elevations,nodes:null==e||null===(o=e.anuga)||void 0===o?void 0:o.nodes,links:null==e||null===(i=e.anuga)||void 0===i?void 0:i.links,inflows:null==e||null===(a=e.anuga)||void 0===a?void 0:a.inflows}}),(function(e){return{setNetworkMenu:function(t){return e((0,o.setNetworkMenu)(t))},updateNetwork:function(t,n){return e((0,o.updateNetwork)(t,n))},runNetwork:function(t){return e((0,o.runNetwork)(t))}}}))(Fe);function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xe(e,t){return(xe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function De(e,t){if(t&&("object"===Ie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Le(e){return(Le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ke=n(45697),je=(n(472986),function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xe(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Le(r);if(o){var n=Le(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return De(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={},t}return t=a,(n=[{key:"componentDidMount",value:function(){this.props.updateComputeInstance()}},{key:"render",value:function(){var e,t,n=this;return m().createElement("div",{id:"anuga-run-menu-container",className:"simple-view-panel",style:{top:"70px"}},m().createElement("div",{className:"menu-rows-container"},m().createElement("div",{className:"row menu-row-header"},m().createElement("span",{className:"btn glyphicon glyphicon-remove legend-close",onClick:function(){n.props.showAnugaRunMenu(!1),n.props.setAnugaScenarioMenu(!0)}}),m().createElement("div",null,m().createElement(E.Table,{className:"run-server-table"},m().createElement("thead",null,m().createElement("tr",{className:"run-server-table-header"},m().createElement("th",{style:{width:"200px",textAlign:"left"}},"Run Scenario"),m().createElement("th",{style:{width:"100px"}},"Available Hours"),m().createElement("th",{style:{width:"80px"}},"Run"),m().createElement("th",{style:{width:"80px"}},"Download"))),m().createElement("tbody",null,m().createElement("tr",{className:"run-server-table-row",style:{marginTop:"15px"}},m().createElement("td",{style:{textAlign:"left"}},this.props.selectedScenario.name),m().createElement("td",null,"200"),m().createElement("td",null,m().createElement(E.Button,{bsStyle:"success",bsSize:"xsmall",style:{margin:"2px",borderRadius:"2px"},onClick:function(){n.props.runAnugaScenario(n.props.selectedScenario,0),n.props.showAnugaRunMenu(!1),n.props.showAnugaScenarioLog(n.props.selectedScenario.id),n.props.setAnugaScenarioMenu(!0)}},"Run")),m().createElement("td",null,m().createElement(E.Button,{download:!0,href:null===(e=this.props.selectedScenario)||void 0===e||null===(t=e.latest_run)||void 0===t?void 0:t.s3_package_url,bsStyle:"success",bsSize:"xsmall",style:{margin:"2px",borderRadius:"2px"}},m().createElement("span",{className:"glyphicon glyphicon-download","aria-hidden":"true"}))))))))),m().createElement(E.Button,{bsStyle:"success",bsSize:"small",style:{margin:"10px",borderRadius:"2px"},onClick:function(){n.props.showManageAccount(!0),n.props.showAnugaRunMenu(!1)}},"Manage Account"))}}])&&Ce(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(m().Component));Ge(je,"propTypes",{visibleAnugaRunMenu:ke.object,showAnugaRunMenu:ke.func,updateComputeInstance:ke.func,computeInstances:ke.array,selectedScenario:ke.object,runAnugaScenario:ke.func,setAnugaScenarioMenu:ke.func,showAnugaScenarioLog:ke.func,showManageAccount:ke.func}),Ge(je,"defaultProps",{});var Ue=(0,f.connect)((function(e){var t,n;return{selectedScenario:null==e||null===(t=e.anuga)||void 0===t?void 0:t.selectedScenario,computeInstances:null==e||null===(n=e.anuga)||void 0===n?void 0:n.computeInstances}}),(function(e){return{showAnugaRunMenu:function(t){return e((0,o.showAnugaRunMenu)(t))},updateComputeInstance:function(){return e((0,o.updateComputeInstance)())},runAnugaScenario:function(t,n){return e((0,o.runAnugaScenario)(t,n))},setAnugaScenarioMenu:function(t){return e((0,o.setAnugaScenarioMenu)(t))},showAnugaScenarioLog:function(t){return e((0,o.showAnugaScenarioLog)(t))},showManageAccount:function(t){return e((0,o.showManageAccount)(t))}}}))(je);function We(e){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function He(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ve(e,t){return(Ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ye(e,t){if(t&&("object"===We(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ze(e){return(ze=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qe=n(45697),Ze=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ve(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ze(r);if(o){var n=ze(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ye(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){this.props.gnResourceLoaded&&!this.props.isAnugaProject&&(console.log("componentDidUpdate initing Anuga"),this.props.initAnuga())}},{key:"render",value:function(){var e,t=this;return this.props.isAnugaProject?m().createElement("div",{id:"anuga-container"},m().createElement("div",{id:"anuga-inputs"},m().createElement("button",{key:"anuga-input-button",className:"simple-view-menu-button",style:{left:120},onClick:function(){t.props.setAnugaInputMenu(!t.props.showAnugaInputMenu),t.props.setOpenMenuGroupId(null)}},"Inputs")),this.props.showAnugaInputMenu?m().createElement(D,null):null,this.props.canEditAnugaMap&&this.props.hasEPSGset?m().createElement("div",{id:"anuga-scenario"},m().createElement("button",{key:"anuga-scenario-button",className:"simple-view-menu-button",style:{left:220},onClick:function(){t.props.setAnugaScenarioMenu(!t.props.showAnugaScenarioMenu),t.props.showAnugaScenarioMenu?t.props.stopAnugaScenarioPolling():t.props.startAnugaScenarioPolling(),t.props.setOpenMenuGroupId(null)}},"Scenarios"),this.props.showAnugaScenarioMenu?m().createElement(Z,null):null):null,this.props.canViewAnugaMap&&this.props.hasEPSGset?m().createElement("button",{id:"anugaContainer-results-button-01",key:"anugaContainer-".concat(null===(e=this.props.resultsGroup)||void 0===e?void 0:e.title),className:"simple-view-menu-button",style:{left:320},onClick:function(){t.props.setOpenMenuGroupId("Results")}},"Results"):null,this.props.canEditAnugaMap&&this.props.hasEPSGset?m().createElement("div",{id:"publication-panel-container"},m().createElement("button",{key:"publication-panel-button",className:"simple-view-menu-button disabled",style:{left:420},onClick:function(){t.props.setPublicationPanel(!t.props.showPublicationPanel),t.props.setOpenMenuGroupId(null)}},"Publish"),this.props.showPublicationPanel?m().createElement(me,null):null):null,this.props.visibleAnugaScenarioLogId?m().createElement(we,{logText:this.props.logText}):null,this.props.visibleAnugaRunMenu?m().createElement(Ue,null):null,this.props.showNetworkMenu?m().createElement(Re,null):null):null}}])&&He(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(m().Component);Ke(Ze,"propTypes",{initAnuga:qe.func,showAnugaInputMenu:qe.bool,setAnugaInputMenu:qe.func,showAnugaScenarioMenu:qe.bool,setAnugaScenarioMenu:qe.func,showAnugaResultMenu:qe.bool,setAnugaResultMenu:qe.func,showNetworkMenu:qe.bool,setReviewPanel:qe.func,showReviewPanel:qe.bool,setPublicationPanel:qe.func,showPublicationPanel:qe.bool,isAnugaMenuOpen:qe.bool,openMenuGroupId:qe.string,numberOfMenus:qe.number,setOpenMenuGroupId:qe.func,showAddAnugaElevationData:qe.bool,setAddAnugaElevation:qe.func,visibleAnugaScenarioLogId:qe.number,startAnugaScenarioPolling:qe.func,stopAnugaScenarioPolling:qe.func,updateCustomEditorsOptions:qe.func,logText:qe.string,gnResourceLoaded:qe.string,visibleAnugaRunMenu:qe.bool,canEditAnugaMap:qe.bool,canViewAnugaMap:qe.bool,hasEPSGset:qe.bool,resultsGroup:qe.object,isAnugaProject:qe.bool}),Ke(Ze,"defaultProps",{});const Je=(0,f.connect)((function(e){var t,n,r,o,i,a,l,u,s,c,p,d,m,f,v,g,b,_,E,w,A,S,T,O,N,M,P,B,F;return console.log("state for Anuga:",e),{logText:(null==e||null===(t=e.anuga)||void 0===t||null===(n=t.selectedScenario)||void 0===n?void 0:n.latest_run_is_valid)?(null==e||null===(r=e.anuga)||void 0===r||null===(o=r.selectedScenario)||void 0===o||null===(i=o.latest_run)||void 0===i?void 0:i.log)||"-":(null==e||null===(a=e.anuga)||void 0===a||null===(l=a.selectedScenario)||void 0===l?void 0:l.log)||"-",gnResourceLoaded:null==e||null===(u=e.gnresource)||void 0===u?void 0:u.id,isAnugaProject:null==e||null===(s=e.anuga)||void 0===s||null===(c=s.projectData)||void 0===c?void 0:c.id,hasEPSGset:!(null==e||null===(p=e.anuga)||void 0===p||null===(d=p.projectData)||void 0===d||!d.projection),showAnugaInputMenu:null==e||null===(m=e.anuga)||void 0===m?void 0:m.showAnugaInputMenu,showAnugaScenarioMenu:null==e||null===(f=e.anuga)||void 0===f?void 0:f.showAnugaScenarioMenu,showAnugaResultMenu:null==e||null===(v=e.anuga)||void 0===v?void 0:v.showAnugaResultMenu,showReviewPanel:null==e||null===(g=e.anuga)||void 0===g?void 0:g.showReviewPanel,showPublicationPanel:null==e||null===(b=e.anuga)||void 0===b?void 0:b.showPublicationPanel,isAnugaMenuOpen:(null==e||null===(_=e.anuga)||void 0===_?void 0:_.showAnugaInputMenu)||(null==e||null===(E=e.anuga)||void 0===E?void 0:E.showAnugaScenarioMenu)||(null==e||null===(w=e.anuga)||void 0===w?void 0:w.showAnugaResultMenu),openMenuGroupId:null==e||null===(A=e.simpleView)||void 0===A?void 0:A.openMenuGroupId,numberOfMenus:(null==e||null===(S=e.layers)||void 0===S||null===(T=S.groups)||void 0===T?void 0:T.length)||1,showAddAnugaElevationData:null==e||null===(O=e.anuga)||void 0===O?void 0:O.showAddAnugaElevationData,visibleAnugaScenarioLogId:null==e||null===(N=e.anuga)||void 0===N?void 0:N.visibleAnugaScenarioLogId,visibleIntroduction:null==e||!e.simpleView.hasOwnProperty("visibleIntroduction")||(null==e||null===(M=e.simpleView)||void 0===M?void 0:M.visibleIntroduction),showNetworkMenu:null==e||null===(P=e.anuga)||void 0===P?void 0:P.showNetworkMenu,visibleNetworkMenu:null==e||null===(B=e.anuga)||void 0===B?void 0:B.visibleNetworkMenu,visibleAnugaRunMenu:null==e||null===(F=e.anuga)||void 0===F?void 0:F.visibleAnugaRunMenu,canEditAnugaMap:h(e),canViewAnugaMap:y(e)}}),(function(e){return{initAnuga:function(){return e((0,o.initAnuga)())},setAnugaInputMenu:function(t){return e((0,o.setAnugaInputMenu)(t))},setAnugaScenarioMenu:function(t){return e((0,o.setAnugaScenarioMenu)(t))},setAnugaResultMenu:function(t){return e((0,o.setAnugaResultMenu)(t))},setReviewPanel:function(t){return e((0,o.setReviewPanel)(t))},setPublicationPanel:function(t){return e((0,o.setPublicationPanel)(t))},setOpenMenuGroupId:function(t){return e((0,i.setOpenMenuGroupId)(t))},startAnugaScenarioPolling:function(){return e((0,o.startAnugaScenarioPolling)())},stopAnugaScenarioPolling:function(){return e((0,o.stopAnugaScenarioPolling)())}}}))(Ze);var Xe=n(49977),$e=n.n(Xe),Qe=n(375875),et=n.n(Qe),tt=n(580416),nt=n(197395),rt=n(801550),ot=n(73443),it=n(433528),at=function(e,t){var n;if(0===(null===(n=e.data)||void 0===n?void 0:n.length))return $e().Observable.empty();var r=[(0,o.initAnuga)(),(0,o.setCreatingAnugaLayer)(!1)];return e.data.map((function(e){0===t.getState().layers.flat.filter((function(t){return t.name===(null==e?void 0:e.name)})).length&&(r.unshift((0,tt.A4)(e)),r.push((0,nt.show)({message:"New layers added... You should save your project.",title:"Layers added",uid:1e3,position:"tc"})))})),$e().Observable.from(r)};const lt=(0,r.rx)("Anuga",{component:Je,reducers:{anuga:function(){var e,t,n,r,l,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,c=arguments.length>1?arguments[1]:void 0;switch(c.type){case o.SET_CREATING_ANUGA_LAYER:return s(s({},u),{},{isCreatingAnugaLayer:c.isCreatingAnugaLayer});case o.UPDATE_ANUGA_SCENARIO:return s(s({},u),{},{scenarios:u.scenarios.map((function(e){return e.id===c.scenario.id?(c.scenario.unsaved=!0,c.scenario):e}))});case o.UPDATE_NETWORK:return s(s({},u),{},{networks:u.networks.map((function(e){return e.id===c.network.id?(c.network.unsaved=!0,c.network):e}))});case o.TOGGLE_SCENARIO_SELECTED:return s(s({},u),{},{scenarios:u.scenarios.map((function(e){return e.id===c.scenario.id?(c.scenario.selected=!e.selected,c.scenario):e}))});case o.SET_ANUGA_POLLING_DATA:var d=u.scenarios.map((function(e){var t=c.scenarios.filter((function(t){return e.id===t.id}))[0];return e.latest_run=s({},null==t?void 0:t.latest_run),e.status=(null==t?void 0:t.status)||"unsaved",e.latest_run_is_valid=null==t?void 0:t.latest_run_is_valid,e})),m=null===(e=u.scenarios)||void 0===e?void 0:e.map((function(e){return null==e?void 0:e.id})),f=null===(t=c.scenarios)||void 0===t||null===(n=t.filter((function(e){return!m.includes(e.id)})))||void 0===n?void 0:n[0];return f&&(d=[].concat(a(d),[f])),console.log("scenarios",d),s(s({},u),{},{scenarios:d,selectedScenario:c.scenarios.filter((function(e){return u.selectedScenarioId===e.id}))[0]});case o.ADD_ANUGA_SCENARIO:return s(s({},u),{},{scenarios:[].concat(a(u.scenarios),[{id:null,name:"",code:null,description:"",maximum_triangle_area:1e3,constant_rainfall:null,duration:null,status:"new",project:null==u||null===(r=u.projectData)||void 0===r?void 0:r.id,boundary:"",elevation:"",log:"log placeholder",unsaved:!1,selected:!1}])});case o.SET_ANUGA_SCENARIO_IS_LOADED:return s(s({},u),{},{scenarios:u.scenarios.map((function(e){return e.id===c.scenarioId?(e.isLoaded=c.isLoaded,e):e}))});case o.SHOW_ANUGA_SCENARIO_LOG:return s(s({},u),{},{visibleAnugaScenarioLogId:c.scenarioId});case o.SHOW_ANUGA_RUN_MENU:return s(s({},u),{},{visibleAnugaRunMenu:c.visible});case o.SAVE_ANUGA_SCENARIO_SUCCESS:return s(s({},u),{},{scenarios:u.scenarios.map((function(e){return e.id===c.scenario.id?(c.scenario.unsaved=!1,c.scenario):e.id?e:c.scenario}))});case o.SELECT_ANUGA_SCENARIO:return s(s({},u),{},{selectedScenarioId:c.scenario.id,selectedScenario:c.scenario});case o.SET_ANUGA_PROJECT_DATA:return s(s({},u),{},{projectData:c.data});case o.SET_ANUGA_SCENARIO_DATA:return 0===u.scenarios.length?s(s({},u),{},{scenarios:c.scenarios}):s(s({},u),{},{scenarios:null===(l=u.scenarios)||void 0===l?void 0:l.map((function(e){var t;return e.unsaved?s(s({},c.scenario),{},{unsaved:!0}):(null==e?void 0:e.id)===(null===(t=c.scenario)||void 0===t?void 0:t.id)?(c.scenario.unsaved=!1,c.scenario):e}))});case o.UPDATE_COMPUTE_INSTANCE_SUCCESS:return s(s({},u),{},{computeInstances:c.data});case o.SET_COMPARISON_DATA:return s(s({},u),{},{comparisons:c.data});case o.SET_ANUGA_INFLOW_DATA:return s(s({},u),{},{inflows:c.data});case o.SET_ANUGA_FRICTION_DATA:return s(s({},u),{},{frictions:c.data});case o.SET_ANUGA_STRUCTURE_DATA:return s(s({},u),{},{structures:c.data});case o.SET_ANUGA_BOUNDARY_DATA:return s(s({},u),{},{boundaries:c.data});case o.SET_ANUGA_ELEVATION_DATA:return s(s({},u),{},{elevations:c.data});case o.SET_ANUGA_FULL_MESH_DATA:return s(s({},u),{},{fullMeshes:c.data});case o.SET_ANUGA_MESH_REGION_DATA:return s(s({},u),{},{meshRegions:c.data});case o.SET_NETWORK_DATA:return s(s({},u),{},{networks:c.data});case o.SET_LUMPED_CATCHMENT_DATA:return s(s({},u),{},{catchments:c.data});case o.SET_ANUGA_NODES_DATA:return s(s({},u),{},{nodes:c.data});case o.SET_ANUGA_LINKS_DATA:return s(s({},u),{},{links:c.data});case o.SET_PUBLICATION_DATA:return s(s({},u),{},{publications:c.data});case i.SET_OPEN_MENU_GROUP_ID:return c.openMenuGroupId?s(s({},u),{},{showAnugaInputMenu:!1,showAnugaScenarioMenu:!1,showAnugaResultMenu:!1}):u;case o.SET_ANUGA_INPUT_MENU:return s(s({},u),{},{showAnugaInputMenu:c.visible,showAnugaScenarioMenu:!1,showAnugaResultMenu:!1,showNetworkMenu:!1,showReviewPanel:!1,showPublicationPanel:!1});case o.SET_ANUGA_SCENARIO_MENU:return s(s({},u),{},{showAnugaInputMenu:!1,showAnugaScenarioMenu:c.visible,showAnugaResultMenu:!1,showNetworkMenu:!1,showReviewPanel:!1,showPublicationPanel:!1});case o.SET_ANUGA_RESULT_MENU:return s(s({},u),{},{showAnugaScenarioMenu:!1,showAnugaInputMenu:!1,showAnugaResultMenu:c.visible,showNetworkMenu:!1,showReviewPanel:!1,showPublicationPanel:!1});case o.SET_NETWORK_MENU:return s(s({},u),{},{showAnugaInputMenu:!1,showAnugaScenarioMenu:!1,showAnugaResultMenu:!1,showNetworkMenu:c.visible,showReviewPanel:!1,showPublicationPanel:!1});case o.SET_REVIEW_PANEL:return s(s({},u),{},{showAnugaInputMenu:!1,showAnugaScenarioMenu:!1,showAnugaResultMenu:!1,showNetworkMenu:!1,showReviewPanel:c.visible,showPublicationPanel:!1});case o.SET_PUBLICATION_PANEL:return s(s({},u),{},{showAnugaInputMenu:!1,showAnugaScenarioMenu:!1,showAnugaResultMenu:!1,showNetworkMenu:!1,showReviewPanel:!1,showPublicationPanel:c.visible});default:return u}}},epics:{initAnugaEpic:function(e,t){return e.ofType(o.INIT_ANUGA,i.UPDATE_DATASET_TITLE_SUCCESS).filter((function(){var e;return null===(e=t.getState())||void 0===e?void 0:e.gnresource.id})).switchMap((function(){var e;return $e().Observable.from(et().post("/anuga/api/project/get_project_from_map_id/",{mapId:null===(e=t.getState())||void 0===e?void 0:e.gnresource.id}).catch((function(e){return console.log("**",e),"error"}))).filter((function(e){return(null==e?void 0:e.status)<=400})).filter((function(){var e,n;return!(null===(e=t.getState())||void 0===e||null===(n=e.security)||void 0===n||!n.user)})).switchMap((function(e){return $e().Observable.from(et().get("/anuga/api/project/".concat(e.data.projectId,"/"))).switchMap((function(t){var n;return $e().Observable.of((0,o.setAnugaProjectData)(t.data)).concat($e().Observable.of((0,i.setSvConfig)(null===(n=t.data)||void 0===n?void 0:n.simple_view_config)),$e().Observable.from(et().get("/anuga/api/".concat(e.data.projectId,"/scenario/"))).switchMap((function(e){return $e().Observable.of((0,o.setAnugaScenarioData)(e.data))})),$e().Observable.from(et().get("/anuga/api/".concat(e.data.projectId,"/boundary/"))).switchMap((function(e){return $e().Observable.of((0,o.setAnugaBoundaryData)(e.data))})),$e().Observable.from(et().get("/anuga/api/".concat(e.data.projectId,"/elevation/"))).switchMap((function(e){return $e().Observable.of((0,o.setAnugaElevationData)(e.data))})),$e().Observable.from(et().get("/anuga/api/".concat(e.data.projectId,"/inflow/"))).switchMap((function(e){return $e().Observable.of((0,o.setAnugaInflowData)(e.data))})),$e().Observable.from(et().get("/anuga/api/".concat(e.data.projectId,"/structure/"))).switchMap((function(e){return $e().Observable.of((0,o.setAnugaStructureData)(e.data))})),$e().Observable.from(et().get("/anuga/api/".concat(e.data.projectId,"/friction/"))).switchMap((function(e){return $e().Observable.of((0,o.setAnugaFrictionData)(e.data))})),$e().Observable.from(et().get("/anuga/api/".concat(e.data.projectId,"/full-mesh/"))).switchMap((function(e){return $e().Observable.of((0,o.setAnugaFullMeshData)(e.data))})),$e().Observable.from(et().get("/anuga/api/".concat(e.data.projectId,"/mesh-region/"))).switchMap((function(e){return $e().Observable.of((0,o.setAnugaMeshRegionData)(e.data))})),$e().Observable.from(et().get("/anuga/api/".concat(e.data.projectId,"/network/"))).switchMap((function(e){return $e().Observable.of((0,o.setNetworkData)(e.data))})),$e().Observable.from(et().get("/anuga/api/".concat(e.data.projectId,"/catchment/"))).switchMap((function(e){return $e().Observable.of((0,o.setCatchmentData)(e.data))})),$e().Observable.from(et().get("/anuga/api/".concat(e.data.projectId,"/nodes/"))).switchMap((function(e){return $e().Observable.of((0,o.setAnugaNodesData)(e.data))})),$e().Observable.from(et().get("/anuga/api/".concat(e.data.projectId,"/links/"))).switchMap((function(e){return $e().Observable.of((0,o.setAnugaLinksData)(e.data))})),$e().Observable.from(et().get("/anuga/api/".concat(e.data.projectId,"/comparison/"))).switchMap((function(e){return $e().Observable.of((0,o.setComparisonData)(e.data))})),$e().Observable.from(et().get("/anuga/api/".concat(e.data.projectId,"/publication/"))).switchMap((function(e){return $e().Observable.of((0,o.setPublicationData)(e.data))})),$e().Observable.of((0,o.startAnugaScenarioPolling)()))})).filter((function(e){return e}))}))})).filter((function(e){return e}))},cancelAnugaRunEpic:function(e,t){return e.ofType(o.CANCEL_ANUGA_RUN).concatMap((function(e){var n,r,o;return $e().Observable.from(et().post("/anuga/api/".concat(null===(n=t.getState())||void 0===n||null===(r=n.anuga)||void 0===r||null===(o=r.projectData)||void 0===o?void 0:o.id,"/scenario/").concat(e.scenario.id,"/run/"),e))})).concatMap((function(e){var n,r,o;return $e().Observable.from(et().post("/anuga/api/".concat(null===(n=t.getState())||void 0===n||null===(r=n.anuga)||void 0===r||null===(o=r.projectData)||void 0===o?void 0:o.id,"/scenario/").concat(e.scenario.id,"/cancel/"),{runId:e.scenario.latest_run.id}))})).concatMap((function(){return $e().Observable.of((0,nt.show)({message:"cancelling..."},"warning"))}))},pollAnugaElevationEpic:function(e,t){return e.ofType(o.START_ANUGA_ELEVATION_POLLING).switchMap((function(){return $e().Observable.timer(0,6e3).takeUntil(e.ofType(o.STOP_ANUGA_ELEVATION_POLLING)).switchMap((function(){var e,n,r;return $e().Observable.from(et().get("/anuga/api/".concat(null===(e=t.getState())||void 0===e||null===(n=e.anuga)||void 0===n||null===(r=n.projectData)||void 0===r?void 0:r.id,"/elevation/available/"))).catch((function(e){return e}))})).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(e){var n,r,a,l,u,s,c,p,d,m;return(null===(n=e.data)||void 0===n?void 0:n.length)<2?$e().Observable.empty():$e().Observable.concat($e().Observable.of((0,o.stopAnugaElevationPolling)()),$e().Observable.of((function(){var e,n,r,o=(null===(e=t.getState())||void 0===e||null===(n=e.layers)||void 0===n||null===(r=n.flat)||void 0===r?void 0:r.filter((function(e){return"wms"===e.type&&"background"!==e.group})))||[];return(0,tt.oZ)(o)})),$e().Observable.of((0,tt.A4)(e.data[0])),$e().Observable.of((0,tt.A4)(null===(r=e.data)||void 0===r?void 0:r[1])),$e().Observable.of((0,rt.Px)(null===(a=e.data[0])||void 0===a||null===(l=a.bbox)||void 0===l?void 0:l.bounds,null===(u=e.data[0])||void 0===u||null===(s=u.bbox)||void 0===s?void 0:s.crs,20)),$e().Observable.of((0,i.updateUploadStatus)("Complete")),$e().Observable.of((0,ot.nY)()),$e().Observable.of((0,o.initAnuga)()),$e().Observable.of((0,o.startAnugaModelCreationPolling)()),$e().Observable.of((function(){var e,n,r,o=(null===(e=t.getState())||void 0===e||null===(n=e.layers)||void 0===n||null===(r=n.flat)||void 0===r?void 0:r.filter((function(e){return"wms"===e.type&&"background"!==e.group})))||[];return(0,tt.oZ)(o)})),$e().Observable.of((0,tt.Dv)("Input Data.Elevations","Input Data",null===(c=t.getState())||void 0===c||null===(p=c.layers.groups.filter((function(e){return"Input Data"===e.id})))||void 0===p||null===(d=p[0])||void 0===d||null===(m=d.nodes)||void 0===m?void 0:m.length)))}))}))},runAnugaScenarioEpic:function(e,t){return e.ofType(o.RUN_ANUGA_SCENARIO).concatMap((function(e){var n,r,i;return $e().Observable.from(et().post("/anuga/api/".concat(null===(n=t.getState())||void 0===n||null===(r=n.anuga)||void 0===r||null===(i=r.projectData)||void 0===i?void 0:i.id,"/scenario/").concat(e.scenario.id,"/run/"),e).then((function(e){return(0,o.runAnugaScenarioSuccess)(e.data)})))})).concatMap((function(){return $e().Observable.of((0,o.setAnugaScenarioMenu)(!0))}))},runNetworkEpic:function(e,t){return e.ofType(o.RUN_NETWORK).concatMap((function(e){var n,r,i;return $e().Observable.from(et().post("/anuga/api/".concat(null===(n=t.getState())||void 0===n||null===(r=n.anuga)||void 0===r||null===(i=r.projectData)||void 0===i?void 0:i.id,"/network/").concat(e.network.id,"/run/"),e.network).then((function(e){return(0,o.runNetworkSuccess)(e.data)})))})).concatMap((function(){return $e().Observable.of((0,o.setNetworkMenu)(!0))}))},saveAnugaScenarioEpic:function(e,t){return e.ofType(o.SAVE_ANUGA_SCENARIO).switchMap((function(e){var n,r,i,a,l,u;return e.scenario.log=e.scenario.log||"anuga log",e.scenario.id?$e().Observable.from(et().put("/anuga/api/".concat(null===(a=t.getState())||void 0===a||null===(l=a.anuga)||void 0===l||null===(u=l.projectData)||void 0===u?void 0:u.id,"/scenario/").concat(e.scenario.id,"/"),e.scenario).then((function(e){return(0,o.saveAnugaScenarioSuccess)(e.data)})).catch((function(e){return(0,o.saveAnugaScenarioError)(e)}))):$e().Observable.from(et().post("/anuga/api/".concat(null===(n=t.getState())||void 0===n||null===(r=n.anuga)||void 0===r||null===(i=r.projectData)||void 0===i?void 0:i.id,"/scenario/"),e.scenario).then((function(e){return(0,o.saveAnugaScenarioSuccess)(e.data)})).catch((function(e){return(0,o.saveAnugaScenarioError)(e)})))}))},pollAnugaScenarioEpic:function(e,t){return e.ofType(o.START_ANUGA_SCENARIO_POLLING).switchMap((function(){return $e().Observable.timer(0,8e3).takeUntil(e.ofType(o.STOP_ANUGA_SCENARIO_POLLING)).switchMap((function(){var e,n,r;return $e().Observable.from(et().get("/anuga/api/".concat(null===(e=t.getState())||void 0===e||null===(n=e.anuga)||void 0===n||null===(r=n.projectData)||void 0===r?void 0:r.id,"/scenario/")).catch((function(e){return e}))).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(e){return $e().Observable.of((0,o.setAnugaPollingData)(e.data)).switchMap((function(e){var n,r,i,a,l,u,s,c,p,d,m,f,v,g,b,y,h,_,E,w,A,S,T,O,N,M,P,B,F,R,I,C=(null===(n=e.scenarios)||void 0===n?void 0:n.filter((function(e){var t;return"complete"===(null===(t=e.latest_run)||void 0===t?void 0:t.status)}))).filter((function(e){var n,r,o;return null===(n=t.getState())||void 0===n||null===(r=n.anuga)||void 0===r||null===(o=r.scenarios)||void 0===o?void 0:o.filter((function(n){var r,o,i,a,l,u,s,c,p,d,m,f=(null==n?void 0:n.id)===e.id,v=!n.isLoaded,g=(r=n,p=null==(o=t.getState())||null===(i=o.layers)||void 0===i||null===(a=i.flat)||void 0===a?void 0:a.filter((function(e){var t,n;return e.name===(null==r||null===(t=r.latest_run)||void 0===t||null===(n=t.gn_layer_depth_max)||void 0===n?void 0:n.name)})),d=null==o||null===(l=o.layers)||void 0===l||null===(u=l.flat)||void 0===u?void 0:u.filter((function(e){var t,n;return e.name===(null==r||null===(t=r.latest_run)||void 0===t||null===(n=t.gn_layer_depth_integrated_velocity_max)||void 0===n?void 0:n.name)})),m=null==o||null===(s=o.layers)||void 0===s||null===(c=s.flat)||void 0===c?void 0:c.filter((function(e){var t,n;return e.name===(null==r||null===(t=r.latest_run)||void 0===t||null===(n=t.gn_layer_velocity_max)||void 0===n?void 0:n.name)})),!(null!=p&&p.length&&null!=d&&d.length&&null!=m&&m.length));return f&&v&&g?e:null}))[0]}))[0],x=null===(r=t.getState())||void 0===r||null===(i=r.layers)||void 0===i||null===(a=i.flat)||void 0===a?void 0:a.map((function(e){return null==e?void 0:e.name})),D=(null===(l=t.getState())||void 0===l||null===(u=l.layers)||void 0===u||null===(s=u.flat)||void 0===s?void 0:s.filter((function(e){return"wms"===(null==e?void 0:e.type)&&"background"!==(null==e?void 0:e.group)})))||[],L=[null==C||null===(c=C.latest_run)||void 0===c||null===(p=c.gn_layer_depth_integrated_velocity_max)||void 0===p?void 0:p.title,null==C||null===(d=C.latest_run)||void 0===d||null===(m=d.gn_layer_depth_max)||void 0===m?void 0:m.title,null==C||null===(f=C.latest_run)||void 0===f||null===(v=f.gn_layer_velocity_max)||void 0===v?void 0:v.title],G=null===(g=t.getState())||void 0===g||null===(b=g.layers)||void 0===b||null===(y=b.flat)||void 0===y?void 0:y.filter((function(e){return L.includes(null==e?void 0:e.title)}));return console.log("remove these existingResultLayers:",G),C&&null!=C&&null!==(h=C.latest_run)&&void 0!==h&&null!==(_=h.gn_layer_depth_integrated_velocity_max)&&void 0!==_&&_.catalogURL&&null!=C&&null!==(E=C.latest_run)&&void 0!==E&&null!==(w=E.gn_layer_depth_max)&&void 0!==w&&w.catalogURL&&null!=C&&null!==(A=C.latest_run)&&void 0!==A&&null!==(S=A.gn_layer_velocity_max)&&void 0!==S&&S.catalogURL&&!x.includes(null==C||null===(T=C.latest_run)||void 0===T||null===(O=T.gn_layer_depth_integrated_velocity_max)||void 0===O?void 0:O.name)&&!x.includes(null==C||null===(N=C.latest_run)||void 0===N||null===(M=N.gn_layer_depth_max)||void 0===M?void 0:M.name)&&!x.includes(null==C||null===(P=C.latest_run)||void 0===P||null===(B=P.gn_layer_velocity_max)||void 0===B?void 0:B.name)?$e().Observable.concat($e().Observable.of((0,tt.$o)(null==G||null===(F=G[0])||void 0===F?void 0:F.id)),$e().Observable.of((0,tt.$o)(null==G||null===(R=G[1])||void 0===R?void 0:R.id)),$e().Observable.of((0,tt.$o)(null==G||null===(I=G[2])||void 0===I?void 0:I.id)),$e().Observable.of((0,o.setAnugaPollingData)(e.scenarios)),$e().Observable.of((0,tt.A4)(C.latest_run.gn_layer_depth_integrated_velocity_max)),$e().Observable.of((0,tt.A4)(C.latest_run.gn_layer_depth_max)),$e().Observable.of((0,tt.A4)(C.latest_run.gn_layer_velocity_max)),$e().Observable.of((0,o.setAnugaScenarioResultsLoaded)(null==C?void 0:C.id,!0)),$e().Observable.of((0,tt.oZ)(D))):$e().Observable.of((0,o.setAnugaPollingData)(e.scenarios))}))}))}))}))},deleteAnugaScenarioEpic:function(e,t){return e.ofType(o.DELETE_ANUGA_SCENARIO).concatMap((function(e){var n,r,o;return $e().Observable.from(et().delete("/anuga/api/".concat(null===(n=t.getState())||void 0===n||null===(r=n.anuga)||void 0===r||null===(o=r.projectData)||void 0===o?void 0:o.id,"/scenario/").concat(e.scenario.id,"/")))})).concatMap((function(e){return $e().Observable.of((0,o.deleteAnugaScenarioSuccess)(e.data))}))},createAnugaBoundaryEpic:function(e,t){return e.ofType(o.CREATE_ANUGA_BOUNDARY).switchMap((function(e){var n,r,o,i,a,l;return $e().Observable.from(et().post("/anuga/api/".concat(null===(n=t.getState())||void 0===n||null===(r=n.anuga)||void 0===r||null===(o=r.projectData)||void 0===o?void 0:o.id,"/boundary/"),{project:null===(i=t.getState())||void 0===i||null===(a=i.anuga)||void 0===a||null===(l=a.projectData)||void 0===l?void 0:l.id,title:e.boundaryTitle}).catch((function(e){return e})))})).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(){return $e().Observable.of((0,o.addAnugaBoundary)())}))},createAnugaFrictionEpic:function(e,t){return e.ofType(o.CREATE_ANUGA_FRICTION).switchMap((function(e){var n,r,o,i,a,l;return $e().Observable.from(et().post("/anuga/api/".concat(null===(n=t.getState())||void 0===n||null===(r=n.anuga)||void 0===r||null===(o=r.projectData)||void 0===o?void 0:o.id,"/friction/"),{project:null===(i=t.getState())||void 0===i||null===(a=i.anuga)||void 0===a||null===(l=a.projectData)||void 0===l?void 0:l.id,title:e.frictionTitle}).catch((function(e){return e})))})).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(){return $e().Observable.of((0,o.addAnugaFriction)())}))},createAnugaInflowEpic:function(e,t){return e.ofType(o.CREATE_ANUGA_INFLOW).switchMap((function(e){var n,r,o,i,a,l;return $e().Observable.from(et().post("/anuga/api/".concat(null===(n=t.getState())||void 0===n||null===(r=n.anuga)||void 0===r||null===(o=r.projectData)||void 0===o?void 0:o.id,"/inflow/"),{project:null===(i=t.getState())||void 0===i||null===(a=i.anuga)||void 0===a||null===(l=a.projectData)||void 0===l?void 0:l.id,title:e.inflowTitle}).catch((function(e){return e})))})).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(){return $e().Observable.of((0,o.addAnugaInflow)())}))},createAnugaStructureEpic:function(e,t){return e.ofType(o.CREATE_ANUGA_STRUCTURE).switchMap((function(e){var n,r,o,i,a,l;return $e().Observable.from(et().post("/anuga/api/".concat(null===(n=t.getState())||void 0===n||null===(r=n.anuga)||void 0===r||null===(o=r.projectData)||void 0===o?void 0:o.id,"/structure/"),{project:null===(i=t.getState())||void 0===i||null===(a=i.anuga)||void 0===a||null===(l=a.projectData)||void 0===l?void 0:l.id,title:e.structureTitle}).catch((function(e){return e})))})).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(){return $e().Observable.of((0,o.addAnugaStructure)())}))},createAnugaMeshRegionEpic:function(e,t){return e.ofType(o.CREATE_ANUGA_MESH_REGION).switchMap((function(e){var n,r,o,i,a,l;return $e().Observable.from(et().post("/anuga/api/".concat(null===(n=t.getState())||void 0===n||null===(r=n.anuga)||void 0===r||null===(o=r.projectData)||void 0===o?void 0:o.id,"/mesh-region/"),{project:null===(i=t.getState())||void 0===i||null===(a=i.anuga)||void 0===a||null===(l=a.projectData)||void 0===l?void 0:l.id,title:e.meshRegionTitle}).catch((function(e){return e})))})).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(){return $e().Observable.of((0,o.addAnugaMeshRegion)())}))},createNetworkEpic:function(e,t){return e.ofType(o.CREATE_NETWORK).switchMap((function(e){var n,r,o,i,a,l;return $e().Observable.from(et().post("/anuga/api/".concat(null===(n=t.getState())||void 0===n||null===(r=n.anuga)||void 0===r||null===(o=r.projectData)||void 0===o?void 0:o.id,"/network/"),{project:null===(i=t.getState())||void 0===i||null===(a=i.anuga)||void 0===a||null===(l=a.projectData)||void 0===l?void 0:l.id,title:e.networkTitle}).catch((function(e){return e})))})).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(){return $e().Observable.of((0,o.addNetwork)())}))},createCatchmentEpic:function(e,t){return e.ofType(o.CREATE_LUMPED_CATCHMENT).switchMap((function(e){var n,r,o,i,a,l;return $e().Observable.from(et().post("/anuga/api/".concat(null===(n=t.getState())||void 0===n||null===(r=n.anuga)||void 0===r||null===(o=r.projectData)||void 0===o?void 0:o.id,"/catchment/"),{project:null===(i=t.getState())||void 0===i||null===(a=i.anuga)||void 0===a||null===(l=a.projectData)||void 0===l?void 0:l.id,title:e.catchmentTitle}).catch((function(e){return e})))})).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(){return $e().Observable.of((0,o.addCatchment)())}))},createNodesEpic:function(e,t){return e.ofType(o.CREATE_NODES).switchMap((function(e){var n,r,o,i,a,l;return $e().Observable.from(et().post("/anuga/api/".concat(null===(n=t.getState())||void 0===n||null===(r=n.anuga)||void 0===r||null===(o=r.projectData)||void 0===o?void 0:o.id,"/nodes/"),{project:null===(i=t.getState())||void 0===i||null===(a=i.anuga)||void 0===a||null===(l=a.projectData)||void 0===l?void 0:l.id,title:e.nodesTitle}).catch((function(e){return e})))})).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(){return $e().Observable.of((0,o.addNodes)())}))},createLinksEpic:function(e,t){return e.ofType(o.CREATE_LINKS).switchMap((function(e){var n,r,o,i,a,l;return $e().Observable.from(et().post("/anuga/api/".concat(null===(n=t.getState())||void 0===n||null===(r=n.anuga)||void 0===r||null===(o=r.projectData)||void 0===o?void 0:o.id,"/links/"),{project:null===(i=t.getState())||void 0===i||null===(a=i.anuga)||void 0===a||null===(l=a.projectData)||void 0===l?void 0:l.id,title:e.linksTitle}).catch((function(e){return e})))})).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(){return $e().Observable.of((0,o.addLinks)())}))},createFigureEpic:function(e,t){return e.ofType(o.CREATE_FIGURE).switchMap((function(e){var n,r,o;return $e().Observable.from(et().post("/anuga/api/".concat(null===(n=t.getState())||void 0===n||null===(r=n.anuga)||void 0===r||null===(o=r.projectData)||void 0===o?void 0:o.id,"/publication/").concat(e.publicationId,"/create-figure/"),{title:e.figureTitle}).catch((function(e){return e})))})).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(e){var t;return console.log("response1:",e),window.open(null==e||null===(t=e.data)||void 0===t?void 0:t.detail_url,"_blank").focus(),$e().Observable.of((0,o.initAnuga)())}))},addAnugaBoundaryEpic:function(e,t){return e.ofType(o.ADD_ANUGA_BOUNDARY).switchMap((function(){var e,n,r;return $e().Observable.from(et().get("/anuga/api/".concat(null===(e=t.getState())||void 0===e||null===(n=e.anuga)||void 0===n||null===(r=n.projectData)||void 0===r?void 0:r.id,"/boundary/available/")).catch((function(e){return e}))).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(e){return at(e,t)}))}))},addAnugaFrictionEpic:function(e,t){return e.ofType(o.ADD_ANUGA_FRICTION).switchMap((function(){var e,n,r;return $e().Observable.from(et().get("/anuga/api/".concat(null===(e=t.getState())||void 0===e||null===(n=e.anuga)||void 0===n||null===(r=n.projectData)||void 0===r?void 0:r.id,"/friction/available/")).catch((function(e){return e}))).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(e){return at(e,t)}))}))},addAnugaInflowEpic:function(e,t){return e.ofType(o.ADD_ANUGA_INFLOW).switchMap((function(){var e,n,r;return $e().Observable.from(et().get("/anuga/api/".concat(null===(e=t.getState())||void 0===e||null===(n=e.anuga)||void 0===n||null===(r=n.projectData)||void 0===r?void 0:r.id,"/inflow/available/")).catch((function(e){return e}))).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(e){return at(e,t)}))}))},addAnugaStructureEpic:function(e,t){return e.ofType(o.ADD_ANUGA_STRUCTURE).switchMap((function(){var e,n,r;return $e().Observable.from(et().get("/anuga/api/".concat(null===(e=t.getState())||void 0===e||null===(n=e.anuga)||void 0===n||null===(r=n.projectData)||void 0===r?void 0:r.id,"/structure/available/")).catch((function(e){return e}))).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(e){return at(e,t)}))}))},addAnugaFullMeshEpic:function(e,t){return e.ofType(o.ADD_ANUGA_FULL_MESH).switchMap((function(){var e,n,r;return $e().Observable.from(et().get("/anuga/api/".concat(null===(e=t.getState())||void 0===e||null===(n=e.anuga)||void 0===n||null===(r=n.projectData)||void 0===r?void 0:r.id,"/full-mesh/available/")).catch((function(e){return e}))).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(e){return at(e,t)}))}))},addAnugaMeshRegionEpic:function(e,t){return e.ofType(o.ADD_ANUGA_MESH_REGION).switchMap((function(){var e,n,r;return $e().Observable.from(et().get("/anuga/api/".concat(null===(e=t.getState())||void 0===e||null===(n=e.anuga)||void 0===n||null===(r=n.projectData)||void 0===r?void 0:r.id,"/mesh-region/available/")).catch((function(e){return e}))).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(e){return at(e,t)}))}))},addCatchmentEpic:function(e,t){return e.ofType(o.ADD_LUMPED_CATCHMENT).switchMap((function(){var e,n,r;return $e().Observable.from(et().get("/anuga/api/".concat(null===(e=t.getState())||void 0===e||null===(n=e.anuga)||void 0===n||null===(r=n.projectData)||void 0===r?void 0:r.id,"/catchment/available/")).catch((function(e){return e}))).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(e){return at(e,t)}))}))},addNodesEpic:function(e,t){return e.ofType(o.ADD_NODES).switchMap((function(){var e,n,r;return $e().Observable.from(et().get("/anuga/api/".concat(null===(e=t.getState())||void 0===e||null===(n=e.anuga)||void 0===n||null===(r=n.projectData)||void 0===r?void 0:r.id,"/nodes/available/")).catch((function(e){return e}))).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(e){return at(e,t)}))}))},addLinksEpic:function(e,t){return e.ofType(o.ADD_LINKS).switchMap((function(){var e,n,r;return $e().Observable.from(et().get("/anuga/api/".concat(null===(e=t.getState())||void 0===e||null===(n=e.anuga)||void 0===n||null===(r=n.projectData)||void 0===r?void 0:r.id,"/links/available/")).catch((function(e){return e}))).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(e){return at(e,t)}))}))},prePopulateAnugaFeatureGridWithDefaults:function(e,t){return e.ofType(it.IN).concatMap((function(e){return $e().Observable.of(e)})).filter((function(){return["geonode:bdy_","geonode:inf_","geonode:str_","geonode:fri_","geonode:mes_"].some((function(e){var n,r;return null===(n=t.getState())||void 0===n||null===(r=n.featuregrid)||void 0===r?void 0:r.selectedLayer.includes(e)}))})).concatMap((function(e){var n,r,o,i,a;return null!=e&&null!==(n=e.features)&&void 0!==n&&n[0]&&(null===(r=Object.keys(null==e||null===(o=e.features)||void 0===o?void 0:o[0]))||void 0===r?void 0:r.length)>0?$e().Observable.empty():(e.features[0].properties={"geonode:bdy_":{location:"External",boundary:"Dirichlet"},"geonode:inf_":{type:"Rainfall",data:100},"geonode:str_":{method:"Holes"},"geonode:fri_":{manning:.035},"geonode:mes_":{resolution:10}}[null===(i=t.getState())||void 0===i||null===(a=i.featuregrid)||void 0===a?void 0:a.selectedLayer.substring(0,12)],$e().Observable.of(e))}))},updateComputeInstanceEpic:function(e,t){return e.ofType(o.UPDATE_COMPUTE_INSTANCE).switchMap((function(){var e,n,r;return $e().Observable.from(et().get("/anuga/api/".concat(null===(e=t.getState())||void 0===e||null===(n=e.anuga)||void 0===n||null===(r=n.projectData)||void 0===r?void 0:r.id,"/compute-instance/"))).switchMap((function(e){return $e().Observable.of((0,o.updateComputeInstanceSuccess)(e.data))}))}))},updateAnugaModelTitle:function(e,t){return e.ofType(i.UPDATE_DATASET_TITLE).switchMap((function(e){return $e().Observable.from(et().get("/api/v2/datasets?search=".concat(e.datasetName.split("geonode:")[1],"&search_fields=name"))).switchMap((function(n){var r,o,i,a,l,u,s,c,p,d,m=parseInt(null==n||null===(r=n.data)||void 0===r||null===(o=r.datasets)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.pk,10),f=null===(a=(c=null==t?void 0:t.getState(),p={elevations:"elevation",boundaries:"boundary",frictions:"friction",inflows:"inflow",meshRegions:"mesh-region",structures:"structure",catchments:"catchment",nodes:"nodes",links:"links"},d=Array(),["elevations","boundaries","frictions","inflows","meshRegions","structures","catchments","nodes","links"].map((function(e){var t;null==c||null===(t=c.anuga)||void 0===t||t[e].map((function(t){d.push(g(g({},t),{},{apiKey:p[e]}))}))})),d).filter((function(e){return e.gn_layer===m})))||void 0===a?void 0:a[0];return $e().Observable.from(et().patch("/anuga/api/".concat(null===(l=t.getState())||void 0===l||null===(u=l.anuga)||void 0===u||null===(s=u.projectData)||void 0===s?void 0:s.id,"/").concat(f.apiKey,"/").concat(f.id,"/"),{title:e.newTitle}))})).switchMap((function(){return $e().Observable.empty()}))}))},pollAnugaModelCreationEpic:function(e){return e.ofType(o.START_ANUGA_MODEL_CREATION_POLLING).switchMap((function(){return $e().Observable.timer(0,1e4).takeUntil(e.ofType(o.STOP_ANUGA_MODEL_CREATION_POLLING)).switchMap((function(){return $e().Observable.concat($e().Observable.of((0,o.addAnugaBoundary)()),$e().Observable.of((0,o.addAnugaFriction)()),$e().Observable.of((0,o.addAnugaStructure)()),$e().Observable.of((0,o.addAnugaInflow)()),$e().Observable.of((0,o.addAnugaFullMesh)()),$e().Observable.of((0,o.addAnugaMeshRegion)()),$e().Observable.of((0,o.addNetwork)()),$e().Observable.of((0,o.addCatchment)()),$e().Observable.of((0,o.addNodes)()),$e().Observable.of((0,o.addLinks)()))}))}))},compareScenarioEpic:function(e,t){return e.ofType(o.COMPARE_SCENARIOS).concatMap((function(e){var n,r,i;return $e().Observable.from(et().post("/anuga/api/".concat(null===(n=t.getState())||void 0===n||null===(r=n.anuga)||void 0===r||null===(i=r.projectData)||void 0===i?void 0:i.id,"/scenario/compare/"),e.scenarios).then((function(e){return(0,o.compareScenariosSuccess)(e.data)})))}))},pollComparisonEpic:function(e,t){return e.ofType(i.SET_OPEN_MENU_GROUP_ID).filter((function(e){return"Results"===(null==e?void 0:e.openMenuGroupId)})).switchMap((function(){return $e().Observable.timer(0,1e4).takeUntil(e.ofType(o.STOP_COMPARISON_POLLING)).switchMap((function(){return $e().Observable.concat($e().Observable.of((0,o.addComparison)()))}))}))},addComparisonEpic:function(e,t){return e.ofType(o.ADD_COMPARISON).switchMap((function(){var e,n,r;return $e().Observable.from(et().get("/anuga/api/".concat(null===(e=t.getState())||void 0===e||null===(n=e.anuga)||void 0===n||null===(r=n.projectData)||void 0===r?void 0:r.id,"/comparison/available/")).catch((function(e){return e}))).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(e){return at(e,t)}))}))}}})},368658:(e,t,n)=>{function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(197395).SHOW_NOTIFICATION,l=n(423570),u="INIT_ANUGA",s="SET_ANUGA_INPUT_MENU",c="SET_ANUGA_SCENARIO_MENU",p="SET_ANUGA_RESULT_MENU",d="SET_NETWORK_MENU",m="SET_REVIEW_PANEL",f="SET_PUBLICATION_PANEL",v="SET_ANUGA_PROJECT_DATA",g="SET_ANUGA_SCENARIO_DATA",b="SET_ANUGA_BOUNDARY_DATA",y="SET_ANUGA_FRICTION_DATA",h="SET_ANUGA_INFLOW_DATA",_="SET_ANUGA_STRUCTURE_DATA",E="SET_ANUGA_FULL_MESH_DATA",w="SET_ANUGA_MESH_REGION_DATA",A="SET_NETWORK_DATA",S="SET_LUMPED_CATCHMENT_DATA",T="SET_ANUGA_NODES_DATA",O="SET_ANUGA_LINKS_DATA",N="SET_PUBLICATION_DATA",M="CREATE_ANUGA_BOUNDARY",P="CREATE_ANUGA_FRICTION",B="CREATE_ANUGA_INFLOW",F="CREATE_ANUGA_STRUCTURE",R="CREATE_ANUGA_MESH_REGION",I="CREATE_NETWORK",C="CREATE_LUMPED_CATCHMENT",x="CREATE_NODES",D="CREATE_LINKS",L="CREATE_FIGURE",G="ADD_ANUGA_BOUNDARY",k="ADD_ANUGA_FRICTION",j="ADD_ANUGA_INFLOW",U="ADD_ANUGA_STRUCTURE",W="ADD_ANUGA_FULL_MESH",H="ADD_ANUGA_MESH_REGION",V="ADD_ANUGA_NETWORK",Y="ADD_LUMPED_CATCHMENT",z="ADD_NODES",K="ADD_LINKS",q="ADD_COMPARISON",Z="SET_ANUGA_ELEVATION_DATA",J="CREATE_ANUGA_ELEVATION_FROM_LAYER",X="SET_ADD_ANUGA_ELEVATION_DATA",$="ADD_ANUGA_SCENARIO",Q="RUN_ANUGA_SCENARIO",ee="RUN_ANUGA_SCENARIO_SUCCESS",te="RUN_NETWORK",ne="RUN_NETWORK_SUCCESS",re="SAVE_ANUGA_SCENARIO",oe="SAVE_ANUGA_SCENARIO_SUCCESS",ie="SAVE_ANUGA_SCENARIO_ERROR",ae="DELETE_ANUGA_SCENARIO",le="SHOW_ANUGA_SCENARIO_LOG",ue="SHOW_ANUGA_RUN_MENU",se="START_ANUGA_SCENARIO_POLLING",ce="STOP_ANUGA_SCENARIO_POLLING",pe="START_ANUGA_ELEVATION_POLLING",de="STOP_ANUGA_ELEVATION_POLLING",me="START_ANUGA_MODEL_CREATION_POLLING",fe="STOP_ANUGA_MODEL_CREATION_POLLING",ve="START_COMPARISON_POLLING",ge="STOP_COMPARISON_POLLING",be="SET_COMPARISON_DATA",ye="SET_ANUGA_POLLING_DATA",he="UPDATE_ANUGA_SCENARIO",_e="UPDATE_NETWORK",Ee="SELECT_ANUGA_SCENARIO",we="SET_CREATING_ANUGA_LAYER",Ae="SET_ANUGA_SCENARIO_IS_LOADED",Se="CANCEL_ANUGA_RUN",Te="UPDATE_COMPUTE_INSTANCE",Oe="UPDATE_COMPUTE_INSTANCE_SUCCESS",Ne="TOGGLE_SCENARIO_SELECTED",Me="SHOW_MANAGE_ACCOUNT",Pe="COMPARE_SCENARIOS",Be="COMPARE_SCENARIOS_SUCCESS";e.exports={INIT_ANUGA:u,initAnuga:function(){return{type:u}},SET_ANUGA_INPUT_MENU:s,setAnugaInputMenu:function(e){return{type:s,visible:e}},SET_ANUGA_SCENARIO_MENU:c,setAnugaScenarioMenu:function(e){return{type:c,visible:e}},SET_ANUGA_RESULT_MENU:p,setAnugaResultMenu:function(e){return{type:p,visible:e}},SET_REVIEW_PANEL:m,setReviewPanel:function(e){return{type:m,visible:e}},SET_PUBLICATION_PANEL:f,setPublicationPanel:function(e){return{type:f,visible:e}},SET_ANUGA_PROJECT_DATA:v,setAnugaProjectData:function(e){return{type:v,data:e}},SET_ANUGA_SCENARIO_DATA:g,setAnugaScenarioData:function(e){return{type:g,scenarios:e}},SET_ANUGA_ELEVATION_DATA:Z,setAnugaElevationData:function(e){return{type:Z,data:e}},SET_ANUGA_BOUNDARY_DATA:b,setAnugaBoundaryData:function(e){return{type:b,data:e}},SET_ANUGA_FRICTION_DATA:y,setAnugaFrictionData:function(e){return{type:y,data:e}},SET_ANUGA_INFLOW_DATA:h,setAnugaInflowData:function(e){return{type:h,data:e}},SET_ANUGA_STRUCTURE_DATA:_,setAnugaStructureData:function(e){return{type:_,data:e}},SET_ANUGA_FULL_MESH_DATA:E,setAnugaFullMeshData:function(e){return{type:E,data:e}},SET_ANUGA_MESH_REGION_DATA:w,setAnugaMeshRegionData:function(e){return{type:w,data:e}},SET_NETWORK_DATA:A,setNetworkData:function(e){return{type:A,data:e}},SET_LUMPED_CATCHMENT_DATA:S,setCatchmentData:function(e){return{type:S,data:e}},SET_ANUGA_NODES_DATA:T,setAnugaNodesData:function(e){return{type:T,data:e}},SET_ANUGA_LINKS_DATA:O,setAnugaLinksData:function(e){return{type:O,data:e}},SET_PUBLICATION_DATA:N,setPublicationData:function(e){return{type:N,data:e}},CREATE_ANUGA_BOUNDARY:M,createAnugaBoundary:function(e){return{type:M,boundaryTitle:e}},CREATE_ANUGA_FRICTION:P,createAnugaFriction:function(e){return{type:P,frictionTitle:e}},CREATE_ANUGA_INFLOW:B,createAnugaInflow:function(e){return{type:B,inflowTitle:e}},CREATE_ANUGA_STRUCTURE:F,createAnugaStructure:function(e){return{type:F,structureTitle:e}},CREATE_ANUGA_MESH_REGION:R,createAnugaMeshRegion:function(e){return{type:R,meshRegionTitle:e}},CREATE_NETWORK:I,createNetwork:function(e){return{type:I,networkTitle:e}},CREATE_LUMPED_CATCHMENT:C,createCatchment:function(e){return{type:C,catchmentTitle:e}},CREATE_NODES:x,createNodes:function(e){return{type:x,nodesTitle:e}},CREATE_LINKS:D,createLinks:function(e){return{type:D,linksTitle:e}},CREATE_FIGURE:L,createFigure:function(e,t){return{type:L,figureTitle:e,publicationId:t}},ADD_ANUGA_BOUNDARY:G,addAnugaBoundary:function(){return{type:G}},ADD_ANUGA_FRICTION:k,addAnugaFriction:function(){return{type:k}},ADD_ANUGA_INFLOW:j,addAnugaInflow:function(){return{type:j}},ADD_ANUGA_STRUCTURE:U,addAnugaStructure:function(){return{type:U}},ADD_ANUGA_MESH_REGION:H,addAnugaMeshRegion:function(){return{type:H}},ADD_ANUGA_FULL_MESH:W,addAnugaFullMesh:function(){return{type:W}},ADD_NETWORK:V,addNetwork:function(){return{type:V}},ADD_LUMPED_CATCHMENT:Y,addCatchment:function(){return{type:Y}},ADD_NODES:z,addNodes:function(){return{type:z}},ADD_LINKS:K,addLinks:function(){return{type:K}},ADD_COMPARISON:q,addComparison:function(){return{type:q}},SET_ADD_ANUGA_ELEVATION_DATA:X,setAddAnugaElevation:function(e){return{type:X,visible:e}},CREATE_ANUGA_ELEVATION_FROM_LAYER:J,createAnugaElevationFromLayer:function(e,t){return{type:J,pk:e,title:t}},SAVE_ANUGA_SCENARIO:re,saveAnugaScenario:function(e){return{type:re,scenario:e}},ADD_ANUGA_SCENARIO:$,addAnugaScenario:function(){return{type:$}},SAVE_ANUGA_SCENARIO_SUCCESS:oe,saveAnugaScenarioSuccess:function(e){return function(t){t({type:a,title:"Success",autoDismiss:6,position:"tc",message:"Scenario ID: ".concat(e.id," building"),uid:l(),level:"success"}),t({type:oe,scenario:e})}},SAVE_ANUGA_SCENARIO_ERROR:ie,saveAnugaScenarioError:function(e){return function(t){t({type:a,title:"Error",autoDismiss:60,position:"tc",message:"Error saving scenario: ".concat(JSON.stringify(null==e?void 0:e.data)),uid:l(),level:"error"}),t({type:ie,error:e})}},DELETE_ANUGA_SCENARIO:ae,deleteAnugaScenario:function(e){return{type:ae,scenario:e}},DELETE_ANUGA_SCENARIO_SUCCESS:"DELETE_ANUGA_SCENARIO_SUCCESS",deleteAnugaScenarioSuccess:function(e){return function(t){t({type:a,title:"Success",autoDismiss:6,position:"tc",message:"Scenario ID: ".concat(e.id," deleted"),uid:l(),level:"info"}),t({type:u})}},RUN_ANUGA_SCENARIO:Q,runAnugaScenario:function(e,t){return{type:Q,scenario:e,computeInstanceId:t}},RUN_ANUGA_SCENARIO_SUCCESS:ee,runAnugaScenarioSuccess:function(e){return function(t){t({type:a,title:"Success",autoDismiss:6,position:"tc",message:"Scenario running",uid:l(),level:"success"}),t({type:ee,scenario:e})}},SET_NETWORK_MENU:d,setNetworkMenu:function(e){return{type:d,visible:e}},RUN_NETWORK:te,runNetwork:function(e){return{type:te,network:e}},RUN_NETWORK_SUCCESS:ne,runNetworkSuccess:function(e){return function(t){t({type:a,title:"Success",autoDismiss:6,position:"tc",message:"Network Calculated",uid:l(),level:"success"}),t({type:ne,network:e})}},UPDATE_NETWORK:_e,updateNetwork:function(e,t){return{type:_e,network:o(o({},e),t)}},UPDATE_ANUGA_SCENARIO:he,updateAnugaScenario:function(e,t){return{type:he,scenario:o(o({},e),t)}},SELECT_ANUGA_SCENARIO:Ee,selectAnugaScenario:function(e){return{type:Ee,scenario:e}},SHOW_ANUGA_SCENARIO_LOG:le,showAnugaScenarioLog:function(e){return{type:le,scenarioId:e}},SHOW_ANUGA_RUN_MENU:ue,showAnugaRunMenu:function(e){return{type:ue,visible:e}},START_ANUGA_SCENARIO_POLLING:se,startAnugaScenarioPolling:function(){return{type:se}},STOP_ANUGA_SCENARIO_POLLING:ce,stopAnugaScenarioPolling:function(){return{type:ce}},START_ANUGA_ELEVATION_POLLING:pe,startAnugaElevationPolling:function(){return{type:pe}},STOP_ANUGA_ELEVATION_POLLING:de,stopAnugaElevationPolling:function(){return{type:de}},START_ANUGA_MODEL_CREATION_POLLING:me,startAnugaModelCreationPolling:function(){return{type:me}},STOP_ANUGA_MODEL_CREATION_POLLING:fe,stopAnugaModelCreationPolling:function(){return{type:fe}},START_COMPARISON_POLLING:ve,startComparisonPolling:function(){return{type:ve}},STOP_COMPARISON_POLLING:ge,stopComparisonPolling:function(){return{type:ge}},SET_COMPARISON_DATA:be,setComparisonData:function(e){return{type:be,data:e}},SET_ANUGA_POLLING_DATA:ye,setAnugaPollingData:function(e){return{type:ye,scenarios:e}},SET_CREATING_ANUGA_LAYER:we,setCreatingAnugaLayer:function(e){return{type:we,isCreatingAnugaLayer:e}},SET_ANUGA_SCENARIO_IS_LOADED:Ae,setAnugaScenarioResultsLoaded:function(e,t){return{type:Ae,scenarioId:e,isLoaded:t}},CANCEL_ANUGA_RUN:Se,cancelAnugaRun:function(e,t){return{type:Se,scenario:e,computeInstanceId:t}},UPDATE_COMPUTE_INSTANCE:Te,updateComputeInstance:function(){return{type:Te}},UPDATE_COMPUTE_INSTANCE_SUCCESS:Oe,updateComputeInstanceSuccess:function(e){return{type:Oe,data:e}},TOGGLE_SCENARIO_SELECTED:Ne,toggleScenarioSelected:function(e){return{type:Ne,scenario:e}},SHOW_MANAGE_ACCOUNT:Me,showManageAccount:function(e){return{type:Me,visible:e}},COMPARE_SCENARIOS:Pe,compareScenarios:function(e){return{type:Pe,scenarios:e}},COMPARE_SCENARIOS_SUCCESS:Be,compareScenariosSuccess:function(e){return function(t){t({type:a,title:"Success",autoDismiss:6,position:"tc",message:"Scenario comparison started",uid:l(),level:"success"}),t({type:Be,scenarios:e})}}}},427995:(e,t,n)=>{"use strict";n.d(t,{h:()=>B});var r=n(124852),o=n.n(r),i=n(171703),a=n(724469),l=n(855033),u=n.n(l),s=n(351288);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(472619);var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(l,e);var t,n,r,i,a=(r=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(r);if(i){var n=v(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return m(this,e)});function l(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(e=a.call(this)).state={time:{},seconds:180},e.timer=0,e.startTimer=e.startTimer.bind(f(e)),e.countDown=e.countDown.bind(f(e)),e}return t=l,(n=[{key:"componentDidMount",value:function(){this.startTimer();var e=this.secondsToTime(this.state.seconds);this.setState({time:e})}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return o().createElement(o().Fragment,null,this.state.time.m,":",this.state.time.s)}},{key:"secondsToTime",value:function(e){var t=e%3600,n=t%60;return{h:Math.floor(e/3600),m:Math.floor(t/60),s:String(Math.ceil(n)).padStart(2,"0")}}},{key:"startTimer",value:function(){0===this.timer&&this.state.seconds>0&&(this.timer=setInterval(this.countDown,1e3))}},{key:"countDown",value:function(){var e=this.state.seconds-1;this.setState({time:this.secondsToTime(e),seconds:e}),0===e&&clearInterval(this.timer)}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(o().Component),b=n(838167),y=n(197395),h=n(375875),_=n.n(h);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return(A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return T(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M=n(45697),P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(s,e);var t,n,r,i,l=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=O(r);if(i){var n=O(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return S(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),N(T(t=l.call(this,e)),"isBaseFile",(function(e){return["shp","tif"].includes(e.extension)})),N(T(t),"prepareFiles",(function(e){console.log("files1: ",e),e.map((function(e){return Object.defineProperty(e,"status",{value:"begin",writable:!0}),Object.defineProperty(e,"extension",{value:e.name.split(".").slice(-1)[0],writable:!0}),e}));var t=e.findIndex((function(e){return"shp"===e.extension||"tif"===e.extension})),n=e.splice(t,1)[0];return e.unshift(n),e})),N(T(t),"humanFileSize",(function(e){var t=Math.floor(Math.log(e)/Math.log(1024));return 1*(e/Math.pow(1024,t)).toFixed(2)+" "+["B","kB","MB","GB","TB"][t]})),N(T(t),"uploadFile",(function(e){var n,r=new FormData;e.map((function(e){r.append(e.extension,e)}));var o,i=e[0];if(r.append("title",t.state.newTitle),r.append("importerTargetObjectId",null===(n=t.props)||void 0===n?void 0:n.importerTargetObjectId),t.setState((function(e){return{itemList:e.uploaderFiles.map((function(e){return e.preview===i.preview?Object.assign(e,{status:"uploading"}):e}))}})),o=t.props.serverUrl.includes("localhost")?"http://localhost:8081/":t.props.serverUrl,t.props.importerTargetObjectId){var a,l,u="".concat(o).concat(null===(a=t.props)||void 0===a||null===(l=a.config)||void 0===l?void 0:l.app_name,"/api/").concat(t.props.projectId,"/").concat(t.props.importerConfigKey,"/").concat(t.props.importerTargetObjectId,"/importer-config/");console.log("put to extend: ",u),_().put(u,r,t.uploadManager).then((function(e){t.setState((function(e){return{itemList:e.uploaderFiles.map((function(e){return e.preview===i.preview?Object.assign(e,{status:"complete"}):e}))}})),t.props.setVisibleSimpleViewAttributeForm(!0),t.props.createSimpleViewAttributeForm(null==e?void 0:e.data)}))}else{var s,c,p="".concat(o).concat(null===(s=t.props)||void 0===s||null===(c=s.config)||void 0===c?void 0:c.app_name,"/api/").concat(t.props.projectId,"/").concat(t.props.importerConfigKey,"/importer-create/");_().put(p,r,t.uploadManager).then((function(e){var n;t.setState((function(e){return{itemList:e.uploaderFiles.map((function(e){return e.preview===i.preview?Object.assign(e,{status:"complete"}):e}))}})),null!=e&&null!==(n=e.data)&&void 0!==n&&n.form?(t.props.setVisibleSimpleViewAttributeForm(!0),t.props.createSimpleViewAttributeForm(null==e?void 0:e.data)):t.props.show({message:"Import processing - the layer will appear when it's ready.",title:"Processing started",uid:1e3,position:"tc"})}))}})),N(T(t),"uploadManager",{onUploadProgress:function(e){var n=Math.round(100*e.loaded/e.total);t.props.updateUploadStatus(n)}}),t.state={uploaderFiles:[],newTitle:null},t.beginTooltip=o().createRef(),t}return t=s,(n=[{key:"render",value:function(){var e,t,n,r,i=this;return console.log("simpleViewUploader state: ",this.state),this.props.visibleUploaderPanel?o().createElement("div",{className:"simple-view-panel uploader-panel"},o().createElement("div",{className:"row h4 legend-heading"},"Upload ",null===(e=this.props)||void 0===e||null===(t=e.config)||void 0===t?void 0:t.title," File (",null===(n=this.props)||void 0===n||null===(r=n.config)||void 0===r?void 0:r.filetype,")",o().createElement("span",{className:"btn glyphicon glyphicon-remove legend-close",onClick:function(){return i.props.setVisibleUploaderPanel(!1)}})),this.state.uploaderFiles.length>0?o().createElement(a.Table,{bordered:!0,condensed:!0,hover:!0,ref:this.beginTooltip,style:{tableLayout:"fixed"}},o().createElement("thead",null,o().createElement("tr",null,o().createElement("th",{width:"160px",key:"hname"},"Title"),o().createElement("th",{width:"200px",key:"hname"},"Filename"),o().createElement("th",{width:"80px",key:"hsize"},"Filesize"),o().createElement("th",{width:"80px",key:"hlast"},"Modified"),o().createElement("th",{width:"80px",key:"hstatus"},"Status"))),o().createElement("tbody",null,this.state.uploaderFiles&&this.state.uploaderFiles.map((function(e,t){return o().createElement("tr",{key:"row_"+t},o().createElement("td",{key:"title"},i.isBaseFile(e)?o().createElement("input",{id:"newTitle",key:"newTitle",className:"data-title-input",type:"text",value:i.state.newTitle||e.name.split(".").slice(0)[0],onChange:function(e){return i.setState({newTitle:e.target.value})}}):""),o().createElement("td",{key:"name"},e.name),o().createElement("td",{key:"size"},i.humanFileSize(e.size)),o().createElement("td",{key:"last"},o().createElement(b.t6,{value:e.lastModifiedDate})),o().createElement("td",{key:"status"},i.isBaseFile(e)?"begin"===e.status?o().createElement(a.Button,{onClick:function(){return i.uploadFile(i.state.uploaderFiles,i.props.fileType||"file")},style:{borderRadius:"3px"},bsSize:"small",bsStyle:"success"},"Begin"):o().createElement("span",null,o().createElement(a.ProgressBar,{active:!0,bsStyle:"success",now:parseInt(i.props.uploadStatus,10)}),100===parseInt(i.props.uploadStatus,10)?o().createElement("span",null,"importing: ",o().createElement(g,null)):i.props.uploadStatus,isNaN(parseInt(i.props.uploadStatus,10))||100===parseInt(i.props.uploadStatus,10)?"":"%"):null))})))):o().createElement(u(),{key:"dropzone",rejectClassName:"alert-danger",className:"alert alert-info",onDrop:function(e){var t;return i.setState({uploaderFiles:i.prepareFiles(e),newTitle:null==e||null===(t=e[0])||void 0===t?void 0:t.name.split(".").slice(0)[0]})},style:this.props.dropZoneStyle,activeStyle:this.props.dropZoneActiveStyle},o().createElement("div",{style:{display:"flex",alignItems:"center",width:"100%",height:"100%",justifyContent:"center"}},o().createElement("span",{style:{width:"100px",height:"100px",textAlign:"center"}},o().createElement(a.Glyphicon,{glyph:"upload"}),o().createElement("br",null),"Drag files or",o().createElement("br",null),"click here")))):null}}])&&w(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(o().Component);N(P,"propTypes",{setVisibleUploaderPanel:M.func,updateUploaderFile:M.func,setUploaderFiles:M.func,uploaderFiles:M.object,updateUploadStatus:M.func,uploadStatus:M.string,visibleUploaderPanel:M.bool,serverUrl:M.string,projectId:M.number,newTitle:M.string,dataTypeTitle:M.string,suggestedFileType:M.string,uploadUrl:M.string,fileType:M.string,config:M.object,setVisibleSimpleViewAttributeForm:M.func,createSimpleViewAttributeForm:M.func,show:M.func,importerConfigKey:M.string,importerTargetObjectId:M.number});var B=(0,i.connect)((function(e){var t,n,r,o,i,a,l,u,s,c,p;return{visibleUploaderPanel:null==e||null===(t=e.simpleView)||void 0===t?void 0:t.visibleUploaderPanel,importerConfigKey:null==e||null===(n=e.simpleView)||void 0===n?void 0:n.importerConfigKey,config:null==e||null===(r=e.simpleView)||void 0===r||null===(o=r.config)||void 0===o||null===(i=o.importer_config)||void 0===i?void 0:i[null==e||null===(a=e.simpleView)||void 0===a?void 0:a.importerConfigKey],serverUrl:null==e||null===(l=e.gnsettings)||void 0===l?void 0:l.geonodeUrl,projectId:null==e||null===(u=e.simpleView)||void 0===u||null===(s=u.config)||void 0===s?void 0:s.project_id,uploadStatus:(null==e||null===(c=e.simpleView)||void 0===c?void 0:c.uploadStatus)||0,importerTargetObjectId:null==e||null===(p=e.simpleView)||void 0===p?void 0:p.importerTargetObjectId}}),(function(e){return{setVisibleUploaderPanel:function(t,n,r){return e((0,s.setVisibleUploaderPanel)(t,n,r))},updateUploadStatus:function(t){return e((0,s.updateUploadStatus)(t))},setVisibleSimpleViewAttributeForm:function(t){return e((0,s.setVisibleSimpleViewAttributeForm)(t))},createSimpleViewAttributeForm:function(t,n){return e((0,s.createSimpleViewAttributeForm)(t,n))},show:function(t,n){return e((0,y.show)(t,n))}}}))(P)},675516:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>tt});var r=n(322843),o=n(652948);function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c={showOutlets:!0,showFootprints:!0,showWatersheds:!0,bmpTypes:[],groupProfiles:[],allBmps:[],statuses:[],targets:[],visibleBmpForm:!1,visibleTargetForm:!1,creatingNewBmp:!1,drawingBmpLayerName:!1,bmpFilterMode:"type",expandedFilter:null,priorities:[{id:0,label:"Not Assigned",value:0,visibility:!0},{id:1,label:"Critical",value:1,visibility:!0},{id:2,label:"Normal",value:2,visibility:!0},{id:3,label:"Low",value:3,visibility:!0}]},p=n(124852),d=n.n(p),m=n(171703),f=n(724469),v=n(351288),g=n(433528),b=n(921914),y=n(95797);function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:",";try{t=Math.abs(t),t=isNaN(t)?2:t;var o=e<0?"-":"",i=parseInt(e=Math.abs(Number(e)||0).toFixed(t)).toString(),a=i.length>3?i.length%3:0;return o+(a?i.substr(0,a)+r:"")+i.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+r)+(t?n+Math.abs(e-i).toFixed(t).slice(2):"")}catch(e){console.log(e)}}var _=function(e){var t,n;return null!=e&&null!==(t=e.swamm)&&void 0!==t&&t.bmpTypes?null==e||null===(n=e.swamm)||void 0===n?void 0:n.bmpTypes.filter((function(e,t,n){return n.findIndex((function(t){return(null==t?void 0:t.name)===(null==e?void 0:e.name)}))===t})):[]},E=function(e){var t,n,r,o;return(null==e||null===(t=e.layers)||void 0===t||null===(n=t.flat)||void 0===n?void 0:n.filter((function(t){var n,r,o,i;return parseInt(null==t||null===(n=t.extendedParams)||void 0===n?void 0:n.pk,10)===(null==e||null===(r=e.swamm)||void 0===r||null===(o=r.projectData)||void 0===o||null===(i=o.bmp_outlet)||void 0===i?void 0:i.id)}))[0])||(null==e||null===(r=e.layers)||void 0===r||null===(o=r.flat)||void 0===o?void 0:o.filter((function(t){var n,r,o;return t.name.includes(null==e||null===(n=e.swamm)||void 0===n||null===(r=n.projectData)||void 0===r||null===(o=r.bmp_outlet)||void 0===o?void 0:o.name)}))[0])},w=function(e){var t,n,r,o;return(null==e||null===(t=e.layers)||void 0===t||null===(n=t.flat)||void 0===n?void 0:n.filter((function(t){var n,r,o,i;return parseInt(null==t||null===(n=t.extendedParams)||void 0===n?void 0:n.pk,10)===(null==e||null===(r=e.swamm)||void 0===r||null===(o=r.projectData)||void 0===o||null===(i=o.bmp_footprint)||void 0===i?void 0:i.id)}))[0])||(null==e||null===(r=e.layers)||void 0===r||null===(o=r.flat)||void 0===o?void 0:o.filter((function(t){var n,r,o;return t.name.includes(null==e||null===(n=e.swamm)||void 0===n||null===(r=n.projectData)||void 0===r||null===(o=r.bmp_footprint)||void 0===o?void 0:o.name)}))[0])},A=function(e){var t,n,r,o;return(null==e||null===(t=e.layers)||void 0===t||null===(n=t.flat)||void 0===n?void 0:n.filter((function(t){var n,r,o,i;return parseInt(null==t||null===(n=t.extendedParams)||void 0===n?void 0:n.pk,10)===(null==e||null===(r=e.swamm)||void 0===r||null===(o=r.projectData)||void 0===o||null===(i=o.bmp_watershed)||void 0===i?void 0:i.id)}))[0])||(null==e||null===(r=e.layers)||void 0===r||null===(o=r.flat)||void 0===o?void 0:o.filter((function(t){var n,r,o;return t.name.includes(null==e||null===(n=e.swamm)||void 0===n||null===(r=n.projectData)||void 0===r||null===(o=r.bmp_watershed)||void 0===o?void 0:o.name)}))[0])},S=function(e){var t,n,r;return null==e||null===(t=e.gnresource)||void 0===t||null===(n=t.initialResource)||void 0===n||null===(r=n.perms)||void 0===r?void 0:r.includes("change_resourcebase")},T=n(580416);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t){return(M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function P(e,t){if(t&&("object"===O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return B(e)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=n(45697),C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=F(r);if(o){var n=F(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return P(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).handleChange=t.handleChange.bind(B(t)),t.handleBmpChange=t.handleBmpChange.bind(B(t)),t.handleGroupProfileChange=t.handleGroupProfileChange.bind(B(t)),t.state={},t}return t=a,(n=[{key:"componentDidMount",value:function(){this.props.setOpenMenuGroupId(null),0!==Object.keys(this.props.storedBmpForm).length||this.props.creatingNewBmp||(this.props.purgeMapInfoResults(),this.props.setMenuGroup(null))}},{key:"componentDidUpdate",value:function(){0===Object.keys(this.props.storedBmpForm).length&&!this.props.creatingNewBmp&&this.props.updatingBmp&&this.props.makeExistingBmpForm(this.props.updatingBmp)}},{key:"render",value:function(){var e,t,n,r,o,i,a,l,u,s,c,p,m,v,g,b,y,h,_,E,w,A,S,T,O,N,M,P,B,F,R,I,C,x,D,L,G,k,j,U,W,H,V,Y,z,K,q,Z,J,X,$,Q,ee,te,ne,re,oe,ie,ae,le,ue,se,ce,pe,de,me,fe,ve,ge,be,ye,he,_e,Ee,we,Ae,Se,Te,Oe,Ne,Me,Pe,Be,Fe,Re,Ie,Ce,xe,De,Le,Ge,ke,je,Ue,We,He,Ve,Ye,ze,Ke,qe,Ze,Je,Xe,$e,Qe,et,tt,nt,rt,ot,it,at,lt,ut,st,ct,pt,dt,mt,ft,vt,gt,bt,yt,ht,_t,Et,wt,At,St,Tt,Ot,Nt,Mt,Pt,Bt,Ft,Rt,It,Ct,xt,Dt,Lt,Gt,kt,jt,Ut,Wt,Ht,Vt,Yt,zt,Kt,qt,Zt,Jt,Xt,$t,Qt=this;return d().createElement("div",{id:"swamm-bmp-form-panel",className:"simple-view-panel menu-rows-container"},d().createElement("div",{id:"swamm-bmp-form-grid-header"},d().createElement("div",{className:"simple-view-panel-header"},this.props.storedBmpForm.id?"BMP "+this.props.storedBmpForm.id+": "+(null===(e=this.props.storedBmpForm)||void 0===e?void 0:e.bmpName):"Create a new BMP"),d().createElement("span",{className:"btn glyphicon glyphicon-remove legend-close",onClick:function(){Qt.props.clearBmpForm(),Qt.props.setComplexBmpForm(!1),Qt.refreshBmpLayers()}})),d().createElement("div",{id:"swamm-bmp-form-grid-col-one"},null!==(t=this.props.storedBmpForm)&&void 0!==t&&t.id?d().createElement("div",{className:"simple-view-panel-item-row"},d().createElement("div",null,"Type: ",null===(n=this.props.storedBmpForm)||void 0===n||null===(r=n.type_data)||void 0===r?void 0:r.name),d().createElement("button",{type:"button",className:"swamm-button",onClick:function(){window.confirm("This will remove any custom data you have entered for the current BMP Type. Are you sure?")&&Qt.props.setChangingBmpType(!0)}},"Edit Type")):null,this.props.requiresOutlet||this.props.complexBmpForm?d().createElement("div",{className:"simple-view-panel-item-row"},d().createElement("div",null,"Outlet Point:"),null!==(o=this.props.storedBmpForm)&&void 0!==o&&o.outlet_fid?d().createElement("button",{type:"button",className:"swamm-button",onClick:function(){var e,t,n;Qt.props.showLoadingBmp(!0),Qt.props.toggleLayer(null===(e=Qt.props.bmpOutletLayer)||void 0===e?void 0:e.id,!0),Qt.drawBmpStep1(null===(t=Qt.props.bmpOutletLayer)||void 0===t?void 0:t.name,null===(n=Qt.props.storedBmpForm)||void 0===n?void 0:n.outlet_fid)}},"Edit Outlet"):d().createElement("button",{type:"button",style:{backgroundColor:"darkgreen"},disabled:!(null!==(i=this.props.storedBmpForm)&&void 0!==i&&i.group_profile_id&&this.props.storedBmpForm.bmpName),className:(null!==(a=this.props.storedBmpForm)&&void 0!==a&&a.group_profile_id&&this.props.storedBmpForm.bmpName,"swamm-button default"),onClick:function(){var e,t;Qt.props.showLoadingBmp(!0),Qt.props.toggleLayer(null===(e=Qt.props.bmpOutletLayer)||void 0===e?void 0:e.id,!0),Qt.drawBmpStep1(null===(t=Qt.props.bmpOutletLayer)||void 0===t?void 0:t.name,null)}},"Locate")):null,this.props.requiresFootprint||this.props.complexBmpForm?d().createElement("div",{className:"simple-view-panel-item-row"},null!==(l=this.props.storedBmpForm)&&void 0!==l&&l.footprint_fid?d().createElement(d().Fragment,null,d().createElement("div",null,"Footprint: ",null!==(u=this.props.storedBmpForm)&&void 0!==u&&u.calculated_footprint_area?(null===(s=this.props.storedBmpForm)||void 0===s||null===(c=s.calculated_footprint_area)||void 0===c?void 0:c.toFixed(2))+" acres":" "),d().createElement("button",{type:"button",className:"swamm-button",onClick:function(){var e,t,n;Qt.props.showLoadingBmp(!0),Qt.props.toggleLayer(null===(e=Qt.props.bmpFootprintLayer)||void 0===e?void 0:e.id,!0),Qt.drawBmpStep1(null===(t=Qt.props.bmpFootprintLayer)||void 0===t?void 0:t.name,null===(n=Qt.props.storedBmpForm)||void 0===n?void 0:n.footprint_fid)}},"Edit Footprint")):d().createElement("button",{type:"button",disabled:!(null!==(p=this.props.storedBmpForm)&&void 0!==p&&p.group_profile_id&&this.props.storedBmpForm.bmpName),className:(null!==(m=this.props.storedBmpForm)&&void 0!==m&&m.group_profile_id&&this.props.storedBmpForm.bmpName,"swamm-button default"),style:{backgroundColor:"darkgreen"},onClick:function(){var e,t;Qt.props.showLoadingBmp(!0),Qt.props.toggleLayer(null===(e=Qt.props.bmpFootprintLayer)||void 0===e?void 0:e.id,!0),Qt.drawBmpStep1(null===(t=Qt.props.bmpFootprintLayer)||void 0===t?void 0:t.name)}},"Draw Footprint")):null,!this.props.requiresWatershed&&!this.props.complexBmpForm||this.props.watershedIsFootprint?null:d().createElement("div",{className:"simple-view-panel-item-row"},null!==(v=this.props.storedBmpForm)&&void 0!==v&&v.watershed_fid?d().createElement(d().Fragment,null,d().createElement("div",null,"Watershed: ",null!==(g=this.props.storedBmpForm)&&void 0!==g&&g.calculated_watershed_area?(null===(b=this.props.storedBmpForm)||void 0===b||null===(y=b.calculated_watershed_area)||void 0===y?void 0:y.toFixed(2))+" acres":" "),d().createElement("button",{type:"button",className:"swamm-button",onClick:function(){var e,t,n;Qt.props.showLoadingBmp(!0),Qt.props.toggleLayer(null===(e=Qt.props.bmpWatershedLayer)||void 0===e?void 0:e.id,!0),Qt.drawBmpStep1(null===(t=Qt.props.bmpWatershedLayer)||void 0===t?void 0:t.name,null===(n=Qt.props.storedBmpForm)||void 0===n?void 0:n.watershed_fid)}},"Edit Watershed")):d().createElement("button",{disabled:!(null!==(h=this.props.storedBmpForm)&&void 0!==h&&h.group_profile_id&&this.props.storedBmpForm.bmpName),className:(null!==(_=this.props.storedBmpForm)&&void 0!==_&&_.group_profile_id&&this.props.storedBmpForm.bmpName,"swamm-button default"),style:{backgroundColor:"darkgreen"},onClick:function(){var e,t,n;Qt.props.showLoadingBmp(!0),Qt.props.toggleLayer(null===(e=Qt.props.bmpWatershedLayer)||void 0===e?void 0:e.id,!0),Qt.drawBmpStep1(null===(t=Qt.props)||void 0===t||null===(n=t.bmpWatershedLayer)||void 0===n?void 0:n.name)}},"Draw Watershed")),d().createElement("div",{className:"simple-view-panel-item-row"},d().createElement("div",null,"Field Identifier:"),d().createElement("input",{type:"text",name:"field_identifier",style:{maxWidth:"fit-content"},value:null===(E=this.props.storedBmpForm)||void 0===E?void 0:E.field_identifier,onChange:this.handleChange,placeholder:"---"})),d().createElement("div",{className:"simple-view-panel-item-row"},d().createElement("div",{style:{textAlign:"left"}},"Owner details:"),d().createElement("input",{type:"text",name:"owner_identifier",style:{maxWidth:"fit-content"},value:null===(w=this.props.storedBmpForm)||void 0===w?void 0:w.owner_identifier,onChange:this.handleChange,placeholder:"---"})),this.props.complexBmpForm?d().createElement(d().Fragment,null,d().createElement("div",{className:"simple-view-panel-item-row",id:"organization-selector-container"},d().createElement("div",null,"Organization"),d().createElement("select",{id:"organization-selector",name:"group_profile",value:null===(A=this.props.storedBmpForm)||void 0===A||null===(S=A.group_profile)||void 0===S?void 0:S.pk,onChange:this.handleGroupProfileChange,placeholder:null===(T=this.props.storedBmpForm)||void 0===T||null===(O=T.group_profile)||void 0===O?void 0:O.title},this.props.saveableGroupProfiles.map((function(e){return d().createElement("option",{key:e.pk,value:null==e?void 0:e.pk,className:null!=e&&e.saveable?"":"non-savable-group-profile"},e.title)})))),d().createElement("div",{className:"simple-view-panel-item-row",id:"status-selector-container"},d().createElement("div",null,"BMP Status"),d().createElement("select",{id:"status-selector",name:"status",value:null===(N=this.props.storedBmpForm)||void 0===N?void 0:N.status,onChange:this.handleChange},d().createElement("option",{key:"Unknown",value:"Unknown"},"Unknown"),this.props.statuses.filter((function(e){return"Unknown"!==(null==e?void 0:e.name)})).map((function(e){return d().createElement("option",{key:null==e?void 0:e.name,value:null==e?void 0:e.name},null==e?void 0:e.name)})))),d().createElement("div",{className:"simple-view-panel-item-row",id:"priority-selector-container"},d().createElement("div",null,"BMP Priority"),d().createElement("select",{id:"priority-selectorr",name:"priority",value:null===(M=this.props.storedBmpForm)||void 0===M||null===(P=M.priority)||void 0===P?void 0:P.id,onChange:this.handleChange},this.props.priorities.map((function(e){return d().createElement("option",{key:e.id,value:null==e?void 0:e.value},e.label)})))),d().createElement("div",{className:"simple-view-panel-item-row",id:"n_surface_red_percent-selector-container"},d().createElement("div",null,"Surface Nitrogen Reduction Percentage"),d().createElement("input",{type:"number",step:1,name:"override_n_surface_red_percent",value:null===(B=this.props.storedBmpForm)||void 0===B?void 0:B.override_n_surface_red_percent,onChange:this.handleChange,placeholder:"---"})),d().createElement("div",{className:"simple-view-panel-item-row",id:"p_surface_red_percent-selector-container"},d().createElement("div",null,"Surface Phosphorus Reduction Percentage"),d().createElement("input",{type:"number",step:1,name:"override_p_surface_red_percent",value:null===(F=this.props.storedBmpForm)||void 0===F?void 0:F.override_p_surface_red_percent,onChange:this.handleChange,placeholder:"---"})),d().createElement("div",{className:"simple-view-panel-item-row",id:"s_surface_red_percent-selector-container"},d().createElement("div",null,"Surface Sediment Reduction Percentage"),d().createElement("input",{type:"number",step:1,name:"override_s_surface_red_percent",value:null===(R=this.props.storedBmpForm)||void 0===R?void 0:R.override_s_surface_red_percent,onChange:this.handleChange,placeholder:"---"})),d().createElement("div",{className:"simple-view-panel-item-row",id:"n_tiled_red_percent-selector-container"},d().createElement("div",null,"Tiled Nitrogen Reduction Percentage"),d().createElement("input",{type:"number",step:1,name:"override_n_tiled_red_percent",value:null===(I=this.props.storedBmpForm)||void 0===I?void 0:I.override_n_tiled_red_percent,onChange:this.handleChange,placeholder:"---"})),d().createElement("div",{className:"simple-view-panel-item-row",id:"p_tiled_red_percent-selector-container"},d().createElement("div",null,"Tiled Phosphorus Reduction Percentage"),d().createElement("input",{type:"number",step:1,name:"override_p_tiled_red_percent",value:null===(C=this.props.storedBmpForm)||void 0===C?void 0:C.override_p_tiled_red_percent,onChange:this.handleChange,placeholder:"---"})),d().createElement("div",{className:"simple-view-panel-item-row",id:"s_tiled_red_percent-selector-container"},d().createElement("div",null,"Tiled Sediment Reduction Percentage"),d().createElement("input",{type:"number",step:1,name:"override_s_tiled_red_percent",value:null===(x=this.props.storedBmpForm)||void 0===x?void 0:x.override_s_tiled_red_percent,onChange:this.handleChange,placeholder:"---"})),d().createElement("div",{className:"simple-view-panel-item-row",id:"n_erosion_red_percent-selector-container"},d().createElement("div",null,"Erosion Nitrogen Reduction Percentage"),d().createElement("input",{type:"number",step:1,name:"override_n_erosion_red_percent",value:null===(D=this.props.storedBmpForm)||void 0===D?void 0:D.override_n_erosion_red_percent,onChange:this.handleChange,placeholder:"---"})),d().createElement("div",{className:"simple-view-panel-item-row",id:"p_erosion_red_percent-selector-container"},d().createElement("div",null,"Erosion Phosphorus Reduction Percentage"),d().createElement("input",{type:"number",step:1,name:"override_p_erosion_red_percent",value:null===(L=this.props.storedBmpForm)||void 0===L?void 0:L.override_p_erosion_red_percent,onChange:this.handleChange,placeholder:"---"})),d().createElement("div",{className:"simple-view-panel-item-row",id:"s_erosion_red_percent-selector-container"},d().createElement("div",null,"Erosion Sediment Reduction Percentage"),d().createElement("input",{type:"number",step:1,name:"override_s_tiled_red_percent",value:null===(G=this.props.storedBmpForm)||void 0===G?void 0:G.override_s_erosion_red_percent,onChange:this.handleChange,placeholder:"---"})),d().createElement("div",{className:"simple-view-panel-item-row",id:"override_cost_base-selector-container"},d().createElement("div",null,"Base Cost ($)"),d().createElement("input",{type:"number",step:1,name:"override_cost_base",value:null===(k=this.props.storedBmpForm)||void 0===k?void 0:k.override_cost_base,onChange:this.handleChange,placeholder:"---"})),d().createElement("div",{className:"simple-view-panel-item-row",id:"cost_rate_per_footprint_area-selector-container"},d().createElement("div",null,"Footprint Cost ($/acre)"),d().createElement("input",{type:"number",step:1,name:"override_cost_rate_per_footprint_area",value:null===(j=this.props.storedBmpForm)||void 0===j?void 0:j.override_cost_rate_per_footprint_area,onChange:this.handleChange,placeholder:"---"})),d().createElement("div",{className:"simple-view-panel-item-row",id:"cost_rate_per_watershed_area-selector-container"},d().createElement("div",null,"Watershed Cost ($/acre)"),d().createElement("input",{type:"number",step:1,name:"override_cost_rate_per_watershed_area",value:null===(U=this.props.storedBmpForm)||void 0===U?void 0:U.override_cost_rate_per_watershed_area,onChange:this.handleChange,placeholder:"---"}))):null,d().createElement("div",{style:{marginTop:"10px"}},"Notes"),d().createElement("textarea",{id:"bmp-notes",rows:4,cols:50,name:"notes",value:null===(W=this.props.storedBmpForm)||void 0===W?void 0:W.notes,onChange:this.handleChange})),d().createElement("div",{id:"swamm-bmp-form-grid-col-two"},null===(H=this.props.storedBmpForm)||void 0===H||!H.id||this.props.changingBmpType?d().createElement(d().Fragment,null,d().createElement("div",{style:{textAlign:"left"}},d().createElement("h5",null,"Select a BMP Type..."),null===(V=this.props.bmpTypeGroups)||void 0===V?void 0:V.map((function(e){return d().createElement("div",{key:"group-".concat(e),style:{textAlign:"left",marginLeft:0,marginBottom:"3px",padding:"3px",border:"1px solid white",borderRadius:"3px"}},d().createElement("span",{style:{marginLeft:"15px"},className:"btn glyphicon bmp-type-group-glyph"+(Qt.props.expandedBmpTypeGroupName===e[0]?" glyphicon-chevron-down bmp-type-group-bottom-margin":" glyphicon-chevron-right"),onClick:Qt.props.expandedBmpTypeGroupName===e[0]?function(){return Qt.props.setExpandedBmpTypeGroupName(null)}:function(){return Qt.props.setExpandedBmpTypeGroupName(e[0])}}),d().createElement("span",{className:"bmp-type-group-name"},e[1]),Qt.props.expandedBmpTypeGroupName===e[0]?Qt.props.bmpTypes.filter((function(t){return t.group_name===e[0]})).map((function(e){return d().createElement("div",{key:"bmpType-".concat(null==e?void 0:e.name),style:{marginLeft:"30px"}},d().createElement("input",{id:"bmp-type-selector-box-".concat(null==e?void 0:e.name),type:"radio",name:"bmpType",value:null==e?void 0:e.name,onChange:Qt.handleBmpChange}),d().createElement("label",{htmlFor:"bmp-type-selector-box-".concat(null==e?void 0:e.name),style:{marginLeft:"6px",verticalAlign:"middle"}},null==e?void 0:e.name))})):null)}))),this.props.changingBmpType?d().createElement("button",{type:"button",className:"swamm-button",style:{marginTop:"20px",backgroundColor:"darkgreen"},onClick:function(){return Qt.props.setChangingBmpType(!1)}},"Accept"):null):this.props.complexBmpForm?d().createElement(d().Fragment,null,d().createElement(f.Table,{condensed:!0,bordered:!0,hover:!0,responsive:"sm",className:"text-right",style:{tableLayout:"fixed",border:"solid 1px rgb(255, 255, 255, 0.2)",borderRadius:"2px"}},d().createElement("thead",null,d().createElement("tr",{style:{borderTop:"solid 3px rgb(255, 255, 255, 1)"}},d().createElement("th",{style:{width:"30%"}},"Results"),d().createElement("th",{style:{width:"13%"}},"Surface"),d().createElement("th",{style:{width:"13%"}},"Tiled"),d().createElement("th",{style:{width:"13%","word-break":"break-word"}},"Gully/",d().createElement("wbr",null),"Bank"),d().createElement("th",{style:{width:"10%"}},"Total"),this.props.watershedIsFootprint?d().createElement(d().Fragment,null,d().createElement("th",{style:{width:"10%"}},"Per Acre"),d().createElement("th",{style:{width:"11%"}})):d().createElement("th",{style:{width:"11%"}}))),d().createElement("tbody",null,d().createElement("tr",{style:{borderTop:"solid 3px rgb(255, 255, 255, 1)"}},d().createElement("td",null,"Nitrogen load previous: "),d().createElement("td",null,null===(Y=this.props.storedBmpForm)||void 0===Y||null===(z=Y.surface_previous_n_load)||void 0===z?void 0:z.toFixed(0)),d().createElement("td",null,null===(K=this.props.storedBmpForm)||void 0===K||null===(q=K.tiled_previous_n_load)||void 0===q?void 0:q.toFixed(0)),d().createElement("td",null,parseFloat(null===(Z=this.props.storedBmpForm)||void 0===Z||null===(J=Z.erosion_previous_n_load)||void 0===J?void 0:J.toPrecision(3))),d().createElement("td",null,null===(X=this.props.storedBmpForm)||void 0===X||null===($=X.total_previous_n_load)||void 0===$?void 0:$.toFixed(0)),this.props.watershedIsFootprint?d().createElement("td",null,((null===(Q=this.props.storedBmpForm)||void 0===Q?void 0:Q.total_previous_n_load)/(null===(ee=this.props.storedBmpForm)||void 0===ee?void 0:ee.calculated_footprint_area)).toFixed(1)):null,d().createElement("td",{className:"text-left"},"lbs/",d().createElement("wbr",null),"year")),d().createElement("tr",null,d().createElement("td",null,"Nitrogen load reduction: "),d().createElement("td",null,null===(te=this.props.storedBmpForm)||void 0===te||null===(ne=te.surface_n_load_reduction)||void 0===ne?void 0:ne.toFixed(0)),d().createElement("td",null,null===(re=this.props.storedBmpForm)||void 0===re||null===(oe=re.tiled_n_load_reduction)||void 0===oe?void 0:oe.toFixed(0)),d().createElement("td",null,parseFloat(null===(ie=this.props.storedBmpForm)||void 0===ie||null===(ae=ie.erosion_n_load_reduction)||void 0===ae?void 0:ae.toPrecision(3))),d().createElement("td",null,null===(le=this.props.storedBmpForm)||void 0===le||null===(ue=le.total_n_load_reduction)||void 0===ue?void 0:ue.toFixed(0)),this.props.watershedIsFootprint?d().createElement("td",null,((null===(se=this.props.storedBmpForm)||void 0===se?void 0:se.total_n_load_reduction)/(null===(ce=this.props.storedBmpForm)||void 0===ce?void 0:ce.calculated_footprint_area)).toFixed(1)):null,d().createElement("td",{className:"text-left"},"lbs/",d().createElement("wbr",null),"year")),d().createElement("tr",null,d().createElement("td",null,"Nitrogen load new: "),d().createElement("td",null,null===(pe=this.props.storedBmpForm)||void 0===pe||null===(de=pe.surface_new_n_load)||void 0===de?void 0:de.toFixed(0)),d().createElement("td",null,null===(me=this.props.storedBmpForm)||void 0===me||null===(fe=me.tiled_new_n_load)||void 0===fe?void 0:fe.toFixed(0)),d().createElement("td",null,parseFloat(null===(ve=this.props.storedBmpForm)||void 0===ve||null===(ge=ve.erosion_new_n_load)||void 0===ge?void 0:ge.toPrecision(3))),d().createElement("td",null,null===(be=this.props.storedBmpForm)||void 0===be||null===(ye=be.total_new_n_load)||void 0===ye?void 0:ye.toFixed(0)),this.props.watershedIsFootprint?d().createElement("td",null,((null===(he=this.props.storedBmpForm)||void 0===he?void 0:he.total_new_n_load)/(null===(_e=this.props.storedBmpForm)||void 0===_e?void 0:_e.calculated_footprint_area)).toFixed(1)):null,d().createElement("td",{className:"text-left"},"lbs/",d().createElement("wbr",null),"year")),d().createElement("tr",{style:{borderTop:"solid 3px rgb(255, 255, 255, 1)"}},d().createElement("td",null,"Phosphorus load previous: "),d().createElement("td",null,null===(Ee=this.props.storedBmpForm)||void 0===Ee||null===(we=Ee.surface_previous_p_load)||void 0===we?void 0:we.toFixed(0)),d().createElement("td",null,null===(Ae=this.props.storedBmpForm)||void 0===Ae||null===(Se=Ae.tiled_previous_p_load)||void 0===Se?void 0:Se.toFixed(0)),d().createElement("td",null,parseFloat(null===(Te=this.props.storedBmpForm)||void 0===Te||null===(Oe=Te.erosion_previous_p_load)||void 0===Oe?void 0:Oe.toPrecision(3))),d().createElement("td",null,null===(Ne=this.props.storedBmpForm)||void 0===Ne||null===(Me=Ne.total_previous_p_load)||void 0===Me?void 0:Me.toFixed(0)),this.props.watershedIsFootprint?d().createElement("td",null,((null===(Pe=this.props.storedBmpForm)||void 0===Pe?void 0:Pe.total_previous_p_load)/(null===(Be=this.props.storedBmpForm)||void 0===Be?void 0:Be.calculated_footprint_area)).toFixed(1)):null,d().createElement("td",{className:"text-left"},"lbs/",d().createElement("wbr",null),"year")),d().createElement("tr",null,d().createElement("td",null,"Phosphorus load reduction: "),d().createElement("td",null,null===(Fe=this.props.storedBmpForm)||void 0===Fe||null===(Re=Fe.surface_p_load_reduction)||void 0===Re?void 0:Re.toFixed(0)),d().createElement("td",null,null===(Ie=this.props.storedBmpForm)||void 0===Ie||null===(Ce=Ie.tiled_p_load_reduction)||void 0===Ce?void 0:Ce.toFixed(0)),d().createElement("td",null,parseFloat(null===(xe=this.props.storedBmpForm)||void 0===xe||null===(De=xe.erosion_p_load_reduction)||void 0===De?void 0:De.toPrecision(3))),d().createElement("td",null,null===(Le=this.props.storedBmpForm)||void 0===Le||null===(Ge=Le.total_p_load_reduction)||void 0===Ge?void 0:Ge.toFixed(0)),this.props.watershedIsFootprint?d().createElement("td",null,((null===(ke=this.props.storedBmpForm)||void 0===ke?void 0:ke.total_p_load_reduction)/(null===(je=this.props.storedBmpForm)||void 0===je?void 0:je.calculated_footprint_area)).toFixed(1)):null,d().createElement("td",{className:"text-left"},"lbs/",d().createElement("wbr",null),"year")),d().createElement("tr",null,d().createElement("td",null,"Phosphorus load new: "),d().createElement("td",null,null===(Ue=this.props.storedBmpForm)||void 0===Ue||null===(We=Ue.surface_new_p_load)||void 0===We?void 0:We.toFixed(0)),d().createElement("td",null,null===(He=this.props.storedBmpForm)||void 0===He||null===(Ve=He.tiled_new_p_load)||void 0===Ve?void 0:Ve.toFixed(0)),d().createElement("td",null,parseFloat(null===(Ye=this.props.storedBmpForm)||void 0===Ye||null===(ze=Ye.erosion_new_p_load)||void 0===ze?void 0:ze.toPrecision(3))),d().createElement("td",null,null===(Ke=this.props.storedBmpForm)||void 0===Ke||null===(qe=Ke.total_new_p_load)||void 0===qe?void 0:qe.toFixed(0)),this.props.watershedIsFootprint?d().createElement("td",null,((null===(Ze=this.props.storedBmpForm)||void 0===Ze?void 0:Ze.total_new_p_load)/(null===(Je=this.props.storedBmpForm)||void 0===Je?void 0:Je.calculated_footprint_area)).toFixed(1)):null,d().createElement("td",{className:"text-left"},"lbs/",d().createElement("wbr",null),"year")),d().createElement("tr",{style:{borderTop:"solid 3px rgb(255, 255, 255, 1)"}},d().createElement("td",null,"Sediment load previous: "),d().createElement("td",null,null===(Xe=this.props.storedBmpForm)||void 0===Xe||null===($e=Xe.surface_previous_s_load)||void 0===$e?void 0:$e.toFixed(0)),d().createElement("td",null,null===(Qe=this.props.storedBmpForm)||void 0===Qe||null===(et=Qe.tiled_previous_s_load)||void 0===et?void 0:et.toFixed(0)),d().createElement("td",null,parseFloat(null===(tt=this.props.storedBmpForm)||void 0===tt||null===(nt=tt.erosion_previous_s_load)||void 0===nt?void 0:nt.toPrecision(3))),d().createElement("td",null,null===(rt=this.props.storedBmpForm)||void 0===rt||null===(ot=rt.total_previous_s_load)||void 0===ot?void 0:ot.toFixed(0)),this.props.watershedIsFootprint?d().createElement("td",null,((null===(it=this.props.storedBmpForm)||void 0===it?void 0:it.total_previous_s_load)/(null===(at=this.props.storedBmpForm)||void 0===at?void 0:at.calculated_footprint_area)).toFixed(1)):null,d().createElement("td",{className:"text-left"},"tons/",d().createElement("wbr",null),"year")),d().createElement("tr",null,d().createElement("td",null,"Sediment load reduction: "),d().createElement("td",null,null===(lt=this.props.storedBmpForm)||void 0===lt||null===(ut=lt.surface_s_load_reduction)||void 0===ut?void 0:ut.toFixed(0)),d().createElement("td",null,null===(st=this.props.storedBmpForm)||void 0===st||null===(ct=st.tiled_s_load_reduction)||void 0===ct?void 0:ct.toFixed(0)),d().createElement("td",null,parseFloat(null===(pt=this.props.storedBmpForm)||void 0===pt||null===(dt=pt.erosion_s_load_reduction)||void 0===dt?void 0:dt.toPrecision(3))),d().createElement("td",null,null===(mt=this.props.storedBmpForm)||void 0===mt||null===(ft=mt.total_s_load_reduction)||void 0===ft?void 0:ft.toFixed(0)),this.props.watershedIsFootprint?d().createElement("td",null,((null===(vt=this.props.storedBmpForm)||void 0===vt?void 0:vt.total_s_load_reduction)/(null===(gt=this.props.storedBmpForm)||void 0===gt?void 0:gt.calculated_footprint_area)).toFixed(1)):null,d().createElement("td",{className:"text-left"},"tons/",d().createElement("wbr",null),"year")),d().createElement("tr",{style:{borderBottom:"solid 3px rgb(255, 255, 255, 1)"}},d().createElement("td",null,"Sediment load new: "),d().createElement("td",null,null===(bt=this.props.storedBmpForm)||void 0===bt||null===(yt=bt.surface_new_s_load)||void 0===yt?void 0:yt.toFixed(0)),d().createElement("td",null,null===(ht=this.props.storedBmpForm)||void 0===ht||null===(_t=ht.tiled_new_s_load)||void 0===_t?void 0:_t.toFixed(0)),d().createElement("td",null,parseFloat(null===(Et=this.props.storedBmpForm)||void 0===Et||null===(wt=Et.erosion_new_s_load)||void 0===wt?void 0:wt.toPrecision(3))),d().createElement("td",null,null===(At=this.props.storedBmpForm)||void 0===At||null===(St=At.total_new_s_load)||void 0===St?void 0:St.toFixed(0)),this.props.watershedIsFootprint?d().createElement("td",null,((null===(Tt=this.props.storedBmpForm)||void 0===Tt?void 0:Tt.total_new_s_load)/(null===(Ot=this.props.storedBmpForm)||void 0===Ot?void 0:Ot.calculated_footprint_area)).toFixed(1)):null,d().createElement("td",{className:"text-left"},"tons/",d().createElement("wbr",null),"year")),d().createElement("tr",null,d().createElement("td",null,"Potential Incentive Payment:"),null!==(Nt=this.props.storedBmpForm)&&void 0!==Nt&&Nt.calculated_total_cost?d().createElement("td",null,"$",Number(null===(Mt=this.props.storedBmpForm)||void 0===Mt||null===(Pt=Mt.calculated_total_cost)||void 0===Pt?void 0:Pt.toFixed(0)).toLocaleString()):d().createElement("td",null),d().createElement("td",null)),d().createElement("tr",null,d().createElement("td",null,"Nitrogen reduction value: "),null!==(Bt=this.props.storedBmpForm)&&void 0!==Bt&&Bt.total_cost_per_lbs_n_reduced?d().createElement("td",null,Number(null===(Ft=this.props.storedBmpForm)||void 0===Ft||null===(Rt=Ft.total_cost_per_lbs_n_reduced)||void 0===Rt?void 0:Rt.toFixed(0)).toLocaleString()):d().createElement("td",null),d().createElement("td",{className:"text-left"},"$/lb/",d().createElement("wbr",null),"year")),d().createElement("tr",null,d().createElement("td",null,"Phosphorus reduction value: "),null!==(It=this.props.storedBmpForm)&&void 0!==It&&It.total_cost_per_lbs_p_reduced?d().createElement("td",null,Number(null===(Ct=this.props.storedBmpForm)||void 0===Ct||null===(xt=Ct.total_cost_per_lbs_p_reduced)||void 0===xt?void 0:xt.toFixed(0)).toLocaleString()):d().createElement("td",null),d().createElement("td",{className:"text-left"},"$/lb/",d().createElement("wbr",null),"year")),d().createElement("tr",null,d().createElement("td",null,"Sediment reduction value: "),null!==(Dt=this.props.storedBmpForm)&&void 0!==Dt&&Dt.total_cost_per_ton_s_reduced?d().createElement("td",null,Number(null===(Lt=this.props.storedBmpForm)||void 0===Lt||null===(Gt=Lt.total_cost_per_ton_s_reduced)||void 0===Gt?void 0:Gt.toFixed(0)).toLocaleString()):d().createElement("td",null),d().createElement("td",{className:"text-left"},"$/ton/",d().createElement("wbr",null),"year")))),null!==(kt=this.props.storedBmpForm)&&void 0!==kt&&kt.created_by?d().createElement("p",null,"Created by: ",null===(jt=this.props.storedBmpForm)||void 0===jt?void 0:jt.created_by," on ",new Date(null===(Ut=this.props.storedBmpForm)||void 0===Ut?void 0:Ut.created_at).toLocaleString()):null,null!==(Wt=this.props.storedBmpForm)&&void 0!==Wt&&Wt.updated_by?d().createElement("p",null,"Updated by: ",null===(Ht=this.props.storedBmpForm)||void 0===Ht?void 0:Ht.updated_by," on ",new Date(null===(Vt=this.props.storedBmpForm)||void 0===Vt?void 0:Vt.updated_at).toLocaleString()):null):d().createElement(f.Table,{bordered:!0,condensed:!0,hover:!0,responsive:"sm",style:{tableLayout:"fixed",border:"solid 1px rgb(255, 255, 255, 0.2)",borderRadius:"2px"},className:"text-right"},d().createElement("thead",null,d().createElement("tr",null,d().createElement("th",null,"Results"),d().createElement("th",{style:{width:"100px"}},"Total"),d().createElement("th",null))),d().createElement("tbody",null,d().createElement("tr",null,d().createElement("td",null,"Nitrogen load reduction: "),d().createElement("td",null,null===(Yt=this.props.storedBmpForm)||void 0===Yt||null===(zt=Yt.total_n_load_reduction)||void 0===zt?void 0:zt.toFixed(0)),d().createElement("td",{className:"text-left"},"lbs/year")),d().createElement("tr",null,d().createElement("td",null,"Phosphorus load reduction: "),d().createElement("td",null,null===(Kt=this.props.storedBmpForm)||void 0===Kt||null===(qt=Kt.total_p_load_reduction)||void 0===qt?void 0:qt.toFixed(0)),d().createElement("td",{className:"text-left"},"lbs/year")),d().createElement("tr",null,d().createElement("td",null,"Sediment load reduction: "),d().createElement("td",null,null===(Zt=this.props.storedBmpForm)||void 0===Zt||null===(Jt=Zt.total_s_load_reduction)||void 0===Jt?void 0:Jt.toFixed(0)),d().createElement("td",{className:"text-left"},"tons/year"))))),d().createElement("div",{id:"swamm-bmp-form-grid-footer",className:"simple-view-panel-item-row",style:{display:"flex",justifyContent:"flex-end"}},null!==(Xt=this.props.storedBmpForm)&&void 0!==Xt&&Xt.id?d().createElement(d().Fragment,null,this.props.complexBmpForm?d().createElement("button",{type:"button",className:"swamm-button",onClick:function(){return Qt.props.setComplexBmpForm(!1)}},"Simple"):d().createElement("button",{type:"button",className:"swamm-button",onClick:function(){return Qt.props.setComplexBmpForm(!0)}},"Advanced"),d().createElement("button",{type:"button",className:"swamm-button",onClick:function(){var e;Qt.props.downloadBmpReport(null===(e=Qt.props.storedBmpForm)||void 0===e?void 0:e.id)}},"Make PDF")):null,d().createElement("button",{type:"button",className:"swamm-button",onClick:function(){Qt.props.hideBmpForm(),Qt.refreshBmpLayers()}},"View Map"),d().createElement("button",{type:"button",disabled:!!this.props.standard_url,className:"swamm-button ".concat(this.props.standard_url?"":"swamm-button-disabled"),onClick:function(){return window.open(Qt.props.standard_url,"_blank")}},"Description"),null!==($t=this.props.storedBmpForm)&&void 0!==$t&&$t.id?d().createElement("button",{type:"button",className:"swamm-button",style:{backgroundColor:"darkred"},onClick:function(){var e;window.confirm("This action can not be undone. Are you sure?")&&Qt.props.deleteBmp(Qt.props.projectId,null===(e=Qt.props.storedBmpForm)||void 0===e?void 0:e.id)}},"Delete"):null,d().createElement("button",{type:"button",className:this.props.hasGeometry?"swamm-button":"swamm-button disabled",style:{backgroundColor:"darkgreen"},onClick:function(){Qt.props.submitBmpForm(Qt.props.storedBmpForm,Qt.props.projectId)}},"Save")))}},{key:"validateRatio",value:function(e){var t=this.props.storedBmpForm[e];return t<1&&t>0?"success":1===t?"warning":t>1||t<0?"error":null}},{key:"validateCost",value:function(e){var t=this.props.storedBmpForm[e];return t>=0?"success":t<0?"error":null}},{key:"validateFid",value:function(e){var t,n,r=this.props.storedBmpForm[e];return r>=0&&(t=r,!isNaN(t)&&(0|(n=parseFloat(t)))===n)?"success":r<0?"error":null}},{key:"handleChange",value:function(e){var t=e.target.name,n=e.target.value,r=R({},t,n);"number"===e.target.type&&(r=R({},t,parseFloat(n))),this.props.updateBmpForm(r)}},{key:"handleGroupProfileChange",value:function(e){var t=e.target.name,n=JSON.parse(e.target.value),r=R({},t,this.props.groupProfiles.filter((function(e){return(null==e?void 0:e.pk)===n}))[0]);this.props.updateBmpForm(r)}},{key:"handleBmpChange",value:function(e){var t=e.target.value,n=this.props.bmpTypes.filter((function(e){return(null==e?void 0:e.name)===t}))[0];this.props.makeDefaultsBmpForm(n)}},{key:"drawBmpStep1",value:function(e,t){var n,r,o;console.log("this.props.bmpOutletLayer?.id",null===(n=this.props.bmpOutletLayer)||void 0===n?void 0:n.id),console.log("this.props.bmpFootprintLayer?.id",null===(r=this.props.bmpFootprintLayer)||void 0===r?void 0:r.id),console.log("this.props.bmpWatershedLayer?.id",null===(o=this.props.bmpWatershedLayer)||void 0===o?void 0:o.id),this.refreshBmpLayers(),this.props.hideBmpForm();var i=this.props.layers.flat.filter((function(t){return null==t?void 0:t.name.includes(e)}))[0];console.log("drawBmpStep1 targetLayer",i),console.log("drawBmpStep1 layerName",e),console.log("drawBmpStep1 featureId",t),this.props.setDrawingBmpLayerName(null==i?void 0:i.name),t?this.props.setEditingBmpFeatureId(t):this.props.clearEditingBmpFeatureId(),this.props.toggleLayer(i.id,!0),this.props.setLayer(null==i?void 0:i.id),this.props.featureTypeSelected("http://localhost:8080/geoserver/wfs",null==i?void 0:i.name),console.log("drawBmpStep1 finished")}},{key:"refreshBmpLayers",value:function(){var e,t,n;this.props.refreshLayerVersion(null===(e=this.props.bmpOutletLayer)||void 0===e?void 0:e.id),this.props.refreshLayerVersion(null===(t=this.props.bmpFootprintLayer)||void 0===t?void 0:t.id),this.props.refreshLayerVersion(null===(n=this.props.bmpWatershedLayer)||void 0===n?void 0:n.id)}}])&&N(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(d().Component);R(C,"propTypes",{bmpTypeId:I.number,bmpTypes:I.array,bmpTypeGroups:I.array,statuses:I.array,setMenuGroup:I.func,priorities:I.array,setOpenMenuGroupId:I.func,creatingNewBmp:I.bool,updatingBmp:I.object,hideLoadingBmp:I.func,showLoadingBmp:I.func,hideBmpForm:I.func,submitBmpForm:I.func,showSubmitBmpFormSuccess:I.bool,showSubmitBmpFormError:I.bool,storeBmpForm:I.func,complexBmpForm:I.bool,setComplexBmpForm:I.func,thisBmpType:I.object,newBmpForm:I.object,storedBmpForm:I.object,clearBmpForm:I.func,groupProfiles:I.array,saveableGroupProfiles:I.array,makeDefaultsBmpForm:I.func,makeExistingBmpForm:I.func,updateBmpForm:I.func,setLayer:I.func,featureTypeSelected:I.func,toggleEditMode:I.func,createNewFeatures:I.func,createQuery:I.func,startDrawingFeature:I.func,saveChanges:I.func,setDrawingBmpLayerName:I.func,setEditingBmpFeatureId:I.func,clearEditingBmpFeatureId:I.func,layers:I.object,query:I.func,projectId:I.number,purgeMapInfoResults:I.func,bmpUniqueNames:I.array,setHighlightFeaturesPath:I.func,projectData:I.object,toggleLayer:I.func,bmpOutletLayer:I.object,bmpFootprintLayer:I.object,bmpWatershedLayer:I.object,hasGeometry:I.bool,requiresOutlet:I.bool,requiresFootprint:I.bool,requiresWatershed:I.bool,watershedIsFootprint:I.bool,changingBmpType:I.bool,deleteBmp:I.func,setChangingBmpType:I.func,cppe_url:I.string,standard_url:I.string,ned_url:I.string,infosheet_url:I.string,downloadBmpReport:I.func,refreshLayerVersion:I.func,expandedBmpTypeGroupName:I.string,setExpandedBmpTypeGroupName:I.func}),R(C,"defaultProps",{});var x=(0,m.connect)((function(e){var t,n,r,o,i,a,l,u,s,c,p,d,m,f,v,g,b,y,h,S,T,O,N,M,P,B,F,R,I,C,x,D,L,G,k,j,U,W,H,V,Y,z,K,q,Z,J,X=(null==e||null===(t=e.swamm)||void 0===t?void 0:t.groupProfiles.filter((function(e){return!["anonymous","registered-members","admin","swamm-users","illinois-pork-producers"].includes(e.slug)}))).filter((function(t){var n,r,o;return null==e||null===(n=e.swamm)||void 0===n||null===(r=n.projectData)||void 0===r||null===(o=r.permitted_groups.map((function(e){return e.pk})))||void 0===o?void 0:o.includes(t.pk)})).map((function(t){var n,r,o,i;return t.saveable=null==e||null===(n=e.security)||void 0===n||null===(r=n.user)||void 0===r||null===(o=r.info)||void 0===o||null===(i=o.groups)||void 0===i?void 0:i.includes(null==t?void 0:t.slug),t}));return{projectId:null==e||null===(n=e.swamm)||void 0===n||null===(r=n.projectData)||void 0===r?void 0:r.id,projectData:null==e||null===(o=e.swamm)||void 0===o?void 0:o.projectData,bmpUniqueNames:_(e).map((function(e){return null==e?void 0:e.name})),bmpTypes:null==e||null===(i=e.swamm)||void 0===i?void 0:i.bmpTypes,bmpTypeGroups:(null==e||null===(a=e.swamm)||void 0===a?void 0:a.bmpTypeGroups)||[],expandedBmpTypeGroupName:null==e||null===(l=e.swamm)||void 0===l?void 0:l.expandedBmpTypeGroupName,saveableGroupProfiles:X,statuses:null==e||null===(u=e.swamm)||void 0===u?void 0:u.statuses,priorities:null==e||null===(s=e.swamm)||void 0===s?void 0:s.priorities,thisBmpType:null==e||null===(c=e.swamm)||void 0===c?void 0:c.bmpTypes.filter((function(t){var n;return t.id===(null==e||null===(n=e.swamm)||void 0===n?void 0:n.BmpFormBmpTypeId)}))[0],storedBmpForm:(null==e||null===(p=e.swamm)||void 0===p?void 0:p.storedBmpForm)||{},complexBmpForm:(null==e||null===(d=e.swamm)||void 0===d?void 0:d.complexBmpForm)||!1,bmpOutletLayer:E(e),bmpFootprintLayer:w(e),bmpWatershedLayer:A(e),hasGeometry:(null==e||null===(m=e.swamm)||void 0===m||null===(f=m.storedBmpForm)||void 0===f?void 0:f.outlet_fid)||(null==e||null===(v=e.swamm)||void 0===v||null===(g=v.storedBmpForm)||void 0===g?void 0:g.footprint_fid)||(null==e||null===(b=e.swamm)||void 0===b||null===(y=b.storedBmpForm)||void 0===y?void 0:y.watershed_fid),requiresOutlet:null==e||null===(h=e.swamm)||void 0===h||null===(S=h.storedBmpForm)||void 0===S||null===(T=S.type_data)||void 0===T?void 0:T.requires_outlet,requiresFootprint:null==e||null===(O=e.swamm)||void 0===O||null===(N=O.storedBmpForm)||void 0===N||null===(M=N.type_data)||void 0===M?void 0:M.requires_footprint,requiresWatershed:null==e||null===(P=e.swamm)||void 0===P||null===(B=P.storedBmpForm)||void 0===B||null===(F=B.type_data)||void 0===F?void 0:F.requires_watershed,watershedIsFootprint:null==e||null===(R=e.swamm)||void 0===R||null===(I=R.storedBmpForm)||void 0===I||null===(C=I.type_data)||void 0===C?void 0:C.watershed_is_footprint,cppe_url:null==e||null===(x=e.swamm)||void 0===x||null===(D=x.storedBmpForm)||void 0===D||null===(L=D.type_data)||void 0===L?void 0:L.cppe_url,standard_url:null==e||null===(G=e.swamm)||void 0===G||null===(k=G.storedBmpForm)||void 0===k||null===(j=k.type_data)||void 0===j?void 0:j.standard_url,ned_url:null==e||null===(U=e.swamm)||void 0===U||null===(W=U.storedBmpForm)||void 0===W||null===(H=W.type_data)||void 0===H?void 0:H.ned_url,infosheet_url:null==e||null===(V=e.swamm)||void 0===V||null===(Y=V.storedBmpForm)||void 0===Y||null===(z=Y.type_data)||void 0===z?void 0:z.infosheet_url,creatingNewBmp:null==e||null===(K=e.swamm)||void 0===K?void 0:K.creatingNewBmp,changingBmpType:null==e||null===(q=e.swamm)||void 0===q?void 0:q.changingBmpType,updatingBmp:null==e||null===(Z=e.swamm)||void 0===Z?void 0:Z.updatingBmp,groupProfiles:null==e||null===(J=e.swamm)||void 0===J?void 0:J.groupProfiles,layers:null==e?void 0:e.layers,query:null==e?void 0:e.query}}),(function(e){return{setMenuGroup:function(t){return e((0,o.setMenuGroup)(t))},setOpenMenuGroupId:function(t){return e((0,v.setOpenMenuGroupId)(t))},hideBmpForm:function(){return e((0,o.hideBmpForm)())},hideLoadingBmp:function(){return e((0,o.hideLoadingBmp)())},showLoadingBmp:function(){return e((0,o.showLoadingBmp)())},submitBmpForm:function(t,n){return e((0,o.submitBmpForm)(t,n))},updateBmpForm:function(t){return e((0,o.updateBmpForm)(t))},clearBmpForm:function(){return e((0,o.clearBmpForm)())},deleteBmp:function(t,n){return e((0,o.deleteBmp)(t,n))},makeDefaultsBmpForm:function(t){return e((0,o.makeDefaultsBmpForm)(t))},setChangingBmpType:function(t){return e((0,o.setChangingBmpType)(t))},setExpandedBmpTypeGroupName:function(t){return e((0,o.setExpandedBmpTypeGroupName)(t))},setComplexBmpForm:function(t){return e((0,o.setComplexBmpForm)(t))},setLayer:function(t){return e((0,g.uF)(t))},setDrawingBmpLayerName:function(t){return e((0,o.setDrawingBmpLayerName)(t))},setEditingBmpFeatureId:function(t){return e((0,o.setEditingBmpFeatureId)(t))},clearEditingBmpFeatureId:function(){return e((0,o.clearEditingBmpFeatureId)())},featureTypeSelected:function(t,n){return e((0,y.gT)(t,n))},toggleEditMode:function(){return e((0,g.lg)())},toggleLayer:function(t,n){return e((0,T.He)(t,{visibility:n}))},createNewFeatures:function(t){return e((0,g.lx)(t))},createQuery:function(t,n){return e((0,y.rP)(t,n))},query:function(t,n,r,o){return e((0,y.IO)(t,n,r,o))},startDrawingFeature:function(){return e((0,g.kA)())},saveChanges:function(){return e((0,g.$S)())},purgeMapInfoResults:function(){return e((0,b.g)())},makeExistingBmpForm:function(t){return e((0,o.makeExistingBmpForm)(t))},downloadBmpReport:function(t){return e((0,o.downloadBmpReport)(t))},refreshLayerVersion:function(t,n){return e((0,T.ct)(t,n))}}}))(C),D=n(893379),L=n.n(D),G=n(666129);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t){return(U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function W(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return H(e)}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}L()(G.Z,{insert:"head",singleton:!1}),G.Z.locals;var z=n(45697),K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=V(r);if(o){var n=V(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return W(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).handleChange=t.handleChange.bind(H(t)),t.handleMultiSelection=t.handleMultiSelection.bind(H(t)),t.state={},t}return t=a,(n=[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e,t,n,r,o,i,a,l,u,s,c,p,m,f=this;return d().createElement("div",{id:"swamm-target-form-panel",className:"simple-view-panel menu-rows-container"},d().createElement("div",{id:"swamm-target-form-header"},d().createElement("div",{className:"swamm-bmp-chart-heading"},this.props.targetForm.id?"Edit Target: "+(null===(e=this.props.targetForm)||void 0===e?void 0:e.name):"Create a new Target"),d().createElement("span",{className:"btn glyphicon glyphicon-remove legend-close",onClick:function(){f.props.hideTargetForm()}})),d().createElement("div",{id:"swamm-target-form-body"},d().createElement("div",{id:"swamm-target-form-col-one"},d().createElement("div",{className:"swamm-target-row"},d().createElement("div",{style:{marginRight:"15px"}},"Target Name:"),d().createElement("input",{type:"text",name:"name",style:{width:"200px",maxWidth:"200px",textAlign:"left"},value:null===(t=this.props.targetForm)||void 0===t?void 0:t.name,onChange:this.handleChange})),d().createElement("div",{className:"swamm-target-row"},d().createElement("div",null,"Description:")),d().createElement("div",{className:"swamm-target-row"},d().createElement("textarea",{id:"swamm-target-description-textarea",style:{boderRadius:"4px",marginBottom:"15px"},rows:4,cols:50,name:"description",value:null===(n=this.props.targetForm)||void 0===n?void 0:n.description,onChange:this.handleChange})),d().createElement("div",{id:"swamm-target-percentages"},d().createElement("div",{className:"swamm-target-form-heading"},"Set Targets:"),d().createElement("div",{className:"swamm-target-row"},d().createElement("div",{style:{width:"90px"}},"Nitrogen:"),d().createElement("input",{type:"number",step:1,name:"target_percent_n_reduction",value:100*(null===(r=this.props.targetForm)||void 0===r?void 0:r.target_percent_n_reduction),onChange:this.handleChange}),d().createElement("div",{style:{marginLeft:"4px"}},"% reduction")),d().createElement("div",{className:"swamm-target-row"},d().createElement("div",{style:{width:"90px"}},"Phosphorus:"),d().createElement("input",{type:"number",step:1,name:"target_percent_p_reduction",value:100*(null===(o=this.props.targetForm)||void 0===o?void 0:o.target_percent_p_reduction),onChange:this.handleChange}),d().createElement("div",{style:{marginLeft:"4px"}},"% reduction")),d().createElement("div",{className:"swamm-target-row"},d().createElement("div",{style:{width:"90px"}},"Sediment:"),d().createElement("input",{type:"number",step:1,name:"target_percent_s_reduction",value:100*(null===(i=this.props.targetForm)||void 0===i?void 0:i.target_percent_s_reduction),onChange:this.handleChange}),d().createElement("div",{style:{marginLeft:"4px"}},"% reduction")))),d().createElement("div",{id:"swamm-target-form-col-two"},d().createElement("div",{className:"swamm-target-form-heading"},"Include BMPs from these organizations:"),d().createElement("select",{multiple:!0,name:"group_profiles",className:"swamm-target-select",value:null===(a=this.props.targetForm)||void 0===a?void 0:a.group_profiles,onChange:this.handleMultiSelection,style:{height:"200px"}},null===(l=this.props.viewableGroupProfiles)||void 0===l?void 0:l.map((function(e){return d().createElement("option",{value:e.pk},e.title)}))),d().createElement("div",{className:"swamm-target-form-heading"},"Include these BMP types:"),d().createElement("select",{multiple:!0,name:"bmp_types",className:"swamm-target-select",value:null===(u=this.props.targetForm)||void 0===u?void 0:u.bmp_types,onChange:this.handleMultiSelection,style:{height:"200px"}},null===(s=this.props.bmpTypes)||void 0===s?void 0:s.map((function(e){return d().createElement("option",{value:e.id},e.name)}))),d().createElement("div",{className:"swamm-target-form-heading"},"Include these BMP statuses:"),d().createElement("select",{multiple:!0,name:"statuses",className:"swamm-target-select",value:null===(c=this.props.targetForm)||void 0===c?void 0:c.statuses,onChange:this.handleMultiSelection,style:{height:"200px"}},null===(p=this.props.statuses)||void 0===p?void 0:p.map((function(e){return d().createElement("option",{value:e.name},e.name)}))))),d().createElement("div",{id:"swamm-target-form-footer"},d().createElement("button",{className:"swamm-button",onClick:function(){return f.props.hideTargetForm()}},"Close"),d().createElement("button",{className:"swamm-button",style:{backgroundColor:"darkgreen"},onClick:function(){f.props.submitTargetForm(f.props.targetForm,f.props.projectId)}},"Save Target"),null!==(m=this.props.targetForm)&&void 0!==m&&m.id?d().createElement("button",{className:"swamm-button",style:{backgroundColor:"darkred"},onClick:function(){var e;window.confirm("This action can not be undone. Are you sure?")&&f.props.deleteTarget(f.props.projectId,null===(e=f.props.targetForm)||void 0===e?void 0:e.id)}},"Delete Target"):null))}},{key:"handleMultiSelection",value:function(e){var t=Y({},e.target.name,Array.from(e.target.selectedOptions,(function(e){return e.value})));this.props.updateTargetForm(t)}},{key:"handleChange",value:function(e){var t=e.target.name,n=e.target.value,r=Y({},t,n);"number"===e.target.type&&e.target.name.includes("target_percent_")&&(r=Y({},t,parseFloat(n)/100)),this.props.updateTargetForm(r)}},{key:"validatePercentage",value:function(e){var t=this.props.targetForm[e];return t<1&&t>0?"success":1===t?"warning":t>1||t<0?"error":null}}])&&j(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(d().Component);Y(K,"propTypes",{projectId:z.number,targetForm:z.object,hideTargetForm:z.func,deleteTarget:z.func,clearTargetForm:z.func,submitTargetForm:z.func,updateTargetForm:z.func,viewableGroupProfiles:z.array,bmpTypes:z.array,statuses:z.array}),Y(K,"defaultProps",{});var q=(0,m.connect)((function(e){var t,n,r,o,i,a,l=(null==e||null===(t=e.swamm)||void 0===t?void 0:t.groupProfiles.filter((function(e){return!["anonymous","registered-members","admin","swamm-users","illinois-pork-producers"].includes(e.slug)}))).filter((function(t){var n,r,o;return null==e||null===(n=e.swamm)||void 0===n||null===(r=n.projectData)||void 0===r||null===(o=r.permitted_groups.map((function(e){return e.pk})))||void 0===o?void 0:o.includes(t.pk)}));return{projectId:null==e||null===(n=e.swamm)||void 0===n||null===(r=n.projectData)||void 0===r?void 0:r.id,bmpTypes:null==e||null===(o=e.swamm)||void 0===o?void 0:o.bmpTypes,statuses:null==e||null===(i=e.swamm)||void 0===i?void 0:i.statuses,targetForm:(null==e||null===(a=e.swamm)||void 0===a?void 0:a.targetForm)||{},viewableGroupProfiles:l}}),(function(e){return{hideTargetForm:function(){return e((0,o.hideTargetForm)())},deleteTarget:function(t,n){return e((0,o.deleteTarget)(t,n))},clearTargetForm:function(){return e((0,o.clearTargetForm)())},submitTargetForm:function(t,n){return e((0,o.submitTargetForm)(t,n))},updateTargetForm:function(t){return e((0,o.updateTargetForm)(t))}}}))(K);function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X(e,t){return(X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function $(e,t){if(t&&("object"===Z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Q(e)}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ne=n(45697),re=n(443113),oe=re.Cell,ie=re.BarChart,ae=re.Bar,le=re.PieChart,ue=re.Pie,se=re.ResponsiveContainer,ce=re.XAxis,pe=re.YAxis,de=(re.Legend,re.Tooltip),me=100,fe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ee(r);if(o){var n=ee(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return $(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),te(Q(t=i.call(this,e)),"pollutants",[{name:"Phosphorus",load_red_total_key:"total_p_load_reduction",title:"Phosphorus Load reductions (lbs/year)",initial:"p"},{name:"Nitrogen",load_red_total_key:"total_n_load_reduction",title:"Nitrogen Load reductions (lbs/year)",initial:"n"},{name:"Sediment",load_red_total_key:"total_s_load_reduction",title:"Sediment Load reductions (tons/year)",initial:"s"},{name:"Total",load_red_total_key:"calculated_watershed_area",title:"Treated Area (acres)",initial:"a"}]),te(Q(t),"colours",["#0088FE","#00C49F","#FFBB28","#FF8042","#39CCCC","#7FDBFF","#0074D9","#001f3f","#FFDC00","#01FF70","#2ECC40","#3D9970","#DDDDDD","#AAAAAA","#B10DC9","#F012BE","#85144b","#FF4136","#FF851B","#FFFFFF"]),t.state={tooltipKey:null},t}return t=a,(n=[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e,t,n,r,o,i,a,l,u,s,c,p,m,v,g,b,y,_,E,w,A,S,T,O,N,M,P,B,F,R,I,C,x,D,L,G,k,j,U,W,H,V,Y,z=this;return d().createElement("div",{id:"swamm-bmp-chart-panel",className:"simple-view-panel menu-rows-container"},d().createElement("div",{id:"swamm-bmp-chart-header"},d().createElement("div",null,"Dashboard: ",null===(e=this.props.selectedTarget)||void 0===e?void 0:e.name),d().createElement("span",{className:"btn glyphicon glyphicon-remove legend-close",onClick:function(){z.props.hideSwammBmpChart()}})),d().createElement("div",{id:"swamm-bmp-chart-body"},d().createElement("div",{id:"swamm-bmp-chart-col-one"},d().createElement("div",{id:"swamm-bmp-chart-targets"},d().createElement("div",{className:"swamm-bmp-chart-heading"},"Targets"),this.props.targets.map((function(e){return d().createElement("button",{className:"swamm-button",style:{backgroundColor:e.id===z.props.selectedTargetId?"rgba(39,202,59,1)":"rgba(39,202,59,0.6)"},onClick:function(){return z.props.selectSwammTargetId(null==e?void 0:e.id)}},null==e?void 0:e.name)})),d().createElement("button",{className:"swamm-button",style:{marginTop:"10px"},onClick:function(){return z.props.showTargetForm(null)}},"New Target"),d().createElement("button",{className:"swamm-button",style:{marginTop:"10px",marginBottom:"10px"},onClick:function(){return z.props.showTargetForm(z.props.selectedTarget)}},"Edit Target")),d().createElement("div",{id:"swamm-bmp-chart-filter"},d().createElement("div",{className:"swamm-bmp-chart-heading"},"Sort Data By:"),d().createElement("button",{className:"swamm-button",style:{backgroundColor:"type"===this.props.bmpFilterMode?"rgba(39,202,59,1)":"rgba(39,202,59,0.6)"},onClick:function(){return z.props.setBmpFilterMode("type")}},"BMP Type"),d().createElement("button",{className:"swamm-button",style:{backgroundColor:"status"===this.props.bmpFilterMode?"rgba(39,202,59,1)":"rgba(39,202,59,0.6)"},onClick:function(){return z.props.setBmpFilterMode("status")}},"BMP Status"),d().createElement("button",{className:"swamm-button",style:{backgroundColor:"group_profile"===this.props.bmpFilterMode?"rgba(39,202,59,1)":"rgba(39,202,59,0.6)"},onClick:function(){return z.props.setBmpFilterMode("group_profile")}},"Organization"))),d().createElement("div",{id:"swamm-bmp-chart-col-two"},this.pollutants.map((function(e){var t,n,r,o,i,a,l,u,s,c;return d().createElement("div",{id:"swamm-bmp-chart-".concat(e.name.toLowerCase()),className:"swamm-bmp-chart-graph-container"},d().createElement("div",{className:"swamm-bmp-chart-heading"},e.title),d().createElement("div",{id:"swamm-bmp-chart-".concat(e.name.toLowerCase(),"-graph-box"),className:"swamm-bmp-chart-graph-box"},d().createElement("div",{className:"swamm-bmp-chart-pie-group"},d().createElement(le,{width:150,height:150,style:{paddingTop:"10px"}},d().createElement(ue,{data:null===(t=z.props.selectedTarget)||void 0===t||null===(n=t.speedDialData)||void 0===n?void 0:n["percent".concat(e.name,"Target")],dataKey:"value",cx:66.92307692307692,cy:50,innerRadius:me/3,outerRadius:50,fill:"#82ca9d",startAngle:180,endAngle:0,isAnimationActive:!1},d().createElement(oe,{fill:"#27ca3b",cornerRadius:1}),d().createElement(oe,{fill:"#97b3c3",cornerRadius:1})),"a"!==e.initial?d().createElement(d().Fragment,null,d().createElement("text",{x:me/1.3-5,y:45,textAnchor:"middle",fontSize:20,dominantBaseline:"middle",className:"progress-label"},(null===(r=z.props.selectedTarget)||void 0===r||null===(o=r.speedDialData["percent".concat(e.name,"Target")])||void 0===o||null===(i=o[0])||void 0===i?void 0:i.value.toFixed(1))+"%"),d().createElement("text",{x:me/1.3-5,y:68,textAnchor:"middle",fontSize:20,dominantBaseline:"middle",className:"progress-label"},"of Target")):d().createElement(d().Fragment,null,d().createElement("text",{x:me/1.3-5,y:18,textAnchor:"middle",fontSize:20,dominantBaseline:"middle",className:"progress-label"},"BMP Count:"),d().createElement("text",{x:me/1.3-5,y:40,textAnchor:"middle",fontSize:20,dominantBaseline:"middle",className:"progress-label"},null===(a=z.props.selectedTarget)||void 0===a||null===(l=a.barChartData)||void 0===l?void 0:l.total_bmp_count)))),d().createElement("div",{className:"swamm-bmp-chart-bar-group"},d().createElement(se,{width:"95%",height:100,className:"swamm-bmp-chart-bar-group-responsive"},d().createElement(ie,{data:z.props.rechartsBarData,layout:"vertical",height:100},null===(u=z.props.rechartsBarData)||void 0===u||null===(s=u[0])||void 0===s||null===(c=s.barOne)||void 0===c?void 0:c.map((function(t,n){var r="barOne.".concat(n,".").concat(e.load_red_total_key);return d().createElement(ae,{key:"".concat(null==t?void 0:t.type," + ").concat(e.initial," + ").concat(n),stackId:"a",dataKey:r,fill:z.colours[n],name:null==t?void 0:t.label,onMouseOver:function(){return z.setState({tooltipKey:r})},isAnimationActive:!1})})),d().createElement(de,{content:d().createElement(ve,{tooltipKey:z.state.tooltipKey})}),d().createElement(ce,{type:"number"}),d().createElement(pe,{type:"category",domain:[0,0],hide:!0}),"}")))))})),d().createElement("div",{id:"swamm-bmp-chart-summary"},d().createElement(f.Table,{bordered:!0,condensed:!0,hover:!0,className:"text-right"},d().createElement("thead",null,d().createElement("tr",null,d().createElement("th",null,"Summary"),d().createElement("th",{style:{textAlign:"center"}},"Phosphorus"),d().createElement("th",{style:{textAlign:"center"}},"Nitrogen"),d().createElement("th",{style:{textAlign:"center"}},"Sediment"),d().createElement("th",null))),d().createElement("tbody",null,d().createElement("tr",null,d().createElement("td",null,"Current total untreated pollutant volume:"),d().createElement("td",null,h(null===(t=this.props.selectedTarget)||void 0===t||null===(n=t.speedDialData)||void 0===n?void 0:n.currentPhosphorusLoad,0)),d().createElement("td",null,h(null===(r=this.props.selectedTarget)||void 0===r||null===(o=r.speedDialData)||void 0===o?void 0:o.currentNitrogenLoad,0)),d().createElement("td",null,h(null===(i=this.props.selectedTarget)||void 0===i||null===(a=i.speedDialData)||void 0===a?void 0:a.currentSedimentLoad,0)),d().createElement("td",{className:"text-left"},"units/year")),d().createElement("tr",null,d().createElement("td",null,"Selected target reduction percentage:"),d().createElement("td",null,100*(null===(l=this.props.selectedTarget)||void 0===l||null===(u=l.speedDialData)||void 0===u?void 0:u.percentPhosphorusReductionTarget)),d().createElement("td",null,100*(null===(s=this.props.selectedTarget)||void 0===s||null===(c=s.speedDialData)||void 0===c?void 0:c.percentNitrogenReductionTarget)),d().createElement("td",null,100*(null===(p=this.props.selectedTarget)||void 0===p||null===(m=p.speedDialData)||void 0===m?void 0:m.percentSedimentReductionTarget)),d().createElement("td",{className:"text-left"},"% of total")),d().createElement("tr",null,d().createElement("td",null,"Selected target load reduction required:"),d().createElement("td",null,h(null===(v=this.props.selectedTarget)||void 0===v||null===(g=v.speedDialData)||void 0===g?void 0:g.targetPhosphorusLoadReductionRequired,0)),d().createElement("td",null,h(null===(b=this.props.selectedTarget)||void 0===b||null===(y=b.speedDialData)||void 0===y?void 0:y.targetNitrogenLoadReductionRequired,0)),d().createElement("td",null,h(null===(_=this.props.selectedTarget)||void 0===_||null===(E=_.speedDialData)||void 0===E?void 0:E.targetSedimentLoadReductionRequired,0)),d().createElement("td",{className:"text-left"},"units/year")),d().createElement("tr",null,d().createElement("td",null,"Actual pollutant reduction from BMPs:"),d().createElement("td",null,h(null===(w=this.props.selectedTarget)||void 0===w||null===(A=w.speedDialData)||void 0===A?void 0:A.totalBmpPhosphorusReduction,0)),d().createElement("td",null,h(null===(S=this.props.selectedTarget)||void 0===S||null===(T=S.speedDialData)||void 0===T?void 0:T.totalBmpNitrogenReduction,0)),d().createElement("td",null,h(null===(O=this.props.selectedTarget)||void 0===O||null===(N=O.speedDialData)||void 0===N?void 0:N.totalBmpSedimentReduction,0)),d().createElement("td",{className:"text-left"},"units/year")),d().createElement("tr",null,d().createElement("td",null,"Percentage of target achieved:"),d().createElement("td",null,null===(M=this.props.selectedTarget)||void 0===M||null===(P=M.speedDialData)||void 0===P||null===(B=P.percentPhosphorusTarget)||void 0===B||null===(F=B[0])||void 0===F||null===(R=F.value)||void 0===R?void 0:R.toFixed(1)),d().createElement("td",null,null===(I=this.props.selectedTarget)||void 0===I||null===(C=I.speedDialData)||void 0===C||null===(x=C.percentNitrogenTarget)||void 0===x||null===(D=x[0])||void 0===D||null===(L=D.value)||void 0===L?void 0:L.toFixed(1)),d().createElement("td",null,null===(G=this.props.selectedTarget)||void 0===G||null===(k=G.speedDialData)||void 0===k||null===(j=k.percentSedimentTarget)||void 0===j||null===(U=j[0])||void 0===U||null===(W=U.value)||void 0===W?void 0:W.toFixed(1)),d().createElement("td",{className:"text-left"},"%")))))),d().createElement("div",{id:"smamm-bmp-chart-col-three"},d().createElement("div",{id:"swamm-bmp-chart-legend-container"},d().createElement("div",{className:"swamm-bmp-chart-heading"},"Legend"),d().createElement("div",{id:"swamm-bmp-chart-legend-rows"},null===(H=this.props.selectedTarget)||void 0===H||null===(V=H.barChartData)||void 0===V||null===(Y=V[this.props.bmpFilterMode])||void 0===Y?void 0:Y.map((function(e,t){return d().createElement("div",{className:"swamm-bmp-chart-legend-row"},d().createElement("svg",{width:"15",height:"15"},d().createElement("rect",{width:"15",height:"15",fill:z.colours[t]})),d().createElement("div",{style:{marginLeft:"15px"}},null==e?void 0:e.label))})))))),d().createElement("div",{id:"swamm-bmp-chart-footer"},d().createElement("button",{className:"swamm-button",onClick:function(){return z.props.hideSwammBmpChart()}},"Close")))}}])&&J(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(d().Component);te(fe,"propTypes",{hideSwammBmpChart:ne.func,data:ne.array,rechartsBarData:ne.array,targets:ne.array,selectSwammTargetId:ne.func,showTargetForm:ne.func,selectedTargetId:ne.number,defaultTargetId:ne.number,selectedTarget:ne.object,bmpFilterMode:ne.string,setBmpFilterMode:ne.func}),te(fe,"defaultProps",{});var ve=function(e){var t=e.active,n=e.payload,r=(e.label,e.tooltipKey);return t&&n&&n.length&&r?n.map((function(e){if(e.dataKey===r){var t=r.split("."),n=e.payload[t[0]][Number(t[1])][t[2]];return d().createElement("div",{className:"custom-tooltip"},d().createElement("div",{className:"custom-tooltip-label"},null==e?void 0:e.name," - ",h(n,0)),d().createElement("br",null))}return null})):null},ge=(0,m.connect)((function(e){var t,n,r,o,i,a,l,u,s=null==e||null===(t=e.swamm)||void 0===t||null===(n=t.targets)||void 0===n||null===(r=n.filter((function(t){var n;return t.id===(null==e||null===(n=e.swamm)||void 0===n?void 0:n.selectedTargetId)})))||void 0===r?void 0:r[0],c=(null==e||null===(o=e.swamm)||void 0===o?void 0:o.bmpFilterMode)||"type",p=[{barOne:null==s||null===(i=s.barChartData)||void 0===i?void 0:i[c]}];return{statuses:(null==e||null===(a=e.swamm)||void 0===a?void 0:a.statuses)||[],targets:(null==e||null===(l=e.swamm)||void 0===l?void 0:l.targets)||[],selectedTargetId:null==e||null===(u=e.swamm)||void 0===u?void 0:u.selectedTargetId,selectedTarget:s,rechartsBarData:p,bmpFilterMode:c,visibleTargetForm:null==e?void 0:e.swamm.visibleTargetForm}}),(function(e){return{hideSwammBmpChart:function(){return e((0,o.hideSwammBmpChart)())},selectSwammTargetId:function(t){return e((0,o.selectSwammTargetId)(t))},setBmpFilterMode:function(t){return e((0,o.setBmpFilterMode)(t))},showTargetForm:function(t){return e((0,o.showTargetForm)(t))}}}))(fe);function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t){return(he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _e(e,t){if(t&&("object"===be(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ee(e)}function Ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function we(e){return(we=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Se=n(45697),Te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&he(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=we(r);if(o){var n=we(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return _e(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).handleChange=t.handleChange.bind(Ee(t)),t}return t=a,(n=[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this;return d().createElement(d().Fragment,null,d().createElement("div",{id:"swamm-bmp-filters",className:"simple-view-panel",style:{top:"175px",width:"480px"}},d().createElement("div",{className:"menu-rows-container"},d().createElement("div",{className:"row menu-row pull-left",style:{width:"480px",textAlign:"left"}},d().createElement("span",{className:"inline btn glyphicon menu-row-glyph "+("bmpType"===this.props.expandedFilter?"glyphicon-chevron-down":"glyphicon-chevron-right"),style:{color:"white",background:"none"},onClick:function(){e.props.setExpandedFilter("bmpType")}}),d().createElement("span",{className:"inline h5 menu-row-text"},d().createElement("strong",null,"Filter by BMP type")),"bmpType"===this.props.expandedFilter?d().createElement(d().Fragment,null,d().createElement("span",{className:"inline btn glyphicon menu-row-glyph glyphicon-check",style:{color:"limegreen",marginLeft:"30px"},onClick:function(){e.props.setAllBmpTypesVisibility(!0)}}),d().createElement("span",{className:"inline h5 menu-row-text"},"Select All"),d().createElement("span",{className:"inline btn glyphicon menu-row-glyph glyphicon-unchecked",style:{color:"red",marginLeft:"30px"},onClick:function(){e.props.setAllBmpTypesVisibility(!1)}}),d().createElement("span",{className:"inline h5 menu-row-text"},"Select None"),d().createElement("hr",{style:{margin:"0"}}),d().createElement(f.Row,null,this.props.bmpTypes.map((function(t,n){return d().createElement(f.Col,{sm:6,className:"row menu-row filter-row "+(n%2?"filter-row-odd":"")},d().createElement("span",{className:"btn glyphicon menu-row-glyph "+(null!=t&&t.visibility?"glyphicon-ok":"glyphicon-remove"),style:{color:null!=t&&t.visibility?"limegreen":"red"},onClick:function(){return e.props.toggleBmpTypeVisibility(t)}}),d().createElement("span",{className:"menu-row-text"},null==t?void 0:t.name))})))):null),d().createElement("div",{className:"row menu-row pull-left",style:{width:"480px",textAlign:"left"}},d().createElement("span",{className:"inline btn glyphicon menu-row-glyph "+("priority"===this.props.expandedFilter?"glyphicon-chevron-down":"glyphicon-chevron-right"),style:{color:"white",background:"none"},onClick:function(){e.props.setExpandedFilter("priority")}}),d().createElement("span",{className:"inline h5 menu-row-text"},d().createElement("strong",null,"Filter by BMP priority")),"priority"===this.props.expandedFilter?d().createElement(d().Fragment,null,d().createElement("hr",{style:{margin:"0"}}),d().createElement(f.Row,null,this.props.priorities.map((function(t,n){return d().createElement(f.Col,{sm:6,className:"row menu-row filter-row "+(n%2?"filter-row-odd":"")},d().createElement("span",{className:"btn glyphicon menu-row-glyph "+(null!=t&&t.visibility?"glyphicon-ok":"glyphicon-remove"),style:{color:null!=t&&t.visibility?"limegreen":"red"},onClick:function(){return e.props.toggleBmpPriorityVisibility(t)}}),d().createElement("span",{className:"menu-row-text"},t.label))})))):null),d().createElement("div",{className:"row menu-row pull-left",style:{width:"480px",textAlign:"left"}},d().createElement("span",{className:"inline btn glyphicon menu-row-glyph "+("status"===this.props.expandedFilter?"glyphicon-chevron-down":"glyphicon-chevron-right"),style:{color:"white",background:"none"},onClick:function(){e.props.setExpandedFilter("status")}}),d().createElement("span",{className:"inline h5 menu-row-text"},d().createElement("strong",null,"Filter by BMP status")),"status"===this.props.expandedFilter?d().createElement(d().Fragment,null,d().createElement("hr",{style:{margin:"0"}}),d().createElement(f.Row,null,this.props.statuses.map((function(t,n){return d().createElement(f.Col,{sm:6,className:"row menu-row filter-row "+(n%2?"filter-row-odd":"")},d().createElement("span",{className:"btn glyphicon menu-row-glyph "+(null!=t&&t.visibility?"glyphicon-ok":"glyphicon-remove"),style:{color:null!=t&&t.visibility?"limegreen":"red"},onClick:function(){return e.props.toggleBmpStatusVisibility(t)}}),d().createElement("span",{className:"menu-row-text"},null==t?void 0:t.name))})))):null),d().createElement("div",{className:"row menu-row pull-left",style:{width:"480px",textAlign:"left"}},d().createElement("span",{className:"inline btn glyphicon menu-row-glyph "+("groupProfile"===this.props.expandedFilter?"glyphicon-chevron-down":"glyphicon-chevron-right"),style:{color:"white",background:"none"},onClick:function(){e.props.setExpandedFilter("groupProfile")}}),d().createElement("span",{className:"inline h5 menu-row-text"},d().createElement("strong",null,"Filter by Organization")),"groupProfile"===this.props.expandedFilter?d().createElement(d().Fragment,null,d().createElement(f.Row,null,this.props.groupProfiles.map((function(t,n){var r;return d().createElement(f.Col,{sm:6,className:"row menu-row filter-row "+(n<(null===(r=e.props.groupProfiles)||void 0===r?void 0:r.length)/2+1?"filter-row-odd":"")},d().createElement("span",{className:"btn glyphicon menu-row-glyph "+(null!=t&&t.visibility?"glyphicon-ok":"glyphicon-remove"),style:{color:null!=t&&t.visibility?"limegreen":"red"},onClick:function(){return e.props.toggleBmpGroupProfileVisibility(t)}}),d().createElement("span",{className:"menu-row-text"},t.title))})))):null))))}},{key:"handleChange",value:function(e){console.log(e)}}])&&ye(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(d().Component);Ae(Te,"propTypes",{bmpTypes:Se.array,expandedFilter:Se.string,setExpandedFilter:Se.func,bmpFilter:Se.object,changeLayerProperties:Se.func,toggleBmpTypeVisibility:Se.func,toggleBmpGroupProfileVisibility:Se.func,toggleBmpStatusVisibility:Se.func,setAllBmpTypesVisibility:Se.func,toggleBmpPriorityVisibility:Se.func,bmpWatershedLayer:Se.object,bmpFootprintLayer:Se.object,bmpOutletLayer:Se.object,priorities:Se.object,groupProfiles:Se.object,statuses:Se.object}),Ae(Te,"defaultProps",{});var Oe=(0,m.connect)((function(e){var t,n,r,o,i,a,l,u,s,c=(null==e||null===(t=e.swamm)||void 0===t?void 0:t.groupProfiles.filter((function(e){return!["anonymous","registered-members","admin","swamm-users","illinois-pork-producers"].includes(e.slug)}))).filter((function(t){var n,r,o;return null==e||null===(n=e.swamm)||void 0===n||null===(r=n.projectData)||void 0===r||null===(o=r.permitted_groups.map((function(e){return e.pk})))||void 0===o?void 0:o.includes(t.pk)}));return c.sort((function(e,t){return e.title.localeCompare(t.title)})),{mapId:null==e||null===(n=e.swamm)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.base_map,projectData:null==e||null===(o=e.swamm)||void 0===o?void 0:o.data,bmpTypes:null==e||null===(i=e.swamm)||void 0===i?void 0:i.bmpTypes,statuses:null==e||null===(a=e.swamm)||void 0===a?void 0:a.statuses,groupProfiles:c,layers:null==e?void 0:e.layers,query:null==e?void 0:e.query,expandedFilter:null==e||null===(l=e.swamm)||void 0===l?void 0:l.expandedFilter,bmpFilter:null==e||null===(u=e.swamm)||void 0===u?void 0:u.bmpFilter,bmpOutletLayer:E(e),bmpFootprintLayer:w(e),bmpWatershedLayer:A(e),priorities:null==e||null===(s=e.swamm)||void 0===s?void 0:s.priorities}}),(function(e){return{setExpandedFilter:function(t){return e((0,o.setExpandedFilter)(t))},changeLayerProperties:function(t,n){return e((0,T.He)(t,n))},toggleBmpTypeVisibility:function(t){return e((0,o.toggleBmpTypeVisibility)(t))},toggleBmpGroupProfileVisibility:function(t){return e((0,o.toggleBmpGroupProfileVisibility)(t))},toggleBmpStatusVisibility:function(t){return e((0,o.toggleBmpStatusVisibility)(t))},setAllBmpTypesVisibility:function(t){return e((0,o.setAllBmpTypesVisibility)(t))},toggleBmpPriorityVisibility:function(t){return e((0,o.toggleBmpPriorityVisibility)(t))}}}))(Te),Ne=n(604206),Me=(n(472619),n(388380)),Pe=n(427995);function Be(e){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Re(e,t){return(Re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ie(e,t){if(t&&("object"===Be(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var De=n(45697),Le=(n(472986),function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Re(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ce(r);if(o){var n=Ce(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ie(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={showAdvanced:!1},t}return t=a,(n=[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e,t,n=this;return d().createElement("div",{id:"swamm-input-menu",className:"simple-view-panel",style:{top:"70px",width:"480px"}},d().createElement("div",{className:"menu-rows-container",style:{border:"1px solid rgba(255, 255, 255, 1)",borderRadius:"3px",margin:"3px 0"}},d().createElement("div",{className:"row menu-row menu-row-header",style:{width:"480px",textAlign:"left",border:"none"}},d().createElement("span",{className:"menu-row-text"},"Erosion"),d().createElement("span",{className:"btn pull-right glyphicon menu-row-glyph glyphicon-upload",style:{color:"limegreen",fontSize:"smaller",textAlign:"right",marginRight:"8px"},onClick:function(){n.props.setVisibleUploaderPanel(!0,"erosion",null)}})),null===(e=this.props.erosionLayers)||void 0===e?void 0:e.map((function(e){return d().createElement(Me.j,{layer:e})})),0===(null===(t=this.props.erosionLayers)||void 0===t?void 0:t.length)?d().createElement("div",{className:"row menu-row menu-row",style:{width:"480px",textAlign:"left",border:"none"}},"No erosion layer available"):null),d().createElement("div",{className:"menu-rows-container",style:{border:"1px solid rgba(255, 255, 255, 1)",borderRadius:"3px",margin:"3px 0"}},d().createElement("div",{className:"row menu-row menu-row-header",style:{width:"480px",textAlign:"left",border:"none"}},d().createElement("span",{className:"menu-row-text"},"BMPs")),d().createElement("div",{className:"row menu-row menu-row-header",style:{width:"480px",textAlign:"left",border:"none"}},d().createElement("span",{className:"menu-row-text"},"Outlets"),d().createElement("span",{className:"btn pull-right glyphicon menu-row-glyph glyphicon-upload",style:{color:"limegreen",fontSize:"smaller",textAlign:"right",marginRight:"8px"},onClick:function(){n.props.setVisibleUploaderPanel(!0,"bmp-outlet",null)}})),d().createElement("div",{className:"row menu-row menu-row-header",style:{width:"480px",textAlign:"left",border:"none"}},d().createElement("span",{className:"menu-row-text"},"Footprints"),d().createElement("span",{className:"btn pull-right glyphicon menu-row-glyph glyphicon-upload",style:{color:"limegreen",fontSize:"smaller",textAlign:"right",marginRight:"8px"},onClick:function(){n.props.setVisibleUploaderPanel(!0,"bmp-footprint",null)}})),d().createElement("div",{className:"row menu-row menu-row-header",style:{width:"480px",textAlign:"left",border:"none"}},d().createElement("span",{className:"menu-row-text"},"Watersheds"),d().createElement("span",{className:"btn pull-right glyphicon menu-row-glyph glyphicon-upload",style:{color:"limegreen",fontSize:"smaller",textAlign:"right",marginRight:"8px"},onClick:function(){n.props.setVisibleUploaderPanel(!0,"bmp-watershed",null)}}))),d().createElement(Pe.h,null))}}])&&Fe(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(d().Component));xe(Le,"propTypes",{projectData:De.object,setVisibleUploaderPanel:De.func,erosionLayers:De.array,setSwammInputMenu:De.func}),xe(Le,"defaultProps",{});var Ge=(0,m.connect)((function(e){var t,n,r,o,i;return{projectData:null==e||null===(t=e.swamm)||void 0===t?void 0:t.projectData,erosionLayers:null==e||null===(n=e.layers)||void 0===n||null===(r=n.flat)||void 0===r||null===(o=r.map((function(t){var n,r,o;return t.importerTargetObjectId=null==e||null===(n=e.swamm)||void 0===n||null===(r=n.erosions)||void 0===r||null===(o=r.filter((function(e){var n;return(null==e?void 0:e.gn_layer)===parseInt(null==t||null===(n=t.extendedParams)||void 0===n?void 0:n.pk,10)}))[0])||void 0===o?void 0:o.id,t})))||void 0===o?void 0:o.filter((function(e){return(null==e?void 0:e.name.indexOf("erosion_"))>-1})),erosionModels:null==e||null===(i=e.swamm)||void 0===i?void 0:i.erosions,canEditSwammMap:S(e)}}),(function(e){return{setSwammInputMenu:function(t){return e((0,o.setSwammInputMenu)(t))},setVisibleUploaderPanel:function(t,n,r){return e((0,v.setVisibleUploaderPanel)(t,n,r))}}}))(Le);function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ue(e,t){return(Ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function We(e,t){if(t&&("object"===ke(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function He(e){return(He=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ye=n(45697),ze=n(472986),Ke=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ue(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=He(r);if(o){var n=He(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return We(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"componentDidMount",value:function(){this.props.initSwamm()}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e,t=this;return d().createElement("div",{id:"swamm-container"},this.props.isSwammProject?d().createElement(d().Fragment,null,!this.props.storedBmpForm||this.props.visibleBmpForm||this.props.drawingBmpLayerName||this.props.editingBmpFeatureId?this.props.drawingBmpLayerName||this.props.editingBmpFeatureId?d().createElement(d().Fragment,null,d().createElement(f.Button,{bsStyle:"success",className:"simple-view-menu-button bmp-progress-button",style:{left:30,top:80,width:120,backgroundColor:"darkgreen"},onClick:function(){t.props.saveChanges(),t.props.showBmpForm()}},"Save Feature"),d().createElement(f.Button,{bsStyle:"danger",className:"simple-view-menu-button bmp-progress-button",style:{left:160,top:80,width:120,backgroundColor:"darkred"},onClick:function(){t.props.showBmpForm(),t.props.setLayer(null),t.props.toggleViewMode(),t.props.drawStopped(),t.props.clearDrawingBmpLayerName(),t.props.clearEditingBmpFeatureId()}},"Cancel Feature"),d().createElement("button",{key:"swamm-bmp-creator-button",className:"simple-view-menu-button",style:{left:100*(this.props.numberOfMenus+1)+20},onClick:function(){t.props.saveChanges(),t.props.showBmpForm(),t.props.setOpenMenuGroupId(null)}},"Create BMPs")):this.props.visibleBmpForm?d().createElement("button",{className:"simple-view-menu-button",style:{left:100*(this.props.numberOfMenus+1)+20},disabled:!0},"Create BMPs"):d().createElement("button",{key:"swamm-bmp-creator-button",className:"simple-view-menu-button",style:{left:100*(this.props.numberOfMenus+1)+20},onClick:function(){t.props.makeBmpForm(t.props.defaultGroupProfile),t.props.setOpenMenuGroupId(null)}},"Create BMPs"):d().createElement(d().Fragment,null,d().createElement(f.Button,{className:"simple-view-menu-button bmp-progress-button-success",style:{left:30,top:80,width:120,backgroundColor:"darkgreen"},bsStyle:"success",onClick:function(){return t.props.showBmpForm()}},"BMP in progress"),d().createElement("button",{key:"swamm-bmp-creator-button",className:"simple-view-menu-button",style:{left:100*(this.props.numberOfMenus+1)+20},onClick:function(){t.props.showBmpForm(),t.props.setOpenMenuGroupId(null)}},"Create BMPs")),null!==(e=this.props.targets)&&void 0!==e&&e.length?d().createElement("button",{key:"swamm-bmp-chart-button",className:"simple-view-menu-button",style:{left:100*(this.props.numberOfMenus+2)+20},onClick:function(){t.props.showSwammBmpChart(),t.props.selectSwammTargetId(t.props.defaultTargetId),t.props.setOpenMenuGroupId(null)}},"Dashboard"):d().createElement("button",{key:"swamm-bmp-chart-button",className:"simple-view-menu-button disabled",style:{left:100*(this.props.numberOfMenus+2)+20}},d().createElement("span",null,d().createElement(ze,{color:"white",style:{display:"inline-block"},spinnerName:"circle",noFadeIn:!0}))),this.props.canEditSwammMap?d().createElement("button",{key:"swamm-input-button",className:"simple-view-menu-button",style:{left:620},onClick:function(){t.props.setSwammInputMenu(!t.props.showSwammInputMenu),t.props.setOpenMenuGroupId(null)}},"Swamm Model"):null,this.props.showSwammInputMenu?d().createElement(Ge,null):null,this.props.visibleTargetForm?d().createElement(q,null):null,this.props.visibleBmpForm?d().createElement(x,null):null,this.props.visibleSwammBmpChart?d().createElement(ge,null):null,this.props.viewBmpGroupId===this.props.openMenuGroupId?d().createElement(Oe,null):null,this.props.loadingBmp?d().createElement("button",{className:"simple-view-menu-button bmp-loading-button"},d().createElement("div",{style:{marginBottom:"10px"}},"Loading BMP data..."),d().createElement("span",null,d().createElement(ze,{color:"white",style:{display:"inline-block"},spinnerName:"circle",noFadeIn:!0}))):null):null)}}])&&je(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(d().Component);Ve(Ke,"propTypes",{fetchSwammBmpTypes:Ye.func,fetchSwammBmpStatuses:Ye.func,fetchSwammTargets:Ye.func,fetchProjectManagerConfig:Ye.func,fetchGroupProfiles:Ye.func,fetchingGroupProfiles:Ye.bool,fetchingTargets:Ye.bool,statuses:Ye.array,targets:Ye.array,swammData:Ye.array,mapId:Ye.number,bmpUniqueNames:Ye.array,bmpTypes:Ye.array,groupProfiles:Ye.array,projectCode:Ye.string,layers:Ye.object,toggleLayer:Ye.func,showBmpForm:Ye.func,visibleBmpForm:Ye.bool,makeBmpForm:Ye.func,storedBmpForm:Ye.object,showMenuGroup:Ye.bool,setOpenMenuGroupId:Ye.func,loadingBmp:Ye.bool,saveChanges:Ye.func,clearDrawingBmpLayerName:Ye.func,clearEditingBmpFeatureId:Ye.func,drawingBmpLayerName:Ye.string,setEditingBmpFeatureId:Ye.func,editingBmpFeatureId:Ye.string,query:Ye.func,toggleBmpType:Ye.func,visibleSwammBmpChart:Ye.bool,visibleTargetForm:Ye.bool,defaultTargetId:Ye.number,selectSwammTargetId:Ye.func,showSwammBmpChart:Ye.func,bmpByUniqueNameSelector:Ye.func,setLayer:Ye.func,toggleViewMode:Ye.func,drawStopped:Ye.func,numberOfMenus:Ye.number,hasPmData:Ye.object,bmpDataLayer:Ye.object,defaultGroupProfile:Ye.object,viewBmpGroupId:Ye.string,openMenuGroupId:Ye.string,setBmpLayers:Ye.func,toggleSyncWms:Ye.func,gnResourceLoaded:Ye.string,isSwammProject:Ye.bool,initSwamm:Ye.func,setSwammInputMenu:Ye.func,showSwammInputMenu:Ye.bool,canEditSwammMap:Ye.func}),Ve(Ke,"defaultProps",{});const qe=(0,m.connect)((function(e){var t,n,r,o,i,a,l,u,s,c,p,d,m,f,v,g,b,y,h,E,w,A,T,O,N,M,P,B,F,R,I,C,x,D;console.log("state for Swamm:",e);var L=null==e||null===(t=e.security)||void 0===t||null===(n=t.user)||void 0===n||null===(r=n.info)||void 0===r?void 0:r.groups.filter((function(e){return!["anonymous","registered-members","admin"].includes(e)})),G=null==e||null===(o=e.swamm)||void 0===o?void 0:o.groupProfiles.filter((function(e){return L.includes(e.slug)}));return{canEditSwammMap:S(e),gnResourceLoaded:null==e||null===(i=e.gnresource)||void 0===i?void 0:i.id,isSwammProject:!(null==e||null===(a=e.swamm)||void 0===a||null===(l=a.projectData)||void 0===l||!l.id),mapId:null==e||null===(u=e.map)||void 0===u||null===(s=u.present)||void 0===s||null===(c=s.info)||void 0===c?void 0:c.id,hasPmData:null==e||null===(p=e.swamm)||void 0===p?void 0:p.data,defaultGroupProfile:G[0],bmpUniqueNames:_(e),bmpTypes:null==e||null===(d=e.swamm)||void 0===d?void 0:d.bmpTypes,groupProfiles:null==e?void 0:e.swamm.groupProfiles,statuses:null==e||null===(m=e.swamm)||void 0===m?void 0:m.statuses,targets:null==e||null===(f=e.swamm)||void 0===f?void 0:f.targets,fetchingTargets:null==e||null===(v=e.swamm)||void 0===v?void 0:v.fetchingTargets,projectCode:null==e||null===(g=e.swamm)||void 0===g||null===(b=g.data)||void 0===b?void 0:b.code,layers:null==e?void 0:e.layers,visibleBmpForm:null==e||null===(y=e.swamm)||void 0===y?void 0:y.visibleBmpForm,storedBmpForm:null==e||null===(h=e.swamm)||void 0===h?void 0:h.storedBmpForm,drawingBmpLayerName:null==e||null===(E=e.swamm)||void 0===E?void 0:E.drawingBmpLayerName,editingBmpFeatureId:null==e||null===(w=e.swamm)||void 0===w?void 0:w.editingBmpFeatureId,visibleSwammBmpChart:null==e||null===(A=e.swamm)||void 0===A?void 0:A.visibleSwammBmpChart,showSwammInputMenu:null==e||null===(T=e.swamm)||void 0===T?void 0:T.showSwammInputMenu,defaultTargetId:(null==e||null===(O=e.swamm)||void 0===O||null===(N=O.targets)||void 0===N||null===(M=N[0])||void 0===M?void 0:M.id)||0,visibleTargetForm:null==e||null===(P=e.swamm)||void 0===P?void 0:P.visibleTargetForm,loadingBmp:null==e||null===(B=e.swamm)||void 0===B?void 0:B.loadingBmp,numberOfMenus:null==e||null===(F=e.layers)||void 0===F||null===(R=F.groups)||void 0===R?void 0:R.length,viewBmpGroupId:null==e||null===(I=e.layers)||void 0===I||null===(C=I.groups)||void 0===C||null===(x=C.filter((function(e){return"View BMPs"===(null==e?void 0:e.title)||"View BMPs"===(null==e?void 0:e.name)}))[0])||void 0===x?void 0:x.id,openMenuGroupId:null==e||null===(D=e.simpleView)||void 0===D?void 0:D.openMenuGroupId}}),(function(e){return{initSwamm:function(){return e((0,o.initSwamm)())},setSwammInputMenu:function(t){return e((0,o.setSwammInputMenu)(t))},fetchSwammBmpTypes:function(t){return e((0,o.fetchSwammBmpTypes)(t))},fetchProjectManagerConfig:(0,o.fetchProjectManagerConfig)(e),fetchGroupProfiles:function(){return e((0,o.fetchGroupProfiles)())},fetchSwammBmpStatuses:function(t){return e((0,o.fetchSwammBmpStatuses)(t))},fetchSwammTargets:function(t){return e((0,o.fetchSwammTargets)(t))},selectSwammTargetId:function(t){return e((0,o.selectSwammTargetId)(t))},toggleLayer:function(t,n){return e((0,T.He)(t,{visibility:n}))},showBmpForm:function(){return e((0,o.showBmpForm)())},setLayer:function(t){return e((0,g.uF)(t))},setEditingBmpFeatureId:function(t){return e((0,o.setEditingBmpFeatureId)(t))},showSwammBmpChart:function(){return e((0,o.showSwammBmpChart)())},setOpenMenuGroupId:function(t){return e((0,v.setOpenMenuGroupId)(t))},makeBmpForm:function(t){return e((0,o.makeBmpForm)(t))},saveChanges:function(){return e((0,g.$S)())},clearDrawingBmpLayerName:function(){return e((0,o.clearDrawingBmpLayerName)())},clearEditingBmpFeatureId:function(){return e((0,o.clearEditingBmpFeatureId)())},query:function(t,n,r,o){return e((0,y.IO)(t,n,r,o))},toggleBmpType:function(t){return e((0,o.toggleBmpType)(t))},toggleViewMode:function(){return e((0,g.nY)())},drawStopped:function(){return e((0,Ne.lo)())},toggleSyncWms:function(){return e((0,y.XO)())}}}))(Ke);var Ze=n(49977),Je=n.n(Ze),Xe=n(129386),$e=n(375875),Qe=function(e,t){return{attribute:e,rowId:123456,type:"number",groupId:"".concat(e,"_1"),operator:"=",value:t}},et={filterObj:{featureTypeName:null,filterType:"OGC",ogcVersion:"1.1.0",groupFields:[{id:123456,index:0,logic:"AND"},{id:"type_1",groupId:123456,logic:"OR",index:1},{id:"priority_1",groupId:123456,logic:"OR",index:1},{id:"group_profile_1",groupId:123456,logic:"OR",index:1},{id:"status_1",groupId:123456,logic:"OR",index:1}],filterFields:[],spatialField:[],spatialFieldOperator:"AND"}};const tt=(0,r.rx)("Swamm",{component:qe,reducers:{swamm:function(){var e,t,n,r,a,l,s,p,d,m,f,v,g,b,y,h,_,E,w,A,S,T,O,N,M,P,B,F,R,I,C,x,D,L,G,k,j,U,W,H,V,Y,z,K,q,Z,J,X,$,Q,ee,te,ne,re,oe=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,ie=arguments.length>1?arguments[1]:void 0;switch(console.log("Action SWAMM:",ie),ie.type){case o.SET_SWAMM_PROJECT_DATA:return u(u({},oe),{},{projectData:ie.projectData});case o.FETCH_GROUP_PROFILES:return u(u({},oe),{},{fetchingGroupProfiles:ie.groupProfiles});case o.FETCH_GROUP_PROFILES_SUCCESS:return u(u({},oe),{},{fetchingGroupProfiles:!1,groupProfiles:ie.groupProfiles});case o.FETCH_PROJECT_MANAGER_CONFIG:return u(u({},oe),{},{fetching:ie.mapId});case o.FETCH_PROJECT_MANAGER_CONFIG_SUCCESS:return u(u({},oe),{},{fetching:null,data:ie.payload});case o.FETCH_SWAMM_BMPTYPES:return u(u({},oe),{},{fetching:ie.mapId});case o.FETCH_SWAMM_BMPTYPES_SUCCESS:return u(u({},oe),{},{fetching:!1,bmpTypes:ie.bmpTypes});case o.FETCH_SWAMM_ALL_BMPS_SUCCESS:return u(u({},oe),{},{fetching:!1,allBmps:ie.allBmps});case o.FETCH_SWAMM_BMP_STATUSES:return u(u({},oe),{},{fetchingStatuses:!0});case o.FETCH_SWAMM_BMP_STATUSES_SUCCESS:return u(u({},oe),{},{statuses:ie.statuses});case o.TOGGLE_BMP_TYPE_VISIBILITY:return u(u({},oe),{},{bmpTypes:oe.bmpTypes.map((function(e){var t;return e.id===ie.bmpType.id?u(u({},e),{},{visibility:!(null!==(t=ie.bmpType)&&void 0!==t&&t.visibility)}):e}))});case o.SET_BMP_TYPE:return u(u({},oe),{},{bmpTypes:oe.bmpTypes.map((function(e){return e.id===ie.bmpType.id?u(u({},e),{},{visibility:ie.isVisible}):e}))});case o.TOGGLE_BMP_PRIORITY_VISIBILITY:return u(u({},oe),{},{priorities:oe.priorities.map((function(e){var t;return e.id===ie.priority.id?u(u({},e),{},{visibility:!(null!==(t=ie.priority)&&void 0!==t&&t.visibility)}):e}))});case o.TOGGLE_BMP_GROUP_PROFILE_VISIBILITY:return u(u({},oe),{},{groupProfiles:oe.groupProfiles.map((function(e){var t;return e.id===ie.groupProfile.id?u(u({},e),{},{visibility:!(null!==(t=ie.groupProfile)&&void 0!==t&&t.visibility)}):e}))});case o.TOGGLE_BMP_STATUS_VISIBILITY:return u(u({},oe),{},{statuses:oe.statuses.map((function(e){var t;return e.id===ie.status.id?u(u({},e),{},{visibility:!(null!==(t=ie.status)&&void 0!==t&&t.visibility)}):e}))});case o.SET_ALL_BMP_TYPES_VISIBILITY:return u(u({},oe),{},{bmpTypes:oe.bmpTypes.map((function(e){return e.visibility=ie.boolValue,e}))});case o.SET_MENU_GROUP:return ie.payload?u(u({},oe),{},{visibleBmpManager:!1}):oe;case o.SET_SWAMM_INPUT_MENU:return u(u({},oe),{},{showSwammInputMenu:ie.showSwammInputMenu});case o.SHOW_BMP_MANAGER:return u(u({},oe),{},{visibleBmpManager:!0});case o.HIDE_BMP_MANAGER:return u(u({},oe),{},{visibleBmpManager:!1});case o.TOGGLE_BMP_MANAGER:return u(u({},oe),{},{visibleBmpManager:!oe.visibleBmpManager});case o.SHOW_SWAMM_DATA_GRID:return u(u({},oe),{},{visibleSwammDataGrid:!0});case o.HIDE_SWAMM_DATA_GRID:return u(u({},oe),{},{visibleSwammDataGrid:!1});case o.SHOW_SWAMM_BMP_CHART:return u(u({},oe),{},{visibleSwammBmpChart:!0});case o.HIDE_SWAMM_BMP_CHART:return u(u({},oe),{},{visibleSwammBmpChart:!1});case o.SHOW_BMP_FORM:return u(u({},oe),{},{visibleBmpForm:!0});case o.SHOW_LOADING_BMP:return u(u({},oe),{},{loadingBmp:!0});case o.HIDE_LOADING_BMP:return u(u({},oe),{},{loadingBmp:!1});case o.MAKE_BMP_FORM:return u(u({},oe),{},{creatingNewBmp:!0,visibleBmpForm:!0,storedBmpForm:{group_profile_id:null===(e=ie.groupProfile)||void 0===e?void 0:e.pk,group_profile:ie.groupProfile,bmpName:""}});case o.MAKE_DEFAULTS_BMP_FORM:var ae={bmpName:null===(t=ie.bmpType)||void 0===t?void 0:t.name,type:null===(n=ie.bmpType)||void 0===n?void 0:n.id,type_data:ie.bmpType,project:null===(r=ie.bmpType)||void 0===r||null===(a=r.project)||void 0===a?void 0:a.id,override_n_surface_red_percent:null===(l=ie.bmpType)||void 0===l?void 0:l.n_surface_red_percent,override_p_surface_red_percent:null===(s=ie.bmpType)||void 0===s?void 0:s.p_surface_red_percent,override_s_surface_red_percent:null===(p=ie.bmpType)||void 0===p?void 0:p.s_surface_red_percent,override_n_tiled_red_percent:null===(d=ie.bmpType)||void 0===d?void 0:d.n_tiled_red_percent,override_p_tiled_red_percent:null===(m=ie.bmpType)||void 0===m?void 0:m.p_tiled_red_percent,override_n_erosion_red_percent:null===(f=ie.bmpType)||void 0===f?void 0:f.n_erosion_red_percent,override_p_erosion_red_percent:null===(v=ie.bmpType)||void 0===v?void 0:v.p_erosion_red_percent,override_s_erosion_red_percent:null===(g=ie.bmpType)||void 0===g?void 0:g.s_erosion_red_percent,override_cost_base:null===(b=ie.bmpType)||void 0===b?void 0:b.cost_base,override_cost_rate_per_watershed_area:null===(y=ie.bmpType)||void 0===y?void 0:y.cost_rate_per_watershed_area,override_cost_rate_per_footprint_area:null===(h=ie.bmpType)||void 0===h?void 0:h.cost_rate_per_footprint_area,notes:""};return u(u({},oe),{},{storedBmpForm:u(u({},oe.storedBmpForm),ae)});case o.MAKE_EXISTING_BMP_FORM:var le=null!=oe&&null!==(_=oe.storedBmpForm)&&void 0!==_&&_.outlet_fid?null===(E=oe.storedBmpForm)||void 0===E?void 0:E.outlet_fid:null===(w=ie.bmp)||void 0===w?void 0:w.outlet_fid,ue=null!=oe&&null!==(A=oe.storedBmpForm)&&void 0!==A&&A.footprint_fid?null===(S=oe.storedBmpForm)||void 0===S?void 0:S.footprint_fid:null===(T=ie.bmp)||void 0===T?void 0:T.footprint_fid,se=null!=oe&&null!==(O=oe.storedBmpForm)&&void 0!==O&&O.watershed_fid?null===(N=oe.storedBmpForm)||void 0===N?void 0:N.watershed_fid:null===(M=ie.bmp)||void 0===M?void 0:M.watershed_fid,ce=u(u({},ie.bmp),{},{id:null===(P=ie.bmp)||void 0===P?void 0:P.id,bmpName:null===(B=ie.bmp)||void 0===B||null===(F=B.type_data)||void 0===F?void 0:F.name,type:null===(R=ie.bmp)||void 0===R||null===(I=R.type_data)||void 0===I?void 0:I.id,type_data:null===(C=ie.bmp)||void 0===C?void 0:C.type_data,project:null===(x=ie.bmp)||void 0===x?void 0:x.project,group_profile:null===(D=ie.bmp)||void 0===D?void 0:D.group_profile,group_profile_id:null===(L=ie.bmp)||void 0===L||null===(G=L.group_profile)||void 0===G?void 0:G.id,override_n_surface_red_percent:null===(k=ie.bmp)||void 0===k?void 0:k.override_n_surface_red_percent,override_p_surface_red_percent:null===(j=ie.bmp)||void 0===j?void 0:j.override_p_surface_red_percent,override_s_surface_red_percent:null===(U=ie.bmp)||void 0===U?void 0:U.override_s_surface_red_percent,override_n_tiled_red_percent:null===(W=ie.bmp)||void 0===W?void 0:W.override_n_tiled_red_percent,override_p_tiled_red_percent:null===(H=ie.bmp)||void 0===H?void 0:H.override_p_tiled_red_percent,override_n_erosion_red_percent:null===(V=ie.bmp)||void 0===V?void 0:V.override_n_erosion_red_percent,override_p_erosion_red_percent:null===(Y=ie.bmp)||void 0===Y?void 0:Y.override_p_erosion_red_percent,override_s_erosion_red_percent:null===(z=ie.bmp)||void 0===z?void 0:z.override_s_erosion_red_percent,override_cost_base:null===(K=ie.bmp)||void 0===K?void 0:K.override_cost_base,override_cost_rate_per_watershed_area:null===(q=ie.bmp)||void 0===q?void 0:q.override_cost_rate_per_watershed_area,override_cost_rate_per_footprint_area:null===(Z=ie.bmp)||void 0===Z?void 0:Z.override_cost_rate_per_footprint_area,notes:null===(J=ie.bmp)||void 0===J?void 0:J.notes,owner_identifier:null===(X=ie.bmp)||void 0===X?void 0:X.owner_identifier,field_identifier:null===($=ie.bmp)||void 0===$?void 0:$.field_identifier,outlet_fid:le,footprint_fid:ue,watershed_fid:se});return u(u({},oe),{},{storedBmpForm:ce,updatingBmp:null});case o.HIDE_BMP_FORM:return u(u({},oe),{},{visibleBmpForm:!1});case o.CLEAR_BMP_FORM:return u(u({},oe),{},{creatingNewBmp:!1,storedBmpForm:null,BmpFormBmpTypeId:null,visibleBmpForm:!1,updatingBmp:null});case o.SUBMIT_BMP_FORM_SUCCESS:var pe=null===(Q=oe.allBmps)||void 0===Q?void 0:Q.map((function(e){return e.id}));return console.log("allBmpIds:",pe),pe.indexOf(null===(ee=ie.bmp)||void 0===ee?void 0:ee.id)>-1?u(u({},oe),{},{allBmps:oe.allBmps.map((function(e){var t;return e.id===(null===(t=ie.bmp)||void 0===t?void 0:t.id)?ie.bmp:e}))}):u(u({},oe),{},{allBmps:[].concat(i(oe.allBmps),[ie.bmp])});case o.SUBMIT_BMP_FORM_ERROR:return u(u({},oe),{},{showSubmitBmpFormError:!0});case o.UPDATE_BMP_FORM:return console.log("heard UPDATE_BMP_FORM",ie),null!=ie&&null!==(te=ie.kv)&&void 0!==te&&null!==(ne=te.type_data)&&void 0!==ne&&ne.id?u(u({},oe),{},{BmpFormBmpTypeId:ie.kv.type_data.id}):null!=ie&&null!==(re=ie.kv)&&void 0!==re&&re.group_profile?u(u({},oe),{},{storedBmpForm:u(u(u({},oe.storedBmpForm),ie.kv),{},{group_profile:null==ie||null===(de=ie.kv)||void 0===de?void 0:de.group_profile,group_profile_id:null==ie||null===(me=ie.kv)||void 0===me||null===(fe=me.group_profile)||void 0===fe?void 0:fe.pk})}):u(u({},oe),{},{storedBmpForm:u(u({},oe.storedBmpForm),ie.kv)});var de,me,fe;case o.SET_DRAWING_BMP_LAYER_NAME:var ve=!1;return ie.drawingBmpLayerName!==oe.drawingBmpLayerName&&(ve=ie.drawingBmpLayerName),u(u({},oe),{},{drawingBmpLayerName:ve});case o.CLEAR_DRAWING_BMP_LAYER_NAME:return u(u({},oe),{},{drawingBmpLayerName:null});case o.SET_EXPANDED_BMP_TYPE_GROUP_NAME:return u(u({},oe),{},{expandedBmpTypeGroupName:ie.expandedBmpTypeGroupName});case o.REGISTER_MISSING_BMP_FEATURE_ID:return u(u({},oe),{},{missingBmpFeatureId:ie.missingBmpFeatureId});case o.SET_COMPLEX_BMP_FORM:return u(u({},oe),{},{complexBmpForm:ie.complexBmpForm});case o.SET_EXPANDED_FILTER:return oe.expandedFilter===ie.expandedFilter?u(u({},oe),{},{expandedFilter:null}):u(u({},oe),{},{expandedFilter:ie.expandedFilter});case o.SET_BMP_LAYERS:return u(u({},oe),{},{bmpOutletLayer:ie.bmpOutletLayer,bmpFootprintLayer:ie.bmpFootprintLayer,bmpWatershedLayer:ie.bmpWatershedLayer});case o.SET_CHANGING_BMP_TYPE:return u(u({},oe),{},{changingBmpType:ie.changingBmpType});case o.SET_EDITING_BMP_FEATURE_ID:return u(u({},oe),{},{editingBmpFeatureId:ie.editingBmpFeatureId});case o.CLEAR_EDITING_BMP_FEATURE_ID:return u(u({},oe),{},{editingBmpFeatureId:null});case o.DELETE_BMP_SUCCESS:return u(u({},oe),{},{allBmps:oe.allBmps.filter((function(e){return e.id!==ie.bmpId}))});case o.FETCH_SWAMM_TARGETS_SUCCESS:return u(u({},oe),{},{fetchingTargets:!1,targets:ie.targets});case o.SELECT_SWAMM_TARGET_ID:return u(u({},oe),{},{selectedTargetId:ie.selectedTargetId});case o.SET_BMP_FILTER_MODE:return u(u({},oe),{},{bmpFilterMode:ie.bmpFilterMode});case o.UPDATE_TARGET_FORM:return u(u({},oe),{},{targetForm:u(u({},oe.targetForm),ie.kv)});case o.SHOW_TARGET_FORM:return u(u({},oe),{},{visibleTargetForm:ie.visibleTargetForm,targetForm:ie.target});case o.HIDE_TARGET_FORM:return u(u({},oe),{},{visibleTargetForm:ie.visibleTargetForm});case o.UPDATE_BMP_TYPE_GROUPS:return u(u({},oe),{},{bmpTypeGroups:ie.bmpTypeGroups});case o.SET_SWAMM_EROSION_DATA:return u(u({},oe),{},{erosions:ie.data});default:return oe}}},epics:{initSwammEpic:function(e,t){return e.ofType(o.INIT_SWAMM).filter((function(){var e;return null===(e=t.getState())||void 0===e?void 0:e.gnresource.id})).switchMap((function(){var e;return Je().Observable.from($e.post("/swamm/api/project/get_project_from_map_id/",{mapId:null===(e=t.getState())||void 0===e?void 0:e.gnresource.id}).catch((function(e){return console.log("** swamm get_project_from_map_id",e),"error"}))).filter((function(e){return(null==e?void 0:e.status)<=400})).filter((function(){var e,n;return!(null===(e=t.getState())||void 0===e||null===(n=e.security)||void 0===n||!n.user)})).switchMap((function(e){return Je().Observable.from($e.get("/swamm/api/project/".concat(e.data.projectId,"/"))).switchMap((function(t){var n;return Je().Observable.of((0,o.setSwammProjectData)(t.data)).concat(Je().Observable.of((0,v.setSvConfig)(null===(n=t.data)||void 0===n?void 0:n.simple_view_config)),Je().Observable.from($e.get("/swamm/api/".concat(e.data.projectId,"/bmp-type/"))).switchMap((function(e){return Je().Observable.of((0,o.fetchSwammBmpTypesSuccess)(e.data))})),Je().Observable.from($e.get("/api/v2/groups?page_size=1000")).switchMap((function(e){var t;return Je().Observable.of((0,o.fetchGroupProfilesSuccess)(null===(t=e.data)||void 0===t?void 0:t.group_profiles))})),Je().Observable.from($e.get("/swamm/api/".concat(e.data.projectId,"/bmps/status_list/"))).switchMap((function(e){return Je().Observable.of((0,o.fetchSwammBmpStatusesSuccess)(e.data))})),Je().Observable.from($e.get("/swamm/api/".concat(e.data.projectId,"/pollutant-loading-target/"))).switchMap((function(e){return Je().Observable.of((0,o.fetchSwammTargetsSuccess)(e.data))})),Je().Observable.from($e.get("/swamm/api/".concat(e.data.projectId,"/bmp-type/bmp_type_group_list/"))).switchMap((function(e){return Je().Observable.of((0,o.updateBmpTypeGroups)(e.data))})),Je().Observable.from($e.get("/swamm/api/".concat(e.data.projectId,"/erosion/"))).switchMap((function(e){return Je().Observable.of((0,o.setSwammErosionData)(e.data))})))}))}))}))},startBmpCreateFeatureEpic:function(e,t){return e.ofType(y.Hu).filter((function(){var e,n,r,o;return console.log("startBmpCreateFeatureEpic1",!(null!==(e=t.getState())&&void 0!==e&&null!==(n=e.swamm)&&void 0!==n&&n.editingBmpFeatureId)),!(null!==(r=t.getState())&&void 0!==r&&null!==(o=r.swamm)&&void 0!==o&&o.editingBmpFeatureId)})).filter((function(e){var n,r,o,i,a,l;return console.log("startBmpCreateFeatureEpic2",null==e||null===(n=e.filterObj)||void 0===n?void 0:n.featureTypeName.includes(null===(r=t.getState())||void 0===r||null===(o=r.swamm)||void 0===o?void 0:o.drawingBmpLayerName)),null==e||null===(i=e.filterObj)||void 0===i?void 0:i.featureTypeName.includes(null===(a=t.getState())||void 0===a||null===(l=a.swamm)||void 0===l?void 0:l.drawingBmpLayerName)})).filter((function(e){return console.log("startBmpCreateFeatureEpic3","querySetNewBmpLayer"===(null==e?void 0:e.reason)),"querySetNewBmpLayer"===(null==e?void 0:e.reason)})).flatMap((function(){return Je().Observable.of((0,g.lg)(),(0,g.lx)([{}]),(0,g.kA)(),(0,Xe.WP)("draw.tempFeatures"),(0,o.hideLoadingBmp)())}))},saveBmpCreateFeatureEpic:function(e,t){return e.ofType(g.AY).filter((function(){var e,n,r,o;return console.log("saveBmpCreateFeatureEpic1",null===(e=t.getState())||void 0===e||null===(n=e.swamm)||void 0===n?void 0:n.drawingBmpLayerName),null===(r=t.getState())||void 0===r||null===(o=r.swamm)||void 0===o?void 0:o.drawingBmpLayerName})).filter((function(){var e,n,r,o;return console.log("WARNING: saveBmpCreateFeatureEpic2",!(null!==(e=t.getState())&&void 0!==e&&null!==(n=e.swamm)&&void 0!==n&&n.editingBmpFeatureId)),!(null!==(r=t.getState())&&void 0!==r&&null!==(o=r.swamm)&&void 0!==o&&o.editingBmpFeatureId)})).flatMap((function(){var e,n;return Je().Observable.of((0,o.registerMissingBmpFeatureId)(null===(e=t.getState())||void 0===e||null===(n=e.swamm)||void 0===n?void 0:n.drawingBmpLayerName))}))},setCreateBmpDrawingLayerEpic:function(e,t){return e.ofType(y.u7).filter((function(e){var n,r,o,i,a,l;return console.log("action?.typeName",null==e?void 0:e.typeName),console.log("setBmpDrawingLayerEpic1",null==e||null===(n=e.typeName)||void 0===n?void 0:n.includes(null===(r=t.getState())||void 0===r||null===(o=r.swamm)||void 0===o?void 0:o.drawingBmpLayerName)),null==e||null===(i=e.typeName)||void 0===i?void 0:i.includes(null===(a=t.getState())||void 0===a||null===(l=a.swamm)||void 0===l?void 0:l.drawingBmpLayerName)})).flatMap((function(e){return Je().Observable.of((0,y.IO)("http://localhost:8080/geoserver/wfs",{featureTypeName:null==e?void 0:e.typeName,filterType:"OGC",ogcVersion:"1.1.0"},{},"querySetNewBmpLayer"))}))},setEditBmpDrawingLayerEpic:function(e,t){return e.ofType(y.S0).filter((function(e){var n,r,o,i,a,l,u,s;return console.log("setBmpDrawingLayerEpic1",null==e||null===(n=e.typeName)||void 0===n?void 0:n.includes((null===(r=t.getState())||void 0===r||null===(o=r.swamm)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.code)+"_bmp_")),null==e||null===(a=e.typeName)||void 0===a?void 0:a.includes((null===(l=t.getState())||void 0===l||null===(u=l.swamm)||void 0===u||null===(s=u.data)||void 0===s?void 0:s.code)+"_bmp_")})).flatMap((function(e){return Je().Observable.of((0,y.IO)("http://localhost:8080/geoserver/wfs",{featureTypeName:null==e?void 0:e.typeName,filterType:"OGC",ogcVersion:"1.1.0"},{},"querySetNewBmpLayer"))}))},startBmpEditFeatureEpic:function(e,t){return e.ofType(y.Hu).filter((function(){var e,n,r,o;return console.log("startBmpEditFeatureEpic1",null===(e=t.getState())||void 0===e||null===(n=e.swamm)||void 0===n?void 0:n.editingBmpFeatureId),null===(r=t.getState())||void 0===r||null===(o=r.swamm)||void 0===o?void 0:o.editingBmpFeatureId})).filter((function(e){return console.log("startBmpEditFeatureEpic2","querySetNewBmpLayer"===(null==e?void 0:e.reason)),"querySetNewBmpLayer"===(null==e?void 0:e.reason)})).flatMap((function(){var e,n,r;return Je().Observable.of((0,g.KD)(null===(e=t.getState())||void 0===e||null===(n=e.query)||void 0===n||null===(r=n.result)||void 0===r?void 0:r.features.filter((function(e){var n,r;return(null==e?void 0:e.id)===(null===(n=t.getState())||void 0===n||null===(r=n.swamm)||void 0===r?void 0:r.editingBmpFeatureId)}))),(0,g.lg)(),(0,o.hideLoadingBmp)(),(0,y.zc)())}))},saveBmpEditFeatureEpic:function(e,t){return e.ofType(g.AY).filter((function(){var e,n,r,o;return console.log("saveBmpEditFeatureEpic",null===(e=t.getState())||void 0===e||null===(n=e.swamm)||void 0===n?void 0:n.editingBmpFeatureId),null===(r=t.getState())||void 0===r||null===(o=r.swamm)||void 0===o?void 0:o.editingBmpFeatureId})).flatMap((function(){var e,n,r,i,a,l,u,s;return Je().Observable.of((0,o.clearEditingBmpFeatureId)(),(0,Ne.lo)(),(0,g.nY)(),(0,Xe.WP)("highlight.emptyFeatures"),(0,o.submitBmpForm)(null===(e=t.getState())||void 0===e||null===(n=e.swamm)||void 0===n?void 0:n.storedBmpForm,null===(r=t.getState())||void 0===r||null===(i=r.swamm)||void 0===i||null===(a=i.projectData)||void 0===a?void 0:a.id),(0,y.zc)(),(0,T.ct)(null===(l=t.getState())||void 0===l||null===(u=l.layers)||void 0===u||null===(s=u.flat)||void 0===s?void 0:s.filter((function(e){var n,r;return null==e?void 0:e.name.includes(null===(n=t.getState())||void 0===n||null===(r=n.swamm)||void 0===r?void 0:r.drawingBmpLayerName)}))[0].id),(0,o.clearDrawingBmpLayerName)())}))},finishBmpCreateFeatureEpic:function(e,t){return e.ofType(y.Hu).filter((function(){var e,n,r,o;return console.log("finishBmpCreateFeatureEpic1",!(null!==(e=t.getState())&&void 0!==e&&null!==(n=e.swamm)&&void 0!==n&&n.editingBmpFeatureId)),!(null!==(r=t.getState())&&void 0!==r&&null!==(o=r.swamm)&&void 0!==o&&o.editingBmpFeatureId)})).filter((function(){var e,n,r,o;return console.log("finishBmpCreateFeatureEpic2",null===(e=t.getState())||void 0===e||null===(n=e.swamm)||void 0===n?void 0:n.missingBmpFeatureId),null===(r=t.getState())||void 0===r||null===(o=r.swamm)||void 0===o?void 0:o.missingBmpFeatureId})).mergeMap((function(){var e,n,r,o,i,a,l=null===(e=t.getState())||void 0===e||null===(n=e.swamm)||void 0===n||null===(r=n.projectData)||void 0===r?void 0:r.id,u=null===(o=t.getState())||void 0===o||null===(i=o.swamm)||void 0===i||null===(a=i.drawingBmpLayerName)||void 0===a?void 0:a.slice(8);return Je().Observable.from($e.get("/swamm/api/".concat(l,"/bmps/get-latest-feature-id/").concat(u,"/")))})).mergeMap((function(e){var n,r,i,a,l,u,s,c;return Je().Observable.of((0,o.updateBmpForm)(e.data),(0,o.registerMissingBmpFeatureId)(!1),(0,Ne.lo)(),(0,g.nY)(),(0,Xe.WP)("highlight.emptyFeatures"),(0,o.submitBmpForm)(null===(n=t.getState())||void 0===n||null===(r=n.swamm)||void 0===r?void 0:r.storedBmpForm,null===(i=t.getState())||void 0===i||null===(a=i.swamm)||void 0===a||null===(l=a.projectData)||void 0===l?void 0:l.id),(0,y.zc)(),(0,T.ct)(null===(u=t.getState())||void 0===u||null===(s=u.layers)||void 0===s||null===(c=s.flat)||void 0===c?void 0:c.filter((function(e){var n,r;return null==e?void 0:e.name.includes(null===(n=t.getState())||void 0===n||null===(r=n.swamm)||void 0===r?void 0:r.drawingBmpLayerName)}))[0].id),(0,o.clearDrawingBmpLayerName)())}))},autoSaveBmpFormEpic:function(e,t){return e.ofType(o.MAKE_EXISTING_BMP_FORM).filter((function(){var e,n,r,o,i,a,l,u,s,c,p,d;return(null===(e=t.getState())||void 0===e||null===(n=e.swamm)||void 0===n||null===(r=n.storedBmpForm)||void 0===r?void 0:r.footprint_fid)&&!(null!==(o=t.getState())&&void 0!==o&&null!==(i=o.swamm)&&void 0!==i&&null!==(a=i.storedBmpForm)&&void 0!==a&&a.calculated_footprint_area)||(null===(l=t.getState())||void 0===l||null===(u=l.swamm)||void 0===u||null===(s=u.storedBmpForm)||void 0===s?void 0:s.watershed_fid)&&!(null!==(c=t.getState())&&void 0!==c&&null!==(p=c.swamm)&&void 0!==p&&null!==(d=p.storedBmpForm)&&void 0!==d&&d.calculated_watershed_area)})).flatMap((function(){var e,n,r,i,a;return Je().Observable.of((0,o.submitBmpForm)(null===(e=t.getState())||void 0===e||null===(n=e.swamm)||void 0===n?void 0:n.storedBmpForm,null===(r=t.getState())||void 0===r||null===(i=r.swamm)||void 0===i||null===(a=i.projectData)||void 0===a?void 0:a.id))}))},catchBmpFeatureClick:function(e,t){return e.ofType(b.XL).filter((function(e){var t,n;return!!(null==e||null===(t=e.data)||void 0===t||null===(n=t.features)||void 0===n?void 0:n.map((function(e){return/([a-zA-Z0-9]{3}_){2}outlet/.test(e.id)||/([a-zA-Z0-9]{3}_){2}footprint/.test(e.id)||/([a-zA-Z0-9]{3}_){2}watershed/.test(e.id)?e:null})))[0]})).mergeMap((function(e){var n,r,o,i,a,l,u,s=null==e||null===(n=e.data)||void 0===n||null===(r=n.features)||void 0===r?void 0:r.map((function(e){return/([a-zA-Z0-9]{3}_){2}outlet/.test(e.id)||/([a-zA-Z0-9]{3}_){2}footprint/.test(e.id)||/([a-zA-Z0-9]{3}_){2}watershed/.test(e.id)?e:null})),c=null===(o=t.getState())||void 0===o||null===(i=o.swamm)||void 0===i||null===(a=i.projectData)||void 0===a?void 0:a.id;return Je().Observable.from($e.get("/swamm/api/".concat(c,"/bmps/").concat(null===(l=s[0])||void 0===l||null===(u=l.properties)||void 0===u?void 0:u.id,"/")))})).mergeMap((function(e){return Je().Observable.of((0,b.Mc)(),(0,o.getBmpFormSuccess)(e.data),(0,o.makeExistingBmpForm)(e.data),(0,o.setUpdatingBmp)(e.data),(0,o.showBmpForm)())}))},getBmpTypeGroups:function(e,t){return e.ofType(o.FETCH_PROJECT_MANAGER_CONFIG_SUCCESS).mergeMap((function(){var e,n,r,o=null===(e=t.getState())||void 0===e||null===(n=e.swamm)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.base_map;return Je().Observable.from($e.get("/swamm/api/".concat(o,"/bmp-type/bmp_type_group_list/")))})).exhaustMap((function(e){var n=E(t.getState()),r=w(t.getState()),i=A(t.getState());return Je().Observable.of((0,o.updateBmpTypeGroups)(e.data),(0,o.setBmpLayers)(n,r,i))}))},downloadBmpReportEpic:function(e){return e.ofType(o.DOWNLOAD_BMP_REPORT).mergeMap((function(e){return Je().Observable.from(window.open("/swamm/print/".concat(e.bmpId,"/download/"),"_blank"))}))},filterBmpEpic:function(e,t){return e.ofType(o.TOGGLE_BMP_TYPE_VISIBILITY,o.SET_ALL_BMP_TYPES_VISIBILITY,o.TOGGLE_BMP_PRIORITY_VISIBILITY,o.TOGGLE_BMP_STATUS_VISIBILITY,o.TOGGLE_BMP_GROUP_PROFILE_VISIBILITY).mergeMap((function(){var e,n,r,o,i,a,l,u,s=JSON.parse(JSON.stringify(et)),c=!1,p=!1;if(null===(e=t.getState())||void 0===e||null===(n=e.swamm)||void 0===n||n.bmpTypes.map((function(e){if(null!=e&&e.visibility){var t=Qe("type",e.id);s.filterObj.filterFields.push(t),c=!0}})),!c){var d=Qe("type",-1);s.filterObj.filterFields.push(d)}if(null===(r=t.getState())||void 0===r||null===(o=r.swamm)||void 0===o||o.priorities.map((function(e){if(null!=e&&e.visibility){var t=Qe("priority",e.id);s.filterObj.filterFields.push(t),p=!0}})),!p){var m=Qe("priority",-1);s.filterObj.filterFields.push(m)}null===(i=t.getState())||void 0===i||null===(a=i.swamm)||void 0===a||a.groupProfiles.map((function(e){if(null!=e&&e.visibility){var t=Qe("group_profile",e.id);s.filterObj.filterFields.push(t)}})),null===(l=t.getState())||void 0===l||null===(u=l.swamm)||void 0===u||u.statuses.map((function(e){if(null!=e&&e.visibility){var t=Qe("status",null==e?void 0:e.name);s.filterObj.filterFields.push(t)}}));var f=JSON.parse(JSON.stringify(s)),v=JSON.parse(JSON.stringify(s)),g=JSON.parse(JSON.stringify(s)),b=E(t.getState()),y=w(t.getState()),h=A(t.getState());return f.filterObj.featureTypeName=null==b?void 0:b.name,v.filterObj.featureTypeName=null==y?void 0:y.name,g.filterObj.featureTypeName=null==h?void 0:h.name,console.log("outletFilter: ",f),console.log("footprintFilter: ",v),console.log("watershedFilter: ",g),Je().Observable.of((0,T.He)(null==b?void 0:b.id,f),(0,T.He)(null==y?void 0:y.id,v),(0,T.He)(null==h?void 0:h.id,g))}))}}})},652948:(e,t,n)=>{function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(375875),l="INIT_SWAMM",u="SET_SWAMM_PROJECT_DATA",s="FETCH_SWAMM_BMPTYPES_SUCCESS",c="FETCH_GROUP_PROFILES_SUCCESS",p="FETCH_PROJECT_MANAGER_CONFIG_ERROR",d="FETCH_PROJECT_MANAGER_CONFIG_SUCCESS",m="FETCH_SWAMM_ALL_BMPS_SUCCESS",f="FETCH_SWAMM_BMP_STATUSES_SUCCESS",v="FETCH_SWAMM_TARGETS_ERROR",g="FETCH_SWAMM_TARGETS_SUCCESS",b="SELECT_SWAMM_TARGET_ID",y="SHOW_SWAMM_BMP_CHART",h="HIDE_SWAMM_BMP_CHART",_="SHOW_TARGET_FORM",E="HIDE_TARGET_FORM",w="UPDATE_TARGET_FORM",A="CLEAR_TARGET_FORM",S="SUBMIT_TARGET_FORM_SUCCESS",T="DELETE_TARGET_SUCCESS",O="DELETE_TARGET_ERROR",N="SHOW_SWAMM_DATA_GRID",M="HIDE_SWAMM_DATA_GRID",P="SHOW_SWAMM_FEATURE_GRID",B="SHOW_BMP_MANAGER",F="HIDE_BMP_MANAGER",R="TOGGLE_BMP_MANAGER",I="SET_MENU_GROUP",C="TOGGLE_BMP_TYPE_VISIBILITY",x="TOGGLE_BMP_PRIORITY_VISIBILITY",D="TOGGLE_BMP_GROUP_PROFILE_VISIBILITY",L="TOGGLE_BMP_STATUS_VISIBILITY",G="SET_ALL_BMP_TYPES_VISIBILITY",k="SET_CHANGING_BMP_TYPE",j="SET_COMPLEX_BMP_FORM",U="SET_EXPANDED_FILTER",W="SET_BMP_LAYERS",H="SET_STATUS_FILTER",V="SHOW_BMP_FORM",Y="HIDE_BMP_FORM",z="SHOW_LOADING_BMP",K="HIDE_LOADING_BMP",q="SUBMIT_BMP_FORM_SUCCESS",Z="MAKE_BMP_FORM",J="CLEAR_BMP_FORM",X="MAKE_DEFAULTS_BMP_FORM",$="MAKE_EXISTING_BMP_FORM",Q="SET_UPDATING_BMP",ee="SET_EXPANDED_BMP_TYPE_GROUP_NAME",te="UPDATE_BMP_FORM",ne="SET_DRAWING_BMP_LAYER_NAME",re="START_DRAWING_BMP",oe="CLEAR_DRAWING_BMP_LAYER_NAME",ie="REGISTER_MISSING_BMP_FEATURE_ID",ae="SET_EDITING_BMP_FEATURE_ID",le="CLEAR_EDITING_BMP_FEATURE_ID",ue="UPDATE_BMP_TYPE_GROUPS",se="DELETE_BMP_SUCCESS",ce="DELETE_BMP_ERROR",pe="SET_BMP_FILTER_MODE",de="DOWNLOAD_BMP_REPORT",me="SET_SWAMM_INPUT_MENU",fe="SET_SWAMM_EROSION_DATA",ve=n(423570),ge=n(197395).SHOW_NOTIFICATION,be=function(e){return e.map((function(e){return e.visibility=!0,e})),{type:s,bmpTypes:e}};function ye(e){return console.log("fetchSwammBmpTypesError",e),{type:ge,title:"Fetch Swamm Bmp Types Error",autoDismiss:600,position:"tc",message:"".concat(null==e?void 0:e.data),uid:ve(),level:"error"}}var he=function(e){return{type:d,payload:e}};function _e(e){return console.log("*** error:",e),{type:p,error:e}}var Ee=function(e){var t=e.map((function(e){return o(o({},e),{},{id:null==e?void 0:e.pk,visibility:!0})}));return{type:c,groupProfiles:t}};function we(e){return console.log("fetchGroupProfilesError",e),{type:ge,title:"Fetch fetchGroupProfiles Error",autoDismiss:600,position:"tc",message:"".concat(null==e?void 0:e.data),uid:ve(),level:"error"}}var Ae=function(e){return{type:m,allBmps:e}};function Se(e){return console.log("fetchSwammAllBmpsError",e),{type:ge,title:"Fetch Swamm All Bmps Error",autoDismiss:600,position:"tc",message:"".concat(null==e?void 0:e.data),uid:ve(),level:"error"}}var Te=function(e){return{type:f,statuses:e}};function Oe(e){return console.log("fetchSwammBmpStatusesError",e),{type:ge,title:"Fetch Swamm Bmp Statuses Error",autoDismiss:600,position:"tc",message:"".concat(null==e?void 0:e.data),uid:ve(),level:"error"}}var Ne=function(){return{type:Y}},Me=function(e){return{type:k,changingBmpType:e}},Pe=function(e){return{type:$,bmp:e}},Be=function(){return{type:J}},Fe=function(){return{type:oe}},Re=function(){return console.log("clearEditingBmpFeatureId"),{type:le}},Ie=function(e){return function(t){t({type:g,targets:e})}},Ce=function(e){return console.log("*** error:",e),function(t){t({type:ge,title:"Failed to load Targets",autoDismiss:60,position:"tc",message:"".concat(null==e?void 0:e.data),uid:ve(),level:"error"}),t({type:v,error:e})}},xe=function(e){return function(t){return a.get("/swamm/api/".concat(e,"/pollutant-loading-target/")).then((function(e){t(Ie(e.data))})).catch((function(e){t(Ce(e))}))}},De=function(e){return function(t){t({type:ge,title:"Success",autoDismiss:6,position:"tc",message:"BMP ID: ".concat(e.id," saved"),uid:ve(),level:"success"}),t({type:q,bmp:e})}};function Le(e){var t,n;return console.log("submitBmpFormError",e),{type:ge,title:"Submit Bmp Form Error",autoDismiss:600,position:"tc",message:"Error saving BMP: ".concat(null==e||null===(t=e.data)||void 0===t||null===(n=t.errors)||void 0===n?void 0:n[0]),uid:ve(),level:"error"}}var Ge=function(e){return function(t){t({type:ge,title:"Delete BMP Success",autoDismiss:6,position:"tc",message:"Successfully deleted BMP: ".concat(e),uid:ve(),level:"success"}),t({type:se,bmpId:e})}},ke=function(e){return console.log("*** error:",e),function(t){t({type:ge,title:"Delete BMP Error",autoDismiss:60,position:"tc",message:"".concat(null==e?void 0:e.data),uid:ve(),level:"error"}),t({type:ce,error:e})}},je=function(){return{type:E,visibleTargetForm:!1}},Ue=function(){return{type:A,targetForm:null}},We=function(e){return function(t){t({type:ge,title:"Success",autoDismiss:6,position:"tc",message:"Target: ".concat(e.id," saved"),uid:ve(),level:"success"}),t({type:S,target:e})}};function He(e){return console.log("submitTargetFormError",e),{type:ge,title:"Submit Target Form Error",autoDismiss:600,position:"tc",message:"Error saving Target: ".concat(null==e?void 0:e.data),uid:ve(),level:"error"}}var Ve=function(e){return function(t){t({type:ge,title:"Delete Target Success",autoDismiss:6,position:"tc",message:"Successfully deleted Target: ".concat(e),uid:ve(),level:"success"}),t({type:T,targetId:e})}},Ye=function(e){return console.log("*** error:",e),function(t){t({type:ge,title:"Delete Target Error",autoDismiss:60,position:"tc",message:"".concat(null==e?void 0:e.data),uid:ve(),level:"error"}),t({type:O,error:e})}};e.exports={INIT_SWAMM:l,initSwamm:function(){return{type:l}},SET_SWAMM_PROJECT_DATA:u,setSwammProjectData:function(e){return{type:u,projectData:e}},UPDATE_BMP_TYPE_GROUPS:ue,updateBmpTypeGroups:function(e){return console.log("****"),{type:ue,bmpTypeGroups:e}},FETCH_SWAMM_BMPTYPES:"FETCH_SWAMM_BMPTYPES",fetchSwammBmpTypes:function(e){return function(t){return a.get("/swamm/api/".concat(e,"/bmp-type/")).then((function(e){t(be(e.data))})).catch((function(e){t(ye(e))}))}},FETCH_SWAMM_BMPTYPES_ERROR:"FETCH_SWAMM_BMPTYPES_ERROR",fetchSwammBmpTypesError:ye,FETCH_SWAMM_BMPTYPES_SUCCESS:s,fetchSwammBmpTypesSuccess:be,FETCH_PROJECT_MANAGER_CONFIG:"FETCH_PROJECT_MANAGER_CONFIG",fetchProjectManagerConfig:function(e){return function(t){return a.get("/projects/api/maps/".concat(t,"/")).then((function(t){e(he(t.data.project))})).catch((function(t){e(_e(t))}))}},FETCH_PROJECT_MANAGER_CONFIG_ERROR:p,fetchProjectManagerConfigError:_e,FETCH_PROJECT_MANAGER_CONFIG_SUCCESS:d,fetchProjectManagerConfigSuccess:he,FETCH_GROUP_PROFILES:"FETCH_GROUP_PROFILES",fetchGroupProfiles:function(){return function(e){return a.get("/api/v2/groups?page_size=1000").then((function(t){e(Ee(t.data.group_profiles))})).catch((function(t){e(we(t))}))}},FETCH_GROUP_PROFILES_ERROR:"FETCH_GROUP_PROFILES_ERROR",fetchGroupProfilesError:we,FETCH_GROUP_PROFILES_SUCCESS:c,fetchGroupProfilesSuccess:Ee,FETCH_SWAMM_ALL_BMPS:"FETCH_SWAMM_ALL_BMPS",fetchSwammAllBmps:function(e){return function(t){return a.get("/swamm/api/".concat(e,"/bmps/")).then((function(e){t(Ae(e.data))})).catch((function(e){t(Se(e))}))}},FETCH_SWAMM_ALL_BMPS_ERROR:"FETCH_SWAMM_ALL_BMPS_ERROR",fetchSwammAllBmpsError:Se,FETCH_SWAMM_ALL_BMPS_SUCCESS:m,fetchSwammAllBmpsSuccess:Ae,FETCH_SWAMM_BMP_STATUSES:"FETCH_SWAMM_BMP_STATUSES",fetchSwammBmpStatuses:function(e){return function(t){return a.get("/swamm/api/".concat(e,"/bmps/status_list/")).then((function(e){t(Te(e.data))})).catch((function(e){t(Oe(e))}))}},FETCH_SWAMM_BMP_STATUSES_ERROR:"FETCH_SWAMM_BMP_STATUSES_ERROR",fetchSwammBmpStatusesError:Oe,FETCH_SWAMM_BMP_STATUSES_SUCCESS:f,fetchSwammBmpStatusesSuccess:Te,FETCH_SWAMM_TARGETS:"FETCH_SWAMM_TARGETS",fetchSwammTargets:xe,FETCH_SWAMM_TARGETS_ERROR:v,fetchSwammTargetsError:Ce,FETCH_SWAMM_TARGETS_SUCCESS:g,fetchSwammTargetsSuccess:Ie,SELECT_SWAMM_TARGET_ID:b,selectSwammTargetId:function(e){return{type:b,selectedTargetId:e}},SUBMIT_BMP_FORM:"SUBMIT_BMP_FORM",submitBmpForm:function(e,t){return e.id?function(n){return console.log("updating existing BMP: ",e),a.patch("/swamm/api/".concat(t,"/bmps/").concat(e.id,"/"),e).then((function(e){n(De(e.data)),n(Me(!1)),n(Pe(e.data)),n(xe(t))})).catch((function(e){n(Le(e))}))}:function(n){return console.log("creating new BMP: ",e),a.post("/swamm/api/".concat(t,"/bmps/"),e).then((function(e){n(De(e.data)),n(Me(!1)),n(Pe(e.data)),n(xe(t))})).catch((function(e){n(Le(e))}))}},SUBMIT_BMP_FORM_ERROR:"SUBMIT_BMP_FORM_ERROR",submitBmpFormError:Le,SUBMIT_BMP_FORM_SUCCESS:q,submitBmpFormSuccess:De,TOGGLE_BMP_TYPE:"TOGGLE_BMP_TYPE",toggleBmpType:function(e){return function(t){t({type:"TOGGLE_BMP_TYPE",bmpType:e})}},TOGGLE_BMP_TYPE_VISIBILITY:C,toggleBmpTypeVisibility:function(e){return{type:C,bmpType:e}},TOGGLE_BMP_PRIORITY_VISIBILITY:x,toggleBmpPriorityVisibility:function(e){return{type:x,priority:e}},TOGGLE_BMP_GROUP_PROFILE_VISIBILITY:D,toggleBmpGroupProfileVisibility:function(e){return{type:D,groupProfile:e}},TOGGLE_BMP_STATUS_VISIBILITY:L,toggleBmpStatusVisibility:function(e){return{type:L,status:e}},SET_ALL_BMP_TYPES_VISIBILITY:G,setAllBmpTypesVisibility:function(e){return{type:G,boolValue:e}},SET_BMP_TYPE:"SET_BMP_TYPE",setBmpType:function(e,t){return function(n){n({type:"SET_BMP_TYPE",bmpType:e,isVisible:t})}},SET_STATUS_FILTER:H,setStatusFilter:function(e){return{type:H,statuses:e}},SET_MENU_GROUP:I,setMenuGroup:function(e){return{type:I,payload:e}},SHOW_BMP_FORM:V,showBmpForm:function(){return{type:V}},HIDE_BMP_FORM:Y,hideBmpForm:Ne,SHOW_LOADING_BMP:z,showLoadingBmp:function(){return{type:z}},HIDE_LOADING_BMP:K,hideLoadingBmp:function(){return{type:K}},SHOW_SWAMM_DATA_GRID:N,showSwammDataGrid:function(){return{type:N}},HIDE_SWAMM_DATA_GRID:M,hideSwammDataGrid:function(){return{type:M}},SHOW_SWAMM_FEATURE_GRID:P,showSwammFeatureGrid:function(e){return{type:P,layer:e}},SHOW_SWAMM_BMP_CHART:y,showSwammBmpChart:function(){return{type:y}},HIDE_SWAMM_BMP_CHART:h,hideSwammBmpChart:function(){return{type:h}},SHOW_BMP_MANAGER:B,showBmpManager:function(){return{type:B}},HIDE_BMP_MANAGER:F,hideBmpManager:function(){return{type:F}},TOGGLE_BMP_MANAGER:R,toggleBmpManager:function(){return{type:R}},CLEAR_BMP_FORM:J,clearBmpForm:Be,MAKE_BMP_FORM:Z,makeBmpForm:function(e){return{type:Z,groupProfile:e}},MAKE_DEFAULTS_BMP_FORM:X,makeDefaultsBmpForm:function(e){return{type:X,bmpType:e}},MAKE_EXISTING_BMP_FORM:$,makeExistingBmpForm:Pe,SET_UPDATING_BMP:Q,setUpdatingBmp:function(e){return{type:Q,updatingBmp:e}},SET_EXPANDED_BMP_TYPE_GROUP_NAME:ee,setExpandedBmpTypeGroupName:function(e){return{type:ee,expandedBmpTypeGroupName:e}},SET_CHANGING_BMP_TYPE:k,setChangingBmpType:Me,SET_COMPLEX_BMP_FORM:j,setComplexBmpForm:function(e){return{type:j,complexBmpForm:e}},SET_EXPANDED_FILTER:U,setExpandedFilter:function(e){return{type:U,expandedFilter:e}},SET_BMP_LAYERS:W,setBmpLayers:function(e,t,n){return{type:W,bmpOutletLayer:e,bmpFootprintLayer:t,bmpWatershedLayer:n}},getBmpFormSuccess:function(e){return console.log("getBmpFormSuccess bmp:",e),function(t){t({type:ge,title:"Success",autoDismiss:6,position:"tc",message:"BMP ID: ".concat(e.id," found"),uid:ve(),level:"success"}),t({type:"GET_BMP_FORM_SUCCESS",bmp:e})}},getBmpFormError:function(e){return console.log("getBmpFormError",e),{type:ge,title:"Get Bmp Form Error",autoDismiss:600,position:"tc",message:"Error getting BMP: ".concat(null==e?void 0:e.data),uid:ve(),level:"error"}},UPDATE_BMP_FORM:te,updateBmpForm:function(e){return{type:te,kv:e}},START_DRAWING_BMP:re,startDrawingBmp:function(){return{type:re}},SET_DRAWING_BMP_LAYER_NAME:ne,setDrawingBmpLayerName:function(e){return console.log("setDrawingBmpLayerName",e),{type:ne,drawingBmpLayerName:e}},CLEAR_DRAWING_BMP_LAYER_NAME:oe,clearDrawingBmpLayerName:Fe,REGISTER_MISSING_BMP_FEATURE_ID:ie,registerMissingBmpFeatureId:function(e){return{type:ie,missingBmpFeatureId:e}},SET_EDITING_BMP_FEATURE_ID:ae,setEditingBmpFeatureId:function(e){return console.log("setEditingBmpFeatureId",e),{type:ae,editingBmpFeatureId:e}},CLEAR_EDITING_BMP_FEATURE_ID:le,clearEditingBmpFeatureId:Re,DELETE_BMP:"DELETE_BMP",deleteBmp:function(e,t){return function(n){return a.delete("/swamm/api/".concat(e,"/bmps/").concat(t,"/"),{}).then((function(e){n(Ge(t)),n(Ne()),n(Be()),n(Re()),n(Fe())})).catch((function(e){n(ke(e))}))}},DELETE_BMP_ERROR:ce,deleteBmpError:ke,DELETE_BMP_SUCCESS:se,deleteBmpSuccess:Ge,SET_BMP_FILTER_MODE:pe,setBmpFilterMode:function(e){return{type:pe,bmpFilterMode:e}},SHOW_TARGET_FORM:_,showTargetForm:function(e){return{type:_,visibleTargetForm:!0,target:e}},HIDE_TARGET_FORM:E,hideTargetForm:je,UPDATE_TARGET_FORM:w,updateTargetForm:function(e){return{type:w,kv:e}},CLEAR_TARGET_FORM:A,clearTargetForm:Ue,SUBMIT_TARGET_FORM:"SUBMIT_TARGET_FORM",submitTargetForm:function(e,t){return e.id?function(n){return console.log("updating existing Target: ",e),a.patch("/swamm/api/".concat(t,"/pollutant-loading-target/").concat(e.id,"/"),e).then((function(e){n(We(e.data)),n(xe(t)),n(je()),n(Ue())})).catch((function(e){n(He(e))}))}:function(n){return console.log("creating new Target: ",e),a.post("/swamm/api/".concat(t,"/pollutant-loading-target/"),e).then((function(e){n(We(e.data)),n(xe(t)),n(je()),n(Ue())})).catch((function(e){n(He(e))}))}},SUBMIT_TARGET_FORM_SUCCESS:S,submitTargetFormSuccess:We,SUBMIT_TARGET_FORM_ERROR:"SUBMIT_TARGET_FORM_ERROR",submitTargetFormError:He,DELETE_TARGET:"DELETE_TARGET",deleteTarget:function(e,t){return function(n){return a.delete("/swamm/api/".concat(e,"/pollutant-loading-target/").concat(t,"/"),{}).then((function(r){n(Ve(t)),n(xe(e)),n(je()),n(Ue())})).catch((function(e){n(Ye(e))}))}},DELETE_TARGET_SUCCESS:T,deleteTargetSuccess:Ve,DELETE_TARGET_ERROR:O,deleteTargetError:Ye,DOWNLOAD_BMP_REPORT:de,downloadBmpReport:function(e){return{type:de,bmpId:e}},SET_SWAMM_INPUT_MENU:me,setSwammInputMenu:function(e){return{type:me,showSwammInputMenu:e}},SET_SWAMM_EROSION_DATA:fe,setSwammErosionData:function(e){return{type:fe,data:e}}}},273454:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(923645),o=n.n(r)()((function(e){return e[1]}));o.push([e.id,'.msgapi #anuga-container {\n    width:100%;\n    height:100%;\n    display: flex;\n    justify-content: center;\n    margin: 10px;\n    border: 1px solid #fff;\n    background-color: #ffffff;\n}\n\n.msgapi #anuga-chart {\n    z-index: 3000;\n    width: 98%;\n    height: 90%;\n    margin: 70px 20px 20px 0;\n    background-color: #ffffff;\n    font-size: 12px;\n    border-radius: 4px;\n    text-align: center;\n}\n\n.msgapi .chart-mainbody {\n    padding: 20px;\n    margin-top: 0;\n    height: 85%;\n    overflow: auto;\n}\n\n.msgapi .chart-header {\n    padding: 20px;\n    height: 60px;\n    border-bottom: 1px solid #DDD;\n    background-color: #ffffff;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n}\n\n.msgapi .chart-footer {\n    padding: 20px;\n    bottom: 0;\n    height: 80px;\n    background-color: #ffffff;\n    border-top: 1px solid #DDD;\n    border-bottom-left-radius: 5px;\n    border-bottom-right-radius: 5px;\n}\n\n.msgapi .chart-sidebar {\n    padding: 0 30px 0 30px;\n    min-height: 600px;\n    background-color: #f3f3f3;\n    border: 1px solid #c7c7c7;\n    border-radius: 3px;\n}\n\n.msgapi .scenario-input {\n    font-size: 14px;\n    white-space: nowrap;\n    padding-left: 3px;\n    vertical-align: middle;\n    text-overflow: ellipsis ellipsis;\n    overflow: hidden;\n    border: white;\n    text-align: center;\n    background: rgba(255, 255, 255, 0.22);\n    color: #f4f4f4;\n}\n\n.msgapi .table-hover > tbody > tr:hover {\n    background-color: #ffffff45;\n}\n\n.msgapi .scenario-table {\n    margin-bottom: 0;\n}\n\n.msgapi .scenario-table-header {\n    height: 45px;\n}\n\n.msgapi .scenario-table-header th {\n    text-align:center;\n}\n\n.msgapi .scenario-table-row {\n    height: 45px\n}\n\n.msgapi .network-table {\n    margin-bottom: 0;\n}\n\n.msgapi .network-table-header {\n    height: 45px;\n}\n\n.msgapi .network-table-header th {\n    text-align:center;\n}\n\n.msgapi .network-table-row {\n    height: 45px\n}\n\n.msgapi #new-scenario-button {\n    position: absolute;\n    right: 40px;\n    top: 11px;\n}\n\n.msgapi .scenario-select {\n    border-radius: 3px;\n    width: 100px;\n    height: 22px;\n    font-size: 14px;\n    white-space: nowrap;\n    padding-left: 3px;\n    vertical-align: middle;\n    text-overflow: ellipsis ellipsis;\n    overflow: hidden;\n    border: white;\n    text-align: center;\n    background: rgba(255, 255, 255, 0.22);\n    color: #f4f4f4;\n}\n\n.msgapi .add-data-input {\n    font-size: 14px;\n    white-space: nowrap;\n    padding-left: 3px;\n    vertical-align: middle;\n    text-overflow: ellipsis ellipsis;\n    overflow: hidden;\n    border: white;\n    text-align: center;\n    background: rgba(255, 255, 255, 0.22);\n    color: #f4f4f4;\n}\n\n.msgapi #anuga-scenario-log-viewer-container {\n    position: absolute;\n    z-index: 2000;\n    top: 5%;\n    width: 800px;\n    min-height: 600px;\n    color: #333333;\n    background-color: #f2f2f2;\n    border: 2px solid #dddddd;\n    border-radius: 5px;\n}\n\n.msgapi #anuga-scenario-log-viewer {\n    overflow-y: scroll;\n    height: 70vh;\n    padding: 10px;\n    margin: 0 0 10px;\n    font-size: 12px;\n    line-height: 1.42857143;\n    white-space: pre-line;\n    word-break: break-all;\n    word-wrap: break-word;\n}\n\n.msgapi #anuga-run-menu-container {\n    position: absolute;\n    padding: 10px;\n    margin: 0 0 10px;\n    font-size: 12px;\n    z-index: 2000;\n    top: 80px;\n    min-width: 800px;\n    min-height: 600px;\n    color: white;\n    background-color: #003c88cc;\n    border: 1px solid white;\n    border-radius: 5px;\n    white-space: pre-line;\n    word-break: break-all;\n    word-wrap: break-word;\n    text-align: left;\n}\n\n.msgapi #anuga-run-menu {\n    color: white;\n    background: #000000cc;\n    border-radius: 5px;\n    font-family: Monospace;\n    overflow-x: auto;\n    height: 100px;\n    padding: 10px;\n    margin: 20px 0 10px;\n}\n\n.msgapi #anuga-compute-instance-menu {\n    color: black;\n    background: white;\n    overflow-y: scroll;\n    overflow-x: auto;\n    height: 35vh;\n    padding: 10px;\n    margin: 0 0 10px;\n    font-size: 12px;\n    white-space: pre-line;\n    word-break: break-all;\n    word-wrap: break-word;\n}\n\n.msgapi #anuga-scenario-menu {\n    overflow-y: hidden;\n    overflow-x: auto;\n    max-width: 98%;\n}\n\n.msgapi ::placeholder { /* Chrome, Firefox, Opera, Safari 10.1+ */\n  color: white;\n  opacity: 1; /* Firefox */\n}\n\n.msgapi .run-server-table {\n    margin-bottom: 0;\n    text-align: center;\n}\n\n.msgapi .run-server-table-header {\n    height: 45px;\n}\n\n.msgapi .run-server-table-header > th {\n    text-align: center;\n}\n\n.msgapi .run-server-table-row {\n    height: 45px\n}\n\n.msgapi .run-server-table-row {\n    text-align: center;\n}\n\n/*#identify-container {*/\n/*    display:none;*/\n/*}*/\n\n/*#navigationBar {*/\n/*    display:none;*/\n/*}*/\n\n/* this is really terrible and can lead to random stuff not showing, but it is the only way I can see to select the\ndiv that holds the feature-grid */\n/*main > div[style*="1030"]:not([id]):not([role]):not([class]) {*/\n/*    display: none;*/\n/*}*/',""]);const i=o},666129:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(923645),o=n.n(r)()((function(e){return e[1]}));o.push([e.id,".msgapi #swamm-bmp-form-panel {\n    top: 70px;\n    display: grid;\n    grid-template-columns: repeat(2, minmax(350px, 1fr));\n    grid-template-rows: auto 1fr auto;\n    grid-column-gap: 30px;\n    grid-row-gap: 10px;\n    background-color: #063167;\n    text-align: left;\n    width: 95%;\n    height: 80%;\n    font-size: small;\n    background-color: rgba(43, 89, 148);\n}\n\n.msgapi #swamm-bmp-form-panel input {\n    text-align: right;\n    max-width: 80px;\n}\n\n.msgapi #swamm-bmp-form-grid-header {\n    grid-row-start: 1;\n    grid-row-end: 2;\n    grid-column-start: 1;\n    grid-column-end: 3;\n}\n\n.msgapi #swamm-bmp-form-grid-col-one {\n    grid-row-start: 2;\n    grid-row-end: 3;\n    grid-column-start: 1;\n    grid-column-end: 2;\n    overflow-y: scroll;\n    padding-right: 10px;\n}\n\n.msgapi #swamm-bmp-form-grid-col-two {\n    grid-row-start: 2;\n    grid-row-end: 3;\n    grid-column-start: 2;\n    grid-column-end: 3;\n    overflow-y: scroll;\n    padding-right: 10px;\n}\n\n.msgapi #swamm-bmp-form-grid-footer {\n    grid-row-start: 3;\n    grid-row-end: 4;\n    grid-column-start: 1;\n    grid-column-end: 3;\n}\n\n.msgapi #swamm-bmp-chart-panel {\n    top: 70px;\n    display: flex;\n    flex-direction: column;\n    background-color: #063167;\n    text-align: left;\n    width: 95%;\n    height: 80%;\n    font-size: small;\n    background-color: rgba(43, 89, 148);\n}\n\n.msgapi #swamm-bmp-chart-header {\n    text-align: center;\n    min-height: 50px;\n    font-size: x-large;\n}\n\n.msgapi #swamm-bmp-chart-body {\n    display: flex;\n    flex-direction: row;\n    height: 80%;\n}\n\n.msgapi #swamm-bmp-chart-col-one {\n    display: flex;\n    flex-direction: column;\n    width: 300px;\n    margin-left: auto;\n    margin-right: 20px;\n    max-height: 100%;\n    overflow-y: auto;\n    border: solid 1px rgba(53, 133, 176);\n    border-radius: 4px;\n    text-align: center;\n\n}\n\n.msgapi #swamm-bmp-chart-col-two {\n    display: flex;\n    flex-direction: column;\n    max-height: 100%;\n    width: 100%;\n    overflow-y: auto;\n    border: solid 1px rgba(53, 133, 176);\n    border-radius: 4px;\n}\n\n.msgapi #swamm-bmp-chart-col-three {\n    display: flex;\n    flex-direction: column;\n    max-width: 200px;\n    margin-right: auto;\n    margin-left: 20px;\n    padding: 10px;\n    max-height: 100%;\n    overflow-y: auto;\n    border: solid 1px rgba(53, 133, 176);\n    border-radius: 4px;\n}\n\n.msgapi #swamm-bmp-chart-targets {\n    margin-bottom: 20px;\n}\n\n.msgapi #swamm-bmp-chart-filter {\n    margin-bottom: 20px;\n}\n\n.msgapi #swamm-bmp-chart-phosphorus-graph-box {\n    color: #155481;\n    background-color: white;\n    margin: 10px;\n    border-radius: 4px;\n}\n\n.msgapi #swamm-bmp-chart-nitrogen-graph-box {\n    color: #155481;\n    background-color: white;\n    margin: 10px;\n    border-radius: 4px;\n}\n\n.msgapi #swamm-bmp-chart-sediment-graph-box {\n    color: #155481;\n    background-color: white;\n    margin: 10px;\n    border-radius: 4px;\n}\n\n.msgapi #swamm-bmp-chart-total-graph-box {\n    color: #155481;\n    background-color: white;\n    margin: 10px;\n    border-radius: 4px;\n}\n\n.msgapi #swamm-bmp-chart-summary {\n    color: #155481;\n    background-color: white;\n    margin: 10px;\n    border-radius: 4px;\n}\n\n.msgapi #swamm-bmp-chart-legend-container {\n    color: #155481;\n    background-color: white;\n    margin: 10px;\n    width: 200px;\n    height: auto;\n    border-radius: 4px;\n}\n\n.msgapi .swamm-bmp-chart-legend-row {\n    display: flex;\n    margin-top: 4px;\n    margin-left: 15px;\n}\n\n.msgapi #swamm-bmp-chart-footer {\n    border-top: solid 1px #3585b0;\n    width: 100%;\n    padding: 10px;\n    display: flex;\n    flex-direction: row-reverse;\n    position: absolute;\n    bottom: 0;\n    right: 0;\n}\n\n.msgapi .swamm-bmp-chart-heading {\n    font-size: medium;\n    text-align: center;\n    margin-bottom: 5px;\n}\n\n.msgapi .swamm-bmp-chart-graph-container {\n    margin-bottom: 15px;\n}\n\n.msgapi .swamm-bmp-chart-graph-box {\n    display: flex;\n    height: 100px;\n}\n\n.msgapi .swamm-bmp-chart-pie-group {\n    margin-top: 10px;\n    margin-left: 10px;\n    width: 200px;\n    display: inline-block;\n}\n\n.msgapi .swamm-bmp-chart-bar-group {\n    margin-top: 10px;\n    margin-right: 10px;\n    width: 100%;\n    height: 200px;\n}\n\n.msgapi #swamm-target-form-panel {\n    width: 95%;\n    height: 80%;\n    font-size: small;\n    text-align: left;\n    top: 70px;\n    background-color: rgba(43, 89, 148);\n    z-index: 1030;\n    display: flex;\n    flex-direction: column;\n}\n\n.msgapi #swamm-target-form-header {\n    text-align: center;\n    min-height: 50px;\n    font-size: x-large;\n}\n\n.msgapi #swamm-target-form-body {\n    display: flex;\n    flex-direction: row;\n    height: 80%;\n}\n\n.msgapi #swamm-target-form-col-one {\n    display: flex;\n    flex-direction: column;\n    margin-right: 20px;\n    padding: 10px;\n    max-height: 100%;\n    overflow-y: auto;\n    width: 100%;\n    min-width: 300px;\n    border: solid 1px rgba(53, 133, 176);\n    border-radius: 4px;\n\n}\n\n.msgapi #swamm-target-form-col-two {\n    display: flex;\n    flex-direction: column;\n    padding: 10px;\n    max-height: 100%;\n    overflow-y: auto;\n    width: 100%;\n    min-width: 300px;\n    border: solid 1px rgba(53, 133, 176);\n    border-radius: 4px;\n}\n\n.msgapi #swamm-target-form-footer {\n    border-top: solid 1px #3585b0;\n    width: 100%;\n    padding: 10px;\n    display: flex;\n    flex-direction: row-reverse;\n    position: absolute;\n    bottom: 0;\n    right: 0;\n}\n\n.msgapi .swamm-target-row {\n    display: flex;\n    flex-direction: row;\n    margin-bottom: 10px\n}\n\n.msgapi .swamm-target-select {\n    width: 80%;\n}\n\n.msgapi .swamm-target-select option:checked {\n    color: white;\n    background-color: darkgreen;\n}\n\n.msgapi .swamm-target-form-heading {\n    margin-bottom: 10px;\n}\n\n.msgapi .custom-tooltip-label {\n    color: white;\n    background-color: black;\n    border-radius: 3px;\n    padding: 2px;\n}\n\n.msgapi .bmp-type-group-glyph {\n    font-size: smaller;\n    vertical-align: bottom;\n    margin-left: 10px;\n    margin-bottom: 2px;\n    margin-right: 10px;\n    border: solid 1px rgba(255, 255, 255, 0.65);\n    background: #537ab1;\n}\n\n.msgapi .bmp-type-group-glyph:hover {\n    background: #73a4e8;\n}\n\n.msgapi .bmp-type-group-bottom-margin {\n    margin-bottom: 10px;\n}\n\n.msgapi .bmp-type-group-name {\n    vertical-align: top;\n    margin-top: 5px;\n}\n\n.msgapi .bmp-progress-button-danger {\n    top: 80px;\n    left: 20px;\n    min-width: 135px;\n    position: absolute;\n    opacity: 0.9;\n    border-radius: 4px;\n    background-color: inherit;\n}\n\n.msgapi .bmp-progress-button-success {\n    top: 80px;\n    left: 20px;\n    min-width: 135px;\n    position: absolute;\n    opacity: 0.9;\n    border-radius: 4px;\n    background-color: inherit;\n}\n\n.msgapi .bmp-loading-button {\n    position: absolute;\n    top: 200px;\n    left: 50%;\n    margin-top: -100px;\n    margin-left: -100px;\n    width: 200px;\n    height: 100px;\n    border-radius: 4px;\n    border-color: white;\n    color: white;\n    background: rgb(0, 86, 187, 0.95);\n    text-align: center;\n    z-index: 10000;\n}\n\n.msgapi .swamm-button {\n    border-radius: 4px;\n    border: 1px solid white;\n    color: white;\n    background: rgb(82, 121, 176);\n    text-align: center;\n    margin-left: 10px;\n    margin-right: 10px;\n    margin-top: 10px;\n    min-width: 100px;\n}\n\n.msgapi .swamm-button-disabled {\n    cursor: not-allowed;\n    opacity: 0.5;\n}\n\n.msgapi .non-savable-group-profile {\n    background-color: #f8a9a9;\n    color: grey;\n}\n\n.msgapi .simple-view-panel-item-row select {\n    background-color: #5279B0FF;\n    border-radius: 4px;\n    border: 1px white solid;\n    min-width: 200px;\n}\n\n.msgapi #bmp-notes {\n    color: white;\n    background-color: #5279B0FF;\n    border-radius: 4px;\n    border: 1px white solid;\n    width: 100%;\n}\n\n.msgapi .filter-row {\n    width: 240px;\n    font-size: 14px;\n    text-align: left;\n    text-overflow: ellipsis ellipsis;\n    white-space: nowrap;\n    overflow: hidden;\n}\n\n.msgapi .form-group {\n     margin-bottom: 5px;\n}\n\n/*Override recharts default that causes bar to go grey on hover*/\n.msgapi .swamm-bmp-chart-bar-group-responsive > div > svg > path {\n    fill: none;\n}\n",""]);const i=o}}]);