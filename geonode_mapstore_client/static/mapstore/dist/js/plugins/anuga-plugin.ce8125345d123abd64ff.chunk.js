(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[44995,47310],{604206:(e,t,n)=>{"use strict";n.d(t,{hZ:()=>r,pb:()=>o,kD:()=>l,DI:()=>a,IC:()=>i,iU:()=>u,W7:()=>s,uB:()=>c,Rh:()=>p,G_:()=>d,vU:()=>m,Vw:()=>f,KD:()=>v,uj:()=>g,lo:()=>y,Yf:()=>b,fo:()=>_,PY:()=>h,bp:()=>E,oJ:()=>S,k4:()=>w,sc:()=>A,Li:()=>T});var r="CHANGE_DRAWING_STATUS",o="DRAW:END_DRAWING",l="DRAW:SET_CURRENT_STYLE",a="DRAW:GEOMETRY_CHANGED",i="DRAW:DRAW_SUPPORT_STOPPED",u="DRAW:FEATURES_SELECTED",s="DRAW:DRAWING_FEATURES",c="DRAW:SET_SNAPPING_LAYER",p="DRAW:SNAPPING_IS_LOADING",d="DRAW:TOGGLE_SNAPPING",m="DRAW:SET_SNAPPING_CONFIG";function f(e,t,n,r,o){return{type:a,features:e,owner:t,enableEdit:n,textChanged:r,circleChanged:o}}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:u,features:e}}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:s,features:e}}function y(){return{type:i}}function b(e,t,n,o,l,a){return{type:r,status:e,method:t,owner:n,features:o,options:l,style:a}}function _(e,t){return{type:o,geometry:e,owner:t}}function h(e){return{type:l,currentStyle:e}}var E=function(e){return b("clean","",e,[],{})};function S(){return{type:d}}function w(e){return{type:c,snappingLayer:e}}function A(){return{type:p}}function T(e,t,n){return{type:m,value:e,prop:t,pluginCfg:n}}},129386:(e,t,n)=>{"use strict";n.d(t,{F2:()=>r,fu:()=>o,NF:()=>l,WP:()=>a,_E:()=>i});var r="HIGHLIGHT_STATUS",o="UPDATE_HIGHLIGHTED",l="HIGHLIGHT:SET_HIGHLIGHT_FEATURES_PATH";function a(e){return{type:l,featuresPath:e}}function i(e,t){return{type:o,features:e,status:t}}},801550:(e,t,n)=>{"use strict";n.d(t,{pP:()=>r,TR:()=>o,N7:()=>l,mq:()=>a,uv:()=>i,Qy:()=>u,IL:()=>s,Li:()=>c,OW:()=>p,ZO:()=>d,Um:()=>m,TF:()=>f,Ls:()=>v,Ec:()=>g,Eu:()=>y,JJ:()=>b,nZ:()=>_,YD:()=>h,GI:()=>E,Jb:()=>S,Uh:()=>w,e$:()=>A,eh:()=>T,$j:()=>O,bJ:()=>N,Mk:()=>F,xy:()=>M,o6:()=>C,FP:()=>B,Mo:()=>P,sO:()=>R,Px:()=>I,hd:()=>x,Ju:()=>D,BV:()=>L,SO:()=>G,H0:()=>k,$X:()=>j,ou:()=>U,NE:()=>W,Lq:()=>H,aN:()=>z});var r="CHANGE_MAP_VIEW",o="CLICK_ON_MAP",l="CHANGE_MOUSE_POINTER",a="CHANGE_ZOOM_LVL",i="PAN_TO",u="ZOOM_TO_EXTENT",s="ZOOM_TO_POINT",c="CHANGE_MAP_CRS",p="CHANGE_MAP_SCALES",d="CHANGE_MAP_STYLE",m="CHANGE_ROTATION",f="CREATION_ERROR_LAYER",v="UPDATE_VERSION",g="INIT_MAP",y="RESIZE_MAP",b="CHANGE_MAP_LIMITS",_="SET_MAP_RESOLUTIONS",h="REGISTER_EVENT_LISTENER",E="UNREGISTER_EVENT_LISTENER",S="MOUSE_MOVE",w="MOUSE_OUT",A="MAP:MAP_PLUGIN_LOAD",T="MAP:ORIENTATION",O="MAP:UPDATE_MAP_VIEW",N="MAP:UPDATE_MAP_OPTIONS";function F(e,t,n,r){return{type:A,mapType:t,loading:e,loaded:n,error:r}}function M(e,t,n){return{type:s,pos:e,zoom:t,crs:n}}function C(e,t,n,o,l,a,i,u){return{type:r,center:e,zoom:t,bbox:n,size:o,mapStateSource:l,projection:a,viewerOptions:i,resolution:u}}function B(e,t){return{type:o,point:e,layer:t}}function P(e){return{type:l,pointer:e}}function R(e,t){return{type:a,zoom:e,mapStateSource:t}}function I(e,t,n,r){return{type:u,extent:e,crs:t,maxZoom:n,options:r}}function x(e,t){return{type:d,style:e,mapStateSource:t}}function D(){return{type:y}}function L(e){var t=e.restrictedExtent,n=e.crs,r=e.minZoom;return{type:b,restrictedExtent:t,crs:n,minZoom:r}}function G(e){return{type:_,resolutions:e}}var k=function(e,t){return{type:h,eventName:e,toolName:t}},j=function(e,t){return{type:E,eventName:e,toolName:t}},U=function(e){return{type:S,position:e}},W=function(){return{type:w}},H=function(e){return{type:T,orientation:e}},z=function(e){return{type:N,configUpdate:e}}},921914:(e,t,n)=>{"use strict";n.d(t,{XL:()=>o,km:()=>l,Ih:()=>a,Xw:()=>i,Pn:()=>u,DZ:()=>s,e8:()=>c,E0:()=>p,F9:()=>d,X_:()=>m,pb:()=>f,qb:()=>v,Re:()=>g,ih:()=>y,xy:()=>b,jL:()=>_,oz:()=>h,ph:()=>E,lF:()=>S,gG:()=>w,cb:()=>A,GI:()=>T,B1:()=>O,fv:()=>N,gc:()=>F,zX:()=>M,ZF:()=>C,Zb:()=>B,DW:()=>P,Xp:()=>R,Fm:()=>I,sV:()=>x,Mn:()=>D,LU:()=>L,XP:()=>G,WU:()=>k,JB:()=>j,g:()=>U,ws:()=>W,HP:()=>H,aN:()=>z,Pg:()=>Y,u0:()=>K,TM:()=>q,PM:()=>Z,lK:()=>J,sv:()=>X,MO:()=>$,oO:()=>Q,Mc:()=>ee,Zw:()=>te,RA:()=>ne,am:()=>re,ZM:()=>oe,wm:()=>le,Y$:()=>ae,Qu:()=>ie,kT:()=>ue});var r=n(647310),o="LOAD_FEATURE_INFO",l="ERROR_FEATURE_INFO",a="EXCEPTIONS_FEATURE_INFO",i="CHANGE_MAPINFO_STATE",u="NEW_MAPINFO_REQUEST",s="PURGE_MAPINFO_RESULTS",c="CHANGE_MAPINFO_FORMAT",p="SHOW_MAPINFO_MARKER",d="HIDE_MAPINFO_MARKER",m="SHOW_REVERSE_GEOCODE",f="HIDE_REVERSE_GEOCODE",v="GET_VECTOR_INFO",g="NO_QUERYABLE_LAYERS",y="CLEAR_WARNING",b="FEATURE_INFO_CLICK",_="IDENTIFY:UPDATE_FEATURE_INFO_CLICK_POINT",h="IDENTIFY:TOGGLE_HIGHLIGHT_FEATURE",E="TOGGLE_MAPINFO_STATE",S="UPDATE_CENTER_TO_MARKER",w="IDENTIFY:CHANGE_PAGE",A="IDENTIFY:CLOSE_IDENTIFY",T="IDENTIFY:CHANGE_FORMAT",O="IDENTIFY:TOGGLE_SHOW_COORD_EDITOR",N="IDENTIFY:EDIT_LAYER_FEATURES",F="IDENTIFY:CURRENT_EDIT_FEATURE_QUERY",M="IDENTIFY:SET_MAP_TRIGGER",C="IDENTIFY:TOGGLE_EMPTY_MESSAGE_GFI",B="IDENTIFY:SET_SHOW_IN_MAP_POPUP",P="IDENTIFY:IDENTIFY_IS_MOUNTED",R="IDENTIFY:INIT_PLUGIN";function I(e,t,n,r,l){return{type:o,data:t,reqId:e,requestParams:n,layerMetadata:r,layer:l}}function x(e,t,n,r){return{type:l,error:t,reqId:e,requestParams:n,layerMetadata:r}}function D(e,t,n,r){return{type:a,reqId:e,exceptions:t,requestParams:n,layerMetadata:r}}function L(){return{type:g}}function G(){return{type:y}}function k(e,t){return{type:u,reqId:e,request:t}}function j(e,t,n,r){return{type:v,layer:e,request:t,metadata:n,queryableLayers:r}}function U(){return{type:s}}function W(e){return{type:c,infoFormat:e}}function H(){return{type:p}}function z(){return{type:d}}function V(e){return{type:m,reverseGeocodeData:e.data}}function Y(e){return function(t){r.Z.reverseGeocode(e).then((function(e){t(V(e))})).catch((function(e){t(V(e))}))}}function K(){return{type:f}}function q(){return{type:E}}function Z(e){return{type:S,status:e}}function J(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return{type:b,point:e,layer:t,filterNameList:n,overrideParams:r,itemId:o}}function X(e){return{type:_,point:e}}function $(e){return{type:h,enabled:e}}function Q(e){return{type:w,index:e}}var ee=function(){return{type:A}},te=function(e){return{type:T,format:e}},ne=function(e){return{type:O,showCoordinateEditor:e}},re=function(e){return{type:N,layer:e}},oe=function(e){return{type:F,query:e}},le=function(e){return{type:M,trigger:e}},ae=function(e){return{type:B,value:e}},ie=function(e){return{type:P,isMounted:e}},ue=function(e){return{type:R,cfg:e}}},647310:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(375875),o=n.n(r),l=n(472500),a=n.n(l),i=n(727418),u=n.n(i),s={format:"json",bounded:0,polygon_geojson:1,priority:5};const c={geocode:function(e,t){var n=u()({q:e},s,t||{}),r=a().format({protocol:"https",host:"nominatim.openstreetmap.org",query:n});return o().get(r)},reverseGeocode:function(e,t){var n=u()({lat:e.lat,lon:e.lng},t||{},s),r=a().format({protocol:"https",host:"nominatim.openstreetmap.org/reverse",query:n});return o().get(r)}}},615402:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n(45697),o=n.n(r),l=n(124852),a=n.n(l);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n(868195).FormattedHTMLMessage,v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(i,e);var t,n,r,o,l=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(r);if(o){var n=d(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return p(this,e)});function i(){return u(this,i),l.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){return this.context.intl?a().createElement(f,{id:this.props.msgId,values:this.props.msgParams}):a().createElement("span",null,this.props.msgId||"")}}])&&s(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(a().Component);m(v,"propTypes",{msgId:o().string.isRequired,msgParams:o().object}),m(v,"contextTypes",{intl:o().object});const g=v},838167:(e,t,n)=>{"use strict";n.d(t,{t6:()=>S,k9:()=>E,v0:()=>h,ZP:()=>w});var r=n(45697),o=n.n(r),l=n(124852),a=n.n(l),i=n(868195);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(u,e);var t,n,r,o,l=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(r);if(o){var n=f(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return m(this,e)});function u(){return c(this,u),l.apply(this,arguments)}return t=u,(n=[{key:"render",value:function(){return this.context.intl?a().createElement(i.FormattedDate,s({value:this.props.value},this.props.dateParams)):a().createElement("span",null,this.props.value&&this.props.value.toString()||"")}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(a().Component);v(g,"propTypes",{value:o().object,dateParams:o().object}),v(g,"contextTypes",{intl:o().object}),v(g,"defaultProps",{value:new Date});const y=g;var b=n(615402),_=n(805346),h=_.Z,E=b.Z,S=y;const w={Message:_.Z,HTML:E,DateFormat:S}},73443:(e,t,n)=>{"use strict";n.d(t,{rs:()=>r,AY:()=>o,SW:()=>l,yB:()=>a,oG:()=>i,oz:()=>u,id:()=>s,gc:()=>c,cE:()=>p,rG:()=>d,Vj:()=>m,nY:()=>f});var r="GEONODE:SAVING_RESOURCE",o="GEONODE:SAVE_SUCCESS",l="GEONODE:SAVE_ERROR",a="GEONODE:CLEAR_SAVE",i="GEONODE:SAVE_CONTENT",u="GEONODE:SAVE_DIRECT_CONTENT";function s(){return{type:r}}function c(e){return{type:o,success:e}}function p(e){return{type:l,error:e}}function d(){return{type:a}}function m(e,t,n,r){return{type:i,id:e,metadata:t,reload:n,showNotifications:r}}function f(){return{type:u}}},74433:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Ot});var r=n(322843),o=n(368658),l=n(351288);function a(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p={showAddAnugaElevationData:!1,visibleAnugaScenarioLogId:!1,scenarios:[]},d=n(124852),m=n.n(d),f=n(171703);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){var t,n,r,o,l,a,i=null==e||null===(t=e.security)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.pk,u=null==e||null===(r=e.gnresource)||void 0===r||null===(o=r.compactPermissions)||void 0===o||null===(l=o.users)||void 0===l||null===(a=l.filter((function(e){return e.id===i}))[0])||void 0===a?void 0:a.permissions;return["view","edit","manage","owner"].includes(u)},_=function(e){var t,n,r,o,l,a,i=null==e||null===(t=e.security)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.pk,u=null==e||null===(r=e.gnresource)||void 0===r||null===(o=r.compactPermissions)||void 0===o||null===(l=o.users)||void 0===l||null===(a=l.filter((function(e){return e.id===i}))[0])||void 0===a?void 0:a.permissions;return["edit","manage","owner"].includes(u)},h=function(e){var t;return null==e||null===(t=e.anuga)||void 0===t?void 0:t.scenarios.filter((function(e){return null==e?void 0:e.selected}))},E=n(480681),S=n(893379),w=n.n(S),A=n(273454);w()(A.Z,{insert:"head",singleton:!1}),A.Z.locals,n(472619);var T=n(388380),O=n(855033),N=n.n(O);function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return(C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function B(e,t){if(t&&("object"===F(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(a,e);var t,n,r,o,l=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=R(r);if(o){var n=R(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return B(this,e)});function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=l.call(this)).state={time:{},seconds:180},e.timer=0,e.startTimer=e.startTimer.bind(P(e)),e.countDown=e.countDown.bind(P(e)),e}return t=a,(n=[{key:"componentDidMount",value:function(){this.startTimer();var e=this.secondsToTime(this.state.seconds);this.setState({time:e})}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return m().createElement(m().Fragment,null,this.state.time.m,":",this.state.time.s)}},{key:"secondsToTime",value:function(e){var t=e%3600,n=t%60;return{h:Math.floor(e/3600),m:Math.floor(t/60),s:String(Math.ceil(n)).padStart(2,"0")}}},{key:"startTimer",value:function(){0===this.timer&&this.state.seconds>0&&(this.timer=setInterval(this.countDown,1e3))}},{key:"countDown",value:function(){var e=this.state.seconds-1;this.setState({time:this.secondsToTime(e),seconds:e}),0===e&&clearInterval(this.timer)}}])&&M(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(m().Component),x=n(838167),D=n(375875),L=n.n(D);function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return(j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function U(e,t){if(t&&("object"===G(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return W(e)}function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var V=n(45697),Y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(a,e);var t,n,r,o,l=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=H(r);if(o){var n=H(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return U(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),z(W(t=l.call(this,e)),"humanFileSize",(function(e){var t=Math.floor(Math.log(e)/Math.log(1024));return 1*(e/Math.pow(1024,t)).toFixed(2)+" "+["B","kB","MB","GB","TB"][t]})),z(W(t),"uploadFile",(function(e,n){t.setState((function(t){return{itemList:t.uploaderFiles.map((function(t){return t.preview===e.preview?Object.assign(t,{status:"uploading"}):t}))}}));var r,o=new FormData;o.append(n,e),o.append("title",t.state.newTitle),r=t.props.serverUrl.includes("localhost")?"http://localhost:8081/":t.props.serverUrl,L().put("".concat(r,"anuga/api/").concat(t.props.projectId,"/elevation/upload/"),o,t.uploadConfig).then((function(n){t.setState((function(t){return{itemList:t.uploaderFiles.map((function(t){return t.preview===e.preview?Object.assign(t,{status:"complete"}):t}))}}))}))})),z(W(t),"uploadConfig",{onUploadProgress:function(e){var n=Math.round(100*e.loaded/e.total);t.props.updateUploadStatus(n)}}),t.state={uploaderFiles:[],newTitle:""},t.beginTooltip=m().createRef(),t}return t=a,(n=[{key:"render",value:function(){var e=this;return this.props.visibleUploaderPanel?m().createElement("div",{className:"simple-view-panel uploader-panel"},m().createElement("div",{className:"row h4 legend-heading"},"Upload GeoTiff File (*.tif)",m().createElement("span",{className:"btn glyphicon glyphicon-remove legend-close",onClick:function(){return e.props.setVisibleUploaderPanel(!1)}})),this.state.uploaderFiles.length>0?m().createElement(E.Table,{bordered:!0,condensed:!0,hover:!0,ref:this.beginTooltip,style:{tableLayout:"fixed"}},m().createElement("thead",null,m().createElement("tr",null,m().createElement("th",{width:"155px",key:"hname"},"Title"),m().createElement("th",{width:"80px",key:"hname"},"Filename"),m().createElement("th",{width:"80px",key:"hsize"},"Filesize"),m().createElement("th",{width:"80px",key:"htype"},"Filetype"),m().createElement("th",{width:"80px",key:"hlast"},"Modified"),m().createElement("th",{width:"80px",key:"hstatus"},"Status"))),m().createElement("tbody",null,this.state.uploaderFiles&&this.state.uploaderFiles.map((function(t,n){return m().createElement("tr",{key:"row_"+n},m().createElement("td",{key:"title"},m().createElement("input",{id:"newTitle",key:"newTitle",className:"data-title-input",type:"text",value:e.state.newTitle,onChange:function(t){return e.setState({newTitle:t.target.value})}})),m().createElement("td",{key:"name",style:{wordWrap:"break-word"}},t.name),m().createElement("td",{key:"size"},e.humanFileSize(t.size)),m().createElement("td",{key:"type"},t.type),m().createElement("td",{key:"last"},m().createElement(x.t6,{value:t.lastModifiedDate})),m().createElement("td",{key:"status"},"begin"===t.status?e.state.newTitle?m().createElement(E.Button,{onClick:function(){return e.uploadFile(t,e.props.fileType||"file")},style:{borderRadius:"3px"},bsSize:"small",bsStyle:"success"},"Begin"):m().createElement(E.Button,{className:"disabled",style:{borderRadius:"3px"},bsSize:"small",bsStyle:"success"},"Begin"):m().createElement("span",null,m().createElement(E.ProgressBar,{active:!0,bsStyle:"success",now:parseInt(e.props.uploadStatus,10)}),100===parseInt(e.props.uploadStatus,10)?m().createElement("span",null,"importing: ",m().createElement(I,null)):e.props.uploadStatus,isNaN(parseInt(e.props.uploadStatus,10))||100===parseInt(e.props.uploadStatus,10)?"":"%")))})))):m().createElement(N(),{key:"dropzone",rejectClassName:"alert-danger",className:"alert alert-info",onDrop:function(t){return e.setState({uploaderFiles:t.map((function(e){return Object.defineProperty(e,"status",{value:"begin",writable:!0}),e}))})},style:this.props.dropZoneStyle,activeStyle:this.props.dropZoneActiveStyle},m().createElement("div",{style:{display:"flex",alignItems:"center",width:"100%",height:"100%",justifyContent:"center"}},m().createElement("span",{style:{width:"100px",height:"100px",textAlign:"center"}},m().createElement(E.Glyphicon,{glyph:"upload"}),m().createElement("br",null),"Drag files or",m().createElement("br",null),"click here")))):null}}])&&k(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(m().Component);z(Y,"propTypes",{setVisibleUploaderPanel:V.func,updateUploaderFile:V.func,setUploaderFiles:V.func,uploaderFiles:V.object,updateUploadStatus:V.func,uploadStatus:V.string,visibleUploaderPanel:V.bool,serverUrl:V.string,projectId:V.number,newTitle:V.string,fileType:V.string});var K=(0,f.connect)((function(e){var t,n,r,o,l;return{visibleUploaderPanel:null==e||null===(t=e.simpleView)||void 0===t?void 0:t.visibleUploaderPanel,serverUrl:null==e||null===(n=e.gnsettings)||void 0===n?void 0:n.geonodeUrl,projectId:null==e||null===(r=e.anuga)||void 0===r||null===(o=r.projectData)||void 0===o?void 0:o.id,uploadStatus:(null==e||null===(l=e.simpleView)||void 0===l?void 0:l.uploadStatus)||0}}),(function(e){return{setVisibleUploaderPanel:function(t){return e((0,l.setVisibleUploaderPanel)(t))},updateUploadStatus:function(t){return e((0,l.updateUploadStatus)(t))}}}))(Y);function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e,t){return(J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function X(e,t){if(t&&("object"===q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ee=n(45697),te=n(472986),ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J(e,t)}(a,e);var t,n,r,o,l=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=$(r);if(o){var n=$(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return X(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=l.call(this,e)).state={showAdvanced:!1,boundaryTitle:"",frictionTitle:"",inflowTitle:"",structureTitle:"",meshRegionTitle:"",networkTitle:"",catchmentTitle:"",nodesTitle:"",linksTitle:""},t}return t=a,(n=[{key:"componentDidMount",value:function(){this.props.startAnugaModelCreationPolling(),this.props.startAnugaElevationPolling()}},{key:"componentWillUnmount",value:function(){this.props.stopAnugaModelCreationPolling(),this.props.stopAnugaElevationPolling()}},{key:"render",value:function(){var e,t,n,r,o,l,a,i,u,s,c,p,d,f,v,g,y,b,_=this;return m().createElement("div",{id:"anuga-input-menu",className:"simple-view-panel",style:{top:"70px",width:"480px"}},m().createElement("div",{className:"menu-rows-container",style:{border:"1px solid rgba(255, 255, 255, 1)",borderRadius:"3px",margin:"3px 0"}},m().createElement("div",{className:"row menu-row menu-row-header",style:{width:"480px",textAlign:"left",border:"none"}},m().createElement("span",{className:"menu-row-text"},"Elevations"),m().createElement(E.OverlayTrigger,{placement:"right",overlay:m().createElement(E.Tooltip,null,"Upload a new *.tiff elevation")},m().createElement("span",{className:"btn pull-right glyphicon menu-row-glyph glyphicon-upload",style:{color:"limegreen",fontSize:"smaller",textAlign:"right",marginRight:"8px"},onClick:function(){_.props.setVisibleUploaderPanel(!0),_.props.startAnugaElevationPolling()}}))),null===(e=this.props.elevationLayers)||void 0===e?void 0:e.map((function(e){return m().createElement(T.j,{layer:e})})),0===(null===(t=this.props.elevationLayers)||void 0===t?void 0:t.length)?m().createElement("div",{className:"row menu-row menu-row",style:{width:"480px",textAlign:"left",border:"none"}},"No elevations available"):null),null!==(n=this.props.projectData)&&void 0!==n&&n.projection?m().createElement(m().Fragment,null,m().createElement("div",{className:"menu-rows-container",style:{border:"1px solid rgba(255, 255, 255)",borderRadius:"3px",margin:"3px 0"}},m().createElement("div",{className:"row menu-row menu-row-header",style:{width:"480px",textAlign:"left",border:"none"}},m().createElement("span",{className:"pull-left menu-row-text"},"Boundaries"),this.props.canEditAnugaMap?m().createElement(m().Fragment,null,m().createElement("span",{className:"btn glyphicon menu-row-glyph glyphicon-plus".concat(this.state.boundaryTitle?"":" disabled"),style:{color:"limegreen",fontSize:"smaller",textAlign:"right",marginRight:"8px",float:"right"},onClick:function(){_.props.setCreatingAnugaLayer(!0),_.props.createAnugaBoundary(_.state.boundaryTitle),_.setState({boundaryTitle:""})}}),this.props.isCreatingAnugaLayer?m().createElement("span",null,m().createElement(te,{color:"white",style:{display:"inline-block",position:"absolute",right:"45px"},spinnerName:"circle",noFadeIn:!0})):m().createElement("input",{id:"boundary-input",key:"boundary-input",className:"data-title-input",style:{marginTop:"3px",marginRight:"5px"},type:"text",value:this.state.boundaryTitle,onChange:function(e){return _.setState({boundaryTitle:e.target.value})}})):null),null===(r=this.props.boundaryLayers)||void 0===r?void 0:r.map((function(e){return m().createElement(T.j,{layer:e})})),0===(null===(o=this.props.boundaryLayers)||void 0===o?void 0:o.length)?m().createElement("div",{className:"row menu-row menu-row",style:{width:"480px",textAlign:"left",border:"none"}},"None"):null),m().createElement("div",{className:"menu-rows-container",style:{border:"1px solid rgba(255, 255, 255)",borderRadius:"3px",margin:"3px 0"}},m().createElement("div",{className:"row menu-row menu-row-header",style:{width:"480px",textAlign:"left",border:"none"}},m().createElement("span",{className:"pull-left menu-row-text"},"Inflows"),this.props.canEditAnugaMap?m().createElement(m().Fragment,null,m().createElement("span",{className:"btn glyphicon menu-row-glyph glyphicon-plus".concat(this.state.inflowTitle?"":" disabled"),style:{color:"limegreen",fontSize:"smaller",textAlign:"right",marginRight:"8px",float:"right"},onClick:function(){_.props.setCreatingAnugaLayer(!0),_.props.createAnugaInflow(_.state.inflowTitle),_.setState({inflowTitle:""})}}),this.props.isCreatingAnugaLayer?m().createElement("span",null,m().createElement(te,{color:"white",style:{display:"inline-block",position:"absolute",right:"45px"},spinnerName:"circle",noFadeIn:!0})):m().createElement("input",{id:"inflow-input",key:"inflow-input",className:"data-title-input",style:{marginTop:"3px",marginRight:"5px"},type:"text",value:this.state.inflowTitle,onChange:function(e){return _.setState({inflowTitle:e.target.value})}})):null),null===(l=this.props.inflowLayers)||void 0===l?void 0:l.map((function(e){return m().createElement(T.j,{layer:e})})),0===(null===(a=this.props.inflowLayers)||void 0===a?void 0:a.length)?m().createElement("div",{className:"row menu-row menu-row",style:{width:"480px",textAlign:"left",border:"none"}},"None"):null),m().createElement("div",{className:"menu-rows-container",style:{border:"1px solid rgba(255, 255, 255)",borderRadius:"3px",margin:"3px 0"}},m().createElement("div",{className:"row menu-row menu-row-header",style:{width:"480px",textAlign:"left",border:"none"}},m().createElement("span",{className:"pull-left menu-row-text"},"Advanced"),m().createElement("span",{className:"btn glyphicon menu-row-glyph ".concat(this.state.showAdvanced?"glyphicon-chevron-down":"glyphicon-chevron-right"),style:{color:"#325f93",fontSize:"smaller",textAlign:"right",marginRight:"8px",float:"right"},onClick:function(){_.setState((function(e){return{showAdvanced:!e.showAdvanced}}))}}))),this.state.showAdvanced?m().createElement("div",{id:"advancedInputs"},m().createElement("div",{className:"menu-rows-container",style:{border:"1px solid rgba(255, 255, 255)",borderRadius:"3px",margin:"3px 0"}},m().createElement("div",{className:"row menu-row menu-row-header",style:{width:"480px",textAlign:"left",border:"none"}},m().createElement("span",{className:"pull-left menu-row-text"},"Full Mesh")),null===(i=this.props.fullMeshLayers)||void 0===i?void 0:i.map((function(e){return m().createElement(T.j,{layer:e})})),0===(null===(u=this.props.fullMeshLayers)||void 0===u?void 0:u.length)?m().createElement("div",{className:"row menu-row menu-row",style:{width:"480px",textAlign:"left",border:"none"}},"Mesh will appear here when a Scenario is built."):null),m().createElement("div",{className:"menu-rows-container",style:{border:"1px solid rgba(255, 255, 255)",borderRadius:"3px",margin:"3px 0"}},m().createElement("div",{className:"row menu-row menu-row-header",style:{width:"480px",textAlign:"left",border:"none"}},m().createElement("span",{className:"pull-left menu-row-text"},"Mesh Regions"),this.props.canEditAnugaMap?m().createElement(m().Fragment,null,m().createElement("span",{className:"btn glyphicon menu-row-glyph glyphicon-plus".concat(this.state.meshRegionTitle?"":" disabled"),style:{color:"limegreen",fontSize:"smaller",textAlign:"right",marginRight:"8px",float:"right"},onClick:function(){_.props.setCreatingAnugaLayer(!0),_.props.createAnugaMeshRegion(_.state.meshRegionTitle),_.setState({meshRegionTitle:""})}}),this.props.isCreatingAnugaLayer?m().createElement("span",null,m().createElement(te,{color:"white",style:{display:"inline-block",position:"absolute",right:"45px"},spinnerName:"circle",noFadeIn:!0})):m().createElement("input",{id:"mesh-region-input",key:"mesh-region-input",className:"data-title-input",style:{marginTop:"3px",marginRight:"5px"},type:"text",value:this.state.meshRegionTitle,onChange:function(e){return _.setState({meshRegionTitle:e.target.value})}})):null),null===(s=this.props.meshRegionLayers)||void 0===s?void 0:s.map((function(e){return m().createElement(T.j,{layer:e})})),0===(null===(c=this.props.meshRegionLayers)||void 0===c?void 0:c.length)?m().createElement("div",{className:"row menu-row menu-row",style:{width:"480px",textAlign:"left",border:"none"}},"None"):null),m().createElement("div",{className:"menu-rows-container",style:{border:"1px solid rgba(255, 255, 255)",borderRadius:"3px",margin:"3px 0"}},m().createElement("div",{className:"row menu-row menu-row-header",style:{width:"480px",textAlign:"left",border:"none"}},m().createElement("span",{className:"pull-left menu-row-text"},"Friction Maps"),this.props.canEditAnugaMap?m().createElement(m().Fragment,null,m().createElement("span",{className:"btn glyphicon menu-row-glyph glyphicon-plus".concat(this.state.frictionTitle?"":" disabled"),style:{color:"limegreen",fontSize:"smaller",textAlign:"right",marginRight:"8px",float:"right"},onClick:function(){_.props.setCreatingAnugaLayer(!0),_.props.createAnugaFriction(_.state.frictionTitle),_.setState({frictionTitle:""})}}),this.props.isCreatingAnugaLayer?m().createElement("span",null,m().createElement(te,{color:"white",style:{display:"inline-block",position:"absolute",right:"45px"},spinnerName:"circle",noFadeIn:!0})):m().createElement("input",{id:"friction-input",key:"friction-input",className:"data-title-input",style:{marginTop:"3px",marginRight:"5px"},type:"text",value:this.state.frictionTitle,onChange:function(e){return _.setState({frictionTitle:e.target.value})}})):null),null===(p=this.props.frictionLayers)||void 0===p?void 0:p.map((function(e){return m().createElement(T.j,{layer:e})})),0===(null===(d=this.props.frictionLayers)||void 0===d?void 0:d.length)?m().createElement("div",{className:"row menu-row menu-row",style:{width:"480px",textAlign:"left",border:"none"}},"None"):null),m().createElement("div",{className:"menu-rows-container",style:{border:"1px solid rgba(255, 255, 255)",borderRadius:"3px",margin:"3px 0"}},m().createElement("div",{className:"row menu-row menu-row-header",style:{width:"480px",textAlign:"left",border:"none"}},m().createElement("span",{className:"pull-left menu-row-text"},"Structures"),this.props.canEditAnugaMap?m().createElement(m().Fragment,null,m().createElement("span",{className:"btn glyphicon menu-row-glyph glyphicon-plus".concat(this.state.structureTitle?"":" disabled"),style:{color:"limegreen",fontSize:"smaller",textAlign:"right",marginRight:"8px",float:"right"},onClick:function(){_.props.setCreatingAnugaLayer(!0),_.props.createAnugaStructure(_.state.structureTitle),_.setState({structureTitle:""})}}),this.props.isCreatingAnugaLayer?m().createElement("span",null,m().createElement(te,{color:"white",style:{display:"inline-block",position:"absolute",right:"45px"},spinnerName:"circle",noFadeIn:!0})):m().createElement("input",{id:"structure-input",key:"structure-input",className:"data-title-input",style:{marginTop:"3px",marginRight:"5px"},type:"text",value:this.state.structureTitle,onChange:function(e){return _.setState({structureTitle:e.target.value})}})):null),null===(f=this.props.structureLayers)||void 0===f?void 0:f.map((function(e){return m().createElement(T.j,{layer:e})})),0===(null===(v=this.props.structureLayers)||void 0===v?void 0:v.length)?m().createElement("div",{className:"row menu-row menu-row",style:{width:"480px",textAlign:"left",border:"none"}},"None"):null),m().createElement("div",{className:"menu-rows-container",style:{border:"1px solid rgba(255, 255, 255)",borderRadius:"3px",margin:"3px 0"}},m().createElement("div",{className:"row menu-row menu-row-header",style:{width:"480px",textAlign:"left",border:"none"}},m().createElement("span",{className:"pull-left menu-row-text",style:{marginTop:"4px"}},"Networks"),m().createElement("span",{className:"btn glyphicon menu-row-glyph glyphicon-cog",style:{color:"#325f93",fontSize:"smaller",textAlign:"right",marginLeft:"8px",float:"left"},onClick:function(){_.props.setNetworkMenu(!0),_.props.setAnugaInputMenu(!1)}}),this.props.canEditAnugaMap?m().createElement(m().Fragment,null,m().createElement("span",{className:"btn glyphicon menu-row-glyph glyphicon-plus".concat(this.state.networkTitle?"":" disabled"),style:{color:"limegreen",fontSize:"smaller",textAlign:"right",marginRight:"8px",float:"right"},onClick:function(){_.props.setCreatingAnugaLayer(!0),_.props.createNetwork(_.state.networkTitle),_.setState({networkTitle:""})}}),this.props.isCreatingAnugaLayer?m().createElement("span",null,m().createElement(te,{color:"white",style:{display:"inline-block",position:"absolute",right:"45px"},spinnerName:"circle",noFadeIn:!0})):m().createElement("input",{id:"network-input",key:"network-input",className:"data-title-input",style:{marginTop:"3px",marginRight:"5px"},type:"text",value:this.state.networkTitle,onChange:function(e){return _.setState({networkTitle:e.target.value})}})):null),m().createElement("div",null,m().createElement("div",{className:"menu-row-mini-container"},m().createElement("p",{className:"menu-row-mini-heading"},"Catchments"),null===(g=this.props.catchmentLayers)||void 0===g?void 0:g.map((function(e){return m().createElement(T.j,{layer:e})}))),m().createElement("div",{className:"menu-row-mini-container"},m().createElement("p",{className:"menu-row-mini-heading"},"Nodes"),null===(y=this.props.nodesLayers)||void 0===y?void 0:y.map((function(e){return m().createElement(T.j,{layer:e})}))),m().createElement("div",{className:"menu-row-mini-container"},m().createElement("p",{className:"menu-row-mini-heading"},"Links"),null===(b=this.props.linksLayers)||void 0===b?void 0:b.map((function(e){return m().createElement(T.j,{layer:e})})))))):null):null,m().createElement(K,{fileType:"elevation"}))}}])&&Z(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(m().Component);Q(ne,"propTypes",{projectData:ee.object,setVisibleUploaderPanel:ee.func,anugaGroupLength:ee.number,elevationLayers:ee.array,boundaryLayers:ee.array,createAnugaBoundary:ee.func,createAnugaFriction:ee.func,createAnugaInflow:ee.func,createAnugaStructure:ee.func,createAnugaMeshRegion:ee.func,createNetwork:ee.func,createCatchment:ee.func,createNodes:ee.func,createLinks:ee.func,frictionLayers:ee.array,inflowLayers:ee.array,structureLayers:ee.array,fullMeshLayers:ee.array,meshRegionLayers:ee.array,catchmentLayers:ee.array,nodesLayers:ee.array,linksLayers:ee.array,startAnugaElevationPolling:ee.func,stopAnugaElevationPolling:ee.func,startAnugaModelCreationPolling:ee.func,stopAnugaModelCreationPolling:ee.func,isCreatingAnugaLayer:ee.bool,setCreatingAnugaLayer:ee.func,canEditAnugaMap:ee.func,addAnugaBoundary:ee.func,addAnugaFriction:ee.func,addAnugaInflow:ee.func,addAnugaStructure:ee.func,addAnugaFullMesh:ee.func,addAnugaMeshRegion:ee.func,addCatchment:ee.func,addNodes:ee.func,addLinks:ee.func,networks:ee.array,setNetworkMenu:ee.func,boundaryModels:ee.array,frictionModels:ee.array,inflowModels:ee.array,structureModels:ee.array,fullMeshModels:ee.array,meshRegionModels:ee.array,catchmentModels:ee.array,nodesModels:ee.array,linksModels:ee.array,setAnugaInputMenu:ee.func}),Q(ne,"defaultProps",{});var re=(0,f.connect)((function(e){var t,n,r,o,l,a,i,u,s,c,p,d,m,f,v,g,y,b,h,E,S,w,A,T,O,N,F,M,C,B,P,R,I,x;return{projectData:null==e||null===(t=e.anuga)||void 0===t?void 0:t.projectData,elevationLayers:null==e||null===(n=e.layers)||void 0===n||null===(r=n.flat)||void 0===r?void 0:r.filter((function(e){return"Input Data.Elevations"===(null==e?void 0:e.group)})),boundaryLayers:null==e||null===(o=e.layers)||void 0===o||null===(l=o.flat)||void 0===l?void 0:l.filter((function(e){return"Input Data.Boundaries"===(null==e?void 0:e.group)})),inflowLayers:null==e||null===(a=e.layers)||void 0===a||null===(i=a.flat)||void 0===i?void 0:i.filter((function(e){return"Input Data.Inflows"===(null==e?void 0:e.group)})),frictionLayers:null==e||null===(u=e.layers)||void 0===u||null===(s=u.flat)||void 0===s?void 0:s.filter((function(e){return"Input Data.Friction Maps"===(null==e?void 0:e.group)})),structureLayers:null==e||null===(c=e.layers)||void 0===c||null===(p=c.flat)||void 0===p?void 0:p.filter((function(e){return"Input Data.Structures"===(null==e?void 0:e.group)})),fullMeshLayers:null==e||null===(d=e.layers)||void 0===d||null===(m=d.flat)||void 0===m?void 0:m.filter((function(e){return"Input Data.Full Mesh"===(null==e?void 0:e.group)})),meshRegionLayers:null==e||null===(f=e.layers)||void 0===f||null===(v=f.flat)||void 0===v?void 0:v.filter((function(e){return"Input Data.Mesh Regions"===(null==e?void 0:e.group)})),networkLayers:null==e||null===(g=e.layers)||void 0===g||null===(y=g.flat)||void 0===y?void 0:y.filter((function(e){return"Input Data.Networks"===(null==e?void 0:e.group)})),catchmentLayers:null==e||null===(b=e.layers)||void 0===b||null===(h=b.flat)||void 0===h?void 0:h.filter((function(e){return"Input Data.Catchments"===(null==e?void 0:e.group)})),nodesLayers:null==e||null===(E=e.layers)||void 0===E||null===(S=E.flat)||void 0===S?void 0:S.filter((function(e){return"Input Data.Nodes"===(null==e?void 0:e.group)})),linksLayers:null==e||null===(w=e.layers)||void 0===w||null===(A=w.flat)||void 0===A?void 0:A.filter((function(e){return"Input Data.Links"===(null==e?void 0:e.group)})),elevationModels:null==e||null===(T=e.anuga)||void 0===T?void 0:T.elevations,boundaryModels:null==e||null===(O=e.anuga)||void 0===O?void 0:O.boundaries,inflowModels:null==e||null===(N=e.anuga)||void 0===N?void 0:N.inflows,frictionModels:null==e||null===(F=e.anuga)||void 0===F?void 0:F.frictions,structureModels:null==e||null===(M=e.anuga)||void 0===M?void 0:M.structures,fullMeshModels:null==e||null===(C=e.anuga)||void 0===C?void 0:C.fullMeshes,meshRegionModels:null==e||null===(B=e.anuga)||void 0===B?void 0:B.meshRegions,catchmentModels:null==e||null===(P=e.anuga)||void 0===P?void 0:P.catchments,nodesModels:null==e||null===(R=e.anuga)||void 0===R?void 0:R.nodes,linksModels:null==e||null===(I=e.anuga)||void 0===I?void 0:I.links,isCreatingAnugaLayer:null==e||null===(x=e.anuga)||void 0===x?void 0:x.isCreatingAnugaLayer,canEditAnugaMap:_(e)}}),(function(e){return{addAnugaBoundary:function(){return e((0,o.addAnugaBoundary)())},addAnugaFriction:function(){return e((0,o.addAnugaFriction)())},addAnugaInflow:function(){return e((0,o.addAnugaInflow)())},addAnugaStructure:function(){return e((0,o.addAnugaStructure)())},addAnugaFullMesh:function(){return e((0,o.addAnugaFullMesh)())},addAnugaMeshRegion:function(){return e((0,o.addAnugaMeshRegion)())},addCatchment:function(){return e((0,o.addCatchment)())},setNetworkMenu:function(t){return e((0,o.setNetworkMenu)(t))},setAnugaInputMenu:function(t){return e((0,o.setAnugaInputMenu)(t))},addNetwork:function(){return e((0,o.addNetwork)())},addNodes:function(){return e((0,o.addNodes)())},addLinks:function(){return e((0,o.addLinks)())},startAnugaElevationPolling:function(){return e((0,o.startAnugaElevationPolling)())},stopAnugaElevationPolling:function(){return e((0,o.stopAnugaElevationPolling)())},startAnugaModelCreationPolling:function(){return e((0,o.startAnugaModelCreationPolling)())},stopAnugaModelCreationPolling:function(){return e((0,o.stopAnugaModelCreationPolling)())},setVisibleUploaderPanel:function(t){return e((0,l.setVisibleUploaderPanel)(t))},setCreatingAnugaLayer:function(t){return e((0,o.setCreatingAnugaLayer)(t))},createAnugaBoundary:function(t){return e((0,o.createAnugaBoundary)(t))},createAnugaInflow:function(t){return e((0,o.createAnugaInflow)(t))},createAnugaStructure:function(t){return e((0,o.createAnugaStructure)(t))},createAnugaFriction:function(t){return e((0,o.createAnugaFriction)(t))},createAnugaMeshRegion:function(t){return e((0,o.createAnugaMeshRegion)(t))},createNetwork:function(t){return e((0,o.createNetwork)(t))}}}))(ne);function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e){return function(e){if(Array.isArray(e))return ie(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ae(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){if(e){if("string"==typeof e)return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ie(e,t):void 0}}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e,t){return(se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ce(e,t){if(t&&("object"===oe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return pe(e)}function pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fe=n(45697),ve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&se(e,t)}(a,e);var t,n,r,o,l=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=de(r);if(o){var n=de(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ce(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),me(pe(t=l.call(this,e)),"getSecondsFromHHMM",(function(e){console.log("userInputValue",e);var t,n,r=(t=e.split(":"),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,l=[],a=!0,i=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(i)throw o}}return l}}(t,n)||ae(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],l=r[1],a=Number(o),i=Number(l);return console.log("hoursNumber",a),console.log("minutesNumber",i),!isNaN(a)&&isNaN(i)?(console.log("returning:",60*a),60*a):isNaN(a)||isNaN(i)?0:(console.log("returning:",60*(60*a+i)),60*(60*a+i))})),me(pe(t),"findScenarioStatus",(function(e){var t;return"building server"===e.status?e.status:null!=e&&e.latest_run_is_valid||"error"===(null==e||null===(t=e.latest_run)||void 0===t?void 0:t.status)?e.latest_run.status:e.status})),me(pe(t),"handleTextChange",(function(e,n){var r={};r[e.target.id]=e.target.value,t.props.updateAnugaScenario(n,r)})),me(pe(t),"handleBoolChange",(function(e,n){var r={};r[e.target.id]=!n[e.target.id],t.props.updateAnugaScenario(n,r)})),me(pe(t),"handleIntChange",(function(e,n){var r={};r[e.target.id]=parseInt(e.target.value,10),t.props.updateAnugaScenario(n,r)})),me(pe(t),"handleNumberChange",(function(e,n){var r={};r[e.target.id]=parseFloat(e.target.value),t.props.updateAnugaScenario(n,r)})),me(pe(t),"toHHMM",(function(e){if(!e)return"hh:mm";var t=parseInt(e.toString(),10);return[Math.floor(t/3600),Math.floor(t/60)%60,t%60].map((function(e){return e<10?"0".concat(e):e})).filter((function(e,t){return"00"!==e||t>0})).join(":").replace(/^0/,"").slice(0,-3)})),me(pe(t),"handleTimeChange",(function(e,n){var r={tempTimeString:e.target.value};t.props.updateAnugaScenario(n,r)})),me(pe(t),"handleTimeBlur",(function(e,n){var r=e.target.value;console.log("targetValue",r);var o=Math.max(0,t.getSecondsFromHHMM(r));console.log("seconds",o);var l={};l[e.target.id]=o,delete l.tempTimeString,t.props.updateAnugaScenario(n,l)})),t.state={scenarioTableTabs:["manage","compare"]},t.handleTextChange=t.handleTextChange.bind(pe(t)),t.handleBoolChange=t.handleBoolChange.bind(pe(t)),t.handleIntChange=t.handleIntChange.bind(pe(t)),t.handleTimeChange=t.handleTimeChange.bind(pe(t)),t.handleTimeBlur=t.handleTimeBlur.bind(pe(t)),t}return t=a,(n=[{key:"render",value:function(){var e,t,n,r,o,l,a=this;return m().createElement("div",{id:"anuga-scenario-menu",className:"simple-view-panel",style:{top:"70px"}},m().createElement("div",{className:"menu-rows-container"},m().createElement("div",{className:"row menu-row-header",style:{height:"40px",textAlign:"left",fontSize:"large"}},"Scenarios",m().createElement("span",{id:"scenario-tab-button-group"},m().createElement(E.Button,{bsSize:"medium",style:{margin:"2px 0 -17px 20px",borderRadius:"6px 6px 0 0",color:this.state.scenarioTableTabs.includes("manage")?"#3363a0":"white",backgroundColor:this.state.scenarioTableTabs.includes("manage")?"white":"#6085b5"},onClick:function(){return a.state.scenarioTableTabs.includes("manage")?a.setState((function(e){return{scenarioTableTabs:le(e.scenarioTableTabs.filter((function(e,t){return"manage"!==e})))}})):a.setState((function(e){return{scenarioTableTabs:[].concat(le(e.scenarioTableTabs),["manage"])}}))}},"Manage"),m().createElement(E.Button,{bsSize:"medium",style:{margin:"2px 0 -17px 8px",borderRadius:"6px 6px 0 0",color:this.state.scenarioTableTabs.includes("advanced")?"#3363a0":"white",backgroundColor:this.state.scenarioTableTabs.includes("advanced")?"white":"#6085b5"},onClick:function(){return a.state.scenarioTableTabs.includes("advanced")?a.setState((function(e){return{scenarioTableTabs:le(e.scenarioTableTabs.filter((function(e,t){return"advanced"!==e})))}})):a.setState((function(e){return{scenarioTableTabs:[].concat(le(e.scenarioTableTabs),["advanced"])}}))}},"Advanced"),m().createElement(E.Button,{bsSize:"medium",style:{margin:"2px 0 -17px 8px",borderRadius:"6px 6px 0 0",color:this.state.scenarioTableTabs.includes("compare")?"#3363a0":"white",backgroundColor:this.state.scenarioTableTabs.includes("compare")?"white":"#6085b5"},onClick:function(){return a.state.scenarioTableTabs.includes("compare")?a.setState((function(e){return{scenarioTableTabs:le(e.scenarioTableTabs.filter((function(e,t){return"compare"!==e})))}})):a.setState((function(e){return{scenarioTableTabs:[].concat(le(e.scenarioTableTabs),["compare"])}}))}},"Compare")),m().createElement("span",{id:"new-scenario-button"},m().createElement(E.Button,{bsStyle:"success",bsSize:"xsmall",style:{margin:"2px",borderRadius:"2px"},onClick:function(){a.props.addAnugaScenario()}},"New Scenario")),m().createElement("span",{className:"btn glyphicon glyphicon-remove legend-close",onClick:function(){a.props.setAnugaScenarioMenu(!1),a.props.stopAnugaScenarioPolling()}})),m().createElement(E.Table,{className:"scenario-table"},m().createElement("thead",null,m().createElement("tr",{className:"scenario-table-header"},m().createElement("th",null,"Id"),m().createElement("th",null,"Name"),null!==(e=this.state.scenarioTableTabs)&&void 0!==e&&e.includes("manage")?m().createElement(m().Fragment,null,m().createElement("th",null,"Elevation"),m().createElement("th",null,"Boundary"),m().createElement("th",null,"Inflow")):null,null!==(t=this.state.scenarioTableTabs)&&void 0!==t&&t.includes("advanced")?m().createElement(m().Fragment,null,m().createElement("th",null,"Friction Map"),m().createElement("th",null,"Structures"),m().createElement("th",null,"Mesh Regions"),m().createElement("th",null,"Network"),null!==(n=this.state.scenarioTableTabs)&&void 0!==n&&n.includes("manage")?null:m().createElement("th",null)):null,null!==(r=this.state.scenarioTableTabs)&&void 0!==r&&r.includes("manage")?m().createElement(m().Fragment,null,m().createElement("th",null,"Resolution(m2)"),m().createElement("th",null,"Duration"),m().createElement("th",null,"Status"),m().createElement("th",null),m().createElement("th",null),m().createElement("th",null),m().createElement("th",null)):null,null!==(o=this.state.scenarioTableTabs)&&void 0!==o&&o.includes("compare")?m().createElement(m().Fragment,null,m().createElement("th",null,m().createElement("span",{id:"depth-difference-button"},m().createElement(E.Button,{bsStyle:"success",bsSize:"xsmall",className:this.props.readyToCompare?"":"disabled",style:{margin:"2px",borderRadius:"2px"},onClick:function(){a.props.compareScenarios(a.props.selectedScenarios)}},"Compare")))):null)),m().createElement("tbody",null,null===(l=this.props.scenarios)||void 0===l?void 0:l.map((function(e){var t,n,r,o,l,i,u,s,c,p,d,f;return m().createElement("tr",{className:"scenario-table-row"},m().createElement("td",null,e.id),m().createElement("td",null,m().createElement("input",{id:"name",key:"name-".concat(e.id),type:"text",className:"scenario-input",value:e.name,onChange:function(t){return a.handleTextChange(t,e)}})),null!==(t=a.state.scenarioTableTabs)&&void 0!==t&&t.includes("manage")?m().createElement(m().Fragment,null,m().createElement("td",null,m().createElement("select",{id:"elevation",key:"elevation-".concat(e.id),value:null==e?void 0:e.elevation,className:"scenario-select",onChange:function(t){return a.handleIntChange(t,e)}},m().createElement("option",{value:""},"-"),null===(n=a.props.elevations)||void 0===n?void 0:n.map((function(e){return m().createElement("option",{value:null==e?void 0:e.id},null==e?void 0:e.title)})))),m().createElement("td",null,m().createElement("select",{id:"boundary",key:"boundary-".concat(e.id),value:null==e?void 0:e.boundary,className:"scenario-select",onChange:function(t){return a.handleIntChange(t,e)}},m().createElement("option",{value:""},"-"),null===(r=a.props.boundaries)||void 0===r?void 0:r.map((function(e){return m().createElement("option",{value:null==e?void 0:e.id},null==e?void 0:e.title)})))),m().createElement("td",null,m().createElement("select",{id:"inflow",key:"inflow-".concat(e.id),value:null==e?void 0:e.inflow,className:"scenario-select",onChange:function(t){return a.handleIntChange(t,e)}},m().createElement("option",{value:""},"-"),null===(o=a.props.inflows)||void 0===o?void 0:o.map((function(e){return m().createElement("option",{value:null==e?void 0:e.id},null==e?void 0:e.title)}))))):null,null!==(l=a.state.scenarioTableTabs)&&void 0!==l&&l.includes("advanced")?m().createElement(m().Fragment,null,m().createElement("td",null,m().createElement("select",{id:"friction",key:"friction-".concat(e.id),value:null==e?void 0:e.friction,className:"scenario-select",onChange:function(t){return a.handleIntChange(t,e)}},m().createElement("option",{value:""},"-"),null===(i=a.props.frictions)||void 0===i?void 0:i.map((function(e){return m().createElement("option",{value:null==e?void 0:e.id},null==e?void 0:e.title)})))),m().createElement("td",null,m().createElement("select",{id:"structure",key:"structure-".concat(e.id),value:null==e?void 0:e.structure,className:"scenario-select",onChange:function(t){return a.handleIntChange(t,e)}},m().createElement("option",{value:""},"-"),null===(u=a.props.structures)||void 0===u?void 0:u.map((function(e){return m().createElement("option",{value:null==e?void 0:e.id},null==e?void 0:e.title)})))),m().createElement("td",null,m().createElement("select",{id:"mesh_region",key:"meshRegion-".concat(e.id),value:null==e?void 0:e.mesh_region,className:"scenario-select",onChange:function(t){return a.handleIntChange(t,e)}},m().createElement("option",{value:""},"-"),null===(s=a.props.meshRegions)||void 0===s?void 0:s.map((function(e){return m().createElement("option",{value:null==e?void 0:e.id},null==e?void 0:e.title)})))),m().createElement("td",null,m().createElement("select",{id:"network",key:"network-".concat(e.id),value:null==e?void 0:e.network,className:"scenario-select",onChange:function(t){return a.handleIntChange(t,e)}},m().createElement("option",{value:""},"-"),null===(c=a.props.networks)||void 0===c?void 0:c.map((function(e){return m().createElement("option",{value:null==e?void 0:e.id},null==e?void 0:e.title)})))),null!==(p=a.state.scenarioTableTabs)&&void 0!==p&&p.includes("manage")?null:m().createElement("td",null,m().createElement(E.Button,{bsStyle:"success",bsSize:"xsmall",style:{margin:"2px",borderRadius:"2px"},className:e.unsaved?null:"disabled",onClick:function(){a.props.saveAnugaScenario(e),a.props.setOpenMenuGroupId(null)}},"Build"))):null,null!==(d=a.state.scenarioTableTabs)&&void 0!==d&&d.includes("manage")?m().createElement(m().Fragment,null,m().createElement("td",null,m().createElement("input",{id:"resolution",key:"resolution-".concat(e.id),type:"number",className:"scenario-input",style:{width:"80px"},value:null==e?void 0:e.resolution,onChange:function(t){return a.handleNumberChange(t,e)}})),m().createElement("td",null,m().createElement("input",{id:"duration",key:"duration-".concat(e.id),type:"text",className:"scenario-input",style:{width:"80px"},value:e.tempTimeString||a.toHHMM(e.duration),onChange:function(t){return a.handleTimeChange(t,e)},onBlur:function(t){return a.handleTimeBlur(t,e)}})),m().createElement("td",null,a.findScenarioStatus(e)),m().createElement("td",null,m().createElement(E.Button,{bsStyle:"success",bsSize:"xsmall",style:{margin:"2px",borderRadius:"2px"},className:e.unsaved?null:"disabled",onClick:function(){a.props.saveAnugaScenario(e),a.props.setOpenMenuGroupId(null)}},"Build")),m().createElement("td",null,function(){var t;switch(a.findScenarioStatus(e)){case"built":return m().createElement(E.Button,{bsStyle:"success",bsSize:"xsmall",style:{margin:"2px",borderRadius:"2px"},onClick:function(){a.props.setAnugaScenarioMenu(!1),a.props.selectAnugaScenario(e),a.props.showAnugaRunMenu(!0)}},"Run");case"complete":return m().createElement(E.Button,{download:!0,href:null==e||null===(t=e.latest_run)||void 0===t?void 0:t.s3_package_url,bsStyle:"success",bsSize:"xsmall",style:{margin:"2px",borderRadius:"2px"}},m().createElement("span",{className:"glyphicon glyphicon-download","aria-hidden":"true"}));default:return m().createElement(E.Button,{bsStyle:"success",bsSize:"xsmall",className:"disabled",style:{margin:"2px",borderRadius:"2px"}},"Run")}}()),m().createElement("td",null,m().createElement(E.Button,{bsStyle:"info",bsSize:"xsmall",style:{margin:"2px",borderRadius:"2px"},onClick:function(){a.props.selectAnugaScenario(e),a.props.showAnugaScenarioLog(e.id)}},"Log")),m().createElement("td",null,m().createElement(E.Button,{bsStyle:"danger",bsSize:"xsmall",style:{margin:"2px",borderRadius:"2px",backgroundColor:"#622b2b"},onClick:a.findScenarioStatus(e).includes("%")?function(){confirm("Cancel Run?")&&a.props.cancelAnugaRun(e)}:function(){confirm("Delete Scenario?")&&a.props.deleteAnugaScenario(e)}},m().createElement("span",{className:"glyphicon glyphicon-trash","aria-hidden":"true"})))):null,null!==(f=a.state.scenarioTableTabs)&&void 0!==f&&f.includes("compare")?m().createElement(m().Fragment,null,m().createElement("td",null,m().createElement("span",{className:"btn glyphicon menu-row-glyph "+(null!=e&&e.selected?"glyphicon-ok":"glyphicon-remove"),style:{color:null!=e&&e.selected?"limegreen":"red",fontSize:"10px"},onClick:function(){a.props.toggleScenarioSelected(e)}}))):null)}))))))}}])&&ue(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(m().Component);me(ve,"propTypes",{anugaGroupLength:fe.number,scenarios:fe.array,boundaries:fe.array,elevations:fe.array,frictions:fe.array,inflows:fe.array,structures:fe.array,meshRegions:fe.array,networks:fe.array,setOpenMenuGroupId:fe.func,saveAnugaScenario:fe.func,runAnugaScenario:fe.func,updateAnugaScenario:fe.func,selectAnugaScenario:fe.func,showAnugaScenarioLog:fe.func,setAnugaScenarioMenu:fe.func,stopAnugaScenarioPolling:fe.func,addAnugaScenario:fe.func,deleteAnugaScenario:fe.func,cancelAnugaRun:fe.func,showAnugaRunMenu:fe.func,toggleScenarioSelected:fe.func,selectedScenarios:fe.array,compareScenarios:fe.func,readyToCompare:fe.number}),me(ve,"defaultProps",{});var ge=(0,f.connect)((function(e){var t,n,r,o,l,a,i,u,s;return{scenarios:null==e||null===(t=e.anuga)||void 0===t||null===(n=t.scenarios)||void 0===n?void 0:n.sort((function(e,t){return e.id-t.id})),selectedScenarios:h(e),readyToCompare:2===h(e).length,boundaries:null==e||null===(r=e.anuga)||void 0===r?void 0:r.boundaries,elevations:null==e||null===(o=e.anuga)||void 0===o?void 0:o.elevations,frictions:null==e||null===(l=e.anuga)||void 0===l?void 0:l.frictions,inflows:null==e||null===(a=e.anuga)||void 0===a?void 0:a.inflows,structures:null==e||null===(i=e.anuga)||void 0===i?void 0:i.structures,meshRegions:null==e||null===(u=e.anuga)||void 0===u?void 0:u.meshRegions,networks:null==e||null===(s=e.anuga)||void 0===s?void 0:s.networks}}),(function(e){return{setOpenMenuGroupId:function(t){return e((0,l.setOpenMenuGroupId)(t))},setAnugaScenarioMenu:function(t){return e((0,o.setAnugaScenarioMenu)(t))},runAnugaScenario:function(t){return e((0,o.runAnugaScenario)(t))},saveAnugaScenario:function(t){return e((0,o.saveAnugaScenario)(t))},updateAnugaScenario:function(t,n){return e((0,o.updateAnugaScenario)(t,n))},selectAnugaScenario:function(t){return e((0,o.selectAnugaScenario)(t))},showAnugaScenarioLog:function(t){return e((0,o.showAnugaScenarioLog)(t))},stopAnugaScenarioPolling:function(){return e((0,o.stopAnugaScenarioPolling)())},addAnugaScenario:function(){return e((0,o.addAnugaScenario)())},deleteAnugaScenario:function(t){return e((0,o.deleteAnugaScenario)(t))},cancelAnugaRun:function(t){return e((0,o.cancelAnugaRun)(t))},showAnugaRunMenu:function(t){return e((0,o.showAnugaRunMenu)(t))},toggleScenarioSelected:function(t){return e((0,o.toggleScenarioSelected)(t))},compareScenarios:function(t){return e((0,o.compareScenarios)(t))}}}))(ve);function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t){return(he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ee(e,t){if(t&&("object"===ye(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Se(e){return(Se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function we(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ae=n(45697),Te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&he(e,t)}(a,e);var t,n,r,o,l=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Se(r);if(o){var n=Se(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ee(this,e)});function a(){return be(this,a),l.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=this;return m().createElement("div",{id:"publication-panel",className:"simple-view-panel",style:{top:"70px"}},m().createElement("div",{className:"menu-rows-container"},m().createElement("div",{className:"row menu-row-header",style:{height:"40px",textAlign:"left",fontSize:"large"}},"-- Under development -- Model review process.",m().createElement("span",{className:"btn glyphicon glyphicon-remove legend-close",onClick:function(){e.props.setReviewPanel(!1)}})),m().createElement("div",null,"Content")))}}])&&_e(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(m().Component);function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e,t){return(Fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Me(e,t){if(t&&("object"===Oe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}we(Te,"propTypes",{setReviewPanel:Ae.func}),we(Te,"defaultProps",{}),(0,f.connect)((function(e){var t,n;return{review:null==e||null===(t=e.anuga)||void 0===t||null===(n=t.projectData)||void 0===n?void 0:n.review}}),(function(e){return{setOpenMenuGroupId:function(t){return e((0,l.setOpenMenuGroupId)(t))},setReviewPanel:function(t){return e((0,o.setReviewPanel)(t))}}}))(Te);var Pe=n(45697),Re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fe(e,t)}(a,e);var t,n,r,o,l=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ce(r);if(o){var n=Ce(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Me(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=l.call(this,e)).state={figureTitle:""},t}return t=a,(n=[{key:"render",value:function(){var e,t=this;return m().createElement("div",{id:"publication-panel",className:"simple-view-panel",style:{top:"70px"}},m().createElement("div",{className:"menu-rows-container"},m().createElement("div",{className:"row",style:{height:"20px",textAlign:"left",fontSize:"large"}},m().createElement("span",{className:"btn glyphicon glyphicon-remove legend-close",onClick:function(){t.props.setPublicationPanel(!1)}})),null===(e=this.props.publications)||void 0===e?void 0:e.map((function(e){var n,r;return m().createElement("div",{className:"row menu-row-header",style:{height:"40px",textAlign:"left",fontSize:"large"}},m().createElement("span",{style:{lineHeight:"40px"}},"Publish: ",null==e||null===(n=e.geostory)||void 0===n?void 0:n.title),m().createElement(E.Button,{bsStyle:"success",bsSize:"xlarge",style:{marginTop:"4px",borderRadius:"2px",float:"right",display:"inlineBlock"},onClick:function(){var t;window.open(null==e||null===(t=e.geostory)||void 0===t?void 0:t.detail_url,"_blank")}},"Edit Publication"),m().createElement("h3",{style:{display:"inlineBlock"}},"Figures"),null==e||null===(r=e.figures)||void 0===r?void 0:r.map((function(e){return m().createElement(E.Button,{bsStyle:"success",bsSize:"xsmall",style:{borderRadius:"2px",marginTop:"5px",display:"block",width:"375px",textAlign:"left"},onClick:function(){window.open(null==e?void 0:e.detail_url,"_blank")}},null==e?void 0:e.title)})),m().createElement("div",{style:{borderTop:"2px solid #ffffffad",paddingTop:"15px",marginTop:"5px",marginBottom:"10px"}},m().createElement("input",{id:"figure-input",key:"figure-input",className:"data-title-input",style:{width:"375px",marginTop:"3px",marginRight:"5px",float:"left"},type:"text",value:t.state.figureTitle,onChange:function(e){return t.setState({figureTitle:e.target.value})}}),m().createElement(E.Button,{bsStyle:"success",bsSize:"xsmall",style:{margin:"2px",borderRadius:"2px",float:"left"},onClick:function(){t.props.createFigure(t.state.figureTitle,e.id),t.setState({networkTitle:""})}},"Create Figure")))}))))}}])&&Ne(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(m().Component);Be(Re,"propTypes",{publications:Pe.array,setPublicationPanel:Pe.func,createFigure:Pe.func,geonodeUrl:Pe.string,figureTitle:Pe.string}),Be(Re,"defaultProps",{});var Ie=(0,f.connect)((function(e){var t,n;return{publications:(null==e||null===(t=e.anuga)||void 0===t?void 0:t.publications)||[],geonodeUrl:null==e||null===(n=e.gnsettings)||void 0===n?void 0:n.geonodeUrl}}),(function(e){return{setOpenMenuGroupId:function(t){return e((0,l.setOpenMenuGroupId)(t))},setPublicationPanel:function(t){return e((0,o.setPublicationPanel)(t))},createFigure:function(t,n){return e((0,o.createFigure)(t,n))}}}))(Re);function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Le(e,t){return(Le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ge(e,t){if(t&&("object"===xe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ue=n(45697),We=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Le(e,t)}(a,e);var t,n,r,o,l=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ke(r);if(o){var n=ke(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ge(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=l.call(this,e)).state={},t}return t=a,(n=[{key:"render",value:function(){var e,t=this;return m().createElement("div",{id:"anuga-scenario-log-viewer-container"},m().createElement("h5",{style:{marginLeft:"9px"}},"Scenario: ",null===(e=this.props.selectedScenario)||void 0===e?void 0:e.name,m().createElement("span",{className:"btn glyphicon glyphicon-remove legend-close",onClick:function(){return t.props.showAnugaScenarioLog(!1)}})),m().createElement("pre",{id:"anuga-scenario-log-viewer",style:{color:"white",background:"black"}},this.props.logText))}}])&&De(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(m().Component);je(We,"propTypes",{selectedScenario:Ue.object,showAnugaScenarioLog:Ue.func,logText:Ue.string}),je(We,"defaultProps",{});var He=(0,f.connect)((function(e){var t;return{selectedScenario:null==e||null===(t=e.anuga)||void 0===t?void 0:t.selectedScenario}}),(function(e){return{showAnugaScenarioLog:function(t){return e((0,o.showAnugaScenarioLog)(t))}}}))(We);function ze(e){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ye(e,t){return(Ye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ke(e,t){if(t&&("object"===ze(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return qe(e)}function qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ze(e){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xe=n(45697),$e=(n(472986),function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ye(e,t)}(a,e);var t,n,r,o,l=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ze(r);if(o){var n=Ze(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ke(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Je(qe(t=l.call(this,e)),"handleTextChange",(function(e,n){var r={};r[e.target.id]=e.target.value,t.props.updateNetwork(n,r)})),Je(qe(t),"handleBoolChange",(function(e,n){var r={};r[e.target.id]=!n[e.target.id],t.props.updateNetwork(n,r)})),Je(qe(t),"handleIntChange",(function(e,n){var r={};r[e.target.id]=parseInt(e.target.value,10),t.props.updateNetwork(n,r)})),Je(qe(t),"handleNumberChange",(function(e,n){var r={};r[e.target.id]=parseFloat(e.target.value),t.props.updateNetwork(n,r)})),t.state={},t}return t=a,(n=[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e,t=this;return m().createElement("div",{id:"anuga-network-container",className:"simple-view-panel",style:{top:"70px",height:"80%",width:"80%"}},m().createElement("div",{className:"menu-rows-container"},m().createElement("div",{className:"row menu-row-header"},m().createElement("h3",null,"Hydrology"),m().createElement("span",{className:"btn glyphicon glyphicon-remove legend-close",onClick:function(){t.props.setNetworkMenu(!1)}}),m().createElement("div",null,m().createElement(E.Table,{className:"network-table"},m().createElement("thead",null,m().createElement("tr",{className:"network-table-header"},m().createElement("th",null,"Id"),m().createElement("th",null,"Name"),m().createElement("th",null,"Elevation"),m().createElement("th",null,"Nodes"),m().createElement("th",null,"Links"),m().createElement("th",null,"Method"),m().createElement("th",null,"Inflow Dataset",m().createElement("br",null),"to Store Results"),m().createElement("th",null))),m().createElement("tbody",null,null===(e=this.props.networks)||void 0===e?void 0:e.map((function(e){var n,r,o,l;return m().createElement("tr",{className:"scenario-table-row"},m().createElement("td",null,e.id),m().createElement("td",null,e.title),m().createElement("td",null,m().createElement("select",{id:"elevation",key:"elevation-".concat(e.id),value:null==e?void 0:e.elevation,className:"scenario-select",onChange:function(n){return t.handleIntChange(n,e)}},m().createElement("option",{value:""},"-"),null===(n=t.props.elevations)||void 0===n?void 0:n.map((function(e){return m().createElement("option",{value:null==e?void 0:e.id},null==e?void 0:e.title)})))),m().createElement("td",null,m().createElement("select",{id:"node",key:"node-".concat(e.id),value:null==e?void 0:e.node,className:"scenario-select",onChange:function(n){return t.handleIntChange(n,e)}},m().createElement("option",{value:""},"-"),null===(r=t.props.nodes)||void 0===r?void 0:r.map((function(e){return m().createElement("option",{value:null==e?void 0:e.id},null==e?void 0:e.title)})))),m().createElement("td",null,m().createElement("select",{id:"links",key:"links-".concat(e.id),value:null==e?void 0:e.links,className:"scenario-select",onChange:function(n){return t.handleIntChange(n,e)}},m().createElement("option",{value:""},"-"),null===(o=t.props.links)||void 0===o?void 0:o.map((function(e){return m().createElement("option",{value:null==e?void 0:e.id},null==e?void 0:e.title)})))),m().createElement("td",null,m().createElement("select",{id:"method",key:"method",value:"rational",className:"scenario-select"},m().createElement("option",{value:"rational"},"rational"))),m().createElement("td",null,m().createElement("select",{id:"inflow",key:"inflow-".concat(e.id),value:null==e?void 0:e.inflow,className:"scenario-select",onChange:function(n){return t.handleIntChange(n,e)}},m().createElement("option",{value:""},"-"),null===(l=t.props.inflows)||void 0===l?void 0:l.map((function(e){return m().createElement("option",{value:null==e?void 0:e.id},null==e?void 0:e.title)})))),m().createElement("td",null,m().createElement(E.Button,{bsStyle:"success",bsSize:"xsmall",style:{margin:"2px",borderRadius:"2px"},onClick:function(){t.props.runNetwork(e)}},"Run")))}))))))))}}])&&Ve(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(m().Component));Je($e,"propTypes",{setNetworkMenu:Xe.func,updateNetwork:Xe.func,runNetwork:Xe.func,nodes:Xe.array,links:Xe.array,inflows:Xe.array,elevations:Xe.array,networks:Xe.array}),Je($e,"defaultProps",{});var Qe=(0,f.connect)((function(e){var t,n,r,o,l,a;return{networks:null==e||null===(t=e.anuga)||void 0===t||null===(n=t.networks)||void 0===n?void 0:n.sort((function(e,t){return e.id-t.id})),elevations:null==e||null===(r=e.anuga)||void 0===r?void 0:r.elevations,nodes:null==e||null===(o=e.anuga)||void 0===o?void 0:o.nodes,links:null==e||null===(l=e.anuga)||void 0===l?void 0:l.links,inflows:null==e||null===(a=e.anuga)||void 0===a?void 0:a.inflows}}),(function(e){return{setNetworkMenu:function(t){return e((0,o.setNetworkMenu)(t))},updateNetwork:function(t,n){return e((0,o.updateNetwork)(t,n))},runNetwork:function(t){return e((0,o.runNetwork)(t))}}}))($e);function et(e){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nt(e,t){return(nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function rt(e,t){if(t&&("object"===et(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ot(e){return(ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var at=n(45697),it=(n(472986),function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nt(e,t)}(a,e);var t,n,r,o,l=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ot(r);if(o){var n=ot(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return rt(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=l.call(this,e)).state={},t}return t=a,(n=[{key:"componentDidMount",value:function(){this.props.updateComputeInstance()}},{key:"render",value:function(){var e,t,n=this;return m().createElement("div",{id:"anuga-run-menu-container",className:"simple-view-panel",style:{top:"70px"}},m().createElement("div",{className:"menu-rows-container"},m().createElement("div",{className:"row menu-row-header"},m().createElement("span",{className:"btn glyphicon glyphicon-remove legend-close",onClick:function(){n.props.showAnugaRunMenu(!1),n.props.setAnugaScenarioMenu(!0)}}),m().createElement("div",null,m().createElement(E.Table,{className:"run-server-table"},m().createElement("thead",null,m().createElement("tr",{className:"run-server-table-header"},m().createElement("th",{style:{width:"200px",textAlign:"left"}},"Run Scenario"),m().createElement("th",{style:{width:"100px"}},"Available Hours"),m().createElement("th",{style:{width:"80px"}},"Run"),m().createElement("th",{style:{width:"80px"}},"Download"))),m().createElement("tbody",null,m().createElement("tr",{className:"run-server-table-row",style:{marginTop:"15px"}},m().createElement("td",{style:{textAlign:"left"}},this.props.selectedScenario.name),m().createElement("td",null,"200"),m().createElement("td",null,m().createElement(E.Button,{bsStyle:"success",bsSize:"xsmall",style:{margin:"2px",borderRadius:"2px"},onClick:function(){n.props.runAnugaScenario(n.props.selectedScenario,0),n.props.showAnugaRunMenu(!1),n.props.showAnugaScenarioLog(n.props.selectedScenario.id),n.props.setAnugaScenarioMenu(!0)}},"Run")),m().createElement("td",null,m().createElement(E.Button,{download:!0,href:null===(e=this.props.selectedScenario)||void 0===e||null===(t=e.latest_run)||void 0===t?void 0:t.s3_package_url,bsStyle:"success",bsSize:"xsmall",style:{margin:"2px",borderRadius:"2px"}},m().createElement("span",{className:"glyphicon glyphicon-download","aria-hidden":"true"}))))))))),m().createElement(E.Button,{bsStyle:"success",bsSize:"small",style:{margin:"10px",borderRadius:"2px"},onClick:function(){n.props.showManageAccount(!0),n.props.showAnugaRunMenu(!1)}},"Manage Account"))}}])&&tt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(m().Component));lt(it,"propTypes",{visibleAnugaRunMenu:at.object,showAnugaRunMenu:at.func,updateComputeInstance:at.func,computeInstances:at.array,selectedScenario:at.object,runAnugaScenario:at.func,setAnugaScenarioMenu:at.func,showAnugaScenarioLog:at.func,showManageAccount:at.func}),lt(it,"defaultProps",{});var ut=(0,f.connect)((function(e){var t,n;return{selectedScenario:null==e||null===(t=e.anuga)||void 0===t?void 0:t.selectedScenario,computeInstances:null==e||null===(n=e.anuga)||void 0===n?void 0:n.computeInstances}}),(function(e){return{showAnugaRunMenu:function(t){return e((0,o.showAnugaRunMenu)(t))},updateComputeInstance:function(){return e((0,o.updateComputeInstance)())},runAnugaScenario:function(t,n){return e((0,o.runAnugaScenario)(t,n))},setAnugaScenarioMenu:function(t){return e((0,o.setAnugaScenarioMenu)(t))},showAnugaScenarioLog:function(t){return e((0,o.showAnugaScenarioLog)(t))},showManageAccount:function(t){return e((0,o.showManageAccount)(t))}}}))(it);function st(e){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pt(e,t){return(pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function dt(e,t){if(t&&("object"===st(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function mt(e){return(mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ft(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vt=n(45697),gt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pt(e,t)}(a,e);var t,n,r,o,l=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=mt(r);if(o){var n=mt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return dt(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),l.call(this,e)}return t=a,(n=[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){this.props.gnResourceLoaded&&!this.props.isAnugaProject&&(console.log("componentDidUpdate initing Anuga"),this.props.initAnuga())}},{key:"render",value:function(){var e,t=this;return this.props.isAnugaProject?m().createElement("div",{id:"anuga-container"},m().createElement("div",{id:"anuga-inputs"},m().createElement("button",{key:"anuga-input-button",className:"simple-view-menu-button",style:{left:120},onClick:function(){t.props.setAnugaInputMenu(!t.props.showAnugaInputMenu),t.props.setOpenMenuGroupId(null)}},"Inputs")),this.props.showAnugaInputMenu?m().createElement(re,null):null,this.props.canEditAnugaMap&&this.props.hasEPSGset?m().createElement("div",{id:"anuga-scenario"},m().createElement("button",{key:"anuga-scenario-button",className:"simple-view-menu-button",style:{left:220},onClick:function(){t.props.setAnugaScenarioMenu(!t.props.showAnugaScenarioMenu),t.props.showAnugaScenarioMenu?t.props.stopAnugaScenarioPolling():t.props.startAnugaScenarioPolling(),t.props.setOpenMenuGroupId(null)}},"Scenarios"),this.props.showAnugaScenarioMenu?m().createElement(ge,null):null):null,this.props.canViewAnugaMap&&this.props.hasEPSGset?m().createElement("button",{id:"anugaContainer-results-button-01",key:"anugaContainer-".concat(null===(e=this.props.resultsGroup)||void 0===e?void 0:e.title),className:"simple-view-menu-button",style:{left:320},onClick:function(){t.props.setOpenMenuGroupId("Results")}},"Results"):null,this.props.canEditAnugaMap&&this.props.hasEPSGset?m().createElement("div",{id:"publication-panel-container"},m().createElement("button",{key:"publication-panel-button",className:"simple-view-menu-button disabled",style:{left:420},onClick:function(){t.props.setPublicationPanel(!t.props.showPublicationPanel),t.props.setOpenMenuGroupId(null)}},"Publish"),this.props.showPublicationPanel?m().createElement(Ie,null):null):null,this.props.visibleAnugaScenarioLogId?m().createElement(He,{logText:this.props.logText}):null,this.props.visibleAnugaRunMenu?m().createElement(ut,null):null,this.props.showNetworkMenu?m().createElement(Qe,null):null):null}}])&&ct(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(m().Component);ft(gt,"propTypes",{initAnuga:vt.func,showAnugaInputMenu:vt.bool,setAnugaInputMenu:vt.func,showAnugaScenarioMenu:vt.bool,setAnugaScenarioMenu:vt.func,showAnugaResultMenu:vt.bool,setAnugaResultMenu:vt.func,showNetworkMenu:vt.bool,setReviewPanel:vt.func,showReviewPanel:vt.bool,setPublicationPanel:vt.func,showPublicationPanel:vt.bool,isAnugaMenuOpen:vt.bool,openMenuGroupId:vt.string,numberOfMenus:vt.number,setOpenMenuGroupId:vt.func,showAddAnugaElevationData:vt.bool,setAddAnugaElevation:vt.func,visibleAnugaScenarioLogId:vt.number,startAnugaScenarioPolling:vt.func,stopAnugaScenarioPolling:vt.func,updateCustomEditorsOptions:vt.func,logText:vt.string,gnResourceLoaded:vt.string,visibleAnugaRunMenu:vt.bool,canEditAnugaMap:vt.bool,canViewAnugaMap:vt.bool,hasEPSGset:vt.bool,resultsGroup:vt.object,isAnugaProject:vt.bool}),ft(gt,"defaultProps",{});const yt=(0,f.connect)((function(e){var t,n,r,o,l,a,i,u,s,c,p,d,m,f,v,g,y,h,E,S,w,A,T,O,N,F,M,C,B,P,R,I,x;return console.log("state for Anuga:",e),{logText:(null==e||null===(t=e.anuga)||void 0===t||null===(n=t.selectedScenario)||void 0===n?void 0:n.latest_run_is_valid)?(null==e||null===(r=e.anuga)||void 0===r||null===(o=r.selectedScenario)||void 0===o||null===(l=o.latest_run)||void 0===l?void 0:l.log)||"-":(null==e||null===(a=e.anuga)||void 0===a||null===(i=a.selectedScenario)||void 0===i?void 0:i.log)||"-",gnResourceLoaded:null==e||null===(u=e.gnresource)||void 0===u?void 0:u.id,isAnugaProject:null==e||null===(s=e.anuga)||void 0===s||null===(c=s.projectData)||void 0===c?void 0:c.id,hasEPSGset:!(null==e||null===(p=e.anuga)||void 0===p||null===(d=p.projectData)||void 0===d||!d.projection),anugaInputMenuGroupId:null==e||null===(m=e.layers)||void 0===m||null===(f=m.groups)||void 0===f||null===(v=f.filter((function(e){return"Input Data"===e.name})))||void 0===v||null===(g=v[0])||void 0===g?void 0:g.id,showAnugaInputMenu:null==e||null===(y=e.anuga)||void 0===y?void 0:y.showAnugaInputMenu,showAnugaScenarioMenu:null==e||null===(h=e.anuga)||void 0===h?void 0:h.showAnugaScenarioMenu,showAnugaResultMenu:null==e||null===(E=e.anuga)||void 0===E?void 0:E.showAnugaResultMenu,showReviewPanel:null==e||null===(S=e.anuga)||void 0===S?void 0:S.showReviewPanel,showPublicationPanel:null==e||null===(w=e.anuga)||void 0===w?void 0:w.showPublicationPanel,isAnugaMenuOpen:(null==e||null===(A=e.anuga)||void 0===A?void 0:A.showAnugaInputMenu)||(null==e||null===(T=e.anuga)||void 0===T?void 0:T.showAnugaScenarioMenu)||(null==e||null===(O=e.anuga)||void 0===O?void 0:O.showAnugaResultMenu),openMenuGroupId:null==e||null===(N=e.simpleView)||void 0===N?void 0:N.openMenuGroupId,numberOfMenus:(null==e||null===(F=e.layers)||void 0===F||null===(M=F.groups)||void 0===M?void 0:M.length)||1,showAddAnugaElevationData:null==e||null===(C=e.anuga)||void 0===C?void 0:C.showAddAnugaElevationData,visibleAnugaScenarioLogId:null==e||null===(B=e.anuga)||void 0===B?void 0:B.visibleAnugaScenarioLogId,visibleIntroduction:null==e||!e.simpleView.hasOwnProperty("visibleIntroduction")||(null==e||null===(P=e.simpleView)||void 0===P?void 0:P.visibleIntroduction),showNetworkMenu:null==e||null===(R=e.anuga)||void 0===R?void 0:R.showNetworkMenu,visibleNetworkMenu:null==e||null===(I=e.anuga)||void 0===I?void 0:I.visibleNetworkMenu,visibleAnugaRunMenu:null==e||null===(x=e.anuga)||void 0===x?void 0:x.visibleAnugaRunMenu,canEditAnugaMap:_(e),canViewAnugaMap:b(e)}}),(function(e){return{initAnuga:function(){return e((0,o.initAnuga)())},setAnugaInputMenu:function(t){return e((0,o.setAnugaInputMenu)(t))},setAnugaScenarioMenu:function(t){return e((0,o.setAnugaScenarioMenu)(t))},setAnugaResultMenu:function(t){return e((0,o.setAnugaResultMenu)(t))},setReviewPanel:function(t){return e((0,o.setReviewPanel)(t))},setPublicationPanel:function(t){return e((0,o.setPublicationPanel)(t))},setOpenMenuGroupId:function(t){return e((0,l.setOpenMenuGroupId)(t))},startAnugaScenarioPolling:function(){return e((0,o.startAnugaScenarioPolling)())},stopAnugaScenarioPolling:function(){return e((0,o.stopAnugaScenarioPolling)())}}}))(gt);var bt=n(49977),_t=n.n(bt),ht=n(580416),Et=n(197395),St=n(801550),wt=n(73443),At=n(433528),Tt=function(e,t){var n;if(0===(null===(n=e.data)||void 0===n?void 0:n.length))return _t().Observable.empty();var r=[(0,o.initAnuga)(),(0,o.setCreatingAnugaLayer)(!1)];return e.data.map((function(e){0===t.getState().layers.flat.filter((function(t){return t.name===(null==e?void 0:e.name)})).length&&(r.unshift((0,ht.A4)(e)),r.push((0,Et.show)({message:"New layers added... You should save your project.",title:"Layers added",uid:1e3,position:"tc"})))})),_t().Observable.from(r)};const Ot=(0,r.rx)("Anuga",{component:yt,reducers:{anuga:function(){var e,t,n,r,i,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,c=arguments.length>1?arguments[1]:void 0;switch(console.log("ACTION anuga:",c),c.type){case o.SET_CREATING_ANUGA_LAYER:return s(s({},u),{},{isCreatingAnugaLayer:c.isCreatingAnugaLayer});case o.UPDATE_ANUGA_SCENARIO:return s(s({},u),{},{scenarios:u.scenarios.map((function(e){return e.id===c.scenario.id?(c.scenario.unsaved=!0,c.scenario):e}))});case o.UPDATE_NETWORK:return s(s({},u),{},{networks:u.networks.map((function(e){return e.id===c.network.id?(c.network.unsaved=!0,c.network):e}))});case o.TOGGLE_SCENARIO_SELECTED:return s(s({},u),{},{scenarios:u.scenarios.map((function(e){return e.id===c.scenario.id?(c.scenario.selected=!e.selected,c.scenario):e}))});case o.SET_ANUGA_POLLING_DATA:var d=u.scenarios.map((function(e){var t=c.scenarios.filter((function(t){return e.id===t.id}))[0];return e.latest_run=s({},null==t?void 0:t.latest_run),e.status=(null==t?void 0:t.status)||"unsaved",e.latest_run_is_valid=null==t?void 0:t.latest_run_is_valid,e})),m=null===(e=u.scenarios)||void 0===e?void 0:e.map((function(e){return null==e?void 0:e.id})),f=null===(t=c.scenarios)||void 0===t||null===(n=t.filter((function(e){return!m.includes(e.id)})))||void 0===n?void 0:n[0];return f&&(d=[].concat(a(d),[f])),console.log("scenarios",d),s(s({},u),{},{scenarios:d,selectedScenario:c.scenarios.filter((function(e){return u.selectedScenarioId===e.id}))[0]});case o.ADD_ANUGA_SCENARIO:return s(s({},u),{},{scenarios:[].concat(a(u.scenarios),[{id:null,name:"",code:null,description:"",maximum_triangle_area:1e3,constant_rainfall:null,duration:null,status:"new",project:null==u||null===(r=u.projectData)||void 0===r?void 0:r.id,boundary:"",elevation:"",log:"log placeholder",unsaved:!1,selected:!1}])});case o.SET_ANUGA_SCENARIO_IS_LOADED:return s(s({},u),{},{scenarios:u.scenarios.map((function(e){return e.id===c.scenarioId?(e.isLoaded=c.isLoaded,e):e}))});case o.SHOW_ANUGA_SCENARIO_LOG:return s(s({},u),{},{visibleAnugaScenarioLogId:c.scenarioId});case o.SHOW_ANUGA_RUN_MENU:return s(s({},u),{},{visibleAnugaRunMenu:c.visible});case o.SAVE_ANUGA_SCENARIO_SUCCESS:return s(s({},u),{},{scenarios:u.scenarios.map((function(e){return e.id===c.scenario.id?(c.scenario.unsaved=!1,c.scenario):e.id?e:c.scenario}))});case o.SELECT_ANUGA_SCENARIO:return s(s({},u),{},{selectedScenarioId:c.scenario.id,selectedScenario:c.scenario});case o.SET_ANUGA_PROJECT_DATA:return s(s({},u),{},{projectData:c.data});case o.SET_ANUGA_SCENARIO_DATA:return 0===u.scenarios.length?s(s({},u),{},{scenarios:c.scenarios}):s(s({},u),{},{scenarios:null===(i=u.scenarios)||void 0===i?void 0:i.map((function(e){var t;return e.unsaved?s(s({},c.scenario),{},{unsaved:!0}):(null==e?void 0:e.id)===(null===(t=c.scenario)||void 0===t?void 0:t.id)?(c.scenario.unsaved=!1,c.scenario):e}))});case o.UPDATE_COMPUTE_INSTANCE_SUCCESS:return s(s({},u),{},{computeInstances:c.data});case o.SET_COMPARISON_DATA:return s(s({},u),{},{comparisons:c.data});case o.SET_ANUGA_INFLOW_DATA:return s(s({},u),{},{inflows:c.data});case o.SET_ANUGA_FRICTION_DATA:return s(s({},u),{},{frictions:c.data});case o.SET_ANUGA_STRUCTURE_DATA:return s(s({},u),{},{structures:c.data});case o.SET_ANUGA_BOUNDARY_DATA:return s(s({},u),{},{boundaries:c.data});case o.SET_ANUGA_ELEVATION_DATA:return s(s({},u),{},{elevations:c.data});case o.SET_ANUGA_FULL_MESH_DATA:return s(s({},u),{},{fullMeshes:c.data});case o.SET_ANUGA_MESH_REGION_DATA:return s(s({},u),{},{meshRegions:c.data});case o.SET_NETWORK_DATA:return s(s({},u),{},{networks:c.data});case o.SET_LUMPED_CATCHMENT_DATA:return s(s({},u),{},{catchments:c.data});case o.SET_ANUGA_NODES_DATA:return s(s({},u),{},{nodes:c.data});case o.SET_ANUGA_LINKS_DATA:return s(s({},u),{},{links:c.data});case o.SET_PUBLICATION_DATA:return s(s({},u),{},{publications:c.data});case l.SET_OPEN_MENU_GROUP_ID:return c.openMenuGroupId?s(s({},u),{},{showAnugaInputMenu:!1,showAnugaScenarioMenu:!1,showAnugaResultMenu:!1}):u;case o.SET_ANUGA_INPUT_MENU:return s(s({},u),{},{showAnugaInputMenu:c.visible,showAnugaScenarioMenu:!1,showAnugaResultMenu:!1,showNetworkMenu:!1,showReviewPanel:!1,showPublicationPanel:!1});case o.SET_ANUGA_SCENARIO_MENU:return s(s({},u),{},{showAnugaInputMenu:!1,showAnugaScenarioMenu:c.visible,showAnugaResultMenu:!1,showNetworkMenu:!1,showReviewPanel:!1,showPublicationPanel:!1});case o.SET_ANUGA_RESULT_MENU:return s(s({},u),{},{showAnugaScenarioMenu:!1,showAnugaInputMenu:!1,showAnugaResultMenu:c.visible,showNetworkMenu:!1,showReviewPanel:!1,showPublicationPanel:!1});case o.SET_NETWORK_MENU:return s(s({},u),{},{showAnugaInputMenu:!1,showAnugaScenarioMenu:!1,showAnugaResultMenu:!1,showNetworkMenu:c.visible,showReviewPanel:!1,showPublicationPanel:!1});case o.SET_REVIEW_PANEL:return s(s({},u),{},{showAnugaInputMenu:!1,showAnugaScenarioMenu:!1,showAnugaResultMenu:!1,showNetworkMenu:!1,showReviewPanel:c.visible,showPublicationPanel:!1});case o.SET_PUBLICATION_PANEL:return s(s({},u),{},{showAnugaInputMenu:!1,showAnugaScenarioMenu:!1,showAnugaResultMenu:!1,showNetworkMenu:!1,showReviewPanel:!1,showPublicationPanel:c.visible});default:return u}}},epics:{initAnugaEpic:function(e,t){return e.ofType(o.INIT_ANUGA,l.UPDATE_DATASET_TITLE_SUCCESS).filter((function(){var e;return null===(e=t.getState())||void 0===e?void 0:e.gnresource.id})).switchMap((function(){var e;return _t().Observable.from(L().post("/anuga/api/project/get_project_from_map_id/",{mapId:null===(e=t.getState())||void 0===e?void 0:e.gnresource.id}).catch((function(e){return console.log("**",e),"error"}))).filter((function(e){return(null==e?void 0:e.status)<=400})).filter((function(){var e,n;return!(null===(e=t.getState())||void 0===e||null===(n=e.security)||void 0===n||!n.user)})).switchMap((function(e){return _t().Observable.from(L().get("/anuga/api/project/".concat(e.data.projectId,"/"))).switchMap((function(t){return _t().Observable.of((0,o.setAnugaProjectData)(t.data)).concat(_t().Observable.from(L().get("/anuga/api/".concat(e.data.projectId,"/scenario/"))).switchMap((function(e){return _t().Observable.of((0,o.setAnugaScenarioData)(e.data))})),_t().Observable.from(L().get("/anuga/api/".concat(e.data.projectId,"/boundary/"))).switchMap((function(e){return _t().Observable.of((0,o.setAnugaBoundaryData)(e.data))})),_t().Observable.from(L().get("/anuga/api/".concat(e.data.projectId,"/elevation/"))).switchMap((function(e){return _t().Observable.of((0,o.setAnugaElevationData)(e.data))})),_t().Observable.from(L().get("/anuga/api/".concat(e.data.projectId,"/inflow/"))).switchMap((function(e){return _t().Observable.of((0,o.setAnugaInflowData)(e.data))})),_t().Observable.from(L().get("/anuga/api/".concat(e.data.projectId,"/structure/"))).switchMap((function(e){return _t().Observable.of((0,o.setAnugaStructureData)(e.data))})),_t().Observable.from(L().get("/anuga/api/".concat(e.data.projectId,"/friction/"))).switchMap((function(e){return _t().Observable.of((0,o.setAnugaFrictionData)(e.data))})),_t().Observable.from(L().get("/anuga/api/".concat(e.data.projectId,"/full-mesh/"))).switchMap((function(e){return _t().Observable.of((0,o.setAnugaFullMeshData)(e.data))})),_t().Observable.from(L().get("/anuga/api/".concat(e.data.projectId,"/mesh-region/"))).switchMap((function(e){return _t().Observable.of((0,o.setAnugaMeshRegionData)(e.data))})),_t().Observable.from(L().get("/anuga/api/".concat(e.data.projectId,"/network/"))).switchMap((function(e){return _t().Observable.of((0,o.setNetworkData)(e.data))})),_t().Observable.from(L().get("/anuga/api/".concat(e.data.projectId,"/catchment/"))).switchMap((function(e){return _t().Observable.of((0,o.setCatchmentData)(e.data))})),_t().Observable.from(L().get("/anuga/api/".concat(e.data.projectId,"/nodes/"))).switchMap((function(e){return _t().Observable.of((0,o.setAnugaNodesData)(e.data))})),_t().Observable.from(L().get("/anuga/api/".concat(e.data.projectId,"/links/"))).switchMap((function(e){return _t().Observable.of((0,o.setAnugaLinksData)(e.data))})),_t().Observable.from(L().get("/anuga/api/".concat(e.data.projectId,"/comparison/"))).switchMap((function(e){return _t().Observable.of((0,o.setComparisonData)(e.data))})),_t().Observable.from(L().get("/anuga/api/".concat(e.data.projectId,"/publication/"))).switchMap((function(e){return _t().Observable.of((0,o.setPublicationData)(e.data))})),_t().Observable.of((0,o.startAnugaScenarioPolling)()))})).filter((function(e){return e}))}))})).filter((function(e){return e}))},cancelAnugaRunEpic:function(e,t){return e.ofType(o.CANCEL_ANUGA_RUN).concatMap((function(e){var n,r,o;return _t().Observable.from(L().post("/anuga/api/".concat(null===(n=t.getState())||void 0===n||null===(r=n.anuga)||void 0===r||null===(o=r.projectData)||void 0===o?void 0:o.id,"/scenario/").concat(e.scenario.id,"/run/"),e))})).concatMap((function(e){var n,r,o;return _t().Observable.from(L().post("/anuga/api/".concat(null===(n=t.getState())||void 0===n||null===(r=n.anuga)||void 0===r||null===(o=r.projectData)||void 0===o?void 0:o.id,"/scenario/").concat(e.scenario.id,"/cancel/"),{runId:e.scenario.latest_run.id}))})).concatMap((function(){return _t().Observable.of((0,Et.show)({message:"cancelling..."},"warning"))}))},pollAnugaElevationEpic:function(e,t){return e.ofType(o.START_ANUGA_ELEVATION_POLLING).switchMap((function(){return _t().Observable.timer(0,6e3).takeUntil(e.ofType(o.STOP_ANUGA_ELEVATION_POLLING)).switchMap((function(){var e,n,r;return _t().Observable.from(L().get("/anuga/api/".concat(null===(e=t.getState())||void 0===e||null===(n=e.anuga)||void 0===n||null===(r=n.projectData)||void 0===r?void 0:r.id,"/elevation/available/"))).catch((function(e){return e}))})).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(e){var n,r,a,i,u,s,c,p,d,m;if((null===(n=e.data)||void 0===n?void 0:n.length)<2)return _t().Observable.empty();var f=null===(r=t.getState())||void 0===r||null===(a=r.layers.groups.filter((function(e){return"Input Data"===e.id})))||void 0===a||null===(i=a[0])||void 0===i||null===(u=i.nodes)||void 0===u?void 0:u.length;return _t().Observable.concat(_t().Observable.of((0,o.stopAnugaElevationPolling)()),_t().Observable.of((function(){var e,n,r,o=(null===(e=t.getState())||void 0===e||null===(n=e.layers)||void 0===n||null===(r=n.flat)||void 0===r?void 0:r.filter((function(e){return"wms"===e.type&&"background"!==e.group})))||[];return(0,ht.oZ)(o)})),_t().Observable.of((0,ht.A4)(e.data[0])),_t().Observable.of((0,ht.A4)(null===(s=e.data)||void 0===s?void 0:s[1])),_t().Observable.of((0,St.Px)(null===(c=e.data[0])||void 0===c||null===(p=c.bbox)||void 0===p?void 0:p.bounds,null===(d=e.data[0])||void 0===d||null===(m=d.bbox)||void 0===m?void 0:m.crs,20)),_t().Observable.of((0,l.updateUploadStatus)("Complete")),_t().Observable.of((0,wt.nY)()),_t().Observable.of((0,o.initAnuga)()),_t().Observable.of((0,o.startAnugaModelCreationPolling)()),_t().Observable.of((function(){var e,n,r,o=(null===(e=t.getState())||void 0===e||null===(n=e.layers)||void 0===n||null===(r=n.flat)||void 0===r?void 0:r.filter((function(e){return"wms"===e.type&&"background"!==e.group})))||[];return(0,ht.oZ)(o)})),_t().Observable.of((0,ht.Dv)("Input Data.Elevations","Input Data",f)))}))}))},runAnugaScenarioEpic:function(e,t){return e.ofType(o.RUN_ANUGA_SCENARIO).concatMap((function(e){var n,r,l;return _t().Observable.from(L().post("/anuga/api/".concat(null===(n=t.getState())||void 0===n||null===(r=n.anuga)||void 0===r||null===(l=r.projectData)||void 0===l?void 0:l.id,"/scenario/").concat(e.scenario.id,"/run/"),e).then((function(e){return(0,o.runAnugaScenarioSuccess)(e.data)})))})).concatMap((function(){return _t().Observable.of((0,o.setAnugaScenarioMenu)(!0))}))},runNetworkEpic:function(e,t){return e.ofType(o.RUN_NETWORK).concatMap((function(e){var n,r,l;return _t().Observable.from(L().post("/anuga/api/".concat(null===(n=t.getState())||void 0===n||null===(r=n.anuga)||void 0===r||null===(l=r.projectData)||void 0===l?void 0:l.id,"/network/").concat(e.network.id,"/run/"),e.network).then((function(e){return(0,o.runNetworkSuccess)(e.data)})))})).concatMap((function(){return _t().Observable.of((0,o.setNetworkMenu)(!0))}))},saveAnugaScenarioEpic:function(e,t){return e.ofType(o.SAVE_ANUGA_SCENARIO).switchMap((function(e){var n,r,l,a,i,u;return e.scenario.log=e.scenario.log||"anuga log",e.scenario.id?_t().Observable.from(L().put("/anuga/api/".concat(null===(a=t.getState())||void 0===a||null===(i=a.anuga)||void 0===i||null===(u=i.projectData)||void 0===u?void 0:u.id,"/scenario/").concat(e.scenario.id,"/"),e.scenario).then((function(e){return(0,o.saveAnugaScenarioSuccess)(e.data)})).catch((function(e){return(0,o.saveAnugaScenarioError)(e)}))):_t().Observable.from(L().post("/anuga/api/".concat(null===(n=t.getState())||void 0===n||null===(r=n.anuga)||void 0===r||null===(l=r.projectData)||void 0===l?void 0:l.id,"/scenario/"),e.scenario).then((function(e){return(0,o.saveAnugaScenarioSuccess)(e.data)})).catch((function(e){return(0,o.saveAnugaScenarioError)(e)})))}))},pollAnugaScenarioEpic:function(e,t){return e.ofType(o.START_ANUGA_SCENARIO_POLLING).switchMap((function(){return _t().Observable.timer(0,8e3).takeUntil(e.ofType(o.STOP_ANUGA_SCENARIO_POLLING)).switchMap((function(){var e,n,r;return _t().Observable.from(L().get("/anuga/api/".concat(null===(e=t.getState())||void 0===e||null===(n=e.anuga)||void 0===n||null===(r=n.projectData)||void 0===r?void 0:r.id,"/scenario/")).catch((function(e){return e}))).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(e){return _t().Observable.of((0,o.setAnugaPollingData)(e.data)).switchMap((function(e){var n,r,l,a,i,u,s,c,p,d,m,f,v,g,y,b,_,h,E,S,w,A,T,O,N,F,M,C,B,P,R,I=(null===(n=e.scenarios)||void 0===n?void 0:n.filter((function(e){var t;return"complete"===(null===(t=e.latest_run)||void 0===t?void 0:t.status)}))).filter((function(e){var n,r,o;return null===(n=t.getState())||void 0===n||null===(r=n.anuga)||void 0===r||null===(o=r.scenarios)||void 0===o?void 0:o.filter((function(n){var r,o,l,a,i,u,s,c,p,d,m,f=(null==n?void 0:n.id)===e.id,v=!n.isLoaded,g=(r=n,p=null==(o=t.getState())||null===(l=o.layers)||void 0===l||null===(a=l.flat)||void 0===a?void 0:a.filter((function(e){var t,n;return e.name===(null==r||null===(t=r.latest_run)||void 0===t||null===(n=t.gn_layer_depth_max)||void 0===n?void 0:n.name)})),d=null==o||null===(i=o.layers)||void 0===i||null===(u=i.flat)||void 0===u?void 0:u.filter((function(e){var t,n;return e.name===(null==r||null===(t=r.latest_run)||void 0===t||null===(n=t.gn_layer_depth_integrated_velocity_max)||void 0===n?void 0:n.name)})),m=null==o||null===(s=o.layers)||void 0===s||null===(c=s.flat)||void 0===c?void 0:c.filter((function(e){var t,n;return e.name===(null==r||null===(t=r.latest_run)||void 0===t||null===(n=t.gn_layer_velocity_max)||void 0===n?void 0:n.name)})),!(null!=p&&p.length&&null!=d&&d.length&&null!=m&&m.length));return f&&v&&g?e:null}))[0]}))[0],x=null===(r=t.getState())||void 0===r||null===(l=r.layers)||void 0===l||null===(a=l.flat)||void 0===a?void 0:a.map((function(e){return null==e?void 0:e.name})),D=(null===(i=t.getState())||void 0===i||null===(u=i.layers)||void 0===u||null===(s=u.flat)||void 0===s?void 0:s.filter((function(e){return"wms"===(null==e?void 0:e.type)&&"background"!==(null==e?void 0:e.group)})))||[],L=[null==I||null===(c=I.latest_run)||void 0===c||null===(p=c.gn_layer_depth_integrated_velocity_max)||void 0===p?void 0:p.title,null==I||null===(d=I.latest_run)||void 0===d||null===(m=d.gn_layer_depth_max)||void 0===m?void 0:m.title,null==I||null===(f=I.latest_run)||void 0===f||null===(v=f.gn_layer_velocity_max)||void 0===v?void 0:v.title],G=null===(g=t.getState())||void 0===g||null===(y=g.layers)||void 0===y||null===(b=y.flat)||void 0===b?void 0:b.filter((function(e){return L.includes(e.title)}));return console.log("remove these existingResultLayers:",G),I&&null!=I&&null!==(_=I.latest_run)&&void 0!==_&&null!==(h=_.gn_layer_depth_integrated_velocity_max)&&void 0!==h&&h.catalogURL&&null!=I&&null!==(E=I.latest_run)&&void 0!==E&&null!==(S=E.gn_layer_depth_max)&&void 0!==S&&S.catalogURL&&null!=I&&null!==(w=I.latest_run)&&void 0!==w&&null!==(A=w.gn_layer_velocity_max)&&void 0!==A&&A.catalogURL&&!x.includes(null==I||null===(T=I.latest_run)||void 0===T||null===(O=T.gn_layer_depth_integrated_velocity_max)||void 0===O?void 0:O.name)&&!x.includes(null==I||null===(N=I.latest_run)||void 0===N||null===(F=N.gn_layer_depth_max)||void 0===F?void 0:F.name)&&!x.includes(null==I||null===(M=I.latest_run)||void 0===M||null===(C=M.gn_layer_velocity_max)||void 0===C?void 0:C.name)?_t().Observable.concat(_t().Observable.of((0,ht.$o)(null==G||null===(B=G[0])||void 0===B?void 0:B.id)),_t().Observable.of((0,ht.$o)(null==G||null===(P=G[1])||void 0===P?void 0:P.id)),_t().Observable.of((0,ht.$o)(null==G||null===(R=G[2])||void 0===R?void 0:R.id)),_t().Observable.of((0,o.setAnugaPollingData)(e.scenarios)),_t().Observable.of((0,ht.A4)(I.latest_run.gn_layer_depth_integrated_velocity_max)),_t().Observable.of((0,ht.A4)(I.latest_run.gn_layer_depth_max)),_t().Observable.of((0,ht.A4)(I.latest_run.gn_layer_velocity_max)),_t().Observable.of((0,o.setAnugaScenarioResultsLoaded)(null==I?void 0:I.id,!0)),_t().Observable.of((0,ht.oZ)(D))):_t().Observable.of((0,o.setAnugaPollingData)(e.scenarios))}))}))}))}))},deleteAnugaScenarioEpic:function(e,t){return e.ofType(o.DELETE_ANUGA_SCENARIO).concatMap((function(e){var n,r,o;return _t().Observable.from(L().delete("/anuga/api/".concat(null===(n=t.getState())||void 0===n||null===(r=n.anuga)||void 0===r||null===(o=r.projectData)||void 0===o?void 0:o.id,"/scenario/").concat(e.scenario.id,"/")))})).concatMap((function(e){return _t().Observable.of((0,o.deleteAnugaScenarioSuccess)(e.data))}))},createAnugaBoundaryEpic:function(e,t){return e.ofType(o.CREATE_ANUGA_BOUNDARY).switchMap((function(e){var n,r,o,l,a,i;return _t().Observable.from(L().post("/anuga/api/".concat(null===(n=t.getState())||void 0===n||null===(r=n.anuga)||void 0===r||null===(o=r.projectData)||void 0===o?void 0:o.id,"/boundary/"),{project:null===(l=t.getState())||void 0===l||null===(a=l.anuga)||void 0===a||null===(i=a.projectData)||void 0===i?void 0:i.id,title:e.boundaryTitle}).catch((function(e){return e})))})).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(){return _t().Observable.of((0,o.addAnugaBoundary)())}))},createAnugaFrictionEpic:function(e,t){return e.ofType(o.CREATE_ANUGA_FRICTION).switchMap((function(e){var n,r,o,l,a,i;return _t().Observable.from(L().post("/anuga/api/".concat(null===(n=t.getState())||void 0===n||null===(r=n.anuga)||void 0===r||null===(o=r.projectData)||void 0===o?void 0:o.id,"/friction/"),{project:null===(l=t.getState())||void 0===l||null===(a=l.anuga)||void 0===a||null===(i=a.projectData)||void 0===i?void 0:i.id,title:e.frictionTitle}).catch((function(e){return e})))})).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(){return _t().Observable.of((0,o.addAnugaFriction)())}))},createAnugaInflowEpic:function(e,t){return e.ofType(o.CREATE_ANUGA_INFLOW).switchMap((function(e){var n,r,o,l,a,i;return _t().Observable.from(L().post("/anuga/api/".concat(null===(n=t.getState())||void 0===n||null===(r=n.anuga)||void 0===r||null===(o=r.projectData)||void 0===o?void 0:o.id,"/inflow/"),{project:null===(l=t.getState())||void 0===l||null===(a=l.anuga)||void 0===a||null===(i=a.projectData)||void 0===i?void 0:i.id,title:e.inflowTitle}).catch((function(e){return e})))})).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(){return _t().Observable.of((0,o.addAnugaInflow)())}))},createAnugaStructureEpic:function(e,t){return e.ofType(o.CREATE_ANUGA_STRUCTURE).switchMap((function(e){var n,r,o,l,a,i;return _t().Observable.from(L().post("/anuga/api/".concat(null===(n=t.getState())||void 0===n||null===(r=n.anuga)||void 0===r||null===(o=r.projectData)||void 0===o?void 0:o.id,"/structure/"),{project:null===(l=t.getState())||void 0===l||null===(a=l.anuga)||void 0===a||null===(i=a.projectData)||void 0===i?void 0:i.id,title:e.structureTitle}).catch((function(e){return e})))})).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(){return _t().Observable.of((0,o.addAnugaStructure)())}))},createAnugaMeshRegionEpic:function(e,t){return e.ofType(o.CREATE_ANUGA_MESH_REGION).switchMap((function(e){var n,r,o,l,a,i;return _t().Observable.from(L().post("/anuga/api/".concat(null===(n=t.getState())||void 0===n||null===(r=n.anuga)||void 0===r||null===(o=r.projectData)||void 0===o?void 0:o.id,"/mesh-region/"),{project:null===(l=t.getState())||void 0===l||null===(a=l.anuga)||void 0===a||null===(i=a.projectData)||void 0===i?void 0:i.id,title:e.meshRegionTitle}).catch((function(e){return e})))})).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(){return _t().Observable.of((0,o.addAnugaMeshRegion)())}))},createNetworkEpic:function(e,t){return e.ofType(o.CREATE_NETWORK).switchMap((function(e){var n,r,o,l,a,i;return _t().Observable.from(L().post("/anuga/api/".concat(null===(n=t.getState())||void 0===n||null===(r=n.anuga)||void 0===r||null===(o=r.projectData)||void 0===o?void 0:o.id,"/network/"),{project:null===(l=t.getState())||void 0===l||null===(a=l.anuga)||void 0===a||null===(i=a.projectData)||void 0===i?void 0:i.id,title:e.networkTitle}).catch((function(e){return e})))})).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(){return _t().Observable.of((0,o.addNetwork)())}))},createCatchmentEpic:function(e,t){return e.ofType(o.CREATE_LUMPED_CATCHMENT).switchMap((function(e){var n,r,o,l,a,i;return _t().Observable.from(L().post("/anuga/api/".concat(null===(n=t.getState())||void 0===n||null===(r=n.anuga)||void 0===r||null===(o=r.projectData)||void 0===o?void 0:o.id,"/catchment/"),{project:null===(l=t.getState())||void 0===l||null===(a=l.anuga)||void 0===a||null===(i=a.projectData)||void 0===i?void 0:i.id,title:e.catchmentTitle}).catch((function(e){return e})))})).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(){return _t().Observable.of((0,o.addCatchment)())}))},createNodesEpic:function(e,t){return e.ofType(o.CREATE_NODES).switchMap((function(e){var n,r,o,l,a,i;return _t().Observable.from(L().post("/anuga/api/".concat(null===(n=t.getState())||void 0===n||null===(r=n.anuga)||void 0===r||null===(o=r.projectData)||void 0===o?void 0:o.id,"/nodes/"),{project:null===(l=t.getState())||void 0===l||null===(a=l.anuga)||void 0===a||null===(i=a.projectData)||void 0===i?void 0:i.id,title:e.nodesTitle}).catch((function(e){return e})))})).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(){return _t().Observable.of((0,o.addNodes)())}))},createLinksEpic:function(e,t){return e.ofType(o.CREATE_LINKS).switchMap((function(e){var n,r,o,l,a,i;return _t().Observable.from(L().post("/anuga/api/".concat(null===(n=t.getState())||void 0===n||null===(r=n.anuga)||void 0===r||null===(o=r.projectData)||void 0===o?void 0:o.id,"/links/"),{project:null===(l=t.getState())||void 0===l||null===(a=l.anuga)||void 0===a||null===(i=a.projectData)||void 0===i?void 0:i.id,title:e.linksTitle}).catch((function(e){return e})))})).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(){return _t().Observable.of((0,o.addLinks)())}))},createFigureEpic:function(e,t){return e.ofType(o.CREATE_FIGURE).switchMap((function(e){var n,r,o;return _t().Observable.from(L().post("/anuga/api/".concat(null===(n=t.getState())||void 0===n||null===(r=n.anuga)||void 0===r||null===(o=r.projectData)||void 0===o?void 0:o.id,"/publication/").concat(e.publicationId,"/create-figure/"),{title:e.figureTitle}).catch((function(e){return e})))})).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(e){var t;return console.log("response1:",e),window.open(null==e||null===(t=e.data)||void 0===t?void 0:t.detail_url,"_blank").focus(),_t().Observable.of((0,o.initAnuga)())}))},addAnugaBoundaryEpic:function(e,t){return e.ofType(o.ADD_ANUGA_BOUNDARY).switchMap((function(){var e,n,r;return _t().Observable.from(L().get("/anuga/api/".concat(null===(e=t.getState())||void 0===e||null===(n=e.anuga)||void 0===n||null===(r=n.projectData)||void 0===r?void 0:r.id,"/boundary/available/")).catch((function(e){return e}))).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(e){return Tt(e,t)}))}))},addAnugaFrictionEpic:function(e,t){return e.ofType(o.ADD_ANUGA_FRICTION).switchMap((function(){var e,n,r;return _t().Observable.from(L().get("/anuga/api/".concat(null===(e=t.getState())||void 0===e||null===(n=e.anuga)||void 0===n||null===(r=n.projectData)||void 0===r?void 0:r.id,"/friction/available/")).catch((function(e){return e}))).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(e){return Tt(e,t)}))}))},addAnugaInflowEpic:function(e,t){return e.ofType(o.ADD_ANUGA_INFLOW).switchMap((function(){var e,n,r;return _t().Observable.from(L().get("/anuga/api/".concat(null===(e=t.getState())||void 0===e||null===(n=e.anuga)||void 0===n||null===(r=n.projectData)||void 0===r?void 0:r.id,"/inflow/available/")).catch((function(e){return e}))).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(e){return Tt(e,t)}))}))},addAnugaStructureEpic:function(e,t){return e.ofType(o.ADD_ANUGA_STRUCTURE).switchMap((function(){var e,n,r;return _t().Observable.from(L().get("/anuga/api/".concat(null===(e=t.getState())||void 0===e||null===(n=e.anuga)||void 0===n||null===(r=n.projectData)||void 0===r?void 0:r.id,"/structure/available/")).catch((function(e){return e}))).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(e){return Tt(e,t)}))}))},addAnugaFullMeshEpic:function(e,t){return e.ofType(o.ADD_ANUGA_FULL_MESH).switchMap((function(){var e,n,r;return _t().Observable.from(L().get("/anuga/api/".concat(null===(e=t.getState())||void 0===e||null===(n=e.anuga)||void 0===n||null===(r=n.projectData)||void 0===r?void 0:r.id,"/full-mesh/available/")).catch((function(e){return e}))).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(e){return Tt(e,t)}))}))},addAnugaMeshRegionEpic:function(e,t){return e.ofType(o.ADD_ANUGA_MESH_REGION).switchMap((function(){var e,n,r;return _t().Observable.from(L().get("/anuga/api/".concat(null===(e=t.getState())||void 0===e||null===(n=e.anuga)||void 0===n||null===(r=n.projectData)||void 0===r?void 0:r.id,"/mesh-region/available/")).catch((function(e){return e}))).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(e){return Tt(e,t)}))}))},addCatchmentEpic:function(e,t){return e.ofType(o.ADD_LUMPED_CATCHMENT).switchMap((function(){var e,n,r;return _t().Observable.from(L().get("/anuga/api/".concat(null===(e=t.getState())||void 0===e||null===(n=e.anuga)||void 0===n||null===(r=n.projectData)||void 0===r?void 0:r.id,"/catchment/available/")).catch((function(e){return e}))).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(e){return Tt(e,t)}))}))},addNodesEpic:function(e,t){return e.ofType(o.ADD_NODES).switchMap((function(){var e,n,r;return _t().Observable.from(L().get("/anuga/api/".concat(null===(e=t.getState())||void 0===e||null===(n=e.anuga)||void 0===n||null===(r=n.projectData)||void 0===r?void 0:r.id,"/nodes/available/")).catch((function(e){return e}))).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(e){return Tt(e,t)}))}))},addLinksEpic:function(e,t){return e.ofType(o.ADD_LINKS).switchMap((function(){var e,n,r;return _t().Observable.from(L().get("/anuga/api/".concat(null===(e=t.getState())||void 0===e||null===(n=e.anuga)||void 0===n||null===(r=n.projectData)||void 0===r?void 0:r.id,"/links/available/")).catch((function(e){return e}))).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(e){return Tt(e,t)}))}))},prePopulateAnugaFeatureGridWithDefaults:function(e,t){return e.ofType(At.IN).concatMap((function(e){return _t().Observable.of(e)})).filter((function(){return["geonode:bdy_","geonode:inf_","geonode:str_","geonode:fri_","geonode:mes_"].some((function(e){var n,r;return null===(n=t.getState())||void 0===n||null===(r=n.featuregrid)||void 0===r?void 0:r.selectedLayer.includes(e)}))})).concatMap((function(e){var n,r,o,l,a;return null!=e&&null!==(n=e.features)&&void 0!==n&&n[0]&&(null===(r=Object.keys(null==e||null===(o=e.features)||void 0===o?void 0:o[0]))||void 0===r?void 0:r.length)>0?_t().Observable.empty():(e.features[0].properties={"geonode:bdy_":{location:"External",boundary:"Dirichlet"},"geonode:inf_":{type:"Rainfall",data:100},"geonode:str_":{method:"Holes"},"geonode:fri_":{manning:.035},"geonode:mes_":{resolution:10}}[null===(l=t.getState())||void 0===l||null===(a=l.featuregrid)||void 0===a?void 0:a.selectedLayer.substring(0,12)],_t().Observable.of(e))}))},updateComputeInstanceEpic:function(e,t){return e.ofType(o.UPDATE_COMPUTE_INSTANCE).switchMap((function(){var e,n,r;return _t().Observable.from(L().get("/anuga/api/".concat(null===(e=t.getState())||void 0===e||null===(n=e.anuga)||void 0===n||null===(r=n.projectData)||void 0===r?void 0:r.id,"/compute-instance/"))).switchMap((function(e){return _t().Observable.of((0,o.updateComputeInstanceSuccess)(e.data))}))}))},updateAnugaModelTitle:function(e,t){return e.ofType(l.UPDATE_DATASET_TITLE).switchMap((function(e){return _t().Observable.from(L().get("/api/v2/datasets?search=".concat(e.datasetName.split("geonode:")[1],"&search_fields=name"))).switchMap((function(n){var r,o,l,a,i,u,s,c,p,d,m=parseInt(null==n||null===(r=n.data)||void 0===r||null===(o=r.datasets)||void 0===o||null===(l=o[0])||void 0===l?void 0:l.pk,10),f=null===(a=(c=null==t?void 0:t.getState(),p={elevations:"elevation",boundaries:"boundary",frictions:"friction",inflows:"inflow",meshRegions:"mesh-region",structures:"structure",catchments:"catchment",nodes:"nodes",links:"links"},d=Array(),["elevations","boundaries","frictions","inflows","meshRegions","structures","catchments","nodes","links"].map((function(e){var t;null==c||null===(t=c.anuga)||void 0===t||t[e].map((function(t){d.push(g(g({},t),{},{apiKey:p[e]}))}))})),d).filter((function(e){return e.gn_layer===m})))||void 0===a?void 0:a[0];return _t().Observable.from(L().patch("/anuga/api/".concat(null===(i=t.getState())||void 0===i||null===(u=i.anuga)||void 0===u||null===(s=u.projectData)||void 0===s?void 0:s.id,"/").concat(f.apiKey,"/").concat(f.id,"/"),{title:e.newTitle}))})).switchMap((function(){return _t().Observable.empty()}))}))},pollAnugaModelCreationEpic:function(e){return e.ofType(o.START_ANUGA_MODEL_CREATION_POLLING).switchMap((function(){return _t().Observable.timer(0,1e4).takeUntil(e.ofType(o.STOP_ANUGA_MODEL_CREATION_POLLING)).switchMap((function(){return _t().Observable.concat(_t().Observable.of((0,o.addAnugaBoundary)()),_t().Observable.of((0,o.addAnugaFriction)()),_t().Observable.of((0,o.addAnugaStructure)()),_t().Observable.of((0,o.addAnugaInflow)()),_t().Observable.of((0,o.addAnugaFullMesh)()),_t().Observable.of((0,o.addAnugaMeshRegion)()),_t().Observable.of((0,o.addNetwork)()),_t().Observable.of((0,o.addCatchment)()),_t().Observable.of((0,o.addNodes)()),_t().Observable.of((0,o.addLinks)()))}))}))},compareScenarioEpic:function(e,t){return e.ofType(o.COMPARE_SCENARIOS).concatMap((function(e){var n,r,l;return _t().Observable.from(L().post("/anuga/api/".concat(null===(n=t.getState())||void 0===n||null===(r=n.anuga)||void 0===r||null===(l=r.projectData)||void 0===l?void 0:l.id,"/scenario/compare/"),e.scenarios).then((function(e){return(0,o.compareScenariosSuccess)(e.data)})))}))},pollComparisonEpic:function(e,t){return e.ofType(l.SET_OPEN_MENU_GROUP_ID).filter((function(e){return"Results"===(null==e?void 0:e.openMenuGroupId)})).switchMap((function(){return _t().Observable.timer(0,1e4).takeUntil(e.ofType(o.STOP_COMPARISON_POLLING)).switchMap((function(){return _t().Observable.concat(_t().Observable.of((0,o.addComparison)()))}))}))},addComparisonEpic:function(e,t){return e.ofType(o.ADD_COMPARISON).switchMap((function(){var e,n,r;return _t().Observable.from(L().get("/anuga/api/".concat(null===(e=t.getState())||void 0===e||null===(n=e.anuga)||void 0===n||null===(r=n.projectData)||void 0===r?void 0:r.id,"/comparison/available/")).catch((function(e){return e}))).filter((function(e){return(null==e?void 0:e.status)<=400})).switchMap((function(e){return Tt(e,t)}))}))}}})},368658:(e,t,n)=>{function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(197395).SHOW_NOTIFICATION,i=n(423570),u="INIT_ANUGA",s="SET_ANUGA_INPUT_MENU",c="SET_ANUGA_SCENARIO_MENU",p="SET_ANUGA_RESULT_MENU",d="SET_NETWORK_MENU",m="SET_REVIEW_PANEL",f="SET_PUBLICATION_PANEL",v="SET_ANUGA_PROJECT_DATA",g="SET_ANUGA_SCENARIO_DATA",y="SET_ANUGA_BOUNDARY_DATA",b="SET_ANUGA_FRICTION_DATA",_="SET_ANUGA_INFLOW_DATA",h="SET_ANUGA_STRUCTURE_DATA",E="SET_ANUGA_FULL_MESH_DATA",S="SET_ANUGA_MESH_REGION_DATA",w="SET_NETWORK_DATA",A="SET_LUMPED_CATCHMENT_DATA",T="SET_ANUGA_NODES_DATA",O="SET_ANUGA_LINKS_DATA",N="SET_PUBLICATION_DATA",F="CREATE_ANUGA_BOUNDARY",M="CREATE_ANUGA_FRICTION",C="CREATE_ANUGA_INFLOW",B="CREATE_ANUGA_STRUCTURE",P="CREATE_ANUGA_MESH_REGION",R="CREATE_NETWORK",I="CREATE_LUMPED_CATCHMENT",x="CREATE_NODES",D="CREATE_LINKS",L="CREATE_FIGURE",G="ADD_ANUGA_BOUNDARY",k="ADD_ANUGA_FRICTION",j="ADD_ANUGA_INFLOW",U="ADD_ANUGA_STRUCTURE",W="ADD_ANUGA_FULL_MESH",H="ADD_ANUGA_MESH_REGION",z="ADD_ANUGA_NETWORK",V="ADD_LUMPED_CATCHMENT",Y="ADD_NODES",K="ADD_LINKS",q="ADD_COMPARISON",Z="SET_ANUGA_ELEVATION_DATA",J="CREATE_ANUGA_ELEVATION_FROM_LAYER",X="SET_ADD_ANUGA_ELEVATION_DATA",$="ADD_ANUGA_SCENARIO",Q="RUN_ANUGA_SCENARIO",ee="RUN_ANUGA_SCENARIO_SUCCESS",te="RUN_NETWORK",ne="RUN_NETWORK_SUCCESS",re="SAVE_ANUGA_SCENARIO",oe="SAVE_ANUGA_SCENARIO_SUCCESS",le="SAVE_ANUGA_SCENARIO_ERROR",ae="DELETE_ANUGA_SCENARIO",ie="SHOW_ANUGA_SCENARIO_LOG",ue="SHOW_ANUGA_RUN_MENU",se="START_ANUGA_SCENARIO_POLLING",ce="STOP_ANUGA_SCENARIO_POLLING",pe="START_ANUGA_ELEVATION_POLLING",de="STOP_ANUGA_ELEVATION_POLLING",me="START_ANUGA_MODEL_CREATION_POLLING",fe="STOP_ANUGA_MODEL_CREATION_POLLING",ve="START_COMPARISON_POLLING",ge="STOP_COMPARISON_POLLING",ye="SET_COMPARISON_DATA",be="SET_ANUGA_POLLING_DATA",_e="UPDATE_ANUGA_SCENARIO",he="UPDATE_NETWORK",Ee="SELECT_ANUGA_SCENARIO",Se="SET_CREATING_ANUGA_LAYER",we="SET_ANUGA_SCENARIO_IS_LOADED",Ae="CANCEL_ANUGA_RUN",Te="UPDATE_COMPUTE_INSTANCE",Oe="UPDATE_COMPUTE_INSTANCE_SUCCESS",Ne="TOGGLE_SCENARIO_SELECTED",Fe="SHOW_MANAGE_ACCOUNT",Me="COMPARE_SCENARIOS",Ce="COMPARE_SCENARIOS_SUCCESS";e.exports={INIT_ANUGA:u,initAnuga:function(){return{type:u}},SET_ANUGA_INPUT_MENU:s,setAnugaInputMenu:function(e){return{type:s,visible:e}},SET_ANUGA_SCENARIO_MENU:c,setAnugaScenarioMenu:function(e){return{type:c,visible:e}},SET_ANUGA_RESULT_MENU:p,setAnugaResultMenu:function(e){return{type:p,visible:e}},SET_REVIEW_PANEL:m,setReviewPanel:function(e){return{type:m,visible:e}},SET_PUBLICATION_PANEL:f,setPublicationPanel:function(e){return{type:f,visible:e}},SET_ANUGA_PROJECT_DATA:v,setAnugaProjectData:function(e){return{type:v,data:e}},SET_ANUGA_SCENARIO_DATA:g,setAnugaScenarioData:function(e){return{type:g,scenarios:e}},SET_ANUGA_ELEVATION_DATA:Z,setAnugaElevationData:function(e){return{type:Z,data:e}},SET_ANUGA_BOUNDARY_DATA:y,setAnugaBoundaryData:function(e){return{type:y,data:e}},SET_ANUGA_FRICTION_DATA:b,setAnugaFrictionData:function(e){return{type:b,data:e}},SET_ANUGA_INFLOW_DATA:_,setAnugaInflowData:function(e){return{type:_,data:e}},SET_ANUGA_STRUCTURE_DATA:h,setAnugaStructureData:function(e){return{type:h,data:e}},SET_ANUGA_FULL_MESH_DATA:E,setAnugaFullMeshData:function(e){return{type:E,data:e}},SET_ANUGA_MESH_REGION_DATA:S,setAnugaMeshRegionData:function(e){return{type:S,data:e}},SET_NETWORK_DATA:w,setNetworkData:function(e){return{type:w,data:e}},SET_LUMPED_CATCHMENT_DATA:A,setCatchmentData:function(e){return{type:A,data:e}},SET_ANUGA_NODES_DATA:T,setAnugaNodesData:function(e){return{type:T,data:e}},SET_ANUGA_LINKS_DATA:O,setAnugaLinksData:function(e){return{type:O,data:e}},SET_PUBLICATION_DATA:N,setPublicationData:function(e){return{type:N,data:e}},CREATE_ANUGA_BOUNDARY:F,createAnugaBoundary:function(e){return{type:F,boundaryTitle:e}},CREATE_ANUGA_FRICTION:M,createAnugaFriction:function(e){return{type:M,frictionTitle:e}},CREATE_ANUGA_INFLOW:C,createAnugaInflow:function(e){return{type:C,inflowTitle:e}},CREATE_ANUGA_STRUCTURE:B,createAnugaStructure:function(e){return{type:B,structureTitle:e}},CREATE_ANUGA_MESH_REGION:P,createAnugaMeshRegion:function(e){return{type:P,meshRegionTitle:e}},CREATE_NETWORK:R,createNetwork:function(e){return{type:R,networkTitle:e}},CREATE_LUMPED_CATCHMENT:I,createCatchment:function(e){return{type:I,catchmentTitle:e}},CREATE_NODES:x,createNodes:function(e){return{type:x,nodesTitle:e}},CREATE_LINKS:D,createLinks:function(e){return{type:D,linksTitle:e}},CREATE_FIGURE:L,createFigure:function(e,t){return{type:L,figureTitle:e,publicationId:t}},ADD_ANUGA_BOUNDARY:G,addAnugaBoundary:function(){return{type:G}},ADD_ANUGA_FRICTION:k,addAnugaFriction:function(){return{type:k}},ADD_ANUGA_INFLOW:j,addAnugaInflow:function(){return{type:j}},ADD_ANUGA_STRUCTURE:U,addAnugaStructure:function(){return{type:U}},ADD_ANUGA_MESH_REGION:H,addAnugaMeshRegion:function(){return{type:H}},ADD_ANUGA_FULL_MESH:W,addAnugaFullMesh:function(){return{type:W}},ADD_NETWORK:z,addNetwork:function(){return{type:z}},ADD_LUMPED_CATCHMENT:V,addCatchment:function(){return{type:V}},ADD_NODES:Y,addNodes:function(){return{type:Y}},ADD_LINKS:K,addLinks:function(){return{type:K}},ADD_COMPARISON:q,addComparison:function(){return{type:q}},SET_ADD_ANUGA_ELEVATION_DATA:X,setAddAnugaElevation:function(e){return{type:X,visible:e}},CREATE_ANUGA_ELEVATION_FROM_LAYER:J,createAnugaElevationFromLayer:function(e,t){return{type:J,pk:e,title:t}},SAVE_ANUGA_SCENARIO:re,saveAnugaScenario:function(e){return{type:re,scenario:e}},ADD_ANUGA_SCENARIO:$,addAnugaScenario:function(){return{type:$}},SAVE_ANUGA_SCENARIO_SUCCESS:oe,saveAnugaScenarioSuccess:function(e){return function(t){t({type:a,title:"Success",autoDismiss:6,position:"tc",message:"Scenario ID: ".concat(e.id," building"),uid:i(),level:"success"}),t({type:oe,scenario:e})}},SAVE_ANUGA_SCENARIO_ERROR:le,saveAnugaScenarioError:function(e){return function(t){t({type:a,title:"Error",autoDismiss:60,position:"tc",message:"Error saving scenario: ".concat(JSON.stringify(null==e?void 0:e.data)),uid:i(),level:"error"}),t({type:le,error:e})}},DELETE_ANUGA_SCENARIO:ae,deleteAnugaScenario:function(e){return{type:ae,scenario:e}},DELETE_ANUGA_SCENARIO_SUCCESS:"DELETE_ANUGA_SCENARIO_SUCCESS",deleteAnugaScenarioSuccess:function(e){return function(t){t({type:a,title:"Success",autoDismiss:6,position:"tc",message:"Scenario ID: ".concat(e.id," deleted"),uid:i(),level:"info"}),t({type:u})}},RUN_ANUGA_SCENARIO:Q,runAnugaScenario:function(e,t){return{type:Q,scenario:e,computeInstanceId:t}},RUN_ANUGA_SCENARIO_SUCCESS:ee,runAnugaScenarioSuccess:function(e){return function(t){t({type:a,title:"Success",autoDismiss:6,position:"tc",message:"Scenario running",uid:i(),level:"success"}),t({type:ee,scenario:e})}},SET_NETWORK_MENU:d,setNetworkMenu:function(e){return{type:d,visible:e}},RUN_NETWORK:te,runNetwork:function(e){return{type:te,network:e}},RUN_NETWORK_SUCCESS:ne,runNetworkSuccess:function(e){return function(t){t({type:a,title:"Success",autoDismiss:6,position:"tc",message:"Network Calculated",uid:i(),level:"success"}),t({type:ne,network:e})}},UPDATE_NETWORK:he,updateNetwork:function(e,t){return{type:he,network:o(o({},e),t)}},UPDATE_ANUGA_SCENARIO:_e,updateAnugaScenario:function(e,t){return{type:_e,scenario:o(o({},e),t)}},SELECT_ANUGA_SCENARIO:Ee,selectAnugaScenario:function(e){return{type:Ee,scenario:e}},SHOW_ANUGA_SCENARIO_LOG:ie,showAnugaScenarioLog:function(e){return{type:ie,scenarioId:e}},SHOW_ANUGA_RUN_MENU:ue,showAnugaRunMenu:function(e){return{type:ue,visible:e}},START_ANUGA_SCENARIO_POLLING:se,startAnugaScenarioPolling:function(){return{type:se}},STOP_ANUGA_SCENARIO_POLLING:ce,stopAnugaScenarioPolling:function(){return{type:ce}},START_ANUGA_ELEVATION_POLLING:pe,startAnugaElevationPolling:function(){return{type:pe}},STOP_ANUGA_ELEVATION_POLLING:de,stopAnugaElevationPolling:function(){return{type:de}},START_ANUGA_MODEL_CREATION_POLLING:me,startAnugaModelCreationPolling:function(){return{type:me}},STOP_ANUGA_MODEL_CREATION_POLLING:fe,stopAnugaModelCreationPolling:function(){return{type:fe}},START_COMPARISON_POLLING:ve,startComparisonPolling:function(){return{type:ve}},STOP_COMPARISON_POLLING:ge,stopComparisonPolling:function(){return{type:ge}},SET_COMPARISON_DATA:ye,setComparisonData:function(e){return{type:ye,data:e}},SET_ANUGA_POLLING_DATA:be,setAnugaPollingData:function(e){return{type:be,scenarios:e}},SET_CREATING_ANUGA_LAYER:Se,setCreatingAnugaLayer:function(e){return{type:Se,isCreatingAnugaLayer:e}},SET_ANUGA_SCENARIO_IS_LOADED:we,setAnugaScenarioResultsLoaded:function(e,t){return{type:we,scenarioId:e,isLoaded:t}},CANCEL_ANUGA_RUN:Ae,cancelAnugaRun:function(e,t){return{type:Ae,scenario:e,computeInstanceId:t}},UPDATE_COMPUTE_INSTANCE:Te,updateComputeInstance:function(){return{type:Te}},UPDATE_COMPUTE_INSTANCE_SUCCESS:Oe,updateComputeInstanceSuccess:function(e){return{type:Oe,data:e}},TOGGLE_SCENARIO_SELECTED:Ne,toggleScenarioSelected:function(e){return{type:Ne,scenario:e}},SHOW_MANAGE_ACCOUNT:Fe,showManageAccount:function(e){return{type:Fe,visible:e}},COMPARE_SCENARIOS:Me,compareScenarios:function(e){return{type:Me,scenarios:e}},COMPARE_SCENARIOS_SUCCESS:Ce,compareScenariosSuccess:function(e){return function(t){t({type:a,title:"Success",autoDismiss:6,position:"tc",message:"Scenario comparison started",uid:i(),level:"success"}),t({type:Ce,scenarios:e})}}}},380066:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>je});var r=n(322843),o=n(652948);function l(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c={showOutlets:!0,showFootprints:!0,showWatersheds:!0,bmpTypes:[],groupProfiles:[],allBmps:[],statuses:[],targets:[],visibleBmpForm:!1,visibleTargetForm:!1,creatingNewBmp:!1,drawingBmpLayerName:!1,bmpFilterMode:"type",expandedFilter:null,priorities:[{id:0,label:"Not Assigned",value:0,visibility:!0},{id:1,label:"Critical",value:1,visibility:!0},{id:2,label:"Normal",value:2,visibility:!0},{id:3,label:"Low",value:3,visibility:!0}]},p=n(124852),d=n.n(p),m=n(171703),f=n(480681),v=n(351288),g=n(433528),y=n(921914),b=n(95797);function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:",";try{t=Math.abs(t),t=isNaN(t)?2:t;var o=e<0?"-":"",l=parseInt(e=Math.abs(Number(e)||0).toFixed(t)).toString(),a=l.length>3?l.length%3:0;return o+(a?l.substr(0,a)+r:"")+l.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+r)+(t?n+Math.abs(e-l).toFixed(t).slice(2):"")}catch(e){console.log(e)}}var h=function(e){var t,n;return null!=e&&null!==(t=e.swamm)&&void 0!==t&&t.bmpTypes?null==e||null===(n=e.swamm)||void 0===n?void 0:n.bmpTypes.filter((function(e,t,n){return n.findIndex((function(t){return t.name===e.name}))===t})):[]},E=n(580416);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return(A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function T(e,t){if(t&&("object"===S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M=n(45697),C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(a,e);var t,n,r,o,l=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=N(r);if(o){var n=N(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return T(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=l.call(this,e)).handleChange=t.handleChange.bind(O(t)),t.handleBmpChange=t.handleBmpChange.bind(O(t)),t.handleGroupProfileChange=t.handleGroupProfileChange.bind(O(t)),t.state={},t}return t=a,(n=[{key:"componentDidMount",value:function(){this.props.setOpenMenuGroupId(null),0!==Object.keys(this.props.storedBmpForm).length||this.props.creatingNewBmp||(this.props.purgeMapInfoResults(),this.props.setMenuGroup(null))}},{key:"componentDidUpdate",value:function(){0===Object.keys(this.props.storedBmpForm).length&&!this.props.creatingNewBmp&&this.props.updatingBmp&&this.props.makeExistingBmpForm(this.props.updatingBmp)}},{key:"render",value:function(){var e,t,n,r,o,l,a,i,u,s,c,p,m,v,g,y,b,_,h,E,S,w,A,T,O,N,F,M,C,B,P,R,I,x,D,L,G,k,j,U,W,H,z,V,Y,K,q,Z,J,X,$,Q,ee,te,ne,re,oe,le,ae,ie,ue,se,ce,pe,de,me,fe,ve,ge,ye,be,_e,he,Ee,Se,we,Ae,Te,Oe,Ne,Fe,Me,Ce,Be,Pe,Re,Ie,xe,De,Le,Ge,ke,je,Ue,We,He,ze,Ve,Ye,Ke,qe,Ze,Je,Xe,$e,Qe,et,tt,nt,rt,ot,lt,at,it,ut,st,ct,pt,dt,mt,ft,vt,gt,yt,bt,_t,ht,Et,St,wt,At,Tt,Ot,Nt,Ft,Mt,Ct,Bt,Pt,Rt,It,xt,Dt,Lt,Gt,kt,jt,Ut,Wt,Ht,zt,Vt,Yt,Kt,qt,Zt=this;return d().createElement("div",{id:"swamm-bmp-form-panel",className:"simple-view-panel",style:{top:"70px",display:"flex",backgroundColor:"#2b5994f2"}},d().createElement("form",{className:"menu-rows-container"},d().createElement("div",{className:"row menu-row-header",style:{height:"40px",textAlign:"left",fontSize:"large"}},this.props.storedBmpForm.id?"Edit BMP "+this.props.storedBmpForm.id+": "+(null===(e=this.props.storedBmpForm)||void 0===e||null===(t=e.type_data)||void 0===t?void 0:t.name):"Create a new BMP",d().createElement("span",{className:"btn glyphicon glyphicon-remove legend-close",onClick:function(){Zt.props.clearBmpForm(),Zt.props.setComplexBmpForm(!1),Zt.refreshBmpLayers()}})),d().createElement("div",{style:{padding:"20px",textAlign:"left"}},this.props.storedBmpForm.bmpName?d().createElement("h5",null,this.props.storedBmpForm.bmpName):null,d().createElement("div",null,this.props.requiresOutlet||this.props.complexBmpForm?d().createElement(d().Fragment,null,d().createElement("div",{style:{textAlign:"left"}},"Outlet Point:"),null!==(n=this.props.storedBmpForm)&&void 0!==n&&n.outlet_fid?d().createElement("div",null,d().createElement(f.Button,{className:"pull-right",bsStyle:"info",style:{opacity:"0.7"},onClick:function(){var e,t,n,r;Zt.props.showLoadingBmp(!0),Zt.props.toggleLayer(null===(e=Zt.props.bmpOutletLayer)||void 0===e?void 0:e.id,!0),Zt.drawBmpStep1((null===(t=Zt.props)||void 0===t||null===(n=t.projectData)||void 0===n?void 0:n.code)+"_bmp_outlet",null===(r=Zt.props.storedBmpForm)||void 0===r?void 0:r.outlet_fid)}},"Edit")):d().createElement("div",null,d().createElement(f.Button,{disabled:!(null!==(r=this.props.storedBmpForm)&&void 0!==r&&r.group_profile_id&&this.props.storedBmpForm.bmpName),bsStyle:null!==(o=this.props.storedBmpForm)&&void 0!==o&&o.group_profile_id&&this.props.storedBmpForm.bmpName?"success":"default",style:{opacity:"0.7"},onClick:function(){var e,t;Zt.props.showLoadingBmp(!0),Zt.props.toggleLayer(null===(e=Zt.props.bmpOutletLayer)||void 0===e?void 0:e.id,!0),Zt.drawBmpStep1((null===(t=Zt.props.projectData)||void 0===t?void 0:t.code)+"_bmp_outlet",null)}},"Locate Outlet"))):null,this.props.requiresFootprint||this.props.complexBmpForm?d().createElement(d().Fragment,null,d().createElement("div",{style:{textAlign:"left"}},"Footprint:"),null!==(l=this.props.storedBmpForm)&&void 0!==l&&l.footprint_fid?d().createElement(d().Fragment,null,d().createElement("div",null,d().createElement(f.FormControl,{inline:"true",readOnly:"true",type:"string",value:null!==(a=this.props.storedBmpForm)&&void 0!==a&&a.calculated_footprint_area?(null===(i=this.props.storedBmpForm)||void 0===i||null===(u=i.calculated_footprint_area)||void 0===u?void 0:u.toFixed(2))+" acres":""})),d().createElement("div",null,d().createElement(f.Button,{className:"pull-right",bsStyle:"info",style:{opacity:"0.7"},onClick:function(){var e,t,n,r;Zt.props.showLoadingBmp(!0),Zt.props.toggleLayer(null===(e=Zt.props.bmpFootprintLayer)||void 0===e?void 0:e.id,!0),Zt.drawBmpStep1((null===(t=Zt.props)||void 0===t||null===(n=t.projectData)||void 0===n?void 0:n.code)+"_bmp_footprint",null===(r=Zt.props.storedBmpForm)||void 0===r?void 0:r.footprint_fid)}},"Edit"))):d().createElement(d().Fragment,null,d().createElement("div",null,d().createElement(f.Button,{disabled:!(null!==(s=this.props.storedBmpForm)&&void 0!==s&&s.group_profile_id&&this.props.storedBmpForm.bmpName),bsStyle:null!==(c=this.props.storedBmpForm)&&void 0!==c&&c.group_profile_id&&this.props.storedBmpForm.bmpName?"success":"default",style:{opacity:"0.7"},onClick:function(){var e,t,n;Zt.props.showLoadingBmp(!0),Zt.props.toggleLayer(null===(e=Zt.props.bmpFootprintLayer)||void 0===e?void 0:e.id,!0),Zt.drawBmpStep1((null===(t=Zt.props)||void 0===t||null===(n=t.projectData)||void 0===n?void 0:n.code)+"_bmp_footprint")}},"Draw footprint")))):null,!this.props.requiresWatershed&&!this.props.complexBmpForm||this.props.watershedIsFootprint?null:d().createElement(d().Fragment,null,d().createElement("div",{style:{textAlign:"left"}},"Watershed:"),null!==(p=this.props.storedBmpForm)&&void 0!==p&&p.watershed_fid?d().createElement(d().Fragment,null,d().createElement("div",null,null!==(m=this.props.storedBmpForm)&&void 0!==m&&m.calculated_watershed_area?(null===(v=this.props.storedBmpForm)||void 0===v||null===(g=v.calculated_watershed_area)||void 0===g?void 0:g.toFixed(2))+" acres":""),d().createElement("div",null,d().createElement(f.Button,{className:"pull-right",bsStyle:"info",style:{opacity:"0.7"},onClick:function(){var e,t,n,r;Zt.props.showLoadingBmp(!0),Zt.props.toggleLayer(null===(e=Zt.props.bmpWatershedLayer)||void 0===e?void 0:e.id,!0),Zt.drawBmpStep1((null===(t=Zt.props)||void 0===t||null===(n=t.projectData)||void 0===n?void 0:n.code)+"_bmp_watershed",null===(r=Zt.props.storedBmpForm)||void 0===r?void 0:r.watershed_fid)}},"Edit"))):d().createElement(d().Fragment,null,d().createElement("div",null,d().createElement(f.Button,{disabled:!(null!==(y=this.props.storedBmpForm)&&void 0!==y&&y.group_profile_id&&this.props.storedBmpForm.bmpName),bsStyle:null!==(b=this.props.storedBmpForm)&&void 0!==b&&b.group_profile_id&&this.props.storedBmpForm.bmpName?"success":"default",style:{opacity:"0.7"},onClick:function(){var e,t,n;Zt.props.showLoadingBmp(!0),Zt.props.toggleLayer(null===(e=Zt.props.bmpWatershedLayer)||void 0===e?void 0:e.id,!0),Zt.drawBmpStep1(null===(t=Zt.props)||void 0===t||null===(n=t.bmpWatershedLayer)||void 0===n?void 0:n.name)}},"Draw watershed")))),d().createElement("div",{style:{textAlign:"left",marginTop:"3px"}},"Field Identifier:"),d().createElement("div",null,d().createElement("input",{type:"text",name:"field_identifier",value:null===(_=this.props.storedBmpForm)||void 0===_?void 0:_.field_identifier,onChange:this.handleChange,placeholder:"optional"})),d().createElement("div",{style:{textAlign:"left"}},"Owner details:"),d().createElement("div",null,d().createElement("input",{type:"text",name:"owner_identifier",value:null===(h=this.props.storedBmpForm)||void 0===h?void 0:h.owner_identifier,onChange:this.handleChange,placeholder:"optional"})),this.props.complexBmpForm?d().createElement(d().Fragment,null,d().createElement(f.FormGroup,{controlId:"formControlsSelectGroupProfile",bsSize:"small"},d().createElement(f.Col,{componentClass:f.ControlLabel,sm:3,style:{textAlign:"left"}},"Organization"),d().createElement(f.Col,{sm:8},d().createElement(f.FormControl,{inline:"true",componentClass:"select",name:"group_profile",value:null===(E=this.props.storedBmpForm)||void 0===E||null===(S=E.group_profile)||void 0===S?void 0:S.pk,onChange:this.handleGroupProfileChange,placeholder:null===(w=this.props.storedBmpForm)||void 0===w||null===(A=w.group_profile)||void 0===A?void 0:A.title},this.props.allowedGroupProfiles.map((function(e){return d().createElement("option",{key:e.pk,value:null==e?void 0:e.pk},e.title)}))),d().createElement(f.FormControl.Feedback,null))),d().createElement(f.FormGroup,{controlId:"formControlsSelectStatus",bsSize:"small"},d().createElement(f.Col,{componentClass:f.ControlLabel,sm:3,style:{textAlign:"left"}},"BMP Status"),d().createElement(f.Col,{sm:8},d().createElement(f.FormControl,{inline:"true",componentClass:"select",name:"status",value:null===(T=this.props.storedBmpForm)||void 0===T?void 0:T.status,onChange:this.handleChange},d().createElement("option",{key:"Unknown",value:"Unknown"},"Unknown"),this.props.statuses.filter((function(e){return"Unknown"!==e.name})).map((function(e){return d().createElement("option",{key:e.name,value:e.name},e.name)}))),d().createElement(f.FormControl.Feedback,null))),d().createElement(f.FormGroup,{controlId:"formControlsSelectPriority",bsSize:"small"},d().createElement(f.Col,{componentClass:f.ControlLabel,sm:3,style:{textAlign:"left"}},"BMP Priority"),d().createElement(f.Col,{sm:8},d().createElement(f.FormControl,{inline:"true",componentClass:"select",name:"priority",value:null===(O=this.props.storedBmpForm)||void 0===O||null===(N=O.priority)||void 0===N?void 0:N.id,onChange:this.handleChange},this.props.priorities.map((function(e){return d().createElement("option",{key:e.id,value:null==e?void 0:e.value},e.label)}))),d().createElement(f.FormControl.Feedback,null))),d().createElement(f.FormGroup,{controlId:"n_surface_red_percent",validationState:this.validateRatio("n_surface_red_percent"),bsSize:"small"},d().createElement(f.Col,{componentClass:f.ControlLabel,sm:6},"Surface Nitrogen Reduction Percentage"),d().createElement(f.Col,{sm:5},d().createElement(f.FormControl,{inline:"true",type:"number",step:.01,precision:2,name:"override_n_surface_red_percent",value:null===(F=this.props.storedBmpForm)||void 0===F?void 0:F.override_n_surface_red_percent,onChange:this.handleChange}),d().createElement(f.FormControl.Feedback,null))),d().createElement(f.FormGroup,{controlId:"p_surface_red_percent",validationState:this.validateRatio("p_surface_red_percent"),bsSize:"small"},d().createElement(f.Col,{componentClass:f.ControlLabel,sm:6},"Surface Phosphorus Reduction Percentage"),d().createElement(f.Col,{sm:5},d().createElement(f.FormControl,{inline:"true",type:"number",step:.01,precision:2,name:"override_p_surface_red_percent",value:null===(M=this.props.storedBmpForm)||void 0===M?void 0:M.override_p_surface_red_percent,onChange:this.handleChange}),d().createElement(f.FormControl.Feedback,null))),d().createElement(f.FormGroup,{controlId:"s_surface_red_percent",validationState:this.validateRatio("s_surface_red_percent"),bsSize:"small"},d().createElement(f.Col,{componentClass:f.ControlLabel,sm:6},"Surface Sediment Reduction Percentage"),d().createElement(f.Col,{sm:5},d().createElement(f.FormControl,{inline:"true",type:"number",step:.01,precision:2,name:"override_s_surface_red_percent",value:null===(C=this.props.storedBmpForm)||void 0===C?void 0:C.override_s_surface_red_percent,onChange:this.handleChange}),d().createElement(f.FormControl.Feedback,null))),d().createElement(f.FormGroup,{controlId:"n_tiled_red_percent",validationState:this.validateRatio("n_tiled_red_percent"),bsSize:"small"},d().createElement(f.Col,{componentClass:f.ControlLabel,sm:6},"Tiled Nitrogen Reduction Percentage"),d().createElement(f.Col,{sm:5},d().createElement(f.FormControl,{inline:"true",type:"number",step:.01,precision:2,name:"override_n_tiled_red_percent",value:null===(B=this.props.storedBmpForm)||void 0===B?void 0:B.override_n_tiled_red_percent,onChange:this.handleChange}),d().createElement(f.FormControl.Feedback,null))),d().createElement(f.FormGroup,{controlId:"p_tiled_red_percent",validationState:this.validateRatio("p_tiled_red_percent"),bsSize:"small"},d().createElement(f.Col,{componentClass:f.ControlLabel,sm:6},"Tiled Phospohorus Reduction Percentage"),d().createElement(f.Col,{sm:5},d().createElement(f.FormControl,{inline:"true",type:"number",step:.01,precision:2,name:"override_p_tiled_red_percent",value:null===(P=this.props.storedBmpForm)||void 0===P?void 0:P.override_p_tiled_red_percent,onChange:this.handleChange}),d().createElement(f.FormControl.Feedback,null))),d().createElement(f.FormGroup,{controlId:"n_erosion_red_percent",validationState:this.validateRatio("n_erosion_red_percent"),bsSize:"small"},d().createElement(f.Col,{componentClass:f.ControlLabel,sm:6},"Erosion Nitrogen Reduction Percentage"),d().createElement(f.Col,{sm:5},d().createElement(f.FormControl,{inline:"true",type:"number",step:.01,precision:2,name:"override_n_erosion_red_percent",value:null===(R=this.props.storedBmpForm)||void 0===R?void 0:R.override_n_erosion_red_percent,onChange:this.handleChange}),d().createElement(f.FormControl.Feedback,null))),d().createElement(f.FormGroup,{controlId:"p_erosion_red_percent",validationState:this.validateRatio("p_erosion_red_percent"),bsSize:"small"},d().createElement(f.Col,{componentClass:f.ControlLabel,sm:6},"Erosion Phospohorus Reduction Percentage"),d().createElement(f.Col,{sm:5},d().createElement(f.FormControl,{inline:"true",type:"number",step:.01,precision:2,name:"override_p_erosion_red_percent",value:null===(I=this.props.storedBmpForm)||void 0===I?void 0:I.override_p_erosion_red_percent,onChange:this.handleChange}),d().createElement(f.FormControl.Feedback,null))),d().createElement(f.FormGroup,{controlId:"s_erosion_red_percent",validationState:this.validateRatio("s_erosion_red_percent"),bsSize:"small"},d().createElement(f.Col,{componentClass:f.ControlLabel,sm:6},"Erosion Sediment Reduction Percentage"),d().createElement(f.Col,{sm:5},d().createElement(f.FormControl,{inline:"true",type:"number",step:.01,precision:2,name:"override_s_erosion_red_percent",value:null===(x=this.props.storedBmpForm)||void 0===x?void 0:x.override_s_erosion_red_percent,onChange:this.handleChange}),d().createElement(f.FormControl.Feedback,null))),d().createElement(f.FormGroup,{controlId:"cost_base",validationState:this.validateCost("cost_base"),bsSize:"small"},d().createElement(f.Col,{componentClass:f.ControlLabel,sm:6},"Base Cost ($)"),d().createElement(f.Col,{sm:5},d().createElement(f.FormControl,{inline:"true",type:"number",step:.01,precision:2,name:"override_cost_base",value:null===(D=this.props.storedBmpForm)||void 0===D?void 0:D.override_cost_base,onChange:this.handleChange}),d().createElement(f.FormControl.Feedback,null))),d().createElement(f.FormGroup,{controlId:"cost_rate_per_footprint_area",validationState:this.validateCost("cost_rate_per_footprint_area"),bsSize:"small"},d().createElement(f.Col,{componentClass:f.ControlLabel,sm:6},"Footprint Cost ($/acre)"),d().createElement(f.Col,{sm:5},d().createElement(f.FormControl,{inline:"true",type:"number",step:.01,precision:2,name:"override_cost_rate_per_footprint_area",value:null===(L=this.props.storedBmpForm)||void 0===L?void 0:L.override_cost_rate_per_footprint_area,onChange:this.handleChange}),d().createElement(f.FormControl.Feedback,null))),d().createElement(f.FormGroup,{controlId:"cost_rate_per_watershed_area",validationState:this.validateCost("cost_rate_per_watershed_area"),bsSize:"small"},d().createElement(f.Col,{componentClass:f.ControlLabel,sm:6},"Watershed Cost ($/acre)"),d().createElement(f.Col,{sm:5},d().createElement(f.FormControl,{inline:"true",type:"number",step:.01,precision:2,name:"override_cost_rate_per_watershed_area",value:null===(G=this.props.storedBmpForm)||void 0===G?void 0:G.override_cost_rate_per_watershed_area,onChange:this.handleChange}),d().createElement(f.FormControl.Feedback,null)))):null,d().createElement("div",{style:{padding:"20px",textAlign:"left"}},"Notes"),d().createElement("div",null,d().createElement("input",{type:"textarea",name:"notes",value:null===(k=this.props.storedBmpForm)||void 0===k?void 0:k.notes,onChange:this.handleChange})))),d().createElement("div",{style:{padding:"10px"}},null===(j=this.props.storedBmpForm)||void 0===j||!j.id||this.props.changingBmpType?d().createElement(d().Fragment,null,this.props.changingBmpType?d().createElement(f.Button,{bsStyle:"success",bsSize:"small",style:{opacity:"0.7",position:"absolute",bottom:"20px",right:"220px",minWidth:"80px"},onClick:function(){return Zt.props.setChangingBmpType(!1)}},"Accept"):null,d().createElement("div",{style:{textAlign:"left"}},this.props.storedBmpForm.bmpName?null:d().createElement("h5",null,"Select a BMP Type..."),null===(U=this.props.bmpTypeGroups)||void 0===U?void 0:U.map((function(e){return d().createElement("div",{key:"group-".concat(e),style:{textAlign:"left",marginLeft:0,marginBottom:"3px",padding:"3px",border:"1px solid white"}},d().createElement("div",{style:{marginLeft:"15px"}},e[1]),Zt.props.bmpTypes.filter((function(t){return t.group_name===e[0]})).map((function(e){return d().createElement("div",{key:"bmpType-".concat(e.name)},d().createElement("input",{id:"bmp-type-selector-box-".concat(e.name),type:"radio",name:"bmpName",value:e.name,onChange:Zt.handleBmpChange}),d().createElement("label",{htmlFor:"bmp-type-selector-box-".concat(e.name),style:{marginLeft:"6px",verticalAlign:"middle"}},e.name))})))})))):this.props.complexBmpForm?d().createElement(d().Fragment,null,d().createElement(f.Table,{bordered:!0,condensed:!0,hover:!0,className:"text-right",style:{tableLayout:"fixed"}},d().createElement("thead",null,d().createElement("tr",null,d().createElement("th",{style:{width:"30%"}},"Results"),d().createElement("th",{style:{width:"13%"}},"Surface"),d().createElement("th",{style:{width:"13%"}},"Tiled"),d().createElement("th",{style:{width:"13%","word-break":"break-word"}},"Gully/Lake/ Streambank"),d().createElement("th",{style:{width:"10%"}},"Total"),this.props.watershedIsFootprint?d().createElement(d().Fragment,null,d().createElement("th",{style:{width:"10%"}},"Per Acre"),d().createElement("th",{style:{width:"11%"}})):d().createElement("th",{style:{width:"11%"}}))),d().createElement("tbody",null,d().createElement("tr",{style:{borderTop:"4px solid lightgrey"}},d().createElement("td",null,"Nitrogen load previous: "),d().createElement("td",null,null===(W=this.props.storedBmpForm)||void 0===W||null===(H=W.surface_previous_n_load)||void 0===H?void 0:H.toFixed(0)),d().createElement("td",null,null===(z=this.props.storedBmpForm)||void 0===z||null===(V=z.tiled_previous_n_load)||void 0===V?void 0:V.toFixed(0)),d().createElement("td",null,parseFloat(null===(Y=this.props.storedBmpForm)||void 0===Y||null===(K=Y.erosion_previous_n_load)||void 0===K?void 0:K.toPrecision(3))),d().createElement("td",null,null===(q=this.props.storedBmpForm)||void 0===q||null===(Z=q.total_previous_n_load)||void 0===Z?void 0:Z.toFixed(0)),this.props.watershedIsFootprint?d().createElement("td",null,((null===(J=this.props.storedBmpForm)||void 0===J?void 0:J.total_previous_n_load)/(null===(X=this.props.storedBmpForm)||void 0===X?void 0:X.calculated_footprint_area)).toFixed(1)):null,d().createElement("td",{className:"text-left"},"lbs/year")),d().createElement("tr",null,d().createElement("td",null,"Nitrogen load reduction: "),d().createElement("td",null,null===($=this.props.storedBmpForm)||void 0===$||null===(Q=$.surface_n_load_reduction)||void 0===Q?void 0:Q.toFixed(0)),d().createElement("td",null,null===(ee=this.props.storedBmpForm)||void 0===ee||null===(te=ee.tiled_n_load_reduction)||void 0===te?void 0:te.toFixed(0)),d().createElement("td",null,parseFloat(null===(ne=this.props.storedBmpForm)||void 0===ne||null===(re=ne.erosion_n_load_reduction)||void 0===re?void 0:re.toPrecision(3))),d().createElement("td",null,null===(oe=this.props.storedBmpForm)||void 0===oe||null===(le=oe.total_n_load_reduction)||void 0===le?void 0:le.toFixed(0)),this.props.watershedIsFootprint?d().createElement("td",null,((null===(ae=this.props.storedBmpForm)||void 0===ae?void 0:ae.total_n_load_reduction)/(null===(ie=this.props.storedBmpForm)||void 0===ie?void 0:ie.calculated_footprint_area)).toFixed(1)):null,d().createElement("td",{className:"text-left"},"lbs/year")),d().createElement("tr",null,d().createElement("td",null,"Nitrogen load new: "),d().createElement("td",null,null===(ue=this.props.storedBmpForm)||void 0===ue||null===(se=ue.surface_new_n_load)||void 0===se?void 0:se.toFixed(0)),d().createElement("td",null,null===(ce=this.props.storedBmpForm)||void 0===ce||null===(pe=ce.tiled_new_n_load)||void 0===pe?void 0:pe.toFixed(0)),d().createElement("td",null,parseFloat(null===(de=this.props.storedBmpForm)||void 0===de||null===(me=de.erosion_new_n_load)||void 0===me?void 0:me.toPrecision(3))),d().createElement("td",null,null===(fe=this.props.storedBmpForm)||void 0===fe||null===(ve=fe.total_new_n_load)||void 0===ve?void 0:ve.toFixed(0)),this.props.watershedIsFootprint?d().createElement("td",null,((null===(ge=this.props.storedBmpForm)||void 0===ge?void 0:ge.total_new_n_load)/(null===(ye=this.props.storedBmpForm)||void 0===ye?void 0:ye.calculated_footprint_area)).toFixed(1)):null,d().createElement("td",{className:"text-left"},"lbs/year")),d().createElement("tr",{style:{borderTop:"4px solid lightgrey"}},d().createElement("td",null,"Phosphorus load previous: "),d().createElement("td",null,null===(be=this.props.storedBmpForm)||void 0===be||null===(_e=be.surface_previous_p_load)||void 0===_e?void 0:_e.toFixed(0)),d().createElement("td",null,null===(he=this.props.storedBmpForm)||void 0===he||null===(Ee=he.tiled_previous_p_load)||void 0===Ee?void 0:Ee.toFixed(0)),d().createElement("td",null,parseFloat(null===(Se=this.props.storedBmpForm)||void 0===Se||null===(we=Se.erosion_previous_p_load)||void 0===we?void 0:we.toPrecision(3))),d().createElement("td",null,null===(Ae=this.props.storedBmpForm)||void 0===Ae||null===(Te=Ae.total_previous_p_load)||void 0===Te?void 0:Te.toFixed(0)),this.props.watershedIsFootprint?d().createElement("td",null,((null===(Oe=this.props.storedBmpForm)||void 0===Oe?void 0:Oe.total_previous_p_load)/(null===(Ne=this.props.storedBmpForm)||void 0===Ne?void 0:Ne.calculated_footprint_area)).toFixed(1)):null,d().createElement("td",{className:"text-left"},"lbs/year")),d().createElement("tr",null,d().createElement("td",null,"Phosphorus load reduction: "),d().createElement("td",null,null===(Fe=this.props.storedBmpForm)||void 0===Fe||null===(Me=Fe.surface_p_load_reduction)||void 0===Me?void 0:Me.toFixed(0)),d().createElement("td",null,null===(Ce=this.props.storedBmpForm)||void 0===Ce||null===(Be=Ce.tiled_p_load_reduction)||void 0===Be?void 0:Be.toFixed(0)),d().createElement("td",null,parseFloat(null===(Pe=this.props.storedBmpForm)||void 0===Pe||null===(Re=Pe.erosion_p_load_reduction)||void 0===Re?void 0:Re.toPrecision(3))),d().createElement("td",null,null===(Ie=this.props.storedBmpForm)||void 0===Ie||null===(xe=Ie.total_p_load_reduction)||void 0===xe?void 0:xe.toFixed(0)),this.props.watershedIsFootprint?d().createElement("td",null,((null===(De=this.props.storedBmpForm)||void 0===De?void 0:De.total_p_load_reduction)/(null===(Le=this.props.storedBmpForm)||void 0===Le?void 0:Le.calculated_footprint_area)).toFixed(1)):null,d().createElement("td",{className:"text-left"},"lbs/year")),d().createElement("tr",null,d().createElement("td",null,"Phosphorus load new: "),d().createElement("td",null,null===(Ge=this.props.storedBmpForm)||void 0===Ge||null===(ke=Ge.surface_new_p_load)||void 0===ke?void 0:ke.toFixed(0)),d().createElement("td",null,null===(je=this.props.storedBmpForm)||void 0===je||null===(Ue=je.tiled_new_p_load)||void 0===Ue?void 0:Ue.toFixed(0)),d().createElement("td",null,parseFloat(null===(We=this.props.storedBmpForm)||void 0===We||null===(He=We.erosion_new_p_load)||void 0===He?void 0:He.toPrecision(3))),d().createElement("td",null,null===(ze=this.props.storedBmpForm)||void 0===ze||null===(Ve=ze.total_new_p_load)||void 0===Ve?void 0:Ve.toFixed(0)),this.props.watershedIsFootprint?d().createElement("td",null,((null===(Ye=this.props.storedBmpForm)||void 0===Ye?void 0:Ye.total_new_p_load)/(null===(Ke=this.props.storedBmpForm)||void 0===Ke?void 0:Ke.calculated_footprint_area)).toFixed(1)):null,d().createElement("td",{className:"text-left"},"lbs/year")),d().createElement("tr",{style:{borderTop:"4px solid lightgrey"}},d().createElement("td",null,"Sediment load previous: "),d().createElement("td",null,null===(qe=this.props.storedBmpForm)||void 0===qe||null===(Ze=qe.surface_previous_s_load)||void 0===Ze?void 0:Ze.toFixed(0)),d().createElement("td",null,null===(Je=this.props.storedBmpForm)||void 0===Je||null===(Xe=Je.tiled_previous_s_load)||void 0===Xe?void 0:Xe.toFixed(0)),d().createElement("td",null,parseFloat(null===($e=this.props.storedBmpForm)||void 0===$e||null===(Qe=$e.erosion_previous_s_load)||void 0===Qe?void 0:Qe.toPrecision(3))),d().createElement("td",null,null===(et=this.props.storedBmpForm)||void 0===et||null===(tt=et.total_previous_s_load)||void 0===tt?void 0:tt.toFixed(0)),this.props.watershedIsFootprint?d().createElement("td",null,((null===(nt=this.props.storedBmpForm)||void 0===nt?void 0:nt.total_previous_s_load)/(null===(rt=this.props.storedBmpForm)||void 0===rt?void 0:rt.calculated_footprint_area)).toFixed(1)):null,d().createElement("td",{className:"text-left"},"tons/year")),d().createElement("tr",null,d().createElement("td",null,"Sediment load reduction: "),d().createElement("td",null,null===(ot=this.props.storedBmpForm)||void 0===ot||null===(lt=ot.surface_s_load_reduction)||void 0===lt?void 0:lt.toFixed(0)),d().createElement("td",null,null===(at=this.props.storedBmpForm)||void 0===at||null===(it=at.tiled_s_load_reduction)||void 0===it?void 0:it.toFixed(0)),d().createElement("td",null,parseFloat(null===(ut=this.props.storedBmpForm)||void 0===ut||null===(st=ut.erosion_s_load_reduction)||void 0===st?void 0:st.toPrecision(3))),d().createElement("td",null,null===(ct=this.props.storedBmpForm)||void 0===ct||null===(pt=ct.total_s_load_reduction)||void 0===pt?void 0:pt.toFixed(0)),this.props.watershedIsFootprint?d().createElement("td",null,((null===(dt=this.props.storedBmpForm)||void 0===dt?void 0:dt.total_s_load_reduction)/(null===(mt=this.props.storedBmpForm)||void 0===mt?void 0:mt.calculated_footprint_area)).toFixed(1)):null,d().createElement("td",{className:"text-left"},"tons/year")),d().createElement("tr",{style:{borderBottom:"4px solid lightgrey"}},d().createElement("td",null,"Sediment load new: "),d().createElement("td",null,null===(ft=this.props.storedBmpForm)||void 0===ft||null===(vt=ft.surface_new_s_load)||void 0===vt?void 0:vt.toFixed(0)),d().createElement("td",null,null===(gt=this.props.storedBmpForm)||void 0===gt||null===(yt=gt.tiled_new_s_load)||void 0===yt?void 0:yt.toFixed(0)),d().createElement("td",null,parseFloat(null===(bt=this.props.storedBmpForm)||void 0===bt||null===(_t=bt.erosion_new_s_load)||void 0===_t?void 0:_t.toPrecision(3))),d().createElement("td",null,null===(ht=this.props.storedBmpForm)||void 0===ht||null===(Et=ht.total_new_s_load)||void 0===Et?void 0:Et.toFixed(0)),this.props.watershedIsFootprint?d().createElement("td",null,((null===(St=this.props.storedBmpForm)||void 0===St?void 0:St.total_new_s_load)/(null===(wt=this.props.storedBmpForm)||void 0===wt?void 0:wt.calculated_footprint_area)).toFixed(1)):null,d().createElement("td",{className:"text-left"},"tons/year")),d().createElement("tr",null,d().createElement("td",null,"Potential Incentive Payment:"),null!==(At=this.props.storedBmpForm)&&void 0!==At&&At.calculated_total_cost?d().createElement("td",null,"$",Number(null===(Tt=this.props.storedBmpForm)||void 0===Tt||null===(Ot=Tt.calculated_total_cost)||void 0===Ot?void 0:Ot.toFixed(0)).toLocaleString()):d().createElement("td",null),d().createElement("td",null)),d().createElement("tr",null,d().createElement("td",null,"Nitrogen reduction value: "),null!==(Nt=this.props.storedBmpForm)&&void 0!==Nt&&Nt.total_cost_per_lbs_n_reduced?d().createElement("td",null,Number(null===(Ft=this.props.storedBmpForm)||void 0===Ft||null===(Mt=Ft.total_cost_per_lbs_n_reduced)||void 0===Mt?void 0:Mt.toFixed(0)).toLocaleString()):d().createElement("td",null),d().createElement("td",{className:"text-left"},"$/lb/year")),d().createElement("tr",null,d().createElement("td",null,"Phosphorus reduction value: "),null!==(Ct=this.props.storedBmpForm)&&void 0!==Ct&&Ct.total_cost_per_lbs_p_reduced?d().createElement("td",null,Number(null===(Bt=this.props.storedBmpForm)||void 0===Bt||null===(Pt=Bt.total_cost_per_lbs_p_reduced)||void 0===Pt?void 0:Pt.toFixed(0)).toLocaleString()):d().createElement("td",null),d().createElement("td",{className:"text-left"},"$/lb/year")),d().createElement("tr",null,d().createElement("td",null,"Sediment reduction value: "),null!==(Rt=this.props.storedBmpForm)&&void 0!==Rt&&Rt.total_cost_per_ton_s_reduced?d().createElement("td",null,Number(null===(It=this.props.storedBmpForm)||void 0===It||null===(xt=It.total_cost_per_ton_s_reduced)||void 0===xt?void 0:xt.toFixed(0)).toLocaleString()):d().createElement("td",null),d().createElement("td",{className:"text-left"},"$/ton/year")))),null!==(Dt=this.props.storedBmpForm)&&void 0!==Dt&&Dt.created_by?d().createElement("p",null,"Created by: ",null===(Lt=this.props.storedBmpForm)||void 0===Lt?void 0:Lt.created_by," on ",new Date(null===(Gt=this.props.storedBmpForm)||void 0===Gt?void 0:Gt.created_at).toLocaleString()):null,null!==(kt=this.props.storedBmpForm)&&void 0!==kt&&kt.updated_by?d().createElement("p",null,"Updated by: ",null===(jt=this.props.storedBmpForm)||void 0===jt?void 0:jt.updated_by," on ",new Date(null===(Ut=this.props.storedBmpForm)||void 0===Ut?void 0:Ut.updated_at).toLocaleString()):null):d().createElement(f.Table,{bordered:!0,condensed:!0,hover:!0,className:"text-right"},d().createElement("thead",null,d().createElement("tr",null,d().createElement("th",null,"Results"),d().createElement("th",{style:{width:"100px"}},"Total"),d().createElement("th",null))),d().createElement("tbody",null,d().createElement("tr",null,d().createElement("td",null,"Nitrogen load reduction: "),d().createElement("td",null,null===(Wt=this.props.storedBmpForm)||void 0===Wt||null===(Ht=Wt.total_n_load_reduction)||void 0===Ht?void 0:Ht.toFixed(0)),d().createElement("td",{className:"text-left"},"lbs/year")),d().createElement("tr",null,d().createElement("td",null,"Phosphorus load reduction: "),d().createElement("td",null,null===(zt=this.props.storedBmpForm)||void 0===zt||null===(Vt=zt.total_p_load_reduction)||void 0===Vt?void 0:Vt.toFixed(0)),d().createElement("td",{className:"text-left"},"lbs/year")),d().createElement("tr",null,d().createElement("td",null,"Sediment load reduction: "),d().createElement("td",null,null===(Yt=this.props.storedBmpForm)||void 0===Yt||null===(Kt=Yt.total_s_load_reduction)||void 0===Kt?void 0:Kt.toFixed(0)),d().createElement("td",{className:"text-left"},"tons/year"))))),d().createElement("div",{id:"swamm-bmp-form-footer"},null!==(qt=this.props.storedBmpForm)&&void 0!==qt&&qt.id?d().createElement(d().Fragment,null,d().createElement(f.Button,{bsStyle:"danger",bsSize:"small",style:{position:"absolute",bottom:"20px",right:"620px",minWidth:"80px"},onClick:function(){var e;window.confirm("This action can not be undone. Are you sure?")&&Zt.props.deleteBmp(Zt.props.projectId,null===(e=Zt.props.storedBmpForm)||void 0===e?void 0:e.id)}},"Delete"),d().createElement(f.Button,{bsStyle:"warning",bsSize:"small",style:{position:"absolute",bottom:"20px",right:"520px",minWidth:"80px"},onClick:function(){window.confirm("This will remove any custom data you have entered for the current BMP Type. Are you sure?")&&Zt.props.setChangingBmpType(!0)}},"Edit Type"),d().createElement(f.Button,{bsStyle:"info",bsSize:"small",style:{position:"absolute",bottom:"20px",right:"320px",minWidth:"80px"},onClick:function(){var e;Zt.props.downloadBmpReport(null===(e=Zt.props.storedBmpForm)||void 0===e?void 0:e.id)}},"Make PDF"),this.props.complexBmpForm?d().createElement(f.Button,{bsStyle:"info",bsSize:"small",style:{position:"absolute",bottom:"20px",right:"420px",minWidth:"80px"},onClick:function(){return Zt.props.setComplexBmpForm(!1)}},"Simple"):d().createElement(f.Button,{bsStyle:"info",bsSize:"small",style:{position:"absolute",bottom:"20px",right:"420px",minWidth:"80px"},onClick:function(){return Zt.props.setComplexBmpForm(!0)}},"Advanced")):null,d().createElement(f.Button,{bsStyle:"info",bsSize:"small",className:"".concat(this.props.standard_url?"":"disabled"),style:{position:"absolute",bottom:"20px",right:"220px",width:"80px",height:"30px",fontSize:"x-small"},onClick:function(){return window.open(Zt.props.standard_url,"_blank")}},"View",d().createElement("br",null),"Standard"),d().createElement(f.Button,{bsStyle:"info",bsSize:"small",style:{position:"absolute",bottom:"20px",right:"120px",minWidth:"80px"},onClick:function(){Zt.props.hideBmpForm(),Zt.refreshBmpLayers()}},"View Map"),d().createElement(f.Button,{bsStyle:"success",bsSize:"small",className:this.props.hasGeometry?"":"disabled",style:{position:"absolute",bottom:"20px",right:"20px",minWidth:"80px"},onClick:function(){Zt.props.submitBmpForm(Zt.props.storedBmpForm,Zt.props.projectId)}},"Save"))))}},{key:"validateRatio",value:function(e){var t=this.props.storedBmpForm[e];return t<1&&t>0?"success":1===t?"warning":t>1||t<0?"error":null}},{key:"validateCost",value:function(e){var t=this.props.storedBmpForm[e];return t>=0?"success":t<0?"error":null}},{key:"validateFid",value:function(e){var t,n,r=this.props.storedBmpForm[e];return r>=0&&(t=r,!isNaN(t)&&(0|(n=parseFloat(t)))===n)?"success":r<0?"error":null}},{key:"handleChange",value:function(e){var t=e.target.name,n=e.target.value,r=F({},t,n);"number"===e.target.type&&(r=F({},t,parseFloat(n))),this.props.updateBmpForm(r)}},{key:"handleGroupProfileChange",value:function(e){var t=e.target.name,n=JSON.parse(e.target.value),r=F({},t,this.props.groupProfiles.filter((function(e){return(null==e?void 0:e.pk)===n}))[0]);this.props.updateBmpForm(r)}},{key:"handleBmpChange",value:function(e){console.log("event:",e);var t=e.target.value;console.log("fieldValue:",t);var n=this.props.bmpTypes.filter((function(e){return e.name===t}))[0];this.props.makeDefaultsBmpForm(n)}},{key:"drawBmpStep1",value:function(e,t){var n,r,o;console.log("this.props.bmpOutletLayer?.id",null===(n=this.props.bmpOutletLayer)||void 0===n?void 0:n.id),console.log("this.props.bmpFootprintLayer?.id",null===(r=this.props.bmpFootprintLayer)||void 0===r?void 0:r.id),console.log("this.props.bmpWatershedLayer?.id",null===(o=this.props.bmpWatershedLayer)||void 0===o?void 0:o.id),this.refreshBmpLayers(),this.props.hideBmpForm();var l=this.props.layers.flat.filter((function(t){return null==t?void 0:t.name.includes(e)}))[0];console.log("drawBmpStep1 targetLayer",l),console.log("drawBmpStep1 layerName",e),console.log("drawBmpStep1 featureId",t),this.props.setDrawingBmpLayerName(l.name),t?this.props.setEditingBmpFeatureId(t):this.props.clearEditingBmpFeatureId(),this.props.toggleLayer(l.id,!0),this.props.setLayer(null==l?void 0:l.id),this.props.featureTypeSelected("http://localhost:8080/geoserver/wfs",l.name),console.log("drawBmpStep1 finished")}},{key:"refreshBmpLayers",value:function(){var e,t,n;this.props.refreshLayerVersion(null===(e=this.props.bmpOutletLayer)||void 0===e?void 0:e.id),this.props.refreshLayerVersion(null===(t=this.props.bmpFootprintLayer)||void 0===t?void 0:t.id),this.props.refreshLayerVersion(null===(n=this.props.bmpWatershedLayer)||void 0===n?void 0:n.id)}}])&&w(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(d().Component);F(C,"propTypes",{bmpTypeId:M.number,bmpTypes:M.array,bmpTypeGroups:M.array,statuses:M.array,setMenuGroup:M.func,priorities:M.array,setOpenMenuGroupId:M.func,creatingNewBmp:M.bool,updatingBmp:M.object,hideLoadingBmp:M.func,showLoadingBmp:M.func,hideBmpForm:M.func,submitBmpForm:M.func,showSubmitBmpFormSuccess:M.bool,showSubmitBmpFormError:M.bool,storeBmpForm:M.func,complexBmpForm:M.bool,setComplexBmpForm:M.func,thisBmpType:M.object,newBmpForm:M.object,storedBmpForm:M.object,clearBmpForm:M.func,groupProfiles:M.array,allowedGroupProfiles:M.array,defaultGroupProfile:M.string,makeDefaultsBmpForm:M.func,makeExistingBmpForm:M.func,updateBmpForm:M.func,setLayer:M.func,featureTypeSelected:M.func,toggleEditMode:M.func,createNewFeatures:M.func,createQuery:M.func,startDrawingFeature:M.func,saveChanges:M.func,setDrawingBmpLayerName:M.func,setEditingBmpFeatureId:M.func,clearEditingBmpFeatureId:M.func,layers:M.object,query:M.func,projectId:M.number,purgeMapInfoResults:M.func,bmpUniqueNames:M.array,setHighlightFeaturesPath:M.func,projectData:M.object,toggleLayer:M.func,bmpOutletLayer:M.object,bmpFootprintLayer:M.object,bmpWatershedLayer:M.object,hasGeometry:M.bool,requiresOutlet:M.bool,requiresFootprint:M.bool,requiresWatershed:M.bool,watershedIsFootprint:M.bool,changingBmpType:M.bool,deleteBmp:M.func,setChangingBmpType:M.func,cppe_url:M.string,standard_url:M.string,ned_url:M.string,infosheet_url:M.string,downloadBmpReport:M.func,refreshLayerVersion:M.func}),F(C,"defaultProps",{});var B=(0,m.connect)((function(e){var t,n,r,o,l,a,i,u,s,c,p,d,m,f,v,g,y,b,_,E,S,w,A,T,O,N,F,M,C,B,P,R,I,x,D,L,G,k,j,U,W,H,z,V,Y,K,q,Z,J,X,$,Q,ee,te,ne=null==e||null===(t=e.security)||void 0===t||null===(n=t.user)||void 0===n||null===(r=n.info)||void 0===r?void 0:r.groups.filter((function(e){return!["anonymous","registered-members","admin","swamm-users","illinois-pork-producers"].includes(e)})),re=null==e||null===(o=e.swamm)||void 0===o?void 0:o.groupProfiles.filter((function(e){return ne.includes(e.slug)}));return{projectId:null==e||null===(l=e.swamm)||void 0===l||null===(a=l.projectData)||void 0===a?void 0:a.id,projectData:null==e||null===(i=e.swamm)||void 0===i?void 0:i.projectData,bmpUniqueNames:h(e).map((function(e){return e.name})),bmpTypes:null==e||null===(u=e.swamm)||void 0===u?void 0:u.bmpTypes,bmpTypeGroups:(null==e||null===(s=e.swamm)||void 0===s?void 0:s.bmpTypeGroups)||[],allowedGroupProfiles:re,defaultGroupProfile:ne[0],statuses:null==e||null===(c=e.swamm)||void 0===c?void 0:c.statuses,priorities:null==e||null===(p=e.swamm)||void 0===p?void 0:p.priorities,thisBmpType:null==e||null===(d=e.swamm)||void 0===d?void 0:d.bmpTypes.filter((function(t){var n;return t.id===(null==e||null===(n=e.swamm)||void 0===n?void 0:n.BmpFormBmpTypeId)}))[0],storedBmpForm:(null==e||null===(m=e.swamm)||void 0===m?void 0:m.storedBmpForm)||{},complexBmpForm:(null==e||null===(f=e.swamm)||void 0===f?void 0:f.complexBmpForm)||!1,bmpOutletLayer:null==e||null===(v=e.layers)||void 0===v||null===(g=v.flat)||void 0===g?void 0:g.filter((function(t){var n,r,o;return parseInt(null==t||null===(n=t.extendedParams)||void 0===n?void 0:n.pk,10)===(null==e||null===(r=e.swamm)||void 0===r||null===(o=r.projectData)||void 0===o?void 0:o.bmp_outlet)}))[0],bmpFootprintLayer:null==e||null===(y=e.layers)||void 0===y||null===(b=y.flat)||void 0===b?void 0:b.filter((function(t){var n,r,o;return parseInt(null==t||null===(n=t.extendedParams)||void 0===n?void 0:n.pk,10)===(null==e||null===(r=e.swamm)||void 0===r||null===(o=r.projectData)||void 0===o?void 0:o.bmp_footprint)}))[0],bmpWatershedLayer:null==e||null===(_=e.layers)||void 0===_||null===(E=_.flat)||void 0===E?void 0:E.filter((function(t){var n,r,o;return parseInt(null==t||null===(n=t.extendedParams)||void 0===n?void 0:n.pk,10)===(null==e||null===(r=e.swamm)||void 0===r||null===(o=r.projectData)||void 0===o?void 0:o.bmp_watershed)}))[0],hasGeometry:(null==e||null===(S=e.swamm)||void 0===S||null===(w=S.storedBmpForm)||void 0===w?void 0:w.outlet_fid)||(null==e||null===(A=e.swamm)||void 0===A||null===(T=A.storedBmpForm)||void 0===T?void 0:T.footprint_fid)||(null==e||null===(O=e.swamm)||void 0===O||null===(N=O.storedBmpForm)||void 0===N?void 0:N.watershed_fid),requiresOutlet:null==e||null===(F=e.swamm)||void 0===F||null===(M=F.storedBmpForm)||void 0===M||null===(C=M.type_data)||void 0===C?void 0:C.requires_outlet,requiresFootprint:null==e||null===(B=e.swamm)||void 0===B||null===(P=B.storedBmpForm)||void 0===P||null===(R=P.type_data)||void 0===R?void 0:R.requires_footprint,requiresWatershed:null==e||null===(I=e.swamm)||void 0===I||null===(x=I.storedBmpForm)||void 0===x||null===(D=x.type_data)||void 0===D?void 0:D.requires_watershed,watershedIsFootprint:null==e||null===(L=e.swamm)||void 0===L||null===(G=L.storedBmpForm)||void 0===G||null===(k=G.type_data)||void 0===k?void 0:k.watershed_is_footprint,cppe_url:null==e||null===(j=e.swamm)||void 0===j||null===(U=j.storedBmpForm)||void 0===U||null===(W=U.type_data)||void 0===W?void 0:W.cppe_url,standard_url:null==e||null===(H=e.swamm)||void 0===H||null===(z=H.storedBmpForm)||void 0===z||null===(V=z.type_data)||void 0===V?void 0:V.standard_url,ned_url:null==e||null===(Y=e.swamm)||void 0===Y||null===(K=Y.storedBmpForm)||void 0===K||null===(q=K.type_data)||void 0===q?void 0:q.ned_url,infosheet_url:null==e||null===(Z=e.swamm)||void 0===Z||null===(J=Z.storedBmpForm)||void 0===J||null===(X=J.type_data)||void 0===X?void 0:X.infosheet_url,creatingNewBmp:null==e||null===($=e.swamm)||void 0===$?void 0:$.creatingNewBmp,changingBmpType:null==e||null===(Q=e.swamm)||void 0===Q?void 0:Q.changingBmpType,updatingBmp:null==e||null===(ee=e.swamm)||void 0===ee?void 0:ee.updatingBmp,groupProfiles:null==e||null===(te=e.swamm)||void 0===te?void 0:te.groupProfiles,layers:null==e?void 0:e.layers,query:null==e?void 0:e.query}}),(function(e){return{setMenuGroup:function(t){return e((0,o.setMenuGroup)(t))},setOpenMenuGroupId:function(t){return e((0,v.setOpenMenuGroupId)(t))},hideBmpForm:function(){return e((0,o.hideBmpForm)())},hideLoadingBmp:function(){return e((0,o.hideLoadingBmp)())},showLoadingBmp:function(){return e((0,o.showLoadingBmp)())},submitBmpForm:function(t,n){return e((0,o.submitBmpForm)(t,n))},updateBmpForm:function(t){return e((0,o.updateBmpForm)(t))},clearBmpForm:function(){return e((0,o.clearBmpForm)())},deleteBmp:function(t,n){return e((0,o.deleteBmp)(t,n))},makeDefaultsBmpForm:function(t){return e((0,o.makeDefaultsBmpForm)(t))},setChangingBmpType:function(t){return e((0,o.setChangingBmpType)(t))},setComplexBmpForm:function(t){return e((0,o.setComplexBmpForm)(t))},setLayer:function(t){return e((0,g.uF)(t))},setDrawingBmpLayerName:function(t){return e((0,o.setDrawingBmpLayerName)(t))},setEditingBmpFeatureId:function(t){return e((0,o.setEditingBmpFeatureId)(t))},clearEditingBmpFeatureId:function(){return e((0,o.clearEditingBmpFeatureId)())},featureTypeSelected:function(t,n){return e((0,b.gT)(t,n))},toggleEditMode:function(){return e((0,g.lg)())},toggleLayer:function(t,n){return e((0,E.He)(t,{visibility:n}))},createNewFeatures:function(t){return e((0,g.lx)(t))},createQuery:function(t,n){return e((0,b.rP)(t,n))},query:function(t,n,r,o){return e((0,b.IO)(t,n,r,o))},startDrawingFeature:function(){return e((0,g.kA)())},saveChanges:function(){return e((0,g.$S)())},purgeMapInfoResults:function(){return e((0,y.g)())},makeExistingBmpForm:function(t){return e((0,o.makeExistingBmpForm)(t))},downloadBmpReport:function(t){return e((0,o.downloadBmpReport)(t))},refreshLayerVersion:function(t,n){return e((0,E.ct)(t,n))}}}))(C),P=n(893379),R=n.n(P),I=n(666129);function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t){return(L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function G(e,t){if(t&&("object"===x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}R()(I.Z,{insert:"head",singleton:!1}),I.Z.locals;var W=n(45697),H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(a,e);var t,n,r,o,l=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=j(r);if(o){var n=j(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return G(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=l.call(this,e)).handleChange=t.handleChange.bind(k(t)),t.handleMultiSelection=t.handleMultiSelection.bind(k(t)),t.state={},t}return t=a,(n=[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e,t,n,r,o,l,a,i,u,s,c,p,m,v=this;return d().createElement(d().Fragment,null,d().createElement(f.Modal,{show:!0,onHide:function(){return v.props.hideTargetForm()},style:{marginTop:"50px",fontSize:"small"},dialogClassName:"swamm-big-modal",backdrop:!1,enforceFocus:!1,scrollable:"true"},d().createElement(f.Modal.Header,null,d().createElement(f.Modal.Title,null,this.props.targetForm.id?"Edit Target: "+(null===(e=this.props.targetForm)||void 0===e?void 0:e.name):"Create a new Target")),d().createElement(f.Modal.Body,{style:{padding:"20px"}},d().createElement(f.Grid,null,d().createElement(f.Col,{sm:6},d().createElement(f.Row,{className:"well",style:{paddingTop:"10px",margin:"5px"}},d().createElement("h4",{style:{paddingTop:"5px",paddingBottom:"20px",margin:"0",textAlign:"center",fontSize:"14px"}},"Target Details:"),d().createElement(f.FormGroup,{controlId:"target_name",bsSize:"small"},d().createElement(f.Row,null,d().createElement(f.Col,{componentClass:f.ControlLabel,sm:3,style:{marginTop:"3px"}},"Name:"),d().createElement(f.Col,{sm:9},d().createElement(f.FormControl,{inline:"true",type:"text",name:"name",value:null===(t=this.props.targetForm)||void 0===t?void 0:t.name,onChange:this.handleChange}),d().createElement(f.FormControl.Feedback,null)))),d().createElement(f.FormGroup,{controlId:"target_description",bsSize:"small"},d().createElement(f.Row,null,d().createElement(f.Col,{componentClass:f.ControlLabel,sm:3,style:{marginTop:"3px"}},"Description:"),d().createElement(f.Col,{sm:9},d().createElement(f.FormControl,{componentClass:"textarea",inline:"true",type:"textarea",name:"description",value:null===(n=this.props.targetForm)||void 0===n?void 0:n.description,onChange:this.handleChange}),d().createElement(f.FormControl.Feedback,null))))),d().createElement(f.Row,{className:"well",style:{paddingTop:"10px",margin:"5px"}},d().createElement("h4",{style:{paddingTop:"5px",paddingBottom:"20px",margin:"0",textAlign:"center",fontSize:"14px"}},"Establish Targets:"),d().createElement(f.FormGroup,{controlId:"target_percent_n_reduction",validationState:this.validatePercentage("target_percent_n_reduction"),bsSize:"small"},d().createElement(f.Row,null,d().createElement(f.Col,{componentClass:f.ControlLabel,sm:3,style:{marginTop:"3px"}},"Nitrogen:"),d().createElement(f.Col,{sm:5},d().createElement(f.FormControl,{inline:"true",type:"number",step:1,precision:0,name:"target_percent_n_reduction",value:100*(null===(r=this.props.targetForm)||void 0===r?void 0:r.target_percent_n_reduction),onChange:this.handleChange}),d().createElement(f.FormControl.Feedback,null)),d().createElement(f.Col,{sm:3,style:{marginTop:"3px"}},"% reduction"))),d().createElement(f.FormGroup,{controlId:"target_percent_p_reduction",validationState:this.validatePercentage("target_percent_p_reduction"),bsSize:"small"},d().createElement(f.Row,null,d().createElement(f.Col,{componentClass:f.ControlLabel,sm:3,style:{marginTop:"3px"}},"Phosphorus:"),d().createElement(f.Col,{sm:5},d().createElement(f.FormControl,{inline:"true",type:"number",step:1,precision:0,name:"target_percent_p_reduction",value:100*(null===(o=this.props.targetForm)||void 0===o?void 0:o.target_percent_p_reduction),onChange:this.handleChange}),d().createElement(f.FormControl.Feedback,null)),d().createElement(f.Col,{sm:3,style:{marginTop:"3px"}},"% reduction"))),d().createElement(f.FormGroup,{controlId:"target_percent_s_reduction",validationState:this.validatePercentage("target_percent_s_reduction"),bsSize:"small"},d().createElement(f.Row,null,d().createElement(f.Col,{componentClass:f.ControlLabel,sm:3,style:{marginTop:"3px"}},"Sediment:"),d().createElement(f.Col,{sm:5},d().createElement(f.FormControl,{inline:"true",type:"number",step:1,precision:0,name:"target_percent_s_reduction",value:100*(null===(l=this.props.targetForm)||void 0===l?void 0:l.target_percent_s_reduction),onChange:this.handleChange}),d().createElement(f.FormControl.Feedback,null)),d().createElement(f.Col,{sm:3,style:{marginTop:"3px"}},"% reduction"))))),d().createElement(f.Col,{sm:6},d().createElement(f.Row,{className:"well",style:{paddingTop:"10px",margin:"5px"}},d().createElement("h4",{style:{paddingTop:"5px",paddingBottom:"20px",margin:"0",textAlign:"center",fontSize:"14px"}},"Include BMPs from these organizations:"),d().createElement(f.FormGroup,{controlId:"target_groupProfiles",bsSize:"small"},d().createElement(f.Row,null,d().createElement(f.FormControl,{componentClass:"select",multiple:!0,inline:"true",name:"group_profiles",value:null===(a=this.props.targetForm)||void 0===a?void 0:a.group_profiles,onChange:this.handleMultiSelection,style:{height:"200px"}},null===(i=this.props.groupProfiles)||void 0===i?void 0:i.map((function(e){return d().createElement("option",{value:e.pk},e.title)}))),d().createElement(f.FormControl.Feedback,null)))),d().createElement(f.Row,{className:"well",style:{paddingTop:"10px",margin:"5px"}},d().createElement("h4",{style:{paddingTop:"5px",paddingBottom:"20px",margin:"0",textAlign:"center",fontSize:"14px"}},"Include these BMP types:"),d().createElement(f.FormGroup,{controlId:"target_bmp_types",bsSize:"small"},d().createElement(f.Row,null,d().createElement(f.FormControl,{componentClass:"select",multiple:!0,inline:"true",name:"bmp_types",value:null===(u=this.props.targetForm)||void 0===u?void 0:u.bmp_types,onChange:this.handleMultiSelection,style:{height:"200px"}},null===(s=this.props.bmpTypes)||void 0===s?void 0:s.map((function(e){return d().createElement("option",{value:e.id},e.name)}))),d().createElement(f.FormControl.Feedback,null)))),d().createElement(f.Row,{className:"well",style:{paddingTop:"10px",margin:"5px"}},d().createElement("h4",{style:{paddingTop:"5px",paddingBottom:"20px",margin:"0",textAlign:"center",fontSize:"14px"}},"Include these BMP statuses:"),d().createElement(f.FormGroup,{controlId:"target_bmp_statuses",bsSize:"small"},d().createElement(f.Row,null,d().createElement(f.FormControl,{componentClass:"select",multiple:!0,inline:"true",name:"statuses",value:null===(c=this.props.targetForm)||void 0===c?void 0:c.statuses,onChange:this.handleMultiSelection,style:{height:"200px"}},null===(p=this.props.statuses)||void 0===p?void 0:p.map((function(e){return d().createElement("option",{value:e.name},e.name)}))),d().createElement(f.FormControl.Feedback,null))))))),d().createElement(f.Modal.Footer,{style:{minHeight:"100px"}},null!==(m=this.props.targetForm)&&void 0!==m&&m.id?d().createElement(f.Button,{bsStyle:"danger",bsSize:"small",style:{opacity:"0.7",position:"absolute",bottom:"20px",right:"220px",minWidth:"80px"},onClick:function(){var e;window.confirm("This action can not be undone. Are you sure?")&&v.props.deleteTarget(v.props.mapId,null===(e=v.props.targetForm)||void 0===e?void 0:e.id)}},"Delete Target"):null,d().createElement(f.Button,{bsStyle:"danger",bsSize:"small",style:{opacity:"0.7",position:"absolute",bottom:"20px",right:"120px",minWidth:"80px"},onClick:function(){return v.props.hideTargetForm()}},"Close"),d().createElement(f.Button,{bsStyle:"success",bsSize:"small",style:{opacity:"0.7",position:"absolute",bottom:"20px",right:"20px",minWidth:"80px"},onClick:function(){v.props.submitTargetForm(v.props.targetForm,v.props.mapId)}},"Save Target"))))}},{key:"handleMultiSelection",value:function(e){var t=U({},e.target.name,Array.from(e.target.selectedOptions,(function(e){return e.value})));this.props.updateTargetForm(t)}},{key:"handleChange",value:function(e){var t=e.target.name,n=e.target.value,r=U({},t,n);"number"===e.target.type&&e.target.name.includes("target_percent_")&&(r=U({},t,parseFloat(n)/100)),this.props.updateTargetForm(r)}},{key:"validatePercentage",value:function(e){var t=this.props.targetForm[e];return t<1&&t>0?"success":1===t?"warning":t>1||t<0?"error":null}}])&&D(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(d().Component);U(H,"propTypes",{mapId:W.number,targetForm:W.object,hideTargetForm:W.func,deleteTarget:W.func,clearTargetForm:W.func,submitTargetForm:W.func,updateTargetForm:W.func,groupProfiles:W.array,bmpTypes:W.array,statuses:W.array}),U(H,"defaultProps",{});var z=(0,m.connect)((function(e){var t,n,r,o,l,a;return{mapId:null==e||null===(t=e.swamm)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.base_map,bmpTypes:null==e||null===(r=e.swamm)||void 0===r?void 0:r.bmpTypes,statuses:null==e||null===(o=e.swamm)||void 0===o?void 0:o.statuses,targetForm:(null==e||null===(l=e.swamm)||void 0===l?void 0:l.targetForm)||{},groupProfiles:null==e||null===(a=e.swamm)||void 0===a?void 0:a.groupProfiles}}),(function(e){return{hideTargetForm:function(){return e((0,o.hideTargetForm)())},deleteTarget:function(t,n){return e((0,o.deleteTarget)(t,n))},clearTargetForm:function(){return e((0,o.clearTargetForm)())},submitTargetForm:function(t,n){return e((0,o.submitTargetForm)(t,n))},updateTargetForm:function(t){return e((0,o.updateTargetForm)(t))}}}))(H);function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t){return(K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function q(e,t){if(t&&("object"===V(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Z(e)}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $=n(45697),Q=n(140143),ee=Q.Cell,te=Q.BarChart,ne=Q.Bar,re=Q.PieChart,oe=Q.Pie,le=Q.ResponsiveContainer,ae=Q.XAxis,ie=Q.YAxis,ue=Q.Legend,se=Q.Tooltip,ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K(e,t)}(a,e);var t,n,r,o,l=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=J(r);if(o){var n=J(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return q(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),X(Z(t=l.call(this,e)),"pollutants",[{name:"Phosphorus",load_red_total_key:"total_p_load_reduction",title:"Load reductions (lbs/year)",initial:"p"},{name:"Nitrogen",load_red_total_key:"total_n_load_reduction",title:"Load reductions (lbs/year)",initial:"n"},{name:"Sediment",load_red_total_key:"total_s_load_reduction",title:"Load reductions (tons/year)",initial:"s"},{name:"Total BMP Count",load_red_total_key:"calculated_watershed_area",title:"Treated Area (acres)",initial:"a"}]),X(Z(t),"colours",["#0088FE","#00C49F","#FFBB28","#FF8042","#39CCCC","#7FDBFF","#0074D9","#001f3f","#FFDC00","#01FF70","#2ECC40","#3D9970","#DDDDDD","#AAAAAA","#B10DC9","#F012BE","#85144b","#FF4136","#FF851B","#FFFFFF"]),t.state={tooltipKey:null},t}return t=a,(n=[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e,t,n,r,o,l,a,i,u,s,c,p,m,v,g,y,b,h,E,S,w,A,T,O,N,F,M,C,B,P,R,I,x,D,L,G,k,j,U,W,H=this;return d().createElement(f.Modal,{show:!0,onHide:function(){return console.log("onHide")},style:{marginTop:"50px",width:"100%"},dialogClassName:"swamm-big-modal"},d().createElement(f.Modal.Header,null,d().createElement(f.Modal.Title,{style:{textAlign:"center"}},d().createElement("h4",{style:{padding:"0",margin:"0"}},null===(e=this.props.selectedTarget)||void 0===e?void 0:e.name))),d().createElement(f.Modal.Body,null,d().createElement(f.Grid,null,d().createElement(f.Col,{sm:2},d().createElement(f.Row,{className:"well",style:{paddingTop:"0"}},d().createElement("h4",{style:{paddingTop:"5px",paddingBottom:"10px",margin:"0",textAlign:"center",fontSize:"14px"}},"Targets"),this.props.targets.map((function(e){return d().createElement("div",{className:"row-no-gutters"},d().createElement(f.Button,{bsStyle:"success",bsSize:"xsmall",block:!0,style:{backgroundColor:e.id===H.props.selectedTargetId?"rgba(39,202,59,1)":"rgba(39,202,59,0.6)",marginTop:"4px",fontSize:"x-small"},onClick:function(){return H.props.selectSwammTargetId(null==e?void 0:e.id)}},null==e?void 0:e.name))})),d().createElement("div",{className:"row-no-gutters"},d().createElement(f.Button,{bsStyle:"info",bsSize:"xsmall",block:!0,style:{marginTop:"4px",fontSize:"x-small"},onClick:function(){return H.props.showTargetForm(null)}},"New Target")),d().createElement("div",{className:"row-no-gutters"},d().createElement(f.Button,{bsStyle:"info",bsSize:"xsmall",block:!0,style:{marginTop:"4px",fontSize:"x-small"},onClick:function(){return H.props.showTargetForm(H.props.selectedTarget)}},"Edit Target"))),d().createElement(f.Row,{className:"well",style:{paddingTop:"20px"}},d().createElement("h4",{style:{paddingTop:"5px",paddingBottom:"10px",margin:"0",textAlign:"center",fontSize:"14px"}},"Sort Data By:"),d().createElement("div",{className:"row-no-gutters"},d().createElement(f.Button,{bsStyle:"success",bsSize:"xsmall",block:!0,style:{backgroundColor:"type"===this.props.bmpFilterMode?"rgba(39,202,59,1)":"rgba(39,202,59,0.6)",marginTop:"4px",fontSize:"x-small"},onClick:function(){return H.props.setBmpFilterMode("type")}},"BMP Type")),d().createElement("div",{className:"row-no-gutters"},d().createElement(f.Button,{bsStyle:"success",bsSize:"xsmall",block:!0,style:{backgroundColor:"status"===this.props.bmpFilterMode?"rgba(39,202,59,1)":"rgba(39,202,59,0.6)",marginTop:"4px",fontSize:"x-small"},onClick:function(){return H.props.setBmpFilterMode("status")}},"BMP Status")),d().createElement("div",{className:"row-no-gutters"},d().createElement(f.Button,{bsStyle:"success",bsSize:"xsmall",block:!0,style:{backgroundColor:"group_profile"===this.props.bmpFilterMode?"rgba(39,202,59,1)":"rgba(39,202,59,0.6)",marginTop:"4px",fontSize:"x-small"},onClick:function(){return H.props.setBmpFilterMode("group_profile")}},"Organization")))),this.props.selectedTargetId?d().createElement(f.Col,{sm:8,style:{marginLeft:20,marginRight:-20}},this.pollutants.map((function(e){var t,n,r,o,l,a,i,u,s,c,p,m;return d().createElement(f.Row,{className:"well"},"area"!==e.name?d().createElement(f.Col,{sm:3,style:{padding:0}},d().createElement("h4",{style:{textAlign:"center",fontSize:"14px",padding:"5px 50px 10px 5px",margin:0}},e.name),d().createElement("div",{style:{width:150,height:100/1.2}},d().createElement(le,null,d().createElement(re,{width:150,height:150,style:{paddingTop:"10px"}},d().createElement(oe,{data:null===(t=H.props.selectedTarget)||void 0===t||null===(n=t.speedDialData)||void 0===n?void 0:n["percent".concat(e.name,"Target")],dataKey:"value",cx:66.92307692307692,cy:50,innerRadius:100/3,outerRadius:50,fill:"#82ca9d",startAngle:180,endAngle:0,isAnimationActive:!1},d().createElement(ee,{fill:"#27ca3b",cornerRadius:1}),d().createElement(ee,{fill:"#97b3c3",cornerRadius:1})),d().createElement("text",{x:66.92307692307692,y:45,textAnchor:"middle",fontSize:20,dominantBaseline:"middle",className:"progress-label"},"a"!==e.initial?(null===(r=H.props.selectedTarget)||void 0===r||null===(o=r.speedDialData["percent".concat(e.name,"Target")])||void 0===o||null===(l=o[0])||void 0===l?void 0:l.value.toFixed(1))+"%":null===(a=H.props.selectedTarget)||void 0===a||null===(i=a.barChartData)||void 0===i?void 0:i.total_bmp_count))))):null,d().createElement(f.Col,{sm:8},d().createElement("h4",{style:{textAlign:"center",fontSize:"14px",paddingTop:"5px",paddingBottom:"10px",margin:0}},e.title),d().createElement("div",{style:{width:"100%",height:100}},d().createElement(le,null,d().createElement(te,{width:600,height:80,data:[{barOne:null===(u=H.props.selectedTarget)||void 0===u||null===(s=u.barChartData)||void 0===s?void 0:s[H.props.bmpFilterMode]}],margin:{top:0,right:0,left:10,bottom:10},layout:"vertical",maxBarSize:100},null===(c=H.props.selectedTarget)||void 0===c||null===(p=c.barChartData)||void 0===p||null===(m=p[H.props.bmpFilterMode])||void 0===m?void 0:m.map((function(t,n){var r="barOne.".concat(n,".").concat(e.load_red_total_key);return d().createElement(ne,{key:"".concat(t[H.props.bmpFilterMode]," + ").concat(e.initial),stackId:"a",dataKey:r,fill:H.colours[n],name:null==t?void 0:t.label,onMouseOver:function(){return H.setState({tooltipKey:r})},isAnimationActive:!1})})),d().createElement(se,{content:d().createElement(pe,{tooltipKey:H.state.tooltipKey})}),d().createElement(ae,{type:"number"}),d().createElement(ie,{type:"category",hide:!0}),"p"===e.initial?d().createElement(ue,{layout:"vertical",verticalAlign:"top",align:"left",wrapperStyle:{left:"300px",top:"-40px",width:"300px"}}):null)))))})),d().createElement(f.Row,null,d().createElement(f.Table,{bordered:!0,condensed:!0,hover:!0,className:"text-right"},d().createElement("thead",null,d().createElement("tr",null,d().createElement("th",null,"Summary"),d().createElement("th",{style:{textAlign:"center"}},"Phosphorus"),d().createElement("th",{style:{textAlign:"center"}},"Nitrogen"),d().createElement("th",{style:{textAlign:"center"}},"Sediment"),d().createElement("th",null))),d().createElement("tbody",null,d().createElement("tr",null,d().createElement("td",null,"Current total untreated pollutant volume:"),d().createElement("td",null,_(null===(t=this.props.selectedTarget)||void 0===t||null===(n=t.speedDialData)||void 0===n?void 0:n.currentPhosphorusLoad,0)),d().createElement("td",null,_(null===(r=this.props.selectedTarget)||void 0===r||null===(o=r.speedDialData)||void 0===o?void 0:o.currentNitrogenLoad,0)),d().createElement("td",null,_(null===(l=this.props.selectedTarget)||void 0===l||null===(a=l.speedDialData)||void 0===a?void 0:a.currentSedimentLoad,0)),d().createElement("td",{className:"text-left"},"units/year")),d().createElement("tr",null,d().createElement("td",null,"Selected target reduction percentage:"),d().createElement("td",null,100*(null===(i=this.props.selectedTarget)||void 0===i||null===(u=i.speedDialData)||void 0===u?void 0:u.percentPhosphorusReductionTarget)),d().createElement("td",null,100*(null===(s=this.props.selectedTarget)||void 0===s||null===(c=s.speedDialData)||void 0===c?void 0:c.percentNitrogenReductionTarget)),d().createElement("td",null,100*(null===(p=this.props.selectedTarget)||void 0===p||null===(m=p.speedDialData)||void 0===m?void 0:m.percentSedimentReductionTarget)),d().createElement("td",{className:"text-left"},"% of total")),d().createElement("tr",null,d().createElement("td",null,"Selected target load reduction required:"),d().createElement("td",null,_(null===(v=this.props.selectedTarget)||void 0===v||null===(g=v.speedDialData)||void 0===g?void 0:g.targetPhosphorusLoadReductionRequired,0)),d().createElement("td",null,_(null===(y=this.props.selectedTarget)||void 0===y||null===(b=y.speedDialData)||void 0===b?void 0:b.targetNitrogenLoadReductionRequired,0)),d().createElement("td",null,_(null===(h=this.props.selectedTarget)||void 0===h||null===(E=h.speedDialData)||void 0===E?void 0:E.targetSedimentLoadReductionRequired,0)),d().createElement("td",{className:"text-left"},"units/year")),d().createElement("tr",null,d().createElement("td",null,"Actual pollutant reduction from BMPs:"),d().createElement("td",null,_(null===(S=this.props.selectedTarget)||void 0===S||null===(w=S.speedDialData)||void 0===w?void 0:w.totalBmpPhosphorusReduction,0)),d().createElement("td",null,_(null===(A=this.props.selectedTarget)||void 0===A||null===(T=A.speedDialData)||void 0===T?void 0:T.totalBmpNitrogenReduction,0)),d().createElement("td",null,_(null===(O=this.props.selectedTarget)||void 0===O||null===(N=O.speedDialData)||void 0===N?void 0:N.totalBmpSedimentReduction,0)),d().createElement("td",{className:"text-left"},"units/year")),d().createElement("tr",null,d().createElement("td",null,"Percentage of target achieved:"),d().createElement("td",null,null===(F=this.props.selectedTarget)||void 0===F||null===(M=F.speedDialData)||void 0===M||null===(C=M.percentPhosphorusTarget)||void 0===C||null===(B=C[0])||void 0===B||null===(P=B.value)||void 0===P?void 0:P.toFixed(1)),d().createElement("td",null,null===(R=this.props.selectedTarget)||void 0===R||null===(I=R.speedDialData)||void 0===I||null===(x=I.percentNitrogenTarget)||void 0===x||null===(D=x[0])||void 0===D||null===(L=D.value)||void 0===L?void 0:L.toFixed(1)),d().createElement("td",null,null===(G=this.props.selectedTarget)||void 0===G||null===(k=G.speedDialData)||void 0===k||null===(j=k.percentSedimentTarget)||void 0===j||null===(U=j[0])||void 0===U||null===(W=U.value)||void 0===W?void 0:W.toFixed(1)),d().createElement("td",{className:"text-left"},"%")))))):d().createElement(f.Col,{sm:8,style:{marginLeft:20,marginRight:-20,textAlign:"center"}},"Please select a target on the left"))),d().createElement(f.Modal.Footer,null,d().createElement(f.Button,{bsStyle:"danger",bsSize:"small",style:{opacity:"0.7"},onClick:function(){return H.props.hideSwammBmpChart()}},"Close")))}}])&&Y(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(d().Component);X(ce,"propTypes",{hideSwammBmpChart:$.func,allBmps:$.array,data:$.array,layerForLegend:$.object,targets:$.array,selectSwammTargetId:$.func,showTargetForm:$.func,selectedTargetId:$.number,defaultTargetId:$.number,selectedTarget:$.object,bmpFilterMode:$.string,setBmpFilterMode:$.func}),X(ce,"defaultProps",{});var pe=function(e){var t=e.active,n=e.payload,r=(e.label,e.tooltipKey);return t&&n&&n.length&&r?n.map((function(e){if(e.dataKey===r){var t=r.split("."),n=e.payload[t[0]][Number(t[1])][t[2]];return d().createElement("div",{className:"custom-tooltip",style:{background:"black",borderRadius:"3px"}},d().createElement("div",{className:"label"},e.name," - ",_(n,0)),d().createElement("br",null))}return null})):null},de=(0,m.connect)((function(e){var t,n,r,o,l,a,i,u,s,c,p,d,m,f,v=(null==e||null===(t=e.swamm)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.code)+"_bmp_footprint";return{mapId:null==e||null===(r=e.swamm)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.base_map,layerForLegend:null==e||null===(l=e.layers)||void 0===l||null===(a=l.flat)||void 0===a?void 0:a.filter((function(e){return e.name===v}))[0],allBmps:null==e||null===(i=e.swamm)||void 0===i?void 0:i.allBmps,statuses:(null==e||null===(u=e.swamm)||void 0===u?void 0:u.statuses)||[],targets:(null==e||null===(s=e.swamm)||void 0===s?void 0:s.targets)||[],selectedTargetId:null==e||null===(c=e.swamm)||void 0===c?void 0:c.selectedTargetId,selectedTarget:null==e||null===(p=e.swamm)||void 0===p||null===(d=p.targets)||void 0===d||null===(m=d.filter((function(t){var n;return t.id===(null==e||null===(n=e.swamm)||void 0===n?void 0:n.selectedTargetId)})))||void 0===m?void 0:m[0],bmpFilterMode:(null==e||null===(f=e.swamm)||void 0===f?void 0:f.bmpFilterMode)||"type",visibleTargetForm:null==e?void 0:e.swamm.visibleTargetForm}}),(function(e){return{hideSwammBmpChart:function(){return e((0,o.hideSwammBmpChart)())},selectSwammTargetId:function(t){return e((0,o.selectSwammTargetId)(t))},setBmpFilterMode:function(t){return e((0,o.setBmpFilterMode)(t))},showTargetForm:function(t){return e((0,o.showTargetForm)(t))}}}))(ce);function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ve(e,t){return(ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ge(e,t){if(t&&("object"===me(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ye(e)}function ye(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var he=n(45697),Ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ve(e,t)}(a,e);var t,n,r,o,l=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=be(r);if(o){var n=be(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ge(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=l.call(this,e)).handleChange=t.handleChange.bind(ye(t)),t}return t=a,(n=[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this;return d().createElement(d().Fragment,null,d().createElement("div",{id:"swamm-bmp-filters",className:"simple-view-panel",style:{top:"175px",width:"480px"}},d().createElement("div",{className:"menu-rows-container"},d().createElement("div",{className:"row menu-row pull-left",style:{width:"480px",textAlign:"left"}},d().createElement("span",{className:"inline btn glyphicon menu-row-glyph "+("bmpType"===this.props.expandedFilter?"glyphicon-chevron-down":"glyphicon-chevron-right"),style:{color:"white",background:"none"},onClick:function(){e.props.setExpandedFilter("bmpType")}}),d().createElement("span",{className:"inline h5 menu-row-text"},d().createElement("strong",null,"Filter by BMP type")),"bmpType"===this.props.expandedFilter?d().createElement(d().Fragment,null,d().createElement("span",{className:"inline btn glyphicon menu-row-glyph glyphicon-check",style:{color:"limegreen",marginLeft:"30px"},onClick:function(){e.props.setAllBmpTypesVisibility(!0)}}),d().createElement("span",{className:"inline h5 menu-row-text"},"Select All"),d().createElement("span",{className:"inline btn glyphicon menu-row-glyph glyphicon-unchecked",style:{color:"red",marginLeft:"30px"},onClick:function(){e.props.setAllBmpTypesVisibility(!1)}}),d().createElement("span",{className:"inline h5 menu-row-text"},"Select None"),d().createElement("hr",{style:{margin:"0"}}),d().createElement(f.Row,null,this.props.bmpTypes.map((function(t,n){return d().createElement(f.Col,{sm:6,className:"row menu-row filter-row "+(n%2?"filter-row-odd":"")},d().createElement("span",{className:"btn glyphicon menu-row-glyph "+(null!=t&&t.visibility?"glyphicon-ok":"glyphicon-remove"),style:{color:null!=t&&t.visibility?"limegreen":"red"},onClick:function(){return e.props.toggleBmpTypeVisibility(t)}}),d().createElement("span",{className:"menu-row-text"},t.name))})))):null),d().createElement("div",{className:"row menu-row pull-left",style:{width:"480px",textAlign:"left"}},d().createElement("span",{className:"inline btn glyphicon menu-row-glyph "+("priority"===this.props.expandedFilter?"glyphicon-chevron-down":"glyphicon-chevron-right"),style:{color:"white",background:"none"},onClick:function(){e.props.setExpandedFilter("priority")}}),d().createElement("span",{className:"inline h5 menu-row-text"},d().createElement("strong",null,"Filter by BMP priority")),"priority"===this.props.expandedFilter?d().createElement(d().Fragment,null,d().createElement("hr",{style:{margin:"0"}}),d().createElement(f.Row,null,this.props.priorities.map((function(t,n){return d().createElement(f.Col,{sm:6,className:"row menu-row filter-row "+(n%2?"filter-row-odd":"")},d().createElement("span",{className:"btn glyphicon menu-row-glyph "+(null!=t&&t.visibility?"glyphicon-ok":"glyphicon-remove"),style:{color:null!=t&&t.visibility?"limegreen":"red"},onClick:function(){return e.props.toggleBmpPriorityVisibility(t)}}),d().createElement("span",{className:"menu-row-text"},t.label))})))):null),d().createElement("div",{className:"row menu-row pull-left",style:{width:"480px",textAlign:"left"}},d().createElement("span",{className:"inline btn glyphicon menu-row-glyph "+("status"===this.props.expandedFilter?"glyphicon-chevron-down":"glyphicon-chevron-right"),style:{color:"white",background:"none"},onClick:function(){e.props.setExpandedFilter("status")}}),d().createElement("span",{className:"inline h5 menu-row-text"},d().createElement("strong",null,"Filter by BMP status")),"status"===this.props.expandedFilter?d().createElement(d().Fragment,null,d().createElement("hr",{style:{margin:"0"}}),d().createElement(f.Row,null,this.props.statuses.map((function(t,n){return d().createElement(f.Col,{sm:6,className:"row menu-row filter-row "+(n%2?"filter-row-odd":"")},d().createElement("span",{className:"btn glyphicon menu-row-glyph "+(null!=t&&t.visibility?"glyphicon-ok":"glyphicon-remove"),style:{color:null!=t&&t.visibility?"limegreen":"red"},onClick:function(){return e.props.toggleBmpStatusVisibility(t)}}),d().createElement("span",{className:"menu-row-text"},t.name))})))):null),d().createElement("div",{className:"row menu-row pull-left",style:{width:"480px",textAlign:"left"}},d().createElement("span",{className:"inline btn glyphicon menu-row-glyph "+("groupProfile"===this.props.expandedFilter?"glyphicon-chevron-down":"glyphicon-chevron-right"),style:{color:"white",background:"none"},onClick:function(){e.props.setExpandedFilter("groupProfile")}}),d().createElement("span",{className:"inline h5 menu-row-text"},d().createElement("strong",null,"Filter by Organization")),"groupProfile"===this.props.expandedFilter?d().createElement(d().Fragment,null,d().createElement(f.Row,null,this.props.groupProfiles.map((function(t,n){var r;return d().createElement(f.Col,{sm:6,className:"row menu-row filter-row "+(n<(null===(r=e.props.groupProfiles)||void 0===r?void 0:r.length)/2+1?"filter-row-odd":"")},d().createElement("span",{className:"btn glyphicon menu-row-glyph "+(null!=t&&t.visibility?"glyphicon-ok":"glyphicon-remove"),style:{color:null!=t&&t.visibility?"limegreen":"red"},onClick:function(){return e.props.toggleBmpGroupProfileVisibility(t)}}),d().createElement("span",{className:"menu-row-text"},t.title))})))):null))))}},{key:"handleChange",value:function(e){console.log(e)}}])&&fe(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(d().Component);_e(Ee,"propTypes",{bmpTypes:he.array,expandedFilter:he.string,setExpandedFilter:he.func,bmpFilter:he.object,changeLayerProperties:he.func,toggleBmpTypeVisibility:he.func,toggleBmpGroupProfileVisibility:he.func,toggleBmpStatusVisibility:he.func,setAllBmpTypesVisibility:he.func,toggleBmpPriorityVisibility:he.func,bmpWatershedLayer:he.object,bmpFootprintLayer:he.object,bmpOutletLayer:he.object,priorities:he.object,groupProfiles:he.object,statuses:he.object}),_e(Ee,"defaultProps",{});var Se=(0,m.connect)((function(e){var t,n,r,o,l,a,i,u,s,c,p,d,m,f,v,g,y,b,_=null==e||null===(t=e.security)||void 0===t||null===(n=t.user)||void 0===n||null===(r=n.info)||void 0===r?void 0:r.groups.filter((function(e){return!["anonymous","registered-members","admin","swamm-users","illinois-pork-producers"].includes(e)}));_.push("nwr","hyd");var h=null==e||null===(o=e.swamm)||void 0===o?void 0:o.groupProfiles.filter((function(e){return _.includes(e.slug)}));return h.sort((function(e,t){return e.title.localeCompare(t.title)})),{mapId:null==e||null===(l=e.swamm)||void 0===l||null===(a=l.data)||void 0===a?void 0:a.base_map,projectData:null==e||null===(i=e.swamm)||void 0===i?void 0:i.data,bmpTypes:null==e||null===(u=e.swamm)||void 0===u?void 0:u.bmpTypes,statuses:null==e||null===(s=e.swamm)||void 0===s?void 0:s.statuses,groupProfiles:h,layers:null==e?void 0:e.layers,query:null==e?void 0:e.query,expandedFilter:null==e||null===(c=e.swamm)||void 0===c?void 0:c.expandedFilter,bmpFilter:null==e||null===(p=e.swamm)||void 0===p?void 0:p.bmpFilter,bmpOutletLayer:null==e||null===(d=e.swamm)||void 0===d||null===(m=d.projectData)||void 0===m?void 0:m.bmp_outlet,bmpFootprintLayer:null==e||null===(f=e.swamm)||void 0===f||null===(v=f.projectData)||void 0===v?void 0:v.bmp_footprint,bmpWatershedLayer:null==e||null===(g=e.swamm)||void 0===g||null===(y=g.projectData)||void 0===y?void 0:y.bmp_watershed,priorities:null==e||null===(b=e.swamm)||void 0===b?void 0:b.priorities}}),(function(e){return{setExpandedFilter:function(t){return e((0,o.setExpandedFilter)(t))},changeLayerProperties:function(t,n){return e((0,E.He)(t,n))},toggleBmpTypeVisibility:function(t){return e((0,o.toggleBmpTypeVisibility)(t))},toggleBmpGroupProfileVisibility:function(t){return e((0,o.toggleBmpGroupProfileVisibility)(t))},toggleBmpStatusVisibility:function(t){return e((0,o.toggleBmpStatusVisibility)(t))},setAllBmpTypesVisibility:function(t){return e((0,o.setAllBmpTypesVisibility)(t))},toggleBmpPriorityVisibility:function(t){return e((0,o.toggleBmpPriorityVisibility)(t))}}}))(Ee),we=n(604206);function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oe(e,t){return(Oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ne(e,t){if(t&&("object"===Ae(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Fe(e){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(472619);var Ce=n(45697),Be=n(472986),Pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oe(e,t)}(a,e);var t,n,r,o,l=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Fe(r);if(o){var n=Fe(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ne(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),l.call(this,e)}return t=a,(n=[{key:"componentDidMount",value:function(){this.props.initSwamm()}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e,t=this;return d().createElement("div",{id:"swamm-container"},this.props.isSwammProject?d().createElement(d().Fragment,null,!this.props.storedBmpForm||this.props.visibleBmpForm||this.props.drawingBmpLayerName||this.props.editingBmpFeatureId?this.props.drawingBmpLayerName||this.props.editingBmpFeatureId?d().createElement(d().Fragment,null,d().createElement(f.Button,{bsStyle:"success",className:"simple-view-menu-button bmp-progress-button",style:{left:30,top:80,width:120,backgroundColor:"darkgreen"},onClick:function(){t.props.saveChanges(),t.props.showBmpForm()}},"Save Feature"),d().createElement(f.Button,{bsStyle:"danger",className:"simple-view-menu-button bmp-progress-button",style:{left:160,top:80,width:120,backgroundColor:"darkred"},onClick:function(){t.props.showBmpForm(),t.props.setLayer(null),t.props.toggleViewMode(),t.props.drawStopped(),t.props.clearDrawingBmpLayerName(),t.props.clearEditingBmpFeatureId()}},"Cancel Feature"),d().createElement("button",{key:"swamm-bmp-creator-button",className:"simple-view-menu-button",style:{left:100*(this.props.numberOfMenus+1)+20},onClick:function(){t.props.saveChanges(),t.props.showBmpForm(),t.props.setOpenMenuGroupId(null)}},"Create BMPs")):this.props.visibleBmpForm?d().createElement("button",{className:"simple-view-menu-button",style:{left:100*(this.props.numberOfMenus+1)+20},disabled:!0},"Create BMPs"):d().createElement("button",{key:"swamm-bmp-creator-button",className:"simple-view-menu-button",style:{left:100*(this.props.numberOfMenus+1)+20},onClick:function(){t.props.makeBmpForm(t.props.defaultGroupProfile),t.props.setOpenMenuGroupId(null)}},"Create BMPs"):d().createElement(d().Fragment,null,d().createElement(f.Button,{className:"simple-view-menu-button bmp-progress-button-success",style:{left:30,top:80,width:120,backgroundColor:"darkgreen"},bsStyle:"success",onClick:function(){return t.props.showBmpForm()}},"BMP in progress"),d().createElement("button",{key:"swamm-bmp-creator-button",className:"simple-view-menu-button",style:{left:100*(this.props.numberOfMenus+1)+20},onClick:function(){t.props.showBmpForm(),t.props.setOpenMenuGroupId(null)}},"Create BMPs")),null!==(e=this.props.targets)&&void 0!==e&&e.length?d().createElement("button",{key:"swamm-bmp-chart-button",className:"simple-view-menu-button",style:{left:100*(this.props.numberOfMenus+2)+20},onClick:function(){t.props.showSwammBmpChart(),t.props.setOpenMenuGroupId(null)}},"Dashboard"):d().createElement("button",{key:"swamm-bmp-chart-button",className:"simple-view-menu-button disabled",style:{left:100*(this.props.numberOfMenus+2)+20}},d().createElement("span",null,d().createElement(Be,{color:"white",style:{display:"inline-block"},spinnerName:"circle",noFadeIn:!0}))),this.props.visibleTargetForm?d().createElement(z,null):null,this.props.visibleBmpForm?d().createElement(B,null):null,this.props.visibleSwammBmpChart?d().createElement("div",null,d().createElement(de,null)):null,this.props.viewBmpGroupId===this.props.openMenuGroupId?d().createElement("div",null,d().createElement(Se,null)):null,this.props.loadingBmp?d().createElement("button",{className:"simple-view-menu-button bmp-loading-button"},d().createElement("div",{style:{marginBottom:"10px"}},"Loading BMP data..."),d().createElement("span",null,d().createElement(Be,{color:"white",style:{display:"inline-block"},spinnerName:"circle",noFadeIn:!0}))):null):null)}}])&&Te(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(d().Component);Me(Pe,"propTypes",{fetchSwammBmpTypes:Ce.func,fetchSwammBmpStatuses:Ce.func,fetchSwammTargets:Ce.func,fetchProjectManagerConfig:Ce.func,fetchGroupProfiles:Ce.func,fetchingGroupProfiles:Ce.bool,fetchingTargets:Ce.bool,statuses:Ce.array,targets:Ce.array,swammData:Ce.array,mapId:Ce.number,bmpUniqueNames:Ce.array,bmpTypes:Ce.array,groupProfiles:Ce.array,projectCode:Ce.string,layers:Ce.object,toggleLayer:Ce.func,showBmpForm:Ce.func,visibleBmpForm:Ce.bool,makeBmpForm:Ce.func,storedBmpForm:Ce.object,showMenuGroup:Ce.bool,setOpenMenuGroupId:Ce.func,loadingBmp:Ce.bool,saveChanges:Ce.func,clearDrawingBmpLayerName:Ce.func,clearEditingBmpFeatureId:Ce.func,drawingBmpLayerName:Ce.string,setEditingBmpFeatureId:Ce.func,editingBmpFeatureId:Ce.string,query:Ce.func,toggleBmpType:Ce.func,visibleSwammBmpChart:Ce.bool,visibleTargetForm:Ce.bool,showSwammBmpChart:Ce.func,bmpByUniqueNameSelector:Ce.func,setLayer:Ce.func,toggleViewMode:Ce.func,drawStopped:Ce.func,numberOfMenus:Ce.number,hasPmData:Ce.object,bmpDataLayer:Ce.object,defaultGroupProfile:Ce.object,viewBmpGroupId:Ce.string,openMenuGroupId:Ce.string,setBmpLayers:Ce.func,toggleSyncWms:Ce.func,gnResourceLoaded:Ce.string,isSwammProject:Ce.bool,initSwamm:Ce.func}),Me(Pe,"defaultProps",{});const Re=(0,m.connect)((function(e){var t,n,r,o,l,a,i,u,s,c,p,d,m,f,v,g,y,b,_,E,S,w,A,T,O,N,F,M,C,B,P=null==e||null===(t=e.security)||void 0===t||null===(n=t.user)||void 0===n||null===(r=n.info)||void 0===r?void 0:r.groups.filter((function(e){return!["anonymous","registered-members","admin"].includes(e)})),R=null==e||null===(o=e.swamm)||void 0===o?void 0:o.groupProfiles.filter((function(e){return P.includes(e.slug)}));return{gnResourceLoaded:null==e||null===(l=e.gnresource)||void 0===l?void 0:l.id,isSwammProject:!(null==e||null===(a=e.swamm)||void 0===a||null===(i=a.projectData)||void 0===i||!i.id),mapId:null==e||null===(u=e.map)||void 0===u||null===(s=u.present)||void 0===s||null===(c=s.info)||void 0===c?void 0:c.id,hasPmData:null==e||null===(p=e.swamm)||void 0===p?void 0:p.data,defaultGroupProfile:R[0],bmpUniqueNames:h(e),bmpTypes:null==e||null===(d=e.swamm)||void 0===d?void 0:d.bmpTypes,groupProfiles:null==e?void 0:e.swamm.groupProfiles,statuses:null==e||null===(m=e.swamm)||void 0===m?void 0:m.statuses,targets:null==e||null===(f=e.swamm)||void 0===f?void 0:f.targets,fetchingTargets:null==e||null===(v=e.swamm)||void 0===v?void 0:v.fetchingTargets,projectCode:null==e||null===(g=e.swamm)||void 0===g||null===(y=g.data)||void 0===y?void 0:y.code,layers:null==e?void 0:e.layers,visibleBmpForm:null==e||null===(b=e.swamm)||void 0===b?void 0:b.visibleBmpForm,storedBmpForm:null==e||null===(_=e.swamm)||void 0===_?void 0:_.storedBmpForm,drawingBmpLayerName:null==e||null===(E=e.swamm)||void 0===E?void 0:E.drawingBmpLayerName,editingBmpFeatureId:null==e||null===(S=e.swamm)||void 0===S?void 0:S.editingBmpFeatureId,visibleSwammBmpChart:null==e||null===(w=e.swamm)||void 0===w?void 0:w.visibleSwammBmpChart,visibleTargetForm:null==e||null===(A=e.swamm)||void 0===A?void 0:A.visibleTargetForm,loadingBmp:null==e||null===(T=e.swamm)||void 0===T?void 0:T.loadingBmp,numberOfMenus:null==e||null===(O=e.layers)||void 0===O||null===(N=O.groups)||void 0===N?void 0:N.length,viewBmpGroupId:null==e||null===(F=e.layers)||void 0===F||null===(M=F.groups)||void 0===M||null===(C=M.filter((function(e){return"View BMPs"===e.title}))[0])||void 0===C?void 0:C.id,openMenuGroupId:null==e||null===(B=e.simpleView)||void 0===B?void 0:B.openMenuGroupId}}),(function(e){return{initSwamm:function(){return e((0,o.initSwamm)())},fetchSwammBmpTypes:function(t){return e((0,o.fetchSwammBmpTypes)(t))},fetchProjectManagerConfig:(0,o.fetchProjectManagerConfig)(e),fetchGroupProfiles:function(){return e((0,o.fetchGroupProfiles)())},fetchSwammBmpStatuses:function(t){return e((0,o.fetchSwammBmpStatuses)(t))},fetchSwammTargets:function(t){return e((0,o.fetchSwammTargets)(t))},toggleLayer:function(t,n){return e((0,E.He)(t,{visibility:n}))},showBmpForm:function(){return e((0,o.showBmpForm)())},setLayer:function(t){return e((0,g.uF)(t))},setEditingBmpFeatureId:function(t){return e((0,o.setEditingBmpFeatureId)(t))},showSwammBmpChart:function(){return e((0,o.showSwammBmpChart)())},setOpenMenuGroupId:function(t){return e((0,v.setOpenMenuGroupId)(t))},makeBmpForm:function(t){return e((0,o.makeBmpForm)(t))},saveChanges:function(){return e((0,g.$S)())},clearDrawingBmpLayerName:function(){return e((0,o.clearDrawingBmpLayerName)())},clearEditingBmpFeatureId:function(){return e((0,o.clearEditingBmpFeatureId)())},query:function(t,n,r,o){return e((0,b.IO)(t,n,r,o))},toggleBmpType:function(t){return e((0,o.toggleBmpType)(t))},toggleViewMode:function(){return e((0,g.nY)())},drawStopped:function(){return e((0,we.lo)())},toggleSyncWms:function(){return e((0,b.XO)())}}}))(Pe);var Ie=n(49977),xe=n.n(Ie),De=n(129386),Le=n(375875),Ge=function(e,t){return{attribute:e,rowId:123456,type:"number",groupId:"".concat(e,"_1"),operator:"=",value:t}},ke={filterObj:{featureTypeName:null,filterType:"OGC",ogcVersion:"1.1.0",groupFields:[{id:123456,index:0,logic:"AND"},{id:"type_1",groupId:123456,logic:"OR",index:1},{id:"priority_1",groupId:123456,logic:"OR",index:1},{id:"group_profile_1",groupId:123456,logic:"OR",index:1},{id:"status_1",groupId:123456,logic:"OR",index:1}],filterFields:[],spatialField:[],spatialFieldOperator:"AND"}};const je=(0,r.rx)("Swamm",{component:Re,reducers:{swamm:function(){var e,t,n,r,a,i,s,p,d,m,f,v,g,y,b,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,h=arguments.length>1?arguments[1]:void 0;switch(h.type){case o.SET_SWAMM_PROJECT_DATA:return u(u({},_),{},{projectData:h.projectData});case o.FETCH_GROUP_PROFILES:return u(u({},_),{},{fetchingGroupProfiles:h.groupProfiles});case o.FETCH_GROUP_PROFILES_SUCCESS:return u(u({},_),{},{fetchingGroupProfiles:!1,groupProfiles:h.groupProfiles});case o.FETCH_PROJECT_MANAGER_CONFIG:return u(u({},_),{},{fetching:h.mapId});case o.FETCH_PROJECT_MANAGER_CONFIG_SUCCESS:return u(u({},_),{},{fetching:null,data:h.payload});case o.FETCH_SWAMM_BMPTYPES:return u(u({},_),{},{fetching:h.mapId});case o.FETCH_SWAMM_BMPTYPES_SUCCESS:return u(u({},_),{},{fetching:!1,bmpTypes:h.bmpTypes});case o.FETCH_SWAMM_ALL_BMPS_SUCCESS:return u(u({},_),{},{fetching:!1,allBmps:h.allBmps});case o.FETCH_SWAMM_BMP_STATUSES:return u(u({},_),{},{fetchingStatuses:!0});case o.FETCH_SWAMM_BMP_STATUSES_SUCCESS:return u(u({},_),{},{statuses:h.statuses});case o.TOGGLE_BMP_TYPE_VISIBILITY:return u(u({},_),{},{bmpTypes:_.bmpTypes.map((function(e){return e.id===h.bmpType.id?u(u({},e),{},{visibility:!h.bmpType.visibility}):e}))});case o.SET_BMP_TYPE:return u(u({},_),{},{bmpTypes:_.bmpTypes.map((function(e){return e.id===h.bmpType.id?u(u({},e),{},{visibility:h.isVisible}):e}))});case o.TOGGLE_BMP_PRIORITY_VISIBILITY:return u(u({},_),{},{priorities:_.priorities.map((function(e){return e.id===h.priority.id?u(u({},e),{},{visibility:!h.priority.visibility}):e}))});case o.TOGGLE_BMP_GROUP_PROFILE_VISIBILITY:return u(u({},_),{},{groupProfiles:_.groupProfiles.map((function(e){return e.id===h.groupProfile.id?u(u({},e),{},{visibility:!h.groupProfile.visibility}):e}))});case o.TOGGLE_BMP_STATUS_VISIBILITY:return u(u({},_),{},{statuses:_.statuses.map((function(e){return e.id===h.status.id?u(u({},e),{},{visibility:!h.status.visibility}):e}))});case o.SET_ALL_BMP_TYPES_VISIBILITY:return u(u({},_),{},{bmpTypes:_.bmpTypes.map((function(e){return e.visibility=h.boolValue,e}))});case o.SET_MENU_GROUP:return h.payload?u(u({},_),{},{visibleBmpManager:!1}):_;case o.SHOW_BMP_MANAGER:return u(u({},_),{},{visibleBmpManager:!0});case o.HIDE_BMP_MANAGER:return u(u({},_),{},{visibleBmpManager:!1});case o.TOGGLE_BMP_MANAGER:return u(u({},_),{},{visibleBmpManager:!_.visibleBmpManager});case o.SHOW_SWAMM_DATA_GRID:return u(u({},_),{},{visibleSwammDataGrid:!0});case o.HIDE_SWAMM_DATA_GRID:return u(u({},_),{},{visibleSwammDataGrid:!1});case o.SHOW_SWAMM_BMP_CHART:return u(u({},_),{},{visibleSwammBmpChart:!0});case o.HIDE_SWAMM_BMP_CHART:return u(u({},_),{},{visibleSwammBmpChart:!1});case o.SHOW_BMP_FORM:return u(u({},_),{},{visibleBmpForm:!0});case o.SHOW_LOADING_BMP:return u(u({},_),{},{loadingBmp:!0});case o.HIDE_LOADING_BMP:return u(u({},_),{},{loadingBmp:!1});case o.MAKE_BMP_FORM:return u(u({},_),{},{creatingNewBmp:!0,visibleBmpForm:!0,storedBmpForm:{group_profile_id:null===(e=h.groupProfile)||void 0===e?void 0:e.pk,group_profile:h.groupProfile,bmpName:""}});case o.MAKE_DEFAULTS_BMP_FORM:var E={bmpName:h.bmpType.name,type:h.bmpType.id,type_data:h.bmpType,project:h.bmpType.project.id,override_n_surface_red_percent:h.bmpType.n_surface_red_percent,override_p_surface_red_percent:h.bmpType.p_surface_red_percent,override_s_surface_red_percent:h.bmpType.s_surface_red_percent,override_n_tiled_red_percent:h.bmpType.n_tiled_red_percent,override_p_tiled_red_percent:h.bmpType.p_tiled_red_percent,override_n_erosion_red_percent:h.bmpType.n_erosion_red_percent,override_p_erosion_red_percent:h.bmpType.p_erosion_red_percent,override_s_erosion_red_percent:h.bmpType.s_erosion_red_percent,override_cost_base:h.bmpType.cost_base,override_cost_rate_per_watershed_area:h.bmpType.cost_rate_per_watershed_area,override_cost_rate_per_footprint_area:h.bmpType.cost_rate_per_footprint_area,notes:""};return u(u({},_),{},{storedBmpForm:u(u({},_.storedBmpForm),E)});case o.MAKE_EXISTING_BMP_FORM:var S=null!=_&&null!==(t=_.storedBmpForm)&&void 0!==t&&t.outlet_fid?null===(n=_.storedBmpForm)||void 0===n?void 0:n.outlet_fid:null===(r=h.bmp)||void 0===r?void 0:r.outlet_fid,w=null!=_&&null!==(a=_.storedBmpForm)&&void 0!==a&&a.footprint_fid?null===(i=_.storedBmpForm)||void 0===i?void 0:i.footprint_fid:null===(s=h.bmp)||void 0===s?void 0:s.footprint_fid,A=null!=_&&null!==(p=_.storedBmpForm)&&void 0!==p&&p.watershed_fid?null===(d=_.storedBmpForm)||void 0===d?void 0:d.watershed_fid:null===(m=h.bmp)||void 0===m?void 0:m.watershed_fid,T=u(u({},h.bmp),{},{id:h.bmp.id,bmpName:h.bmp.type_data.name,type:h.bmp.type_data.id,type_data:h.bmp.type_data,project:h.bmp.project,group_profile:h.bmp.group_profile,group_profile_id:null===(f=h.bmp.group_profile)||void 0===f?void 0:f.id,override_n_surface_red_percent:h.bmp.override_n_surface_red_percent,override_p_surface_red_percent:h.bmp.override_p_surface_red_percent,override_s_surface_red_percent:h.bmp.override_s_surface_red_percent,override_n_tiled_red_percent:h.bmp.override_n_tiled_red_percent,override_p_tiled_red_percent:h.bmp.override_p_tiled_red_percent,override_n_erosion_red_percent:h.bmp.override_n_erosion_red_percent,override_p_erosion_red_percent:h.bmp.override_p_erosion_red_percent,override_s_erosion_red_percent:h.bmp.override_s_erosion_red_percent,override_cost_base:h.bmp.override_cost_base,override_cost_rate_per_watershed_area:h.bmp.override_cost_rate_per_watershed_area,override_cost_rate_per_footprint_area:h.bmp.override_cost_rate_per_footprint_area,notes:h.bmp.notes,owner_identifier:h.bmp.owner_identifier,field_identifier:h.bmp.field_identifier,outlet_fid:S,footprint_fid:w,watershed_fid:A});return u(u({},_),{},{storedBmpForm:T,updatingBmp:null});case o.HIDE_BMP_FORM:return u(u({},_),{},{visibleBmpForm:!1});case o.CLEAR_BMP_FORM:return u(u({},_),{},{creatingNewBmp:!1,storedBmpForm:null,BmpFormBmpTypeId:null,visibleBmpForm:!1,updatingBmp:null});case o.SUBMIT_BMP_FORM_SUCCESS:var O=null===(v=_.allBmps)||void 0===v?void 0:v.map((function(e){return e.id}));return console.log("allBmpIds:",O),O.indexOf(h.bmp.id)>-1?u(u({},_),{},{allBmps:_.allBmps.map((function(e){return e.id===h.bmp.id?h.bmp:e}))}):u(u({},_),{},{allBmps:[].concat(l(_.allBmps),[h.bmp])});case o.SUBMIT_BMP_FORM_ERROR:return u(u({},_),{},{showSubmitBmpFormError:!0});case o.UPDATE_BMP_FORM:return console.log("heard UPDATE_BMP_FORM",h),null!=h&&null!==(g=h.kv)&&void 0!==g&&null!==(y=g.type_data)&&void 0!==y&&y.id?u(u({},_),{},{BmpFormBmpTypeId:h.kv.type_data.id}):null!=h&&null!==(b=h.kv)&&void 0!==b&&b.group_profile?u(u({},_),{},{storedBmpForm:u(u(u({},_.storedBmpForm),h.kv),{},{group_profile:null==h||null===(N=h.kv)||void 0===N?void 0:N.group_profile,group_profile_id:null==h||null===(F=h.kv)||void 0===F||null===(M=F.group_profile)||void 0===M?void 0:M.pk})}):u(u({},_),{},{storedBmpForm:u(u({},_.storedBmpForm),h.kv)});var N,F,M;case o.SET_DRAWING_BMP_LAYER_NAME:var C=!1;return h.drawingBmpLayerName!==_.drawingBmpLayerName&&(C=h.drawingBmpLayerName),u(u({},_),{},{drawingBmpLayerName:C});case o.CLEAR_DRAWING_BMP_LAYER_NAME:return u(u({},_),{},{drawingBmpLayerName:null});case o.REGISTER_MISSING_BMP_FEATURE_ID:return u(u({},_),{},{missingBmpFeatureId:h.missingBmpFeatureId});case o.SET_COMPLEX_BMP_FORM:return u(u({},_),{},{complexBmpForm:h.complexBmpForm});case o.SET_EXPANDED_FILTER:return _.expandedFilter===h.expandedFilter?u(u({},_),{},{expandedFilter:null}):u(u({},_),{},{expandedFilter:h.expandedFilter});case o.SET_BMP_LAYERS:return u(u({},_),{},{bmpOutletLayer:h.bmpOutletLayer,bmpFootprintLayer:h.bmpFootprintLayer,bmpWatershedLayer:h.bmpWatershedLayer});case o.SET_CHANGING_BMP_TYPE:return u(u({},_),{},{changingBmpType:h.changingBmpType});case o.SET_EDITING_BMP_FEATURE_ID:return u(u({},_),{},{editingBmpFeatureId:h.editingBmpFeatureId});case o.CLEAR_EDITING_BMP_FEATURE_ID:return u(u({},_),{},{editingBmpFeatureId:null});case o.DELETE_BMP_SUCCESS:return u(u({},_),{},{allBmps:_.allBmps.filter((function(e){return e.id!==h.bmpId}))});case o.FETCH_SWAMM_TARGETS_SUCCESS:return u(u({},_),{},{fetchingTargets:!1,targets:h.targets});case o.SELECT_SWAMM_TARGET_ID:return u(u({},_),{},{selectedTargetId:h.selectedTargetId});case o.SET_BMP_FILTER_MODE:return u(u({},_),{},{bmpFilterMode:h.bmpFilterMode});case o.UPDATE_TARGET_FORM:return u(u({},_),{},{targetForm:u(u({},_.targetForm),h.kv)});case o.SHOW_TARGET_FORM:return u(u({},_),{},{visibleTargetForm:h.visibleTargetForm,targetForm:h.target});case o.HIDE_TARGET_FORM:return u(u({},_),{},{visibleTargetForm:h.visibleTargetForm});case o.UPDATE_BMP_TYPE_GROUPS:return u(u({},_),{},{bmpTypeGroups:h.bmpTypeGroups});default:return _}}},epics:{initSwammEpic:function(e,t){return e.ofType(o.INIT_SWAMM).filter((function(){var e;return null===(e=t.getState())||void 0===e?void 0:e.gnresource.id})).switchMap((function(){var e;return xe().Observable.from(Le.post("/swamm/api/project/get_project_from_map_id/",{mapId:null===(e=t.getState())||void 0===e?void 0:e.gnresource.id}).catch((function(e){return console.log("** swamm get_project_from_map_id",e),"error"}))).filter((function(e){return(null==e?void 0:e.status)<=400})).filter((function(){var e,n;return!(null===(e=t.getState())||void 0===e||null===(n=e.security)||void 0===n||!n.user)})).switchMap((function(e){return xe().Observable.from(Le.get("/swamm/api/project/".concat(e.data.projectId,"/"))).switchMap((function(t){return xe().Observable.of((0,o.setSwammProjectData)(t.data)).concat(xe().Observable.from(Le.get("/swamm/api/".concat(e.data.projectId,"/bmp-type/"))).switchMap((function(e){return xe().Observable.of((0,o.fetchSwammBmpTypesSuccess)(e.data))})),xe().Observable.from(Le.get("/api/v2/groups?page_size=1000")).switchMap((function(e){var t;return xe().Observable.of((0,o.fetchGroupProfilesSuccess)(null===(t=e.data)||void 0===t?void 0:t.group_profiles))})),xe().Observable.from(Le.get("/swamm/api/".concat(e.data.projectId,"/bmps/status_list/"))).switchMap((function(e){return xe().Observable.of((0,o.fetchSwammBmpStatusesSuccess)(e.data))})),xe().Observable.from(Le.get("/swamm/api/".concat(e.data.projectId,"/pollutant-loading-target/"))).switchMap((function(e){return xe().Observable.of((0,o.fetchSwammTargetsSuccess)(e.data))})),xe().Observable.from(Le.get("/swamm/api/".concat(e.data.projectId,"/bmp-type/bmp_type_group_list/"))).switchMap((function(e){return xe().Observable.of((0,o.updateBmpTypeGroups)(e.data))})))}))}))}))},startBmpCreateFeatureEpic:function(e,t){return e.ofType(b.Hu).filter((function(){var e,n,r,o;return console.log("startBmpCreateFeatureEpic1",!(null!==(e=t.getState())&&void 0!==e&&null!==(n=e.swamm)&&void 0!==n&&n.editingBmpFeatureId)),!(null!==(r=t.getState())&&void 0!==r&&null!==(o=r.swamm)&&void 0!==o&&o.editingBmpFeatureId)})).filter((function(e){var n,r,o,l,a,i;return console.log("startBmpCreateFeatureEpic2",null==e||null===(n=e.filterObj)||void 0===n?void 0:n.featureTypeName.includes(null===(r=t.getState())||void 0===r||null===(o=r.swamm)||void 0===o?void 0:o.drawingBmpLayerName)),null==e||null===(l=e.filterObj)||void 0===l?void 0:l.featureTypeName.includes(null===(a=t.getState())||void 0===a||null===(i=a.swamm)||void 0===i?void 0:i.drawingBmpLayerName)})).filter((function(e){return console.log("startBmpCreateFeatureEpic3","querySetNewBmpLayer"===(null==e?void 0:e.reason)),"querySetNewBmpLayer"===(null==e?void 0:e.reason)})).flatMap((function(){return xe().Observable.of((0,g.lg)(),(0,g.lx)([{}]),(0,g.kA)(),(0,De.WP)("draw.tempFeatures"),(0,o.hideLoadingBmp)())}))},saveBmpCreateFeatureEpic:function(e,t){return e.ofType(g.AY).filter((function(){var e,n,r,o;return console.log("saveBmpCreateFeatureEpic1",null===(e=t.getState())||void 0===e||null===(n=e.swamm)||void 0===n?void 0:n.drawingBmpLayerName),null===(r=t.getState())||void 0===r||null===(o=r.swamm)||void 0===o?void 0:o.drawingBmpLayerName})).filter((function(){var e,n,r,o;return console.log("WARNING: saveBmpCreateFeatureEpic2",!(null!==(e=t.getState())&&void 0!==e&&null!==(n=e.swamm)&&void 0!==n&&n.editingBmpFeatureId)),!(null!==(r=t.getState())&&void 0!==r&&null!==(o=r.swamm)&&void 0!==o&&o.editingBmpFeatureId)})).flatMap((function(){var e,n;return xe().Observable.of((0,o.registerMissingBmpFeatureId)(null===(e=t.getState())||void 0===e||null===(n=e.swamm)||void 0===n?void 0:n.drawingBmpLayerName))}))},setCreateBmpDrawingLayerEpic:function(e,t){return e.ofType(b.u7).filter((function(e){var n,r,o,l,a,i;return console.log("action?.typeName",null==e?void 0:e.typeName),console.log("setBmpDrawingLayerEpic1",null==e||null===(n=e.typeName)||void 0===n?void 0:n.includes(null===(r=t.getState())||void 0===r||null===(o=r.swamm)||void 0===o?void 0:o.drawingBmpLayerName)),null==e||null===(l=e.typeName)||void 0===l?void 0:l.includes(null===(a=t.getState())||void 0===a||null===(i=a.swamm)||void 0===i?void 0:i.drawingBmpLayerName)})).flatMap((function(e){return xe().Observable.of((0,b.IO)("http://localhost:8080/geoserver/wfs",{featureTypeName:null==e?void 0:e.typeName,filterType:"OGC",ogcVersion:"1.1.0"},{},"querySetNewBmpLayer"))}))},setEditBmpDrawingLayerEpic:function(e,t){return e.ofType(b.S0).filter((function(e){var n,r,o,l,a,i,u,s;return console.log("setBmpDrawingLayerEpic1",null==e||null===(n=e.typeName)||void 0===n?void 0:n.includes((null===(r=t.getState())||void 0===r||null===(o=r.swamm)||void 0===o||null===(l=o.data)||void 0===l?void 0:l.code)+"_bmp_")),null==e||null===(a=e.typeName)||void 0===a?void 0:a.includes((null===(i=t.getState())||void 0===i||null===(u=i.swamm)||void 0===u||null===(s=u.data)||void 0===s?void 0:s.code)+"_bmp_")})).flatMap((function(e){return xe().Observable.of((0,b.IO)("http://localhost:8080/geoserver/wfs",{featureTypeName:null==e?void 0:e.typeName,filterType:"OGC",ogcVersion:"1.1.0"},{},"querySetNewBmpLayer"))}))},startBmpEditFeatureEpic:function(e,t){return e.ofType(b.Hu).filter((function(){var e,n,r,o;return console.log("startBmpEditFeatureEpic1",null===(e=t.getState())||void 0===e||null===(n=e.swamm)||void 0===n?void 0:n.editingBmpFeatureId),null===(r=t.getState())||void 0===r||null===(o=r.swamm)||void 0===o?void 0:o.editingBmpFeatureId})).filter((function(e){return console.log("startBmpEditFeatureEpic2","querySetNewBmpLayer"===(null==e?void 0:e.reason)),"querySetNewBmpLayer"===(null==e?void 0:e.reason)})).flatMap((function(){var e,n,r;return xe().Observable.of((0,g.KD)(null===(e=t.getState())||void 0===e||null===(n=e.query)||void 0===n||null===(r=n.result)||void 0===r?void 0:r.features.filter((function(e){var n,r;return(null==e?void 0:e.id)===(null===(n=t.getState())||void 0===n||null===(r=n.swamm)||void 0===r?void 0:r.editingBmpFeatureId)}))),(0,g.lg)(),(0,o.hideLoadingBmp)(),(0,b.zc)())}))},saveBmpEditFeatureEpic:function(e,t){return e.ofType(g.AY).filter((function(){var e,n,r,o;return console.log("saveBmpEditFeatureEpic",null===(e=t.getState())||void 0===e||null===(n=e.swamm)||void 0===n?void 0:n.editingBmpFeatureId),null===(r=t.getState())||void 0===r||null===(o=r.swamm)||void 0===o?void 0:o.editingBmpFeatureId})).flatMap((function(){var e,n,r,l,a,i,u,s;return xe().Observable.of((0,o.clearEditingBmpFeatureId)(),(0,we.lo)(),(0,g.nY)(),(0,De.WP)("highlight.emptyFeatures"),(0,o.submitBmpForm)(null===(e=t.getState())||void 0===e||null===(n=e.swamm)||void 0===n?void 0:n.storedBmpForm,null===(r=t.getState())||void 0===r||null===(l=r.swamm)||void 0===l||null===(a=l.projectData)||void 0===a?void 0:a.id),(0,b.zc)(),(0,E.ct)(null===(i=t.getState())||void 0===i||null===(u=i.layers)||void 0===u||null===(s=u.flat)||void 0===s?void 0:s.filter((function(e){var n,r;return null==e?void 0:e.name.includes(null===(n=t.getState())||void 0===n||null===(r=n.swamm)||void 0===r?void 0:r.drawingBmpLayerName)}))[0].id),(0,o.clearDrawingBmpLayerName)())}))},finishBmpCreateFeatureEpic:function(e,t){return e.ofType(b.Hu).filter((function(){var e,n,r,o;return console.log("finishBmpCreateFeatureEpic1",!(null!==(e=t.getState())&&void 0!==e&&null!==(n=e.swamm)&&void 0!==n&&n.editingBmpFeatureId)),!(null!==(r=t.getState())&&void 0!==r&&null!==(o=r.swamm)&&void 0!==o&&o.editingBmpFeatureId)})).filter((function(){var e,n,r,o;return console.log("finishBmpCreateFeatureEpic2",null===(e=t.getState())||void 0===e||null===(n=e.swamm)||void 0===n?void 0:n.missingBmpFeatureId),null===(r=t.getState())||void 0===r||null===(o=r.swamm)||void 0===o?void 0:o.missingBmpFeatureId})).mergeMap((function(){null===(e=t.getState())||void 0===e||null===(n=e.swamm)||void 0===n||null===(r=n.data)||void 0===r||r.base_map;var e,n,r,o,l,a,i,u,s,c=null===(o=t.getState())||void 0===o||null===(l=o.swamm)||void 0===l||null===(a=l.drawingBmpLayerName)||void 0===a?void 0:a.slice(8);return xe().Observable.from(Le.get("/swamm/api/".concat(null===(i=t.getState())||void 0===i||null===(u=i.swamm)||void 0===u||null===(s=u.projectData)||void 0===s?void 0:s.id,"/bmps/get-latest-feature-id/").concat(c,"/")))})).mergeMap((function(e){var n,r,l,a,i,u,s,c;return xe().Observable.of((0,o.updateBmpForm)(e.data),(0,o.registerMissingBmpFeatureId)(!1),(0,we.lo)(),(0,g.nY)(),(0,De.WP)("highlight.emptyFeatures"),(0,o.submitBmpForm)(null===(n=t.getState())||void 0===n||null===(r=n.swamm)||void 0===r?void 0:r.storedBmpForm,null===(l=t.getState())||void 0===l||null===(a=l.swamm)||void 0===a||null===(i=a.projectData)||void 0===i?void 0:i.id),(0,b.zc)(),(0,E.ct)(null===(u=t.getState())||void 0===u||null===(s=u.layers)||void 0===s||null===(c=s.flat)||void 0===c?void 0:c.filter((function(e){var n,r;return null==e?void 0:e.name.includes(null===(n=t.getState())||void 0===n||null===(r=n.swamm)||void 0===r?void 0:r.drawingBmpLayerName)}))[0].id),(0,o.clearDrawingBmpLayerName)())}))},autoSaveBmpFormEpic:function(e,t){return e.ofType(o.MAKE_EXISTING_BMP_FORM).filter((function(){var e,n,r,o,l,a,i,u,s,c,p,d;return(null===(e=t.getState())||void 0===e||null===(n=e.swamm)||void 0===n||null===(r=n.storedBmpForm)||void 0===r?void 0:r.footprint_fid)&&!(null!==(o=t.getState())&&void 0!==o&&null!==(l=o.swamm)&&void 0!==l&&null!==(a=l.storedBmpForm)&&void 0!==a&&a.calculated_footprint_area)||(null===(i=t.getState())||void 0===i||null===(u=i.swamm)||void 0===u||null===(s=u.storedBmpForm)||void 0===s?void 0:s.watershed_fid)&&!(null!==(c=t.getState())&&void 0!==c&&null!==(p=c.swamm)&&void 0!==p&&null!==(d=p.storedBmpForm)&&void 0!==d&&d.calculated_watershed_area)})).flatMap((function(){var e,n,r,l,a;return xe().Observable.of((0,o.submitBmpForm)(null===(e=t.getState())||void 0===e||null===(n=e.swamm)||void 0===n?void 0:n.storedBmpForm,null===(r=t.getState())||void 0===r||null===(l=r.swamm)||void 0===l||null===(a=l.projectData)||void 0===a?void 0:a.id))}))},catchBmpFeatureClick:function(e,t){return e.ofType(y.XL).filter((function(e){var t,n;return!!(null==e||null===(t=e.data)||void 0===t||null===(n=t.features)||void 0===n?void 0:n.map((function(e){return/([a-zA-Z0-9]{3}_){2}outlet/.test(e.id)||/([a-zA-Z0-9]{3}_){2}footprint/.test(e.id)||/([a-zA-Z0-9]{3}_){2}watershed/.test(e.id)?e:null})))[0]})).mergeMap((function(e){var n,r,o,l,a,i,u,s=null==e||null===(n=e.data)||void 0===n||null===(r=n.features)||void 0===r?void 0:r.map((function(e){return/([a-zA-Z0-9]{3}_){2}outlet/.test(e.id)||/([a-zA-Z0-9]{3}_){2}footprint/.test(e.id)||/([a-zA-Z0-9]{3}_){2}watershed/.test(e.id)?e:null})),c=null===(o=t.getState())||void 0===o||null===(l=o.swamm)||void 0===l||null===(a=l.data)||void 0===a?void 0:a.base_map;return xe().Observable.from(Le.get("/swamm/api/".concat(c,"/bmps/").concat(null===(i=s[0])||void 0===i||null===(u=i.properties)||void 0===u?void 0:u.id,"/")))})).mergeMap((function(e){return xe().Observable.of((0,y.Mc)(),(0,o.getBmpFormSuccess)(e.data),(0,o.makeExistingBmpForm)(e.data),(0,o.setUpdatingBmp)(e.data),(0,o.showBmpForm)())}))},getBmpTypeGroups:function(e,t){return e.ofType(o.FETCH_PROJECT_MANAGER_CONFIG_SUCCESS).mergeMap((function(){var e,n,r,o=null===(e=t.getState())||void 0===e||null===(n=e.swamm)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.base_map;return xe().Observable.from(Le.get("/swamm/api/".concat(o,"/bmp-type/bmp_type_group_list/")))})).exhaustMap((function(e){var n,r,l,a,i,u,s,c,p,d=null===(n=t.getState())||void 0===n||null===(r=n.layers)||void 0===r||null===(l=r.flat)||void 0===l?void 0:l.filter((function(e){var n,r,o;return e.name.includes((null===(n=t.getState())||void 0===n||null===(r=n.swamm)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.code)+"_bmp_outlet")}))[0],m=null===(a=t.getState())||void 0===a||null===(i=a.layers)||void 0===i||null===(u=i.flat)||void 0===u?void 0:u.filter((function(e){var n,r,o;return e.name.includes((null===(n=t.getState())||void 0===n||null===(r=n.swamm)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.code)+"_bmp_footprint")}))[0],f=null===(s=t.getState())||void 0===s||null===(c=s.layers)||void 0===c||null===(p=c.flat)||void 0===p?void 0:p.filter((function(e){var n,r,o;return e.name.includes((null===(n=t.getState())||void 0===n||null===(r=n.swamm)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.code)+"_bmp_watershed")}))[0];return xe().Observable.of((0,o.updateBmpTypeGroups)(e.data),(0,o.setBmpLayers)(d,m,f))}))},downloadBmpReportEpic:function(e){return e.ofType(o.DOWNLOAD_BMP_REPORT).mergeMap((function(e){return xe().Observable.from(window.open("/swamm/print/".concat(e.bmpId,"/download/"),"_blank"))}))},filterBmpEpic:function(e,t){return e.ofType(o.TOGGLE_BMP_TYPE_VISIBILITY,o.SET_ALL_BMP_TYPES_VISIBILITY,o.TOGGLE_BMP_PRIORITY_VISIBILITY,o.TOGGLE_BMP_STATUS_VISIBILITY,o.TOGGLE_BMP_GROUP_PROFILE_VISIBILITY).mergeMap((function(){var e,n,r,o,l,a,i,u,s,c,p,d,m,f,v,g,y,b,_,h,S,w,A,T,O,N,F=JSON.parse(JSON.stringify(ke)),M=!1,C=!1;if(null===(e=t.getState())||void 0===e||null===(n=e.swamm)||void 0===n||n.bmpTypes.map((function(e){if(e.visibility){var t=Ge("type",e.id);F.filterObj.filterFields.push(t),M=!0}})),!M){var B=Ge("type",-1);F.filterObj.filterFields.push(B)}if(null===(r=t.getState())||void 0===r||null===(o=r.swamm)||void 0===o||o.priorities.map((function(e){if(e.visibility){var t=Ge("priority",e.id);F.filterObj.filterFields.push(t),C=!0}})),!C){var P=Ge("priority",-1);F.filterObj.filterFields.push(P)}null===(l=t.getState())||void 0===l||null===(a=l.swamm)||void 0===a||a.groupProfiles.map((function(e){if(e.visibility){var t=Ge("group_profile",e.id);F.filterObj.filterFields.push(t)}})),null===(i=t.getState())||void 0===i||null===(u=i.swamm)||void 0===u||u.statuses.map((function(e){if(e.visibility){var t=Ge("status",e.name);F.filterObj.filterFields.push(t)}}));var R=JSON.parse(JSON.stringify(F)),I=JSON.parse(JSON.stringify(F)),x=JSON.parse(JSON.stringify(F));return R.filterObj.featureTypeName=null===(s=t.getState())||void 0===s||null===(c=s.swamm)||void 0===c||null===(p=c.bmpOutletLayer)||void 0===p?void 0:p.name,I.filterObj.featureTypeName=null===(d=t.getState())||void 0===d||null===(m=d.swamm)||void 0===m||null===(f=m.bmpFootprintLayer)||void 0===f?void 0:f.name,x.filterObj.featureTypeName=null===(v=t.getState())||void 0===v||null===(g=v.swamm)||void 0===g||null===(y=g.bmpWatershedLayer)||void 0===y?void 0:y.name,console.log("watershed filter: ",x),xe().Observable.of((0,E.He)(null===(b=t.getState())||void 0===b||null===(_=b.swamm)||void 0===_||null===(h=_.bmpOutletLayer)||void 0===h?void 0:h.id,R),(0,E.He)(null===(S=t.getState())||void 0===S||null===(w=S.swamm)||void 0===w||null===(A=w.bmpFootprintLayer)||void 0===A?void 0:A.id,I),(0,E.He)(null===(T=t.getState())||void 0===T||null===(O=T.swamm)||void 0===O||null===(N=O.bmpWatershedLayer)||void 0===N?void 0:N.id,x))}))}}})},652948:(e,t,n)=>{function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(375875),i="INIT_SWAMM",u="SET_SWAMM_PROJECT_DATA",s="FETCH_SWAMM_BMPTYPES_SUCCESS",c="FETCH_GROUP_PROFILES_SUCCESS",p="FETCH_PROJECT_MANAGER_CONFIG_ERROR",d="FETCH_PROJECT_MANAGER_CONFIG_SUCCESS",m="FETCH_SWAMM_ALL_BMPS_SUCCESS",f="FETCH_SWAMM_BMP_STATUSES_SUCCESS",v="FETCH_SWAMM_TARGETS_ERROR",g="FETCH_SWAMM_TARGETS_SUCCESS",y="SELECT_SWAMM_TARGET_ID",b="SHOW_SWAMM_BMP_CHART",_="HIDE_SWAMM_BMP_CHART",h="SHOW_TARGET_FORM",E="HIDE_TARGET_FORM",S="UPDATE_TARGET_FORM",w="CLEAR_TARGET_FORM",A="SUBMIT_TARGET_FORM_SUCCESS",T="DELETE_TARGET_SUCCESS",O="DELETE_TARGET_ERROR",N="SHOW_SWAMM_DATA_GRID",F="HIDE_SWAMM_DATA_GRID",M="SHOW_SWAMM_FEATURE_GRID",C="SHOW_BMP_MANAGER",B="HIDE_BMP_MANAGER",P="TOGGLE_BMP_MANAGER",R="SET_MENU_GROUP",I="TOGGLE_BMP_TYPE_VISIBILITY",x="TOGGLE_BMP_PRIORITY_VISIBILITY",D="TOGGLE_BMP_GROUP_PROFILE_VISIBILITY",L="TOGGLE_BMP_STATUS_VISIBILITY",G="SET_ALL_BMP_TYPES_VISIBILITY",k="SET_CHANGING_BMP_TYPE",j="SET_COMPLEX_BMP_FORM",U="SET_EXPANDED_FILTER",W="SET_BMP_LAYERS",H="SET_STATUS_FILTER",z="SHOW_BMP_FORM",V="HIDE_BMP_FORM",Y="SHOW_LOADING_BMP",K="HIDE_LOADING_BMP",q="SUBMIT_BMP_FORM_SUCCESS",Z="MAKE_BMP_FORM",J="CLEAR_BMP_FORM",X="MAKE_DEFAULTS_BMP_FORM",$="MAKE_EXISTING_BMP_FORM",Q="SET_UPDATING_BMP",ee="UPDATE_BMP_FORM",te="SET_DRAWING_BMP_LAYER_NAME",ne="START_DRAWING_BMP",re="CLEAR_DRAWING_BMP_LAYER_NAME",oe="REGISTER_MISSING_BMP_FEATURE_ID",le="SET_EDITING_BMP_FEATURE_ID",ae="CLEAR_EDITING_BMP_FEATURE_ID",ie="UPDATE_BMP_TYPE_GROUPS",ue="DELETE_BMP_SUCCESS",se="DELETE_BMP_ERROR",ce="SET_BMP_FILTER_MODE",pe="DOWNLOAD_BMP_REPORT",de=n(423570),me=n(197395).SHOW_NOTIFICATION,fe=function(e){return e.map((function(e){return e.visibility=!0,e})),{type:s,bmpTypes:e}};function ve(e){return console.log("fetchSwammBmpTypesError",e),{type:me,title:"Fetch Swamm Bmp Types Error",autoDismiss:600,position:"tc",message:"".concat(null==e?void 0:e.data),uid:de(),level:"error"}}var ge=function(e){return{type:d,payload:e}};function ye(e){return console.log("*** error:",e),{type:p,error:e}}var be=function(e){var t=e.map((function(e){return o(o({},e),{},{id:null==e?void 0:e.pk,visibility:!0})}));return{type:c,groupProfiles:t}};function _e(e){return console.log("fetchGroupProfilesError",e),{type:me,title:"Fetch fetchGroupProfiles Error",autoDismiss:600,position:"tc",message:"".concat(null==e?void 0:e.data),uid:de(),level:"error"}}var he=function(e){return{type:m,allBmps:e}};function Ee(e){return console.log("fetchSwammAllBmpsError",e),{type:me,title:"Fetch Swamm All Bmps Error",autoDismiss:600,position:"tc",message:"".concat(null==e?void 0:e.data),uid:de(),level:"error"}}var Se=function(e){return{type:f,statuses:e}};function we(e){return console.log("fetchSwammBmpStatusesError",e),{type:me,title:"Fetch Swamm Bmp Statuses Error",autoDismiss:600,position:"tc",message:"".concat(null==e?void 0:e.data),uid:de(),level:"error"}}var Ae=function(){return{type:V}},Te=function(e){return{type:k,changingBmpType:e}},Oe=function(e){return{type:$,bmp:e}},Ne=function(){return{type:J}},Fe=function(){return{type:re}},Me=function(){return console.log("clearEditingBmpFeatureId"),{type:ae}},Ce=function(e){return function(t){t({type:g,targets:e})}},Be=function(e){return console.log("*** error:",e),function(t){t({type:me,title:"Failed to load Targets",autoDismiss:60,position:"tc",message:"".concat(null==e?void 0:e.data),uid:de(),level:"error"}),t({type:v,error:e})}},Pe=function(e){return function(t){return a.get("/swamm/api/".concat(e,"/pollutant-loading-target/")).then((function(e){t(Ce(e.data))})).catch((function(e){t(Be(e))}))}},Re=function(e){return function(t){t({type:me,title:"Success",autoDismiss:6,position:"tc",message:"BMP ID: ".concat(e.id," saved"),uid:de(),level:"success"}),t({type:q,bmp:e})}};function Ie(e){return console.log("submitBmpFormError",e),{type:me,title:"Submit Bmp Form Error",autoDismiss:600,position:"tc",message:"Error saving BMP: ".concat(null==e?void 0:e.data),uid:de(),level:"error"}}var xe=function(e){return function(t){t({type:me,title:"Delete BMP Success",autoDismiss:6,position:"tc",message:"Successfully deleted BMP: ".concat(e),uid:de(),level:"success"}),t({type:ue,bmpId:e})}},De=function(e){return console.log("*** error:",e),function(t){t({type:me,title:"Delete BMP Error",autoDismiss:60,position:"tc",message:"".concat(null==e?void 0:e.data),uid:de(),level:"error"}),t({type:se,error:e})}},Le=function(){return{type:E,visibleTargetForm:!1}},Ge=function(){return{type:w,targetForm:null}},ke=function(e){return function(t){t({type:me,title:"Success",autoDismiss:6,position:"tc",message:"Target: ".concat(e.id," saved"),uid:de(),level:"success"}),t({type:A,target:e})}};function je(e){return console.log("submitTargetFormError",e),{type:me,title:"Submit Target Form Error",autoDismiss:600,position:"tc",message:"Error saving Target: ".concat(null==e?void 0:e.data),uid:de(),level:"error"}}var Ue=function(e){return function(t){t({type:me,title:"Delete Target Success",autoDismiss:6,position:"tc",message:"Successfully deleted Target: ".concat(e),uid:de(),level:"success"}),t({type:T,targetId:e})}},We=function(e){return console.log("*** error:",e),function(t){t({type:me,title:"Delete Target Error",autoDismiss:60,position:"tc",message:"".concat(null==e?void 0:e.data),uid:de(),level:"error"}),t({type:O,error:e})}};e.exports={INIT_SWAMM:i,initSwamm:function(){return{type:i}},SET_SWAMM_PROJECT_DATA:u,setSwammProjectData:function(e){return{type:u,projectData:e}},UPDATE_BMP_TYPE_GROUPS:ie,updateBmpTypeGroups:function(e){return console.log("****"),{type:ie,bmpTypeGroups:e}},FETCH_SWAMM_BMPTYPES:"FETCH_SWAMM_BMPTYPES",fetchSwammBmpTypes:function(e){return function(t){return a.get("/swamm/api/".concat(e,"/bmp-type/")).then((function(e){t(fe(e.data))})).catch((function(e){t(ve(e))}))}},FETCH_SWAMM_BMPTYPES_ERROR:"FETCH_SWAMM_BMPTYPES_ERROR",fetchSwammBmpTypesError:ve,FETCH_SWAMM_BMPTYPES_SUCCESS:s,fetchSwammBmpTypesSuccess:fe,FETCH_PROJECT_MANAGER_CONFIG:"FETCH_PROJECT_MANAGER_CONFIG",fetchProjectManagerConfig:function(e){return function(t){return a.get("/projects/api/maps/".concat(t,"/")).then((function(t){e(ge(t.data.project))})).catch((function(t){e(ye(t))}))}},FETCH_PROJECT_MANAGER_CONFIG_ERROR:p,fetchProjectManagerConfigError:ye,FETCH_PROJECT_MANAGER_CONFIG_SUCCESS:d,fetchProjectManagerConfigSuccess:ge,FETCH_GROUP_PROFILES:"FETCH_GROUP_PROFILES",fetchGroupProfiles:function(){return function(e){return a.get("/api/v2/groups?page_size=1000").then((function(t){e(be(t.data.group_profiles))})).catch((function(t){e(_e(t))}))}},FETCH_GROUP_PROFILES_ERROR:"FETCH_GROUP_PROFILES_ERROR",fetchGroupProfilesError:_e,FETCH_GROUP_PROFILES_SUCCESS:c,fetchGroupProfilesSuccess:be,FETCH_SWAMM_ALL_BMPS:"FETCH_SWAMM_ALL_BMPS",fetchSwammAllBmps:function(e){return function(t){return a.get("/swamm/api/".concat(e,"/bmps/")).then((function(e){t(he(e.data))})).catch((function(e){t(Ee(e))}))}},FETCH_SWAMM_ALL_BMPS_ERROR:"FETCH_SWAMM_ALL_BMPS_ERROR",fetchSwammAllBmpsError:Ee,FETCH_SWAMM_ALL_BMPS_SUCCESS:m,fetchSwammAllBmpsSuccess:he,FETCH_SWAMM_BMP_STATUSES:"FETCH_SWAMM_BMP_STATUSES",fetchSwammBmpStatuses:function(e){return function(t){return a.get("/swamm/api/".concat(e,"/bmps/status_list/")).then((function(e){t(Se(e.data))})).catch((function(e){t(we(e))}))}},FETCH_SWAMM_BMP_STATUSES_ERROR:"FETCH_SWAMM_BMP_STATUSES_ERROR",fetchSwammBmpStatusesError:we,FETCH_SWAMM_BMP_STATUSES_SUCCESS:f,fetchSwammBmpStatusesSuccess:Se,FETCH_SWAMM_TARGETS:"FETCH_SWAMM_TARGETS",fetchSwammTargets:Pe,FETCH_SWAMM_TARGETS_ERROR:v,fetchSwammTargetsError:Be,FETCH_SWAMM_TARGETS_SUCCESS:g,fetchSwammTargetsSuccess:Ce,SELECT_SWAMM_TARGET_ID:y,selectSwammTargetId:function(e){return{type:y,selectedTargetId:e}},SUBMIT_BMP_FORM:"SUBMIT_BMP_FORM",submitBmpForm:function(e,t){return e.id?function(n){return console.log("updating existing BMP: ",e),a.patch("/swamm/api/".concat(t,"/bmps/").concat(e.id,"/"),e).then((function(e){n(Re(e.data)),n(Te(!1)),n(Oe(e.data)),n(Pe(t))})).catch((function(e){n(Ie(e))}))}:function(n){return console.log("creating new BMP: ",e),a.post("/swamm/api/".concat(t,"/bmps/"),e).then((function(e){n(Re(e.data)),n(Te(!1)),n(Oe(e.data)),n(Pe(t))})).catch((function(e){n(Ie(e))}))}},SUBMIT_BMP_FORM_ERROR:"SUBMIT_BMP_FORM_ERROR",submitBmpFormError:Ie,SUBMIT_BMP_FORM_SUCCESS:q,submitBmpFormSuccess:Re,TOGGLE_BMP_TYPE:"TOGGLE_BMP_TYPE",toggleBmpType:function(e){return function(t){t({type:"TOGGLE_BMP_TYPE",bmpType:e})}},TOGGLE_BMP_TYPE_VISIBILITY:I,toggleBmpTypeVisibility:function(e){return{type:I,bmpType:e}},TOGGLE_BMP_PRIORITY_VISIBILITY:x,toggleBmpPriorityVisibility:function(e){return{type:x,priority:e}},TOGGLE_BMP_GROUP_PROFILE_VISIBILITY:D,toggleBmpGroupProfileVisibility:function(e){return{type:D,groupProfile:e}},TOGGLE_BMP_STATUS_VISIBILITY:L,toggleBmpStatusVisibility:function(e){return{type:L,status:e}},SET_ALL_BMP_TYPES_VISIBILITY:G,setAllBmpTypesVisibility:function(e){return{type:G,boolValue:e}},SET_BMP_TYPE:"SET_BMP_TYPE",setBmpType:function(e,t){return function(n){n({type:"SET_BMP_TYPE",bmpType:e,isVisible:t})}},SET_STATUS_FILTER:H,setStatusFilter:function(e){return{type:H,statuses:e}},SET_MENU_GROUP:R,setMenuGroup:function(e){return{type:R,payload:e}},SHOW_BMP_FORM:z,showBmpForm:function(){return{type:z}},HIDE_BMP_FORM:V,hideBmpForm:Ae,SHOW_LOADING_BMP:Y,showLoadingBmp:function(){return{type:Y}},HIDE_LOADING_BMP:K,hideLoadingBmp:function(){return{type:K}},SHOW_SWAMM_DATA_GRID:N,showSwammDataGrid:function(){return{type:N}},HIDE_SWAMM_DATA_GRID:F,hideSwammDataGrid:function(){return{type:F}},SHOW_SWAMM_FEATURE_GRID:M,showSwammFeatureGrid:function(e){return{type:M,layer:e}},SHOW_SWAMM_BMP_CHART:b,showSwammBmpChart:function(){return{type:b}},HIDE_SWAMM_BMP_CHART:_,hideSwammBmpChart:function(){return{type:_}},SHOW_BMP_MANAGER:C,showBmpManager:function(){return{type:C}},HIDE_BMP_MANAGER:B,hideBmpManager:function(){return{type:B}},TOGGLE_BMP_MANAGER:P,toggleBmpManager:function(){return{type:P}},CLEAR_BMP_FORM:J,clearBmpForm:Ne,MAKE_BMP_FORM:Z,makeBmpForm:function(e){return{type:Z,groupProfile:e}},MAKE_DEFAULTS_BMP_FORM:X,makeDefaultsBmpForm:function(e){return{type:X,bmpType:e}},MAKE_EXISTING_BMP_FORM:$,makeExistingBmpForm:Oe,SET_UPDATING_BMP:Q,setUpdatingBmp:function(e){return{type:Q,updatingBmp:e}},SET_CHANGING_BMP_TYPE:k,setChangingBmpType:Te,SET_COMPLEX_BMP_FORM:j,setComplexBmpForm:function(e){return{type:j,complexBmpForm:e}},SET_EXPANDED_FILTER:U,setExpandedFilter:function(e){return{type:U,expandedFilter:e}},SET_BMP_LAYERS:W,setBmpLayers:function(e,t,n){return{type:W,bmpOutletLayer:e,bmpFootprintLayer:t,bmpWatershedLayer:n}},getBmpFormSuccess:function(e){return console.log("getBmpFormSuccess bmp:",e),function(t){t({type:me,title:"Success",autoDismiss:6,position:"tc",message:"BMP ID: ".concat(e.id," found"),uid:de(),level:"success"}),t({type:"GET_BMP_FORM_SUCCESS",bmp:e})}},getBmpFormError:function(e){return console.log("getBmpFormError",e),{type:me,title:"Get Bmp Form Error",autoDismiss:600,position:"tc",message:"Error getting BMP: ".concat(null==e?void 0:e.data),uid:de(),level:"error"}},UPDATE_BMP_FORM:ee,updateBmpForm:function(e){return{type:ee,kv:e}},START_DRAWING_BMP:ne,startDrawingBmp:function(){return{type:ne}},SET_DRAWING_BMP_LAYER_NAME:te,setDrawingBmpLayerName:function(e){return console.log("setDrawingBmpLayerName",e),{type:te,drawingBmpLayerName:e}},CLEAR_DRAWING_BMP_LAYER_NAME:re,clearDrawingBmpLayerName:Fe,REGISTER_MISSING_BMP_FEATURE_ID:oe,registerMissingBmpFeatureId:function(e){return{type:oe,missingBmpFeatureId:e}},SET_EDITING_BMP_FEATURE_ID:le,setEditingBmpFeatureId:function(e){return console.log("setEditingBmpFeatureId",e),{type:le,editingBmpFeatureId:e}},CLEAR_EDITING_BMP_FEATURE_ID:ae,clearEditingBmpFeatureId:Me,DELETE_BMP:"DELETE_BMP",deleteBmp:function(e,t){return function(n){return a.delete("/swamm/api/".concat(e,"/bmps/").concat(t,"/"),{}).then((function(e){n(xe(t)),n(Ae()),n(Ne()),n(Me()),n(Fe())})).catch((function(e){n(De(e))}))}},DELETE_BMP_ERROR:se,deleteBmpError:De,DELETE_BMP_SUCCESS:ue,deleteBmpSuccess:xe,SET_BMP_FILTER_MODE:ce,setBmpFilterMode:function(e){return{type:ce,bmpFilterMode:e}},SHOW_TARGET_FORM:h,showTargetForm:function(e){return{type:h,visibleTargetForm:!0,target:e}},HIDE_TARGET_FORM:E,hideTargetForm:Le,UPDATE_TARGET_FORM:S,updateTargetForm:function(e){return{type:S,kv:e}},CLEAR_TARGET_FORM:w,clearTargetForm:Ge,SUBMIT_TARGET_FORM:"SUBMIT_TARGET_FORM",submitTargetForm:function(e,t){return e.id?function(n){return console.log("updating existing Target: ",e),a.patch("/swamm/api/".concat(t,"/pollutant-loading-target/").concat(e.id,"/"),e).then((function(e){n(ke(e.data)),n(Pe(t)),n(Le()),n(Ge())})).catch((function(e){n(je(e))}))}:function(n){return console.log("creating new Target: ",e),a.post("/swamm/api/".concat(t,"/pollutant-loading-target/"),e).then((function(e){n(ke(e.data)),n(Pe(t)),n(Le()),n(Ge())})).catch((function(e){n(je(e))}))}},SUBMIT_TARGET_FORM_SUCCESS:A,submitTargetFormSuccess:ke,SUBMIT_TARGET_FORM_ERROR:"SUBMIT_TARGET_FORM_ERROR",submitTargetFormError:je,DELETE_TARGET:"DELETE_TARGET",deleteTarget:function(e,t){return function(n){return a.delete("/swamm/api/".concat(e,"/pollutant-loading-target/").concat(t,"/"),{}).then((function(r){n(Ue(t)),n(Pe(e)),n(Le()),n(Ge())})).catch((function(e){n(We(e))}))}},DELETE_TARGET_SUCCESS:T,deleteTargetSuccess:Ue,DELETE_TARGET_ERROR:O,deleteTargetError:We,DOWNLOAD_BMP_REPORT:pe,downloadBmpReport:function(e){return{type:pe,bmpId:e}}}},34088:e=>{e.exports=function(){for(var e=arguments.length,t=[],n=0;n<e;n++)t[n]=arguments[n];if(0!==(t=t.filter((function(e){return null!=e}))).length)return 1===t.length?t[0]:t.reduce((function(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}))}},273454:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(923645),o=n.n(r)()((function(e){return e[1]}));o.push([e.id,'.msgapi #anuga-container {\n    width:100%;\n    height:100%;\n    display: flex;\n    justify-content: center;\n    margin: 10px;\n    border: 1px solid #fff;\n    background-color: #ffffff;\n}\n\n.msgapi #anuga-chart {\n    z-index: 3000;\n    width: 98%;\n    height: 90%;\n    margin: 70px 20px 20px 0;\n    background-color: #ffffff;\n    font-size: 12px;\n    border-radius: 4px;\n    text-align: center;\n}\n\n.msgapi .chart-mainbody {\n    padding: 20px;\n    margin-top: 0;\n    height: 85%;\n    overflow: auto;\n}\n\n.msgapi .chart-header {\n    padding: 20px;\n    height: 60px;\n    border-bottom: 1px solid #DDD;\n    background-color: #ffffff;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n}\n\n.msgapi .chart-footer {\n    padding: 20px;\n    bottom: 0;\n    height: 80px;\n    background-color: #ffffff;\n    border-top: 1px solid #DDD;\n    border-bottom-left-radius: 5px;\n    border-bottom-right-radius: 5px;\n}\n\n.msgapi .chart-sidebar {\n    padding: 0 30px 0 30px;\n    min-height: 600px;\n    background-color: #f3f3f3;\n    border: 1px solid #c7c7c7;\n    border-radius: 3px;\n}\n\n.msgapi .scenario-input {\n    font-size: 14px;\n    white-space: nowrap;\n    padding-left: 3px;\n    vertical-align: middle;\n    text-overflow: ellipsis ellipsis;\n    overflow: hidden;\n    border: white;\n    text-align: center;\n    background: rgba(255, 255, 255, 0.22);\n    color: #f4f4f4;\n}\n\n.msgapi .table-hover > tbody > tr:hover {\n    background-color: #ffffff45;\n}\n\n.msgapi .scenario-table {\n    margin-bottom: 0;\n}\n\n.msgapi .scenario-table-header {\n    height: 45px;\n}\n\n.msgapi .scenario-table-header th {\n    text-align:center;\n}\n\n.msgapi .scenario-table-row {\n    height: 45px\n}\n\n.msgapi .network-table {\n    margin-bottom: 0;\n}\n\n.msgapi .network-table-header {\n    height: 45px;\n}\n\n.msgapi .network-table-header th {\n    text-align:center;\n}\n\n.msgapi .network-table-row {\n    height: 45px\n}\n\n.msgapi #new-scenario-button {\n    position: absolute;\n    right: 40px;\n    top: 11px;\n}\n\n.msgapi .scenario-select {\n    border-radius: 3px;\n    width: 100px;\n    height: 22px;\n    font-size: 14px;\n    white-space: nowrap;\n    padding-left: 3px;\n    vertical-align: middle;\n    text-overflow: ellipsis ellipsis;\n    overflow: hidden;\n    border: white;\n    text-align: center;\n    background: rgba(255, 255, 255, 0.22);\n    color: #f4f4f4;\n}\n\n.msgapi .add-data-input {\n    font-size: 14px;\n    white-space: nowrap;\n    padding-left: 3px;\n    vertical-align: middle;\n    text-overflow: ellipsis ellipsis;\n    overflow: hidden;\n    border: white;\n    text-align: center;\n    background: rgba(255, 255, 255, 0.22);\n    color: #f4f4f4;\n}\n\n.msgapi #anuga-scenario-log-viewer-container {\n    position: absolute;\n    z-index: 2000;\n    top: 5%;\n    width: 800px;\n    min-height: 600px;\n    color: #333333;\n    background-color: #f2f2f2;\n    border: 2px solid #dddddd;\n    border-radius: 5px;\n}\n\n.msgapi #anuga-scenario-log-viewer {\n    overflow-y: scroll;\n    height: 70vh;\n    padding: 10px;\n    margin: 0 0 10px;\n    font-size: 12px;\n    line-height: 1.42857143;\n    white-space: pre-line;\n    word-break: break-all;\n    word-wrap: break-word;\n}\n\n.msgapi #anuga-run-menu-container {\n    position: absolute;\n    padding: 10px;\n    margin: 0 0 10px;\n    font-size: 12px;\n    z-index: 2000;\n    top: 80px;\n    min-width: 800px;\n    min-height: 600px;\n    color: white;\n    background-color: #003c88cc;\n    border: 1px solid white;\n    border-radius: 5px;\n    white-space: pre-line;\n    word-break: break-all;\n    word-wrap: break-word;\n    text-align: left;\n}\n\n.msgapi #anuga-run-menu {\n    color: white;\n    background: #000000cc;\n    border-radius: 5px;\n    font-family: Monospace;\n    overflow-x: auto;\n    height: 100px;\n    padding: 10px;\n    margin: 20px 0 10px;\n}\n\n.msgapi #anuga-compute-instance-menu {\n    color: black;\n    background: white;\n    overflow-y: scroll;\n    overflow-x: auto;\n    height: 35vh;\n    padding: 10px;\n    margin: 0 0 10px;\n    font-size: 12px;\n    white-space: pre-line;\n    word-break: break-all;\n    word-wrap: break-word;\n}\n\n.msgapi #anuga-scenario-menu {\n    overflow-y: hidden;\n    overflow-x: auto;\n    max-width: 98%;\n}\n\n.msgapi ::placeholder { /* Chrome, Firefox, Opera, Safari 10.1+ */\n  color: white;\n  opacity: 1; /* Firefox */\n}\n\n.msgapi .run-server-table {\n    margin-bottom: 0;\n    text-align: center;\n}\n\n.msgapi .run-server-table-header {\n    height: 45px;\n}\n\n.msgapi .run-server-table-header > th {\n    text-align: center;\n}\n\n.msgapi .run-server-table-row {\n    height: 45px\n}\n\n.msgapi .run-server-table-row {\n    text-align: center;\n}\n\n/*#identify-container {*/\n/*    display:none;*/\n/*}*/\n\n/*#navigationBar {*/\n/*    display:none;*/\n/*}*/\n\n/* this is really terrible and can lead to random stuff not showing, but it is the only way I can see to select the\ndiv that holds the feature-grid */\n/*main > div[style*="1030"]:not([id]):not([role]):not([class]) {*/\n/*    display: none;*/\n/*}*/',""]);const l=o},666129:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(923645),o=n.n(r)()((function(e){return e[1]}));o.push([e.id,".msgapi .bmp-progress-button-danger {\n    top: 80px;\n    left: 20px;\n    min-width: 135px;\n    position: absolute;\n    opacity: 0.9;\n    border-radius: 4px;\n    background-color: inherit;\n}\n\n.msgapi .bmp-progress-button-success {\n    top: 80px;\n    left: 20px;\n    min-width: 135px;\n    position: absolute;\n    opacity: 0.9;\n    border-radius: 4px;\n    background-color: inherit;\n}\n\n.msgapi .bmp-loading-button {\n    position: absolute;\n    top: 200px;\n    left: 50%;\n    margin-top: -100px;\n    margin-left: -100px;\n    width: 200px;\n    height: 100px;\n    border-radius: 4px;\n    border-color: white;\n    color: white;\n    background: rgb(0, 86, 187);\n    text-align: center;\n    z-index: 10000;\n}\n\n.msgapi .filter-row {\n    width: 240px;\n    font-size: 14px;\n    text-align: left;\n    text-overflow: ellipsis ellipsis;\n    white-space: nowrap;\n    overflow: hidden;\n}\n\n.msgapi .form-group {\n     margin-bottom: 5px;\n}\n\n.msgapi #swamm-bmp-form-panel {\n    width: 98vw;\n    max-width: 98vw;\n    max-height: 98vw;\n    font-size: small;\n}",""]);const l=o},945177:(e,t,n)=>{"use strict";var r=n(29059);t.__esModule=!0,t.default=void 0;var o,l=r(n(250139)),a="clearTimeout",i=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-s)),r=setTimeout(e,n);return s=t,r},u=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};l.default&&["","webkit","moz","o","ms"].some((function(e){var t=u(e,"request");if(t in window)return a=u(e,"cancel"),i=function(e){return window[t](e)}}));var s=(new Date).getTime();(o=function(e){return i(e)}).cancel=function(e){window[a]&&"function"==typeof window[a]&&window[a](e)};var c=o;t.default=c,e.exports=t.default},673759:e=>{"use strict";e.exports=function(e,t,n,r,o,l,a,i){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=[n,r,o,l,a,i],c=0;(u=new Error(t.replace(/%s/g,(function(){return s[c++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}},23279:(e,t,n)=>{var r=n(513218),o=n(707771),l=n(14841),a=Math.max,i=Math.min;e.exports=function(e,t,n){var u,s,c,p,d,m,f=0,v=!1,g=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function b(t){var n=u,r=s;return u=s=void 0,f=t,p=e.apply(r,n)}function _(e){return f=e,d=setTimeout(E,t),v?b(e):p}function h(e){var n=e-m;return void 0===m||n>=t||n<0||g&&e-f>=c}function E(){var e=o();if(h(e))return S(e);d=setTimeout(E,function(e){var n=t-(e-m);return g?i(n,c-(e-f)):n}(e))}function S(e){return d=void 0,y&&u?b(e):(u=s=void 0,p)}function w(){var e=o(),n=h(e);if(u=arguments,s=this,m=e,n){if(void 0===d)return _(m);if(g)return clearTimeout(d),d=setTimeout(E,t),b(m)}return void 0===d&&(d=setTimeout(E,t)),p}return t=l(t)||0,r(n)&&(v=!!n.leading,c=(g="maxWait"in n)?a(l(n.maxWait)||0,t):c,y="trailing"in n?!!n.trailing:y),w.cancel=function(){void 0!==d&&clearTimeout(d),f=0,u=m=s=d=void 0},w.flush=function(){return void 0===d?p:S(o())},w}},807654:(e,t,n)=>{var r=n(281763);e.exports=function(e){return r(e)&&e!=+e}},707771:(e,t,n)=>{var r=n(555639);e.exports=function(){return r.Date.now()}},823493:(e,t,n)=>{var r=n(23279),o=n(513218);e.exports=function(e,t,n){var l=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(n)&&(l="leading"in n?!!n.leading:l,a="trailing"in n?!!n.trailing:a),r(e,t,{leading:l,maxWait:t,trailing:a})}}}]);