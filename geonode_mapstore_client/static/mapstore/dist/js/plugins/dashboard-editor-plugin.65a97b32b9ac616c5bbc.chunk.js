(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[78225],{868143:(t,n,e)=>{"use strict";e.r(n),e.d(n,{default:()=>T});var o=e(124852),r=e.n(o),i=e(867076),c=e(22222),u=e(171703),a=e(45697),s=e.n(a),l=e(322843),d=e(401757),f=e(367306),p=e(296311),b=e(557579),y=e(555927);const h=(0,i.compose)((0,u.connect)((function(){return{}}),{backFromWizard:function(){return(0,b.Rz)("layer",void 0)}}),(0,i.withProps)((function(t){var n=t.backFromWizard;return{exitButton:{onClick:void 0===n?function(){}:n,glyph:"arrow-left",tooltipId:"widgets.builder.wizard.backToLayerSelection"}}})));var g=e(975480),m=e(949832),v=e(807691),w=e(24412),S=e(80717);function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function O(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function E(t,n){return(E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t})(t,n)}function j(t,n){if(n&&("object"===P(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function A(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var M=(0,i.compose)((0,u.connect)(p.Nb,{toggleConnection:b.w2,triggerShowConnections:y.G9}),(0,u.connect)(p.Tw),(0,i.withProps)((function(t){var n=t.availableDependencies;return{availableDependencies:(void 0===n?[]:n).filter((function(t){return"map"!==t}))}})),h)(m.Z),D=(0,i.compose)((0,u.connect)((0,c.P1)(f.P0,d.HU,f.DZ,d.ie,(function(t,n,e){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return{showConnections:t,hasConnections:o.length>0,hasWidgets:n,canEdit:e}})),{onShowConnections:y.G9,onAddWidget:b.A4}),(0,i.withProps)((function(t){var n=t.onAddWidget,e=void 0===n?function(){}:n,o=t.hasWidgets,r=t.canEdit,i=t.hasConnections,c=t.showConnections,u=t.onShowConnections,a=void 0===u?function(){}:u;return{buttons:[{glyph:"plus",tooltipId:"dashboard.editor.addACardToTheDashboard",bsStyle:"primary",visible:r,id:"ms-add-card-dashboard",onClick:function(){return e()}},{glyph:c?"bulb-on":"bulb-off",tooltipId:c?"dashboard.editor.hideConnections":"dashboard.editor.showConnections",bsStyle:c?"success":"primary",visible:!!o&&!!i||!r,onClick:function(){return a(!c)}}]}})))(S.Z),_=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&E(t,n)}(u,t);var n,e,o,i,c=(o=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=k(o);if(i){var e=k(this).constructor;t=Reflect.construct(n,arguments,e)}else t=n.apply(this,arguments);return j(this,t)});function u(){return C(this,u),c.apply(this,arguments)}return n=u,(e=[{key:"componentDidMount",value:function(){this.props.onMount()}},{key:"componentWillUnmount",value:function(){this.props.onUnmount()}},{key:"render",value:function(){var t=this,n=this.props.pluginCfg.selectedService||"",e=this.props.pluginCfg.services||{};return this.props.editing?r().createElement("div",{className:"dashboard-editor de-builder"},r().createElement(M,{disableEmptyMap:this.props.disableEmptyMap,defaultSelectedService:n,defaultServices:e,enabled:this.props.editing,onClose:function(){return t.props.setEditing(!1)},catalog:this.props.catalog})):r().createElement("div",{className:"ms-vertical-toolbar dashboard-editor de-toolbar",id:this.props.id},r().createElement(D,{transitionProps:!1,btnGroupProps:{vertical:!0},btnDefaultProps:{tooltipPosition:"right",className:"square-button-md",bsStyle:"primary"}}),this.props.loading?r().createElement(g.Z,{style:{position:"fixed",bottom:0}}):null)}}])&&O(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),u}(r().Component);A(_,"propTypes",{id:s().string,editing:s().bool,loading:s().bool,limitDockHeight:s().bool,fluid:s().bool,zIndex:s().number,dockSize:s().number,position:s().string,onMount:s().func,onUnmount:s().func,setEditing:s().func,dimMode:s().string,src:s().string,style:s().object,pluginCfg:s().object,catalog:s().object,disableEmptyMap:s().bool}),A(_,"defaultProps",{id:"dashboard-editor",editing:!1,dockSize:500,loading:!0,limitDockHeight:!0,zIndex:1e4,fluid:!1,dimMode:"none",position:"left",onMount:function(){},onUnmount:function(){},setEditing:function(){}});var R=(0,u.connect)((0,c.P1)(f.i$,f.MZ,(function(t,n){return{editing:t,loading:n}})),{setEditing:y.D_,onMount:function(){return(0,y.Nl)(!0)},onUnmount:function(){return(0,y.Nl)(!1)}})(_);const T=(0,l.rx)("DashboardEditor",{component:R,reducers:{dashboard:w.Z},epics:v.ZP})},274621:(t,n,e)=>{"use strict";e.d(n,{np:()=>o,L3:()=>r,jl:()=>i,y8:()=>c,qg:()=>u}),e(727418),e(227361);var o=function(t){return t&&t.security&&t.security.user},r=function(t){return o(t)&&o(t).role},i=function(t){return t&&t.security&&t.security.user},c=function(t){return t.security&&t.security.token},u=function(t){return"ADMIN"===r(t)}},989077:(t,n,e)=>{"use strict";e.d(n,{LR:()=>b,RP:()=>y,UC:()=>g,zr:()=>h});var o=e(178598),r=e.n(o),i=e(997995),c=e.n(i),u=(e(279003),e(489597),e(966085),e(882702)),a=(e(727418),e(972163)),s=(e(505055),e(3674),e(252628),e(227361),e(91175),e(66604),e(187185),e(630998),e(478718),e(218721),e(493220),e(423570),e(957557),e(747037),e(385564)),l=e.n(s);function d(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var o,r,i=[],c=!0,u=!1;try{for(e=e.call(t);!(c=(o=e.next()).done)&&(i.push(o.value),!n||i.length!==n);c=!0);}catch(t){u=!0,r=t}finally{try{c||null==e.return||e.return()}finally{if(u)throw r}}return i}}(t,n)||function(t,n){if(t){if("string"==typeof t)return f(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?f(t,n):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,o=new Array(n);e<n;e++)o[e]=t[e];return o}e(313311),e(406557);var p=function(t,n,e,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return l()([[[/\&/g,"&amp;"]],t?[]:[[/\"/g,"&quot;"]],n?[]:[[/\'/g,"&apos;"]],e?[]:[[/\>/g,"&gt;"]],o?[]:[[/\</g,"&lt;"]]]).reduce((function(t,n){var e=d(n,2),o=e[0],r=e[1];return t.replace(o,r)}),r)};p.bind(null,!0,!0,!0,!1),p.bind(null,!1,!1,!0,!1),e(624262),e(896309),new DOMParser;var b=function(t,n,e){var o=new Blob([t],{type:e});r().saveAs(o,n)},y=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"snapshot.png",e=arguments.length>2?arguments[2]:void 0;b(c()(t),n,e)},h=function(t){return new u.Promise((function(n,e){var o=new FileReader;o.onload=function(){try{n(JSON.parse(o.result))}catch(t){e(t)}},o.onerror=function(){e(o.error.name)},o.readAsText(t)}))},g=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new u.Promise((function(e,o){var r=new FileReader;r.onload=function(){try{var t=JSON.parse(r.result);e({geoJSON:t,errors:(0,a.$)(t).filter((function(t){return n||"message"!==t.level}))})}catch(t){o(t)}},r.onerror=function(){o(r.error.name)},r.readAsText(t)}))}},272810:()=>{},486799:()=>{}}]);