(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[95121,2095],{217549:(e,r,n)=>{"use strict";n.d(r,{Z:()=>c});var t=n(124852),o=n.n(t),i=n(45697),a=n.n(i),u=["href","readOnly","children"];function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(this,arguments)}function l(e){var r=e.href,n=e.readOnly,t=e.children,i=function(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n,t,o={},i=Object.keys(e);for(t=0;t<i.length;t++)n=i[t],r.indexOf(n)>=0||(o[n]=e[n]);return o}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)n=i[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,u);return n?t:o().createElement("a",s({href:r},i),t)}l.propTypes={href:a().string,readOnly:a().bool.isRequired,children:a().any},l.defaultProps={href:"",readOnly:!1};const c=l},834065:(e,r,n)=>{"use strict";n.d(r,{Z:()=>f});var t=n(124852),o=n.n(t),i=n(45697),a=n.n(i),u=n(877593),s=n(217549),l=["resource","readOnly","formatHref","pathname"];function c(){return(c=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(this,arguments)}function d(e){var r,n,t,i=e.resource,a=e.readOnly,d=e.formatHref,f=e.pathname,p=function(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n,t,o={},i=Object.keys(e);for(t=0;t<i.length;t++)n=i[t],r.indexOf(n)>=0||(o[n]=e[n]);return o}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)n=i[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,l);return p.detailsPanel?o().createElement(s.Z,{readOnly:a,href:d({pathname:f,query:{"filter{owner.username.in}":null===(t=i.owner)||void 0===t?void 0:t.username}})},i.owner&&(0,u.vW)(i.owner)):o().createElement("p",c({className:"card-text gn-card-user"},p),(null===(r=i.owner)||void 0===r?void 0:r.avatar)&&o().createElement("img",{src:i.owner.avatar,alt:(0,u.vW)(i.owner),className:"gn-card-author-image"}),o().createElement(s.Z,{readOnly:a,href:d({pathname:f,query:{"filter{owner.username.in}":null===(n=i.owner)||void 0===n?void 0:n.username}})},i.owner&&(0,u.vW)(i.owner)))}d.propTypes={resource:a().object,readOnly:a().bool,formatHref:a().func,props:a().any},d.defaultProps={resource:{},readOnly:!1,formatHref:function(){return"#"}};const f=d},71268:(e,r,n)=>{"use strict";n.d(r,{Z:()=>b});var t=n(124852),o=n.n(t),i=n(805346),a=n(45697),u=n.n(a),s=n(507412),l=n(815135),c=n(441609),d=n.n(c),f=n(535721),p=n(303744),m=(0,l.Z)(p.Z),v=function(e){var r,n,t,a=e.resource,u=void 0===a?{}:a,l=(0,f.fu)(u),c=l.isApproved,p=l.isPublished,v=l.isProcessing,b=l.isCopying,g=l.isDeleting,y=l.isDeleted;return d()(u)?null:o().createElement("p",{className:"gn-resource-status-text"},!v&&(!c||!p)&&o().createElement(m,{variant:"default",className:"gn-resource-status gn-status-button",tooltip:(r={isApproved:c,isPublished:p},n=r.isApproved,t=r.isPublished,!n&&t?o().createElement(i.Z,{msgId:"gnhome.pendingApproval"}):n||t?t||n?"":o().createElement(i.Z,{msgId:"gnhome.unpublished"}):o().createElement(i.Z,{msgId:"gnhome.unApprovedunPublished"})),style:{marginRight:(g||y||b)&&"0.4rem"},tooltipPosition:"top"},o().createElement(s.Z,{name:"info-circle",className:"gn-resource-status-pending"})),g&&o().createElement("span",{className:"gn-resource-status gn-resource-status-danger"},o().createElement(i.Z,{msgId:"gnviewer.deleting"})),y&&o().createElement("span",{className:"gn-resource-status gn-resource-status-danger"},o().createElement(i.Z,{msgId:"gnviewer.deleted"})),b&&o().createElement("span",{className:"gn-resource-status gn-resource-status-primary"},o().createElement(i.Z,{msgId:"gnviewer.cloning"})))};v.propTypes={isApproved:u().bool,isPublished:u().bool},v.defaultProps={isApproved:!0,isPublished:!0};const b=v},94228:(e,r,n)=>{"use strict";n.r(r),n.d(r,{default:()=>I});var t=n(124852),o=n.n(t),i=n(322843),a=n(171703),u=n(22222),s=n(737275),l=n(899004),c=n(274621),d=n(643892),f=n(452992),p=n(17594),m=n(925108),v=n(782904),b=n(572036),g=n(76907),y=n(303744);var h=n(100824),O=n(625635),w=n(877593),P=n(805346),j=n(675110),E=n(800827),C=n(535721),S=n(770058);function Z(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function A(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var x=(0,a.connect)((0,u.P1)([function(e){var r;return(null==e||null===(r=e.gnresource)||void 0===r?void 0:r.data)||null},function(e){var r;return(null==e||null===(r=e.gnresource)||void 0===r?void 0:r.loading)||!1},function(e){var r,n;return(null==e||null===(r=e.gnresource)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.favorite)||!1},function(e){var r;return(null==e||null===(r=e.gnsave)||void 0===r?void 0:r.savingThumbnailMap)||!1},j.l2,g.km,g.Bs,E.Od,function(e){var r;return(null==e||null===(r=e.gnresource)||void 0===r?void 0:r.showMapThumbnail)||!1},f.WB],(function(e,r,n,t,o,i,a,u,s,l){return{layers:o,resource:e,loading:r,savingThumbnailMap:t,favorite:n,isThumbnailChanged:i,resourceThumbnailUpdating:a,initialBbox:null==u?void 0:u.bbox,enableMapViewer:s,downloading:l,canDownload:(0,C.sH)(e,"download_resourcebase"),resourceId:e.pk}})),{closePanel:v.Xg.bind(null,"rightOverlay","enabled",!1),onFavorite:d.gw,onMapThumbnail:d.CB,onResourceThumbnail:d.e5,onClose:d.qs,onAction:d.Rk})(l.Z),k=(0,a.connect)((0,u.P1)([g.V$,g.fg],(function(e,r){return{hide:e||!r}})),{onClick:v.Xg.bind(null,"rightOverlay","enabled","DetailViewer")})((function(e){var r=e.onClick,n=e.hide,t=e.variant,i=e.size,a=e.showMessage;return n?null:o().createElement(y.Z,{variant:t,size:i,onClick:function(){r()}},a?o().createElement(P.Z,{msgId:"gnviewer.editInfo"}):o().createElement(p.Z,{name:"info-circle"}))})),T=(0,a.connect)((0,u.P1)([function(e){var r,n;return"DetailViewer"===(null==e||null===(r=e.controls)||void 0===r||null===(n=r.rightOverlay)||void 0===n?void 0:n.enabled)},g.il,g.V$,g.fg,c.np,function(e){return(0,i.bh)(e,(0,s.u8)("monitorState"))}],(function(e,r,n,t,o,i){return{enabled:e,canEdit:r,hide:n||!t,user:o,monitoredState:i}})),{onEditResource:d.Br,onEditAbstractResource:d.bI,onEditThumbnail:d.U5,onClose:v.Xg.bind(null,"rightOverlay","enabled",!1)})((0,O.EN)((function(e){var r=e.location,n=e.enabled,i=e.onEditResource,a=e.onEditAbstractResource,u=e.onEditThumbnail,s=e.canEdit,l=e.hide,c=e.user,d=e.onClose,f=e.monitoredState,p=e.queryPathname,m=void 0===p?"/":p,v=e.tabs,b=void 0===v?[]:v,g=(0,S._y)(f,{tabs:b}),y=function(e){var r=e.disabled,n=e.onClickOut,o=(0,t.useRef)();return(0,t.useEffect)((function(){function e(e){var t;!r&&(null==o||null===(t=o.current)||void 0===t?void 0:t.contains)&&!o.current.contains(e.target)&&n()}return window.addEventListener("mousedown",e),function(){window.removeEventListener("mousedown",e)}}),[r,o,n]),o}({disabled:!n,onClickOut:function(){d()}});return l?null:o().createElement(h.Z,{enabled:n,ref:y,className:"gn-overlay-wrapper"},o().createElement(x,{editTitle:function(e){i(e)},editAbstract:function(e){a(e)},editThumbnail:function(e){u(e,!0)},activeEditMode:n&&s,enableFavorite:!!c,formatHref:function(e){return(0,w.nz)(function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Z(Object(n),!0).forEach((function(r){A(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}({location:r},e))},tabs:g.tabs,pathname:m}))})));const I=(0,i.rx)("DetailViewer",{component:T,containers:{ActionNavbar:{name:"DetailViewerButton",Component:k}},epics:{},reducers:{gnresource:b.Z,controls:m.Z}})},572036:(e,r,n)=>{"use strict";n.d(r,{Z:()=>b});var t=n(618446),o=n.n(t),i=n(643892),a=n(535721),u=["data"],s=["features"],l=["features"],c=["features"];function d(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n,t,o={},i=Object.keys(e);for(t=0;t<i.length;t++)n=i[t],r.indexOf(n)>=0||(o[n]=e[n]);return o}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)n=i[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function f(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function p(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?f(Object(n),!0).forEach((function(r){m(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function m(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var v={selectedLayerPermissions:[],data:{},permissions:[]};const b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,r=arguments.length>1?arguments[1]:void 0;switch(console.log("state for gnresource:",e),console.log("action for gnresource:",r),r.type){case i.$X:return v;case i.ql:return p(p({},e),{},{configError:void 0,loadingResourceConfig:r.loading});case i.nS:return p(p({},e),{},{loading:!1,configError:r.message});case i.W:return p(p({},e),{},{loading:!0});case i.Zf:var n=r.data||{},t=(n.data,d(n,u));return p(p({},e),{},{error:null,initialResource:p({},r.data),data:t,loading:!1,isNew:!1});case i.Eu:return p(p({},e),{},{initialResource:null,data:null,error:r.error,loading:!1});case i.Vy:return p(p({},e),{},{data:p(p({},e.data),r.properties)});case i.YB:return p(p({},e),{},{type:r.resourceType});case i.xm:return p(p({},v),{},{isNew:!0});case i._f:return p(p({},e),{},{id:r.id});case i.ek:return p(p({},e),{},{permissions:r.permissions});case i.cd:return p(p({},e),{},{data:p(p({},null==e?void 0:e.data),{},{title:null==r?void 0:r.title,name:null==r?void 0:r.title})});case i.pt:return p(p({},e),{},{data:p(p({},null==e?void 0:e.data),{},{abstract:null==r?void 0:r.abstract})});case i.ww:return p(p({},e),{},{data:p(p({},null==e?void 0:e.data),{},{thumbnail_url:null==r?void 0:r.thumbnailUrl,thumbnailChanged:null==r?void 0:r.thumbnailChanged})});case i._Z:return p(p({},e),{},{data:p(p({},null==e?void 0:e.data),{},{updatingThumbnail:!0})});case i.dh:return p(p({},e),{},{showMapThumbnail:r.enabled});case i.p2:return p(p({},e),{},{selectedLayerPermissions:r.permissions});case i.ih:return p(p({},e),{},{initialCompactPermissions:r.compactPermissions,compactPermissions:r.compactPermissions,isCompactPermissionsChanged:!1,geoLimits:[]});case i.J5:return p(p({},e),{},{compactPermissions:r.compactPermissions,isCompactPermissionsChanged:!o()((0,a.go)(e.initialCompactPermissions),(0,a.go)(r.compactPermissions)),geoLimits:(0,a.vB)(r.compactPermissions)});case i.uA:if(e.compactPermissions){var f=e.compactPermissions,m=f.users,b=f.organizations,g=f.groups;return p(p({},e),{},{compactPermissions:{users:m.map((function(e){return e.features,d(e,s)})),organizations:b.map((function(e){return e.features,d(e,l)})),groups:g.map((function(e){return e.features,d(e,c)}))},geoLimits:[]})}return e;default:return e}}},770058:(e,r,n)=>{"use strict";n.d(r,{gj:()=>f,QH:()=>m,mk:()=>v,BK:()=>b,bH:()=>g,_y:()=>y});var t=n(227361),o=n.n(t),i=n(414293),a=n.n(i),u=n(322843),s=n(368523);function l(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(t=n.next()).done)&&(i.push(t.value),!r||i.length!==r);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,r)||function(e,r){if(e){if("string"==typeof e)return c(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,r,n){var t=r?r.filter((function(e){return e.type===n})):void 0;return void 0===t||t&&0===t.length||t&&t.some((function(r){return e&&e.includes(null==r?void 0:r.value)}))}function p(e,r){return 0===(null==r?void 0:r.indexOf("${"))?o()(e,r.replace(/^\$\{(.*)\}$/,"$1")):r}function m(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",t=r.split(n),o=t.map((function(r){return p(e,r)}));return o.join(n)}var v=function(e){return!(""===e||a()(e))},b=function(e){return function r(n){return n&&"object"===d(n)?Array.isArray(n)?n.map(r):Object.fromEntries(Object.entries(n).map((function(e){var n=l(e,2),t=n[0],o=n[1];return[t,r(o)]}))):e(n)}},g=function e(r,n){return r&&r.reduce((function(r,t){var o=t;return Object.entries(t).forEach((function(r){var i=l(r,2),a=i[0],u=i[1];Array.isArray(u)&&(o[a]=e(t[a],n))})),n(o)&&r.push(o),r}),[])},y=function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t=n.filterFunc,i=void 0===t?function(e){return!e.disableIf}:t,a=g([b((function(r){return(0,u.CU)((function(r){return o()(e,r)}),(0,s.z)(),r)}))(r)],i),c=l(a,1),d=c[0];return d}},887157:(e,r,n)=>{var t=n(640554),o=n(588958);e.exports=function(e,r,n,i){var a=e.length;for((n=t(n))<0&&(n=-n>a?0:a+n),(i=void 0===i||i>a?a:t(i))<0&&(i+=a),i=n>i?0:o(i);n<i;)e[n++]=r;return e}},580760:(e,r,n)=>{var t=n(989881);e.exports=function(e,r){var n=[];return t(e,(function(e,t,o){r(e,t,o)&&n.push(e)})),n}},389179:(e,r,n)=>{var t=n(555639),o=n(640554),i=n(14841),a=n(479833),u=t.isFinite,s=Math.min;e.exports=function(e){var r=Math[e];return function(e,n){if(e=i(e),(n=null==n?0:s(o(n),292))&&u(e)){var t=(a(e)+"e").split("e"),l=r(t[0]+"e"+(+t[1]+n));return+((t=(a(l)+"e").split("e"))[0]+"e"+(+t[1]-n))}return r(e)}}},819873:(e,r,n)=>{var t=n(887157),o=n(816612);e.exports=function(e,r,n,i){var a=null==e?0:e.length;return a?(n&&"number"!=typeof n&&o(e,r,n)&&(n=0,i=a),t(e,r,n,i)):[]}},763105:(e,r,n)=>{var t=n(234963),o=n(580760),i=n(267206),a=n(701469);e.exports=function(e,r){return(a(e)?t:o)(e,i(r,3))}},313880:(e,r,n)=>{var t=n(479833);e.exports=function(){var e=arguments,r=t(e[0]);return e.length<3?r:r.replace(e[1],e[2])}},59854:(e,r,n)=>{var t=n(389179)("round");e.exports=t},588958:(e,r,n)=>{var t=n(829750),o=n(640554);e.exports=function(e){return e?t(o(e),0,4294967295):0}}}]);