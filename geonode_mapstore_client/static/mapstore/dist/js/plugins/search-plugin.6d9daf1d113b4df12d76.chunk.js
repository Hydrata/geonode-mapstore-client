(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[65190],{460604:(e,t,r)=>{"use strict";r.d(t,{hn:()=>n,yg:()=>o,vD:()=>a,jJ:()=>i,oy:()=>c,W:()=>l,B1:()=>s,fU:()=>u,cY:()=>f});var n="ADDITIONALLAYER:ADD_ADDITIONAL_LAYERS",o="ADDITIONALLAYER:REMOVE_ADDITIONAL_LAYER",a="ADDITIONALLAYER:REMOVE_ALL_ADDITIONAL_LAYERS",i="ADDITIONALLAYER:UPDATE_ADDITIONAL_LAYER",c="ADDITIONALLAYER:UPDATE_OPTIONS_BY_OWNER",l=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"override",n=arguments.length>3?arguments[3]:void 0;return{type:i,id:e,owner:t,actionType:r,options:n}},s=function(e,t){return{type:c,owner:e,options:t}},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,r=e.owner;return{type:o,id:t,owner:r}},f=function(e){return{type:a,owner:e}}},115047:(e,t,r)=>{"use strict";r.d(t,{b:()=>y});var n=r(727418),o=r.n(n);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=function(e){return null===e?[]:e.map((function(e){return{properties:i({},e),id:e.osm_id,type:"Feature",bbox:e.boundingbox.map((function(e){return parseFloat(e)})).reduce((function(e,t,r){return e[function(e){switch(e){case 0:return 1;case 1:return 3;case 2:return 0;case 3:return 2;default:return-1}}(r)]=t,e}),[]),geometry:e.geojson||{type:"Point",coordinates:[parseFloat(e.lon),parseFloat(e.lat)]}}}))},s=r(59286),u=r(432420),f=["url","typeName","queriableAttributes","outputFormat","predicate","staticFilter","blacklist","item","fromTextToFilter","returnFullData"];var p=function(e){var t,r=e.searchText,n=e.staticFilter,o=e.blacklist,a=e.item,i=e.queriableAttributes,c=e.predicate,l=(0,s.generateTemplateString)(n||"")(a),u=r.split(" ").filter((function(e){return e})).filter((function(e){return o.indexOf(e.toLowerCase())<0}));return 0===u.length&&(u=r?[r]:[]),u.length>0&&(t="(".concat(u.map((function(e){return i.map((function(t){return"".concat(t," ").concat(c," '%").concat(e.replace("'","''"),"%'")})).join(" OR ")})).join(") AND (")).concat(")")),t?t.concat(l):l||null},d={nominatim:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{returnFullData:!1};return r(647310).Z.geocode(e,t).then((function(e){return t.returnFullData?e:l(e.data)}))},wfs:function(e,t){var r=t.url,n=t.typeName,a=t.queriableAttributes,i=void 0===a?[]:a,c=t.outputFormat,l=void 0===c?"application/json":c,s=t.predicate,d=void 0===s?"ILIKE":s,m=t.staticFilter,y=void 0===m?"":m,b=t.blacklist,h=void 0===b?[]:b,v=t.item,g=t.fromTextToFilter,O=void 0===g?p:g,S=t.returnFullData,_=void 0!==S&&S,E=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,f),w=O({searchText:e,staticFilter:y,blacklist:h,item:v,queriableAttributes:i,predicate:d});return u.DH(r,o()({maxFeatures:10,typeName:n,outputFormat:l,cql_filter:w},E)).then((function(e){return _?e:e.features}))}},m={setService:function(e,t){d[e]=t},getService:function(e){return d[e]?d[e]:null}},y={Services:d,Utils:m}},838167:(e,t,r)=>{"use strict";r.d(t,{t6:()=>_,k9:()=>S,v0:()=>O,ZP:()=>E});var n=r(45697),o=r.n(n),a=r(124852),i=r.n(a),c=r(868195);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(l,e);var t,r,n,o,a=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(n);if(o){var r=m(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return d(this,e)});function l(){return u(this,l),a.apply(this,arguments)}return t=l,(r=[{key:"render",value:function(){return this.context.intl?i().createElement(c.FormattedDate,s({value:this.props.value},this.props.dateParams)):i().createElement("span",null,this.props.value&&this.props.value.toString()||"")}}])&&f(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(i().Component);y(b,"propTypes",{value:o().object,dateParams:o().object}),y(b,"contextTypes",{intl:o().object}),y(b,"defaultProps",{value:new Date});const h=b;var v=r(615402),g=r(805346),O=g.Z,S=v.Z,_=h;const E={Message:g.Z,HTML:S,DateFormat:_}},90973:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Qt});var n=r(227361),o=r.n(n),a=r(727418),i=r.n(a),c=r(45697),l=r.n(c),s=r(124852),u=r.n(s),f=r(171703),p=r(22222),d=r(460604),m=r(881808),y=r(782904),b=r(801550),h=r(597222);function v(e,t){return{type:"SET_SEARCH_BOOKMARK_CONFIG",property:e,value:t}}var g=r(724469),O=r(441609),S=r.n(O),_=r(352353),E=r.n(_),w=r(805346),P=r(815135),j=r(423570),I=r.n(j);function C(){return(C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var T=(0,P.Z)(g.DropdownButton),k={disabled:!1,className:"square-button-md",noCaret:!0,idDropDown:I()()},R={title:u().createElement(g.Glyphicon,{glyph:"menu-hamburger"}),tooltipId:"search.changeSearchInputField",tooltipPosition:"bottom",className:"square-button-md no-border",pullRight:!0};const x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.menuItems,r=void 0===t?[]:t,n=e.disabled,o=void 0!==n&&n;return u().createElement(T,C({disabled:o},k,R),r.length?r.map((function(e){return e})):null)},A=function(e){var t=e.className,r=e.style,n=e.children;return u().createElement("div",{id:"map-search-bar",style:r,className:"MapSearchBar"+(t?" "+t:"")},n)};var D=r(86638);function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return F(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?F(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var V=function(e,t){var r=e.show,n=e.autoFocusOnSelect,o=void 0===n||n,a=e.selectedItems,i=void 0===a?[]:a,c=e.className,l=e.style,s=void 0===l?{textOverflow:"ellipsis"}:l,f=e.placeholder,p=e.placeholderMsgId,d=e.hideOnBlur,m=void 0===d||d,y=e.searchText,b=void 0===y?"":y,h=e.typeAhead,v=void 0===h||h,O=e.delay,S=void 0===O?1e3:O,_=e.blurResetDelay,E=void 0===_?300:_,w=e.onSearch,P=void 0===w?function(){}:w,j=e.onSearchTextChange,I=void 0===j?function(){}:j,C=e.onCancelSelectedItem,T=void 0===C?function(){}:C,k=e.onPurgeResults,R=void 0===k?function(){}:k,x=u().useRef(),A=u().useRef(),F=N(u().useState(),2),V=F[0],M=F[1],B=N(u().useState(),2),L=B[0],Z=B[1],G=N(u().useState(!1),2),q=G[0],z=G[1];u().useEffect((function(){var e=A.current;if(o&&i&&(e<i.length||!e&&1===i.length)){var t=x.current;t&&t.focus instanceof Function&&setTimeout((function(){return t.focus()}),200)}A.current=i&&i.length})),u().useEffect((function(){q&&(P(),z(!1))}),[q,P]);var U="search.addressSearch";if(!f&&t.messages){var Y=(0,D.S$)(t.messages,p||U);Y&&(U=Y)}else U=f;return r&&u().createElement(g.FormControl,{className:"searchInput".concat(c?" ".concat(c):""),key:"search-input",placeholder:U,type:"text",inputRef:function(e){x.current=e},style:s,value:b,onKeyDown:function(e){switch(e.keyCode){case 13:P();break;case 8:!b&&i&&i.length>0&&T(i[i.length-1])}},onBlur:function(){m&&(V&&clearTimeout(V),M(setTimeout((function(){R()}),E)))},onFocus:function(){v&&b&&P()},onChange:function(e){var t=e.target.value;I(t),v&&(L&&clearTimeout(L),Z(setTimeout((function(){z(!0)}),S)))}})};V.contextTypes={messages:l().object};const M=V;var B=r(472986),L=r.n(B),Z=r(80717);function G(){return(G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){U(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function U(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Y=function(e){var t=e.loading,r=(e.splitTools,e.toolbarProps),n=void 0===r?{}:r,o=e.toolbarButtons,a=void 0===o?[]:o,c=e.children;return u().createElement("span",{className:"search-toolbar-options"},t&&u().createElement(L(),{style:i()({},{position:"absolute"},z({},{right:"69px",zIndex:1,top:"13px"})),spinnerName:"pulse",noFadeIn:!0}),u().createElement(Z.Z,G({btnGroupProps:{className:"btn-group-menu-options"},transitionProps:null,btnDefaultProps:{className:"square-button-md",bsStyle:"primary"}},n,{buttons:a})),c)};var W=r(743129);function H(){return(H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return $(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){J(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function J(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ee=(0,r(993451).Z)(["placeholder","clearValueText","noResultsText"])(W.ZP),te={searchByBookmark:function(e,t,r,n,o){var a,i,c=e.options,l=void 0===c?{}:c,s=e.layerVisibilityReload;void 0!==s&&s?t(Q(Q({},r),{},{map:Q(Q({},r.map),{},{bookmark_search_config:n})}),null,{bounds:[l.west,l.south,l.east,l.north],crs:(null==r||null===(a=r.map)||void 0===a||null===(i=a.center)||void 0===i?void 0:i.crs)||"EPSG:4326"}):l&&!S()(l)&&o([l.west,l.south,l.east,l.north],"EPSG:4326")},searchIcon:function(e,t){var r=t.onLayerVisibilityLoad,n=t.mapInitial,o=t.bookmarkConfig,a=t.onZoomToExtent;return{tooltipId:"bookmarkSearch"===e?"search.zoomToBookmark":"",tooltipPosition:"bottom",visible:"bookmarkSearch"===e&&!(null!=o&&o.zoomOnSelect),disabled:"bookmarkSearch"===e&&!o.selected,onClick:function(){"bookmarkSearch"===e&&te.searchByBookmark(o.selected,r,n,o.bookmarkSearchConfig||{},a)}}}},re=function(e){var t=e.bookmarkConfig,r=e.onPropertyChange,n=e.onLayerVisibilityLoad,o=e.mapInitial,a=e.onZoomToExtent,i=K((0,s.useState)([]),2),c=i[0],l=i[1],f=t||{},p=f.selected,d=void 0===p?{}:p,m=f.bookmarkSearchConfig,y=void 0===m?{}:m,b=f.zoomOnSelect,h=void 0===b||b,v=y.bookmarks,g=void 0===v?[]:v,O=te.searchByBookmark;return(0,s.useEffect)((function(){S()(g)||l(g.map((function(e){return e.title})))}),[g]),u().createElement("div",{className:"search-select"},u().createElement("div",{style:{flex:"1 1 0%",padding:"0px 4px"}},u().createElement(ee,H({},{clearable:!0,isSearchable:!0,isClearable:!0},{onChange:function(e){var t=e&&e.value||"",i=K(g.filter((function(r,n){return r.title===t&&n===e.idx})),1)[0];r("selected",i),h&&O(i,n,o,y,a)},value:(null==d?void 0:d.title)||"",options:c.map((function(e,t){return{label:e,value:e,idx:t}})),placeholder:"search.b_placeholder",clearValueText:"search.b_clearvalue",noResultsText:"search.b_noresult"}))))};re.propTypes={bookmarkConfig:l().object.isRequired,onPropertyChange:l().func.isRequired};const ne=(0,f.connect)((function(e){return{bookmarkConfig:e.searchbookmarkconfig||{}}}),{onPropertyChange:v,onZoomToExtent:b.Px,onLayerVisibilityLoad:m.H0})(re);var oe=r(281763),ae=r.n(oe),ie=r(799509),ce=r(777900),le={clearCoordinates:function(e,t){e({owner:"search"}),t("lat",""),t("lon","")},areValidCoordinates:function(e){return ae()(null==e?void 0:e.lon)&&ae()(null==e?void 0:e.lat)},zoomToPoint:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12;e({x:parseFloat(t.lon),y:parseFloat(t.lat)},r,"EPSG:4326")},coordinateFormatChange:function(e,t,r,n){return{buttonConfig:{title:u().createElement(g.Glyphicon,{glyph:"cog"}),tooltipId:"search.changeSearchInputField",tooltipPosition:"bottom",className:"square-button-md no-border",pullRight:!0},menuOptions:[{active:"decimal"===e,onClick:function(){return t("decimal")},text:u().createElement(w.Z,{msgId:"search.decimal"})},{active:"aeronautical"===e,onClick:function(){return t("aeronautical")},text:u().createElement(w.Z,{msgId:"search.aeronautical"})}],visible:r&&"coordinatesSearch"===n,Element:ce.Z}},removeIcon:function(e,t,r,n){return{visible:"coordinatesSearch"===e&&(ae()(t.lon)||ae()(t.lat)),onClick:function(){return le.clearCoordinates(r,n)}}},searchIcon:function(e,t,r,n){return{visible:"coordinatesSearch"===e,onClick:function(){"coordinatesSearch"===e&&le.areValidCoordinates(t)&&le.zoomToPoint(r,t,n)}}},coordinatesMenuItem:function(e){var t=e.activeTool,r=e.searchText,n=e.clearSearch,o=e.onChangeActiveSearchTool,a=e.onClearBookmarkSearch;return u().createElement(g.MenuItem,{active:"coordinatesSearch"===t,onClick:function(){void 0!==r&&""!==r&&n(),a("selected"),o("coordinatesSearch"),document.dispatchEvent(new MouseEvent("click"))}},u().createElement(g.Glyphicon,{glyph:"search-coords"})," ",u().createElement(w.Z,{msgId:"search.coordinatesSearch"}))}},se=function(e){var t=e.coordinate,r=void 0===t?{}:t,n=e.format,o=e.onClearCoordinatesSearch,a=e.onZoomToPoint,i=e.onChangeCoord,c=e.defaultZoomLevel,l=e.aeronauticalOptions,s=void 0===l?{seconds:{decimals:4,step:1e-4}}:l,f=e.constraintsCoordEditor,p=void 0===f?{decimal:{lat:{min:-90,max:90},lon:{min:-180,max:180}}}:f,d=le.zoomToPoint,m=le.areValidCoordinates,y=function(e,t){i(e,parseFloat(t)),m()||o({owner:"search"})},b=function(){d(a,r,c)};return u().createElement("div",{className:"coordinateEditor",style:{flexWrap:"decimal"===n?"nowrap":"wrap"}},u().createElement(g.Row,{className:"entryRow ".concat(n)},u().createElement(g.FormGroup,null,u().createElement(g.InputGroup,null,u().createElement(g.InputGroup.Addon,{style:{minWidth:45}},u().createElement(w.Z,{msgId:"search.latitude"})),u().createElement(ie.Z,{format:n,aeronauticalOptions:s,coordinate:"lat",idx:1,value:r.lat,constraints:p,onChange:function(e){return y("lat",e)},onKeyDown:function(){m(r)&&b()}})))),u().createElement(g.Row,{className:"entryRow ".concat(n)},u().createElement(g.FormGroup,null,u().createElement(g.InputGroup,null,u().createElement(g.InputGroup.Addon,{style:{minWidth:45}},u().createElement(w.Z,{msgId:"search.longitude"})),u().createElement(ie.Z,{format:n,aeronauticalOptions:s,coordinate:"lon",idx:2,value:r.lon,constraints:p,onChange:function(e){return y("lon",e)},onKeyDown:function(){m(r)&&b()}})))))};se.propTypes={coordinate:l().object,format:l().string,onClearCoordinatesSearch:l().func,onZoomToPoint:l().func,onChangeCoord:l().func,defaultZoomLevel:l().number};const ue=(0,f.connect)((function(e){return{coordinate:e.search.coordinate||{}}}),{onZoomToPoint:h.Z,onChangeCoord:h.TS})(se);var fe=["activeSearchTool","removeIcon","searchIcon","isSearchClickable","splitTools","searchText","maxResults","searchOptions","loading","delay","blurResetDelay","typeAhead","coordinate","selectedItems","defaultZoomLevel","enabledSearchBookmarkConfig","error","format","placeholder","placeholderMsgId","showOptions","showAddressSearchOption","showCoordinatesSearchOption","showBookMarkSearchOption","onSearch","onSearchReset","onSearchTextChange","onCancelSelectedItem","onChangeCoord","onChangeActiveSearchTool","onClearCoordinatesSearch","onChangeFormat","onToggleControl","onZoomToPoint","onClearBookmarkSearch","onPurgeResults","items"];function pe(e){return function(e){if(Array.isArray(e))return de(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return de(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?de(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?me(Object(r),!0).forEach((function(t){be(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function be(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var he=r(313311),ve=r.n(he),ge=r(59286);function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ee(e,t){return(Ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function we(e,t){if(t&&("object"===Oe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Pe(e)}function Pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function je(e){return(je=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ie(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ee(e,t)}(c,e);var t,r,n,a,i=(n=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=je(n);if(a){var r=je(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return we(this,e)});function c(){var e;Se(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Ie(Pe(e=i.call.apply(i,[this].concat(r))),"onClick",(function(){var t=e.props.item;e.props.onItemClick(t)})),e}return t=c,(r=[{key:"render",value:function(){if(void 0===this.props.item)return null;var e=this.props.item;return u().createElement("div",{key:e.osm_id,className:"search-result",style:e.resultCssStyle,onClick:this.onClick},u().createElement("div",{className:"search-result-left-container"},u().createElement("div",{className:"icon"}," ",u().createElement("img",{src:e.icon})),u().createElement("div",{className:"text-result-title"},o()(e,this.props.displayName)||(0,ge.generateTemplateString)(this.props.displayName||"")(e)),u().createElement("small",{className:"text-info"},this.props.subTitle&&o()(e,this.props.subTitle)||(0,ge.generateTemplateString)(this.props.subTitle||"")(e))),u().createElement("div",{className:"search-result-right-container"},u().createElement("div",{className:"search-result-tools"},u().createElement(Z.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:this.props.tools}))))}}])&&_e(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(u().Component);Ie(Ce,"propTypes",{subTitle:l().string,item:l().object,displayName:l().string,idField:l().string,icon:l().string,onItemClick:l().func,tools:l().array}),Ie(Ce,"defaultProps",{displayName:"properties.display_name",idField:"id",icon:"properties.icon",tools:[]});const Te=Ce;var ke=r(838167),Re=r(218412);function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function De(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ne(e,t){return(Ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Fe(e,t){if(t&&("object"===xe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ve(e)}function Ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Me(e){return(Me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Be(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ne(e,t)}(c,e);var t,r,n,o,a=(n=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Me(n);if(o){var r=Me(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Fe(this,e)});function c(){var e;Ae(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Be(Ve(e=a.call.apply(a,[this].concat(r))),"onItemClick",(function(t){e.props.onItemClick(t,e.props.mapConfig)})),Be(Ve(e),"renderResults",(function(){return e.props.results.map((function(t,r){var n,o=e.findService(t)||{},a=ve()(e.props.layers,{name:null===(n=o.options)||void 0===n?void 0:n.typeName}),i=(0,Re.zA)(o),c=!(0,Re.Tv)(a,o);return u().createElement(Te,{subTitle:o.subTitle,idField:o.idField,displayName:o.displayName,key:t.osm_id||t.id||"res_"+r,item:t,onItemClick:e.onItemClick,tools:[{id:"open-gfi",keyProp:"open-gfi",visible:i,disabled:c,glyph:"info-sign",tooltipId:i&&c?"search.layerMustBeVisible":"search.showGFI",onClick:function(r){r.stopPropagation(),e.props.showGFI(t)}}]})}))})),Be(Ve(e),"findService",(function(t){var r=e.props.searchOptions&&e.props.searchOptions.services;if(null!==t.__SERVICE__)if(r&&"string"==typeof t.__SERVICE__){for(var n=0;n<r.length;n++)if(r[n]&&r[n].id===t.__SERVICE__)return r[n];for(var o=0;o<r.length;o++)if(r[o]&&r[o].type===t.__SERVICE__)return r[o]}else if("object"===xe(t.__SERVICE__))return t.__SERVICE__;return null})),e}return t=c,(r=[{key:"render",value:function(){var e=this.props.notFoundMessage;e||(e=u().createElement(ke.ZP.Message,{msgId:"noresultfound"}));var t=this.props.containerStyle,r=this.props.mapConfig&&this.props.mapConfig.size;if(this.props.fitToMapSize&&r){var n=r.width-this.props.sizeAdjustment.width,o=r.height-this.props.sizeAdjustment.height;t=i()({},this.props.containerStyle,{maxWidth:n,maxHeight:o})}return this.props.results?0===this.props.results.length?u().createElement("div",{className:"search-result-list",style:i()({padding:"10px",textAlign:"center"},t)},e):u().createElement("div",{className:"search-result-list",style:t},this.renderResults()):null}}])&&De(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(u().Component);Be(Le,"propTypes",{results:l().array,layers:l().array,searchOptions:l().object,mapConfig:l().object,fitToMapSize:l().bool,containerStyle:l().object,sizeAdjustment:l().object,onItemClick:l().func,addMarker:l().func,afterItemClick:l().func,showGFI:l().func,notFoundMessage:l().oneOfType([l().object,l().string])}),Be(Le,"defaultProps",{layers:[],sizeAdjustment:{width:0,height:110},containerStyle:{zIndex:1e3},onItemClick:function(){},addMarker:function(){},afterItemClick:function(){},showGFI:function(){}});var Ze=r(49977),Ge=r(294707),qe=r.n(Ge),ze=r(235385),Ue=r.n(ze),Ye=r(414293),We=r.n(Ye),He=r(189734),Ke=r.n(He),$e=r(455877),Xe=r.n($e),Qe=r(675110),Je=r(921914),et=r(580416),tt=r(896309),rt=r(115047),nt=r(432420),ot=r(396606),at=r(307877),it=r(73814),ct=r(821751),lt=r(800827);function st(e){return function(e){if(Array.isArray(e))return ut(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ut(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ut(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(r),!0).forEach((function(t){dt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ft(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function dt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var mt=function(e,t){return(0,ot.mx)(e,pt({},(0,at.oq)(t)))},yt=r(426125);function bt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ht(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(r),!0).forEach((function(t){vt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gt(e){return function(e){if(Array.isArray(e))return Ot(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Ot(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ot(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var St=r(737275),_t=r(38560);function Et(e){return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jt(e,t){return(jt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function It(e,t){if(t&&("object"===Et(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ct(e){return(Ct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var kt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jt(e,t)}(i,e);var t,r,n,o,a=(n=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ct(n);if(o){var r=Ct(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return It(this,e)});function i(){return wt(this,i),a.apply(this,arguments)}return t=i,(r=[{key:"render",value:function(){var e=this;return u().createElement(_t.Z,{onClick:function(){return e.props.onToggle(e.props.pressed)},bsStyle:this.props.pressed?"default":"primary",className:"square-button"},u().createElement(g.Glyphicon,{glyph:"search"}))}}])&&Pt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(u().Component);Tt(kt,"propTypes",{pressed:l().bool,onToggle:l().func}),Tt(kt,"defaultProps",{pressed:!1,onToggle:function(){}});const Rt=(0,f.connect)((function(e){return{pressed:e.controls&&e.controls.search&&e.controls.search.enabled||!1}}),{onToggle:y.Xi.bind(null,"search",null)})(kt);var xt,At=r(55105),Dt=r(294184),Nt=r.n(Dt);function Ft(e){return(Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Mt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vt(Object(r),!0).forEach((function(t){Yt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Bt(){return(Bt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Lt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Gt(e,t){return(Gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function qt(e,t){if(t&&("object"===Ft(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return zt(e)}function zt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ut(e){return(Ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Wt=(0,p.P1)([function(e){return e.search||null},function(e){return e.controls&&e.controls.searchBookmarkConfig||null},function(e){return e.mapConfigRawData||{}},function(e){return(null==e?void 0:e.searchbookmarkconfig)||""}],(function(e,t,r,n){return{enabledSearchBookmarkConfig:t&&t.enabled||!1,error:e&&e.error,coordinate:e&&e.coordinate||{},loading:e&&e.loading,searchText:e?e.searchText:"",activeSearchTool:o()(e,"activeSearchTool","addressSearch"),format:o()(e,"format")||St.ZP.getConfigProp("defaultCoordinateFormat"),selectedItems:e&&e.selectedItems,mapInitial:r,bookmarkConfig:n||{}}})),Ht=(0,f.connect)(Wt,{onSearch:h.tt,onChangeCoord:h.TS,onChangeActiveSearchTool:h.a,onClearCoordinatesSearch:d.fU,onClearBookmarkSearch:v,onChangeFormat:h.Zw,onToggleControl:y.Xi,onZoomToPoint:h.Z,onPurgeResults:h.kV,onSearchReset:h.v2,onSearchTextChange:h.k9,onCancelSelectedItem:h.KG,onZoomToExtent:b.Px,onLayerVisibilityLoad:m.H0})((function(e){var t,r=e.activeSearchTool,n=void 0===r?"addressSearch":r,o=e.removeIcon,a=void 0===o?"1-close":o,i=e.searchIcon,c=void 0===i?"search":i,l=e.isSearchClickable,s=void 0===l||l,f=e.splitTools,p=e.searchText,d=void 0===p?"":p,m=e.maxResults,y=void 0===m?15:m,b=e.searchOptions,h=e.loading,v=e.delay,O=e.blurResetDelay,_=e.typeAhead,P=e.coordinate,j=void 0===P?{}:P,I=e.selectedItems,C=void 0===I?[]:I,T=e.defaultZoomLevel,k=void 0===T?12:T,R=e.enabledSearchBookmarkConfig,D=void 0!==R&&R,N=e.error,F=e.format,V=void 0===F?"decimal":F,B=e.placeholder,L=e.placeholderMsgId,Z=void 0===L?"search.addressSearch":L,G=e.showOptions,q=void 0===G||G,z=e.showAddressSearchOption,U=void 0===z||z,W=e.showCoordinatesSearchOption,H=void 0===W||W,K=e.showBookMarkSearchOption,$=void 0===K||K,X=e.onSearch,Q=e.onSearchReset,J=e.onSearchTextChange,ee=e.onCancelSelectedItem,re=e.onChangeCoord,oe=void 0===re?function(){}:re,ae=e.onChangeActiveSearchTool,ie=void 0===ae?function(){}:ae,ce=e.onClearCoordinatesSearch,se=void 0===ce?function(){}:ce,de=e.onChangeFormat,me=void 0===de?function(){}:de,be=e.onToggleControl,he=void 0===be?function(){}:be,ve=e.onZoomToPoint,ge=void 0===ve?function(){}:ve,Oe=e.onClearBookmarkSearch,Se=void 0===Oe?function(){}:Oe,_e=e.onPurgeResults,Ee=e.items,we=void 0===Ee?[]:Ee,Pe=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,fe),je=function(e){var t=e.searchText,r=e.selectedItems,n=e.searchOptions,o=e.maxResults,a=e.onSearch,i=void 0===a?function(){}:a,c=e.onSearchReset,l=void 0===c?function(){}:c;return function(){var e=t,a=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(t,r){var n;return t+((null==r||null===(n=r.options)||void 0===n?void 0:n.maxFeatures)||e)}),0)||e}(null==n?void 0:n.services,o);void 0!==e&&""!==e||r&&0!==r.length?void 0!==e&&""!==e&&i(e,n,a):l()}}({searchText:d,selectedItems:C,searchOptions:b,maxResults:y,onSearch:X,onSearchReset:Q}),Ie=function(){Q()},Ce=[];if(U&&Ce.push(u().createElement(g.MenuItem,{active:"addressSearch"===n,onClick:function(){se({owner:"search"}),Se("selected"),ie("addressSearch")}},u().createElement(g.Glyphicon,{glyph:c})," ",u().createElement(w.Z,{msgId:"search.addressSearch"}))),H&&Ce.push(u().createElement(le.coordinatesMenuItem,{activeTool:n,searchText:d,clearSearch:Ie,onChangeActiveSearchTool:ie,onClearBookmarkSearch:Se})),$&&!S()(we)){var Te,ke=Pe.bookmarkConfig||{},Re=ke.allowUser,xe=ke.bookmarkSearchConfig,Ae=we.find((function(e){return"SearchByBookmark"===e.name}))||{};if(Ae.menuItem){var De=Ae.menuItem;Ce.push(u().createElement(De,null))}Ae.bookmarkConfig&&(t=ye(ye({},Ae.bookmarkConfig(he,D,n)),!Re&&{visible:!1})),Re||0!==(null==xe||null===(Te=xe.bookmarks)||void 0===Te?void 0:Te.length)||"bookmarkSearch"!==n||ie("addressSearch")}var Ne,Fe=function(){if(q){if("coordinatesSearch"===n)return le.coordinateFormatChange(V,me,q,n);if("bookmarkSearch"===n)return t}return null};return u().createElement(A,null,u().createElement(g.FormGroup,null,u().createElement("div",{className:"input-group",style:{display:"flex"}},C&&C.map((function(e,t){return u().createElement("span",{key:"selected-item"+t,className:"input-group-addon"},u().createElement("div",{className:"selectedItem-text"},e.text))})),u().createElement(M,{show:"addressSearch"===n,delay:v,typeAhead:_,blurResetDelay:O,placeholder:B,placeholderMsgId:Z,searchText:d,selectedItems:C,onSearch:je,onSearchTextChange:J,onCancelSelectedItem:ee,onPurgeResults:_e}),"coordinatesSearch"===n&&H&&u().createElement(ue,{format:V,defaultZoomLevel:k,onClearCoordinatesSearch:se}),"bookmarkSearch"===n&&$&&u().createElement(ne,{mapInitial:Pe.mapInitial}),u().createElement(Y,{splitTools:!1,toolbarButtons:[].concat(pe(Fe()?[ye({},Fe())]:[]),pe(we.filter((function(e){return"button"===e.target})).map((function(e){var t=e.component;return{visible:!!q,Element:t}}))),[ye({glyph:a,className:"square-button-md no-border",bsStyle:"default",pullRight:!0,loading:!E()(h)&&h,visible:"addressSearch"===n&&(""!==d||C&&C.length>0),onClick:function(){"addressSearch"===n&&Ie()}},"coordinatesSearch"===n&&le.removeIcon(n,j,se,oe)),ye(ye({glyph:c,className:"square-button-md no-border "+(s||"addressSearch"!==n?"magnifying-glass clickable":"magnifying-glass"),bsStyle:"default",pullRight:!0,tooltipPosition:"bottom",visible:!("addressSearch"!==n||(""!==d||C&&C.length>0)&&f),onClick:function(){return s&&je()}},"coordinatesSearch"===n&&le.searchIcon(n,j,ge,k)),"bookmarkSearch"===n&&te.searchIcon(n,Pe)),{tooltip:(Ne=N,Ne?u().createElement(w.Z,{msgId:Ne.msgId||"search.generic_error",msgParams:{message:Ne.message,serviceType:Ne.serviceType}}):null),tooltipPosition:"bottom",className:"square-button-md no-border",glyph:"warning-sign",bsStyle:"danger",glyphClassName:"searcherror",visible:!!N,onClick:Ie},{visible:q,renderButton:u().createElement(x,{disabled:q,menuItems:Ce})}])}))))})),Kt=(0,p.P1)([lt.Od,Qe.l2,function(e){return e.search||null}],(function(e,t,r){return{mapConfig:e,layers:t,results:r?r.results:null}})),$t=(0,f.connect)(Kt,{onItemClick:h.Jc,addMarker:h._q,showGFI:h.w4})(Le),Xt=(0,f.connect)((function(e){return{enabled:e.controls&&e.controls.search&&e.controls.search.enabled||!1,selectedServices:e&&e.search&&e.search.selectedServices,selectedItems:e&&e.search&&e.search.selectedItems,textSearchConfig:e&&e.searchconfig&&e.searchconfig.textSearchConfig}}),{onUpdateResultsStyle:h.o$})((xt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gt(e,t)}(l,e);var t,r,n,a,c=(n=l,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ut(n);if(a){var r=Ut(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return qt(this,e)});function l(){var e;Lt(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Yt(zt(e=c.call.apply(c,[this].concat(r))),"getServiceOverrides",(function(t){return e.props.selectedItems&&e.props.selectedItems[e.props.selectedItems.length-1]&&o()(e.props.selectedItems[e.props.selectedItems.length-1],t)})),Yt(zt(e),"getSearchOptions",(function(){var t=e.props,r=t.searchOptions,n=t.textSearchConfig;return n&&n.services&&n.services.length>0?n.override?i()({},r,{services:n.services}):i()({},r,{services:r.services.concat(n.services)}):r})),Yt(zt(e),"getCurrentServices",(function(){var t=e.props.selectedServices,r=e.getSearchOptions();return t&&t.length>0?i()({},r,{services:t}):r})),Yt(zt(e),"searchFitToTheScreen",(function(){var t=e.props,r=t.offsets,n=r.right,o=r.left,a=t.mapSize.width;return(void 0===a?window.innerWidth:a)-n-o-60>=500})),Yt(zt(e),"getSearchAndToggleButton",(function(){var t=u().createElement(Ht,Bt({key:"searchBar"},e.props,{searchOptions:e.getCurrentServices(),placeholder:e.getServiceOverrides("placeholder"),placeholderMsgId:e.getServiceOverrides("placeholderMsgId")}));return e.searchFitToTheScreen()?t:u().createElement(u().Fragment,null,u().createElement(Rt,null),e.props.enabled?t:null)})),e}return t=l,(r=[{key:"componentDidMount",value:function(){this.props.onUpdateResultsStyle(Mt(Mt({},Re.be),this.props.resultsStyle))}},{key:"render",value:function(){return u().createElement("span",{id:"search-bar-container",className:Nt()({toggled:!this.searchFitToTheScreen(),"no-sidebar":!this.props.sidebarIsActive}),style:this.props.sidebarIsActive?this.props.style:null},this.getSearchAndToggleButton(),u().createElement($t,{fitToMapSize:this.props.fitResultsToMapSize,searchOptions:this.props.searchOptions,onUpdateResultsStyle:this.props.onUpdateResultsStyle,key:"nominatimresults"}))}}])&&Zt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(u().Component),Yt(xt,"propTypes",{splitTools:l().bool,showOptions:l().bool,isSearchClickable:l().bool,fitResultsToMapSize:l().bool,searchOptions:l().object,resultsStyle:l().object,selectedItems:l().array,selectedServices:l().array,userServices:l().array,withToggle:l().oneOfType([l().bool,l().array]),enabled:l().bool,textSearchConfig:l().object,style:l().object,sidebarIsActive:l().bool}),Yt(xt,"defaultProps",{searchOptions:{services:[{type:"nominatim",priority:5}]},isSearchClickable:!1,splitTools:!0,resultsStyle:{color:"#3388ff",weight:4,dashArray:"",fillColor:"#3388ff",fillOpacity:.2},fitResultsToMapSize:!0,withToggle:!1,enabled:!0,style:{},sidebarIsActive:!1}),xt));const Qt={SearchPlugin:i()((0,f.connect)((0,p.zB)({style:function(e){return(0,At.ic)(e,{right:!0})},offsets:function(e){return(0,At.ic)(e,{right:!0,left:!0})},mapSize:function(e){return(0,lt.GV)({width:!0})(e)},sidebarIsActive:function(e){return function(e){return o()(e,"controls.sidebarMenu.enabled",!1)}(e)}}),{})(Xt),{OmniBar:{name:"search",position:1,tool:!0,priority:1}}),epics:{searchEpic:function(e){return e.ofType(h.bj).debounceTime(250).switchMap((function(t){return Ze.Observable.from((t.services||[{type:"nominatim",priority:5}]).map((function(e){var r=rt.b.Utils.getService(e.type);if(!r){var n=new Error("Service Missing");return n.msgId="search.service_missing",n.serviceType=e.type,Ze.Observable.of(n).do((function(e){throw e}))}return Ze.Observable.defer((function(){return r(t.searchText,e.options).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.map((function(t){return pt(pt({},t),{},{__SERVICE__:e,__PRIORITY__:e.priority||0})}))}))})).retryWhen((function(e){return e.delay(200).scan((function(e,t){if(e>=2)throw t;return e+1}),0)}))}))).mergeAll().scan((function(e,t){return Ke()([].concat(st(e),st(t)),["__PRIORITY__"])})).map((function(e){return(0,h.WN)(e.slice(0,t.maxResults||15),!1)})).startWith((0,h.yo)(!0)).takeUntil(e.ofType(h.Av,h.M8,h.dX)).concat([(0,h.yo)(!1)]).catch((function(e){var t=pt(pt({msgId:"search.generic_error"},e),{},{message:e.message,stack:e.stack});return Ze.Observable.from([(0,h.kE)(t),(0,h.yo)(!1)])}))}))},searchOnStartEpic:function(e,t){return e.ofType(h.Vc).switchMap((function(e){var r=e.layer,n=e.cql_filter,o=t.getState();if(0===(0,Qe.OX)(o).filter((function(e){return e.name===r})).length)return Ze.Observable.of((0,h.Tw)());var a=(0,Qe.dT)(o,r);return a&&n?Ze.Observable.defer((function(){return(0,nt.DH)(a.url,{maxFeatures:1,typeName:r,srsName:"EPSG:4326",outputFormat:"application/json",cql_filter:n}).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.features&&e.features.length&&pt(pt({},e.features[0]),{},{typeName:r})}))})).switchMap((function(e){var r=e.type,o=e.geometry,a=e.typeName,i=Ue()({type:r,geometry:o}).geometry.coordinates;if(i){var c,l={lng:i[0],lat:i[1]},s=(0,lt.uy)(t.getState()),u=(0,tt.reproject)(i,"EPSG:4326",s),f=u.x,p=u.y;return c=(0,at.xt)(t.getState())?Ze.Observable.of((0,it.i8)(Xe()(),{component:ct.IDENTIFY_POPUP,maxWidth:600,position:{coordinates:[f,p]}})):Ze.Observable.of((0,Je.HP)()),Ze.Observable.of((0,Je.lK)({latlng:l},a,[a],dt({},a,{cql_filter:n}))).merge(c)}return Ze.Observable.empty()})).catch((function(){return Ze.Observable.of((0,h.I3)())})):Ze.Observable.empty()}))},searchItemSelected:function(e,t){return e.ofType(h.dX).switchMap((function(e){var r=Ze.Observable.of(e.item).concatMap((function(t){if(t&&t.__SERVICE__&&t.__SERVICE__.geomService){var r=(0,ge.generateTemplateString)(t.__SERVICE__.geomService.options.staticFilter||"")(t);return Ze.Observable.fromPromise(rt.b.Utils.getService(t.__SERVICE__.geomService.type)("",i()({},t.__SERVICE__.geomService.options,{staticFilter:r})).then((function(e){return i()({},t,{geometry:tt.default.mergeToPolyGeom(e)})})))}return Ze.Observable.of(e.item)})).concatMap((function(e){var r=e.bbox||e.properties.bbox||qe()(e),n=[(0,b.Px)([r[0],r[1],r[2],r[3]],"EPSG:4326",e.__SERVICE__&&e.__SERVICE__.options&&e.__SERVICE__.options.maxZoomLevel||21),(0,h._q)(e)];if(e.__SERVICE__&&!We()(e.__SERVICE__.launchInfoPanel)&&e.__SERVICE__.options&&e.__SERVICE__.options.typeName){var o=Ue()(e).geometry.coordinates,a={lng:o[0],lat:o[1]},i=e.__SERVICE__.options.typeName;if(o){var c=t.getState(),l=i&&(0,Qe.dT)(c,i),s=null,u=[],f={},p=!1;return"single_layer"===e.__SERVICE__.launchInfoPanel&&(p=e.__SERVICE__.forceSearchLayerVisibility,u=[i],s=e.id,f=dt({},e.__SERVICE__.options.typeName,pt({info_format:mt(l,c)},s?{featureid:s,CQL_FILTER:void 0}:{}))),[].concat(st(p&&l?[(0,et.He)(l.id,{visibility:!0})]:[]),st(e.__SERVICE__.openFeatureInfoButtonEnabled?[]:[(0,Je.lK)({latlng:a},i,u,f,s)]),[(0,Je.HP)()],n)}}return n})),n=e.item,o=n&&n.__SERVICE__&&n.__SERVICE__.then,a=o?Ze.Observable.of((0,h.QJ)(o.map((function(e){return pt(pt({},e),{},{options:pt({item:n},e.options)})})),{text:(0,ge.generateTemplateString)(n.__SERVICE__.displayName||"")(n),placeholder:n.__SERVICE__.nestedPlaceholder&&(0,ge.generateTemplateString)(n.__SERVICE__.nestedPlaceholder||"")(n),placeholderMsgId:n.__SERVICE__.nestedPlaceholderMsgId&&(0,ge.generateTemplateString)(n.__SERVICE__.nestedPlaceholderMsgId||"")(n)},(0,ge.generateTemplateString)(n.__SERVICE__.searchTextTemplate||"")(n))):Ze.Observable.empty(),c=n.__SERVICE__&&n.__SERVICE__.searchTextTemplate,l=c?Ze.Observable.of((0,h.k9)((0,ge.generateTemplateString)(c)(n))):Ze.Observable.empty();return Ze.Observable.of((0,h.kV)()).concat(r,a,l)}))},zoomAndAddPointEpic:function(e,t){return e.ofType(h.b4).switchMap((function(e){var r={type:"Feature",geometry:{type:"Point",coordinates:[e.pos.x,e.pos.y]}},n=t.getState();return Ze.Observable.from([(0,d.W)("search","search","overlay",{features:[r],type:"vector",name:"searchPoints",id:"searchPoints",visibility:!0,style:n.search&&n.search.style||Re.be}),(0,b.xy)(e.pos,e.zoom,e.crs)])}))},textSearchShowGFIEpic:function(e,t){return e.ofType(h.al).filter((function(e){var t,r=e.item,n=void 0===r?{}:r;return!(null!=n&&null!==(t=n.__SERVICE__)&&void 0!==t&&t.customGFI)})).switchMap((function(r){var n,o,a,i,c,l,s=r.item,u=t.getState(),f=null==s||null===(n=s.__SERVICE__)||void 0===n||null===(o=n.options)||void 0===o?void 0:o.typeName,p=f&&(0,Qe.dT)(u,f),d=s.bbox||s.properties.bbox||qe()(s),m=Ue()(s).geometry.coordinates,y={lng:m[0],lat:m[1]},v=s.id;return m&&(0,Re.zA)(null==s?void 0:s.__SERVICE__)&&(0,Re.Tv)(p,null==s?void 0:s.__SERVICE__)?(a=Ze.Observable).of.apply(a,st(null!=s&&null!==(i=s.__SERVICE__)&&void 0!==i&&i.forceSearchLayerVisibility&&p?[(0,et.He)(p.id,{visibility:!0})]:[]).concat([(0,Je.lK)({latlng:y},f,[f],dt({},f,pt({info_format:mt(p,u)},v?{featureid:v,CQL_FILTER:void 0}:{})),v),(0,Je.HP)(),(0,h._q)(s)])).merge(d?e.ofType(Je.XL).take(1).mapTo((0,b.Px)([d[0],d[1],d[2],d[3]],"EPSG:4326",(null==s||null===(c=s.__SERVICE__)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.maxZoomLevel)||21)).takeUntil(e.ofType(Je.Ih,Je.km)):Ze.Observable.empty()).let((function(e){return d&&(0,Qe._$)(t.getState())?e.startWith((0,Je.PM)(!1)).concat(Ze.Observable.of((0,Je.PM)(!0))):e})):Ze.Observable.empty()}))},delayedSearchEpic:function(e){return e.ofType(h.qj).switchMap((function(t){var r=t.layer,n=t.cql_filter;return e.ofType(et.oE).filter((function(e){return e.layer.name===r})).take(1).switchMap((function(){return Ze.Observable.of((0,h.l4)({layer:r,cql_filter:n}))}))}))}},reducers:{search:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case h.NN:return i()({},t,{loading:r.loading});case h.O7:return i()({},t,{error:r.error});case h.gs:return i()({},t,{searchText:r.searchText,error:null});case h.p7:var n=r.results;return!0===r.append&&t&&t.results&&(n=[].concat(gt(t.results),gt(r.results))),i()({},t,{results:n,error:null});case h.Av:return i()({},t,{results:null,error:null});case h.wn:var o=r.markerPosition.latlng?{latlng:r.markerPosition.latlng,lat:r.markerPosition.latlng.lat,lng:r.markerPosition.latlng.lng}:r.markerPosition;return i()({},t,{markerPosition:o,markerLabel:r.markerLabel});case h.Gh:return i()({},t,{highlightedFeature:r.highlightedFeature});case h.M8:return{style:t.style||{}};case y.l:return null;case h.C2:return i()({},t,{selectedServices:r.services,searchText:r.searchText,selectedItems:(t.selectedItems||[]).concat(r.items)});case h.oQ:return t?i()({},{selectedItems:t.selectedItems&&t.selectedItems.filter((function(e){return e!==r.item})),searchText:""===t.searchText&&r.item&&r.item.text?r.item.text.substring(0,r.item.text.length):t.searchText}):t;case h.x2:return i()({},t,{style:r.style});case h.Y7:return ht(ht({},t),{},{activeSearchTool:r.activeSearchTool});case h.GI:return ht(ht({},t),{},{format:r.format});case h.KP:return ht(ht({},t),{},{coordinate:ht(ht({},t.coordinate),{},vt({},r.coord,r.val))});case h.dS:return i()({},t,{markerPosition:null!=t&&null!==(e=t.markerPosition)&&void 0!==e&&e.latlng?{}:null==t?void 0:t.markerPosition});default:return t}},mapInfo:yt.Z}}}}]);