(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[16398],{597222:(e,t,r)=>{"use strict";r.d(t,{Vc:()=>o,qj:()=>i,bj:()=>l,p7:()=>u,Av:()=>a,M8:()=>c,wn:()=>s,gs:()=>p,NN:()=>f,C2:()=>d,O7:()=>m,oQ:()=>b,dX:()=>y,al:()=>v,Gh:()=>h,x2:()=>g,Y7:()=>w,b4:()=>E,GI:()=>S,KP:()=>O,dS:()=>_,Zw:()=>T,l4:()=>A,fZ:()=>V,Z:()=>R,a:()=>j,WN:()=>P,k9:()=>I,yo:()=>C,kE:()=>F,kV:()=>k,v2:()=>M,_q:()=>L,tt:()=>x,Jc:()=>D,w4:()=>N,QJ:()=>U,KG:()=>B,o$:()=>G,TS:()=>H,Tw:()=>Z,I3:()=>X});var n=r(197395),o="SEARCH:SEARCH_WITH_FILTER",i="SEARCH:SCHEDULE_SEARCH_WITH_FILTER",l="TEXT_SEARCH_STARTED",u="TEXT_SEARCH_RESULTS_LOADED",a="TEXT_SEARCH_RESULTS_PURGE",c="TEXT_SEARCH_RESET",s="TEXT_SEARCH_ADD_MARKER",p="TEXT_SEARCH_TEXT_CHANGE",f="TEXT_SEARCH_LOADING",d="TEXT_SEARCH_NESTED_SERVICE_SELECTED",m="TEXT_SEARCH_ERROR",b="TEXT_SEARCH_CANCEL_ITEM",y="TEXT_SEARCH_ITEM_SELECTED",v="TEXT_SEARCH_SHOW_GFI",h="TEXT_SEARCH_SET_HIGHLIGHTED_FEATURE",g="UPDATE_RESULTS_STYLE",w="CHANGE_SEARCH_TOOL",E="SEARCH:ZOOM_ADD_POINT",S="SEARCH:CHANGE_FORMAT",O="SEARCH:CHANGE_COORD",_="SEARCH:HIDE_MARKER";function T(e){return{type:S,format:e}}function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,r=e.cql_filter;return{type:o,layer:t,cql_filter:r}}function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,r=e.cql_filter;return{type:i,layer:t,cql_filter:r}}function R(e,t,r){return{type:E,pos:e,zoom:t,crs:r}}function j(e){return{type:w,activeSearchTool:e}}function P(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0;return{type:u,results:e,append:t,services:r}}function I(e){return{type:p,searchText:e}}function C(e){return{type:f,loading:e}}function F(e){return{type:m,error:e}}function k(){return{type:a}}function M(){return{type:c}}function L(e,t){return{type:s,markerPosition:e,markerLabel:t}}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.services,n=void 0===r?null:r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15;return{type:l,searchText:e,services:n,maxResults:o}}function D(e,t,r){return{type:y,item:e,mapConfig:t,resultsStyle:r}}var N=function(e){return{type:v,item:e}};function U(e,t,r){return{type:d,searchText:r,services:e,items:t}}function B(e){return{type:b,item:e}}function G(e){return{type:g,style:e}}function H(e,t){return{type:O,coord:e,val:t}}function Z(){return(0,n.error)({title:"Error",position:"tc",message:"search.errors.nonQueriableLayers",autoDismiss:10})}function X(){return(0,n.error)({title:"Error",position:"tc",message:"search.errors.serverError",autoDismiss:10})}},490079:(e,t,r)=>{"use strict";r.d(t,{Z:()=>A});var n=r(472500),o=r.n(n),i=r(701469),l=r.n(i),u=r(414293),a=r.n(u),c=r(727418),s=r.n(c),p=r(45697),f=r.n(p),d=r(124852),m=r.n(d),b=r(233044),y=r(805346);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,t){return(w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function E(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(c,e);var t,r,n,i,u=(n=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=O(n);if(i){var r=O(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return E(this,e)});function c(){var e;h(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return _(S(e=u.call.apply(u,[this].concat(r))),"state",{error:!1}),_(S(e),"onImgError",(function(){e.setState((function(){return{error:!0}}))})),_(S(e),"getUrl",(function(e,t){if(e.layer&&"wms"===e.layer.type&&e.layer.url){var r=e.layer,n=a()(t)?l()(r.url)&&Math.floor(Math.random()*r.url.length):t,i=l()(r.url)?r.url[n]:r.url.replace(/[?].*$/g,""),u=o().parse(i),c=(0,b.clearNilValuesForParams)(r.params),p=s()({},{service:"WMS",request:"GetLegendGraphic",format:"image/png",height:e.legendHeight,width:e.legendWidth,layer:r.name,style:r.style||null,version:r.version||"1.3.0",SLD_VERSION:"1.1.0",LEGEND_OPTIONS:e.legendOptions},r.legendParams||{},e.language&&r.localizedLayerStyles?{LANGUAGE:e.language}:{},(0,b.addAuthenticationToSLD)(c||{},e.layer),c&&c.SLD_BODY?{SLD_BODY:c.SLD_BODY}:{},e.scales&&e.currentZoomLvl&&e.scaleDependent?{SCALE:Math.round(e.scales[e.currentZoomLvl])}:{});return(0,b.addAuthenticationParameter)(i,p),o().format({host:u.host,protocol:u.protocol,pathname:u.pathname,query:p})}return""})),_(S(e),"validateImg",(function(t){t.height<=1&&t.width<=2&&e.onImgError()})),e}return t=c,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.state.error&&this.getUrl(e,0)!==this.getUrl(this.props,0)&&this.setState((function(){return{error:!1}}))}},{key:"render",value:function(){var e=this;return!this.state.error&&this.props.layer&&"wms"===this.props.layer.type&&this.props.layer.url?m().createElement("img",{onError:this.onImgError,onLoad:function(t){return e.validateImg(t.target)},src:this.getUrl(this.props),style:this.props.style}):m().createElement(y.Z,{msgId:"layerProperties.legenderror"})}}])&&g(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(m().Component);_(T,"propTypes",{layer:f().object,legendHeight:f().number,legendWidth:f().number,legendOptions:f().string,style:f().object,currentZoomLvl:f().number,scales:f().array,scaleDependent:f().bool,language:f().string}),_(T,"defaultProps",{legendHeight:12,legendWidth:12,legendOptions:"forceLabels:on",style:{maxWidth:"100%"},scaleDependent:!0});const A=T},38560:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(724469),o=r(124852),i=r.n(o),l=r(294184),u=r.n(l),a=["disabled","className","onClick"];function c(){return(c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}const s=(p=n.Button,i().forwardRef((function(e,t){var r=e.disabled,n=e.className,o=e.onClick,l=void 0===o?function(){}:o,s=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,a);return i().createElement(p,c({ref:t,className:r?u()("disabled",n):n,onClick:function(){r||l.apply(void 0,arguments)}},s),s.children)})));var p},843614:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(727418),o=r.n(n),i=r(724469),l=r(461365);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(l,e);var t,r,n,o,i=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(n);if(o){var r=f(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return p(this,e)});function l(){return a(this,l),i.apply(this,arguments)}return t=l,(r=[{key:"handleDialogClick",value:function(e){e.target===e.currentTarget&&this.props.onHide(e)}}])&&c(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(i.Modal);const m=o()((0,l.Z)(d),{Body:i.Modal.Body,Dialog:i.Modal.Dialog,Footer:i.Modal.Footer,Header:i.Modal.Header,Title:i.Modal.Title})},160025:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Ae});var n=r(322843),o=r(351288);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(124852),c=r.n(a),s=r(171703),p=(r(472619),r(597222)),f=r(490079);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h,g,w,E=r(45697),S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(l,e);var t,r,n,o,i=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(n);if(o){var r=v(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return y(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,e)).state={},t}return t=l,(r=[{key:"componentDidMount",value:function(){this.props.searchBarVisible&&this.props.changeActiveSearchTool("coordinatesSearch")}},{key:"render",value:function(){var e=this;return this.props.visibleLegendPanel?c().createElement("div",{className:"simple-view-panel "+(this.props.searchBarVisible?"legend-panel-with-search":"legend-panel")},c().createElement("div",{className:"row h4 legend-heading"},"Legend",c().createElement("span",{className:"btn glyphicon glyphicon-remove legend-close",onClick:function(){return e.props.setVisibleLegendPanel(!1)}})),this.props.visibleLayers.map((function(t){var r,n,o=null===(r=e.props.legendOverrides)||void 0===r||null===(n=r.filter((function(e){return(null==e?void 0:e.layerName)===t.name})))||void 0===n?void 0:n[0];return"wms"!==t.type?null:o?c().createElement("div",{key:t.id,className:"row legend-row"},c().createElement("div",{className:"col-sm-7 legend-background"},c().createElement("span",{className:"legend-image"},c().createElement("img",{src:null==o?void 0:o.staticImageFilePath}))),c().createElement("div",{className:"col-sm-5 legend-text-label"},c().createElement("span",{className:"h5"},t.title))):c().createElement("div",{key:t.id,className:"row legend-row"},c().createElement("div",{className:"col-sm-7 legend-background"},c().createElement("span",{className:"legend-image"},c().createElement(f.Z,{layer:t,legendHeight:12,legendWidth:12,legendOptions:"dpi:150; countMatched:true; hideEmptyRules:true",scales:[1e5],scaleDependent:!0}))),c().createElement("div",{className:"col-sm-5 legend-text-label"},c().createElement("span",{className:"h5"},t.title)))}))):c().createElement("div",null,c().createElement("button",{className:"simple-view-menu-button "+(this.props.searchBarVisible?"legend-button-with-search":"legend-button"),onClick:function(){return e.props.setVisibleLegendPanel(!0)}},"Show Legend"))}}])&&m(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(c().Component);h=S,g="propTypes",w={setVisibleLegendPanel:E.func,visibleLegendPanel:E.bool,visibleLayers:E.array,searchBarVisible:E.bool,changeActiveSearchTool:E.func,legendOverrides:E.array},g in h?Object.defineProperty(h,g,{value:w,enumerable:!0,configurable:!0,writable:!0}):h[g]=w;const O=(0,s.connect)((function(e){var t,r,n,o,i,l,u;return{visibleLayers:null==e||null===(t=e.layers)||void 0===t?void 0:t.flat.filter((function(e){return!0===(null==e?void 0:e.visibility)&&"background"!==(null==e?void 0:e.group)})),visibleLegendPanel:null==e||null===(r=e.simpleView)||void 0===r?void 0:r.visibleLegendPanel,legendOverrides:(null==e||null===(n=e.simpleView)||void 0===n||null===(o=n.config)||void 0===o?void 0:o.legendOverrides)||[],searchBarVisible:!(null==e||null===(i=e.localConfig)||void 0===i||null===(l=i.plugins)||void 0===l||null===(u=l.map_view)||void 0===u||!u.find((function(e){return"Search"===e.name})))}}),(function(e){return{setVisibleLegendPanel:function(t){return e((0,o.setVisibleLegendPanel)(t))},changeActiveSearchTool:function(t){return e((0,p.a)(t))}}}))(S);var _=r(388380);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function V(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function R(e,t){return(R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I=r(45697),C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(l,e);var t,r,n,o,i=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=P(n);if(o){var r=P(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return j(this,e)});function l(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),i.call(this,e)}return t=l,(r=[{key:"render",value:function(){var e,t=this;return"basemaps"===this.props.openMenuGroupId?c().createElement("div",{className:"menu-rows-container"},this.props.baseMapLayers.map((function(e){return c().createElement(_.j,{layer:e})}))):0===(null===(e=this.props.layerList)||void 0===e?void 0:e.length)?c().createElement("div",{className:"menu-rows-container"},c().createElement(_.j,{layer:null})):c().createElement("div",{className:"menu-rows-container"},this.props.layerSubheadings.map((function(e){var r;return c().createElement(c().Fragment,null,c().createElement("h5",{style:{textAlign:"left"}},e),null===(r=t.props.layerList)||void 0===r?void 0:r.filter((function(t){return t.group.split(".")[1]===e})).map((function(e){return c().createElement(_.j,{layer:e})})))})))}}])&&V(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(c().Component);!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(C,"propTypes",{menuGroups:I.array,flatLayers:I.array,layerList:I.array,layerSubheadings:I.array,menuDatasets:I.array,openMenuGroupId:I.string,baseMapLayers:I.array});var F=(0,s.connect)((function(e){var t,r,n,o,i,l,u,a,c;return{openMenuGroupId:null==e||null===(t=e.simpleView)||void 0===t?void 0:t.openMenuGroupId,menuGroups:null==e||null===(r=e.layers)||void 0===r?void 0:r.groups,flatLayers:null==e||null===(n=e.layers)||void 0===n?void 0:n.flat,layerList:null==e||null===(o=e.layers)||void 0===o||null===(i=o.flat)||void 0===i?void 0:i.filter((function(t){var r,n;return(null==t||null===(r=t.group)||void 0===r?void 0:r.split(".")[0])===(null==e||null===(n=e.simpleView)||void 0===n?void 0:n.openMenuGroupId)})),layerSubheadings:(c=new Set(null==e||null===(l=e.layers)||void 0===l||null===(u=l.flat)||void 0===u?void 0:u.filter((function(t){var r,n;return(null==t||null===(r=t.group)||void 0===r?void 0:r.split(".")[0])===(null==e||null===(n=e.simpleView)||void 0===n?void 0:n.openMenuGroupId)})).map((function(e){return e.group.split(".")[1]}))),function(e){if(Array.isArray(e))return A(e)}(c)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(c)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?A(e,t):void 0}}(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),baseMapLayers:null==e||null===(a=e.layers)||void 0===a?void 0:a.flat.filter((function(e){return"background"===(null==e?void 0:e.group)}))}}),(function(e){return{}}))(C),k=r(843614),M=r(38560);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function D(e,t){return(D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function N(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var B=r(45697),G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D(e,t)}(l,e);var t,r,n,o,i=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=U(n);if(o){var r=U(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return N(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,e)).state={},t}return t=l,(r=[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return c().createElement("div",{className:"introduction-container"},c().createElement(k.Z,{show:!0,onHide:function(){return e.props.setVisibleIntroduction(!1)}},c().createElement(k.Z.Header,{closeButton:!0},c().createElement(k.Z.Title,{id:"contained-modal-title-lg"},"Welcome to Hydrata")),c().createElement(k.Z.Body,null,c().createElement("p",{style:{fontSize:"small"}},'The application is provided "as-is", without warranty of any kind, express or implied, including but not limited to the warranties of merchantability, firness for a particular pupose and noninfringement. In no event shall the authors or copyright holders be liable for any claim, damages or other liability, whether in an action of contract, tort or otherwise, arising from, out of or in connection with the software or the use or other dealings in the software.'),c().createElement(M.Z,{onClick:function(){return e.props.setVisibleIntroduction(!1)},bsStyle:"primary",style:{marginLeft:"45%"}},"Accept"))))}}])&&x(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(c().Component);!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(G,"propTypes",{setVisibleIntroduction:B.func});const H=(0,s.connect)((function(){return{}}),(function(e){return{setVisibleIntroduction:function(t){return e((0,o.setVisibleIntroduction)(t))}}}))(G);function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function W(e,t){return(W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function q(e,t){if(t&&("object"===Z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Y(e)}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var z=r(45697),Q=r(472986),$=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W(e,t)}(l,e);var t,r,n,o,i=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=K(n);if(o){var r=K(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return q(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,e)).handleChange=t.handleChange.bind(Y(t)),t.handleOverrideChange=t.handleOverrideChange.bind(Y(t)),t.handleMultiSelectOverrideChange=t.handleMultiSelectOverrideChange.bind(Y(t)),t.state={},t}return t=l,(r=[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"renderOverride",value:function(e,t){var r,n,o,i,l,u;switch(e){case"datepicker":return c().createElement("input",{style:{color:"white",borderRadius:"4px",textAlign:"right"},name:t,value:null===(r=this.props.simpleViewAttributeForm)||void 0===r||null===(n=r[t])||void 0===n?void 0:n.value,onChange:this.handleOverrideChange,type:"date"});case"float":return c().createElement("input",{style:{color:"white",borderRadius:"4px",textAlign:"right"},name:t,value:null===(o=this.props.simpleViewAttributeForm)||void 0===o||null===(i=o[t])||void 0===i?void 0:i.value,onChange:this.handleOverrideChange,type:"number"});case"text":return c().createElement("input",{style:{color:"white",borderRadius:"4px",textAlign:"right"},name:t,value:null===(l=this.props.simpleViewAttributeForm)||void 0===l||null===(u=l[t])||void 0===u?void 0:u.value,onChange:this.handleOverrideChange,type:"text"});case"multi-select":return c().createElement("div",null);default:return c().createElement("div",null,e," widget not found")}}},{key:"render",value:function(){var e,t,r,n,o=this;return c().createElement("div",{id:"simple-view-attribute-form-panel",className:"simple-view-panel menu-rows-container"},c().createElement("div",{id:"simple-view-attribute-form-header"},c().createElement("div",{className:"simple-view-panel-header"},"Import external data - attribute mapping"),c().createElement("span",{className:"btn glyphicon glyphicon-remove legend-close",onClick:function(){o.props.setVisibleSimpleViewAttributeForm(!1)}})),c().createElement("div",{className:"simple-view-panel-body"},c().createElement("div",{className:"simple-view-panel-col-one",style:{width:"800px",marginLeft:"auto",marginTop:"15px",marginRight:"auto"}},c().createElement("div",{style:{display:"flex",marginBottom:"5px"}},c().createElement("h2",{style:{width:"150px",textAlign:"center"}},null===(e=this.props.headings)||void 0===e?void 0:e[0]),c().createElement("h2",{style:{width:"450px",textAlign:"center"}},null===(t=this.props.headings)||void 0===t?void 0:t[1]),c().createElement("h2",{style:{width:"250px",textAlign:"center"}},null===(r=this.props.headings)||void 0===r?void 0:r[2]),c().createElement("h2",{style:{width:"450px",textAlign:"center"}},null===(n=this.props.headings)||void 0===n?void 0:n[3])),Object.keys(this.props.simpleViewAttributeForm).map((function(e){var t,r,n,i,l=o.props.simpleViewAttributeForm[e];return null!=l&&l.hidden?null:c().createElement("div",{style:{position:"relative",top:"".concat(14*(null==l?void 0:l.position),"px"),border:"solid 1px #ffffff96",borderRadius:"3px",padding:"5px",paddingBottom:"2px"}},c().createElement("div",{style:{display:"flex",marginBottom:"5px"}},c().createElement("div",{style:{width:"150px"}},null==l?void 0:l.datatype),c().createElement("div",{style:{width:"450px",color:"external_id"===e.toLowerCase()?"red":"white"}},e),c().createElement("select",{style:{height:"multi-select"===(null==l?void 0:l.override_widget)?"150px":null,width:"250px",color:"#2b5994",borderRadius:"4px"},name:e,multiple:"multi-select"===(null==l?void 0:l.override_widget),value:null===(t=o.props.simpleViewAttributeForm)||void 0===t||null===(r=t[e])||void 0===r?void 0:r.value,defaultValue:"",onChange:"multi-select"===(null==l?void 0:l.override_widget)?o.handleMultiSelectOverrideChange:o.handleChange},null!=l&&l.override_allowed&&null!=l&&l.override_used?c().createElement(c().Fragment,null,c().createElement("option",{value:"---",selected:!0},"---"),null==l||null===(n=l.options)||void 0===n?void 0:n.map((function(e){return c().createElement("option",{value:e},e)}))):c().createElement(c().Fragment,null,c().createElement("option",{value:"",hidden:!0,selected:!0,disabled:!0},"---"),null==l||null===(i=l.options)||void 0===i?void 0:i.map((function(e){return c().createElement("option",{value:e},e)})))),c().createElement("div",{style:{marginLeft:"40px",width:"450px",textAlign:"center"}},null!=l&&l.override_allowed?o.renderOverride(null==l?void 0:l.override_widget,e):c().createElement("div",null))))})))),c().createElement("div",{id:"simple-view-attribute-form-grid-footer",className:"simple-view-panel-footer"},c().createElement("button",{type:"button",className:"swamm-button",style:{backgroundColor:"darkred"},onClick:function(){o.props.setVisibleSimpleViewAttributeForm(!1)}},"Cancel"),this.props.submitUrl.includes("importer-execute")?this.props.processingSimpleViewAttributeForm?c().createElement("button",{type:"button",className:"swamm-button",style:{backgroundColor:"darkgreen"}},c().createElement("span",null,c().createElement(Q,{color:"white",style:{display:"inline-block",marginTop:"2px",marginBottom:"2px"},spinnerName:"circle",noFadeIn:!0}))):c().createElement("button",{type:"button",className:"swamm-button",style:{backgroundColor:"darkgreen"},onClick:function(){o.props.submitSimpleViewAttributeForm(o.props.simpleViewAttributeForm,o.props.projectId,o.props.simpleViewImporterSessionId),o.props.setProcessingSimpleViewAttributeForm(!0)}},"Process"):c().createElement("button",{type:"button",className:"swamm-button",style:{backgroundColor:"darkgreen"},onClick:function(){o.props.submitSimpleViewAttributeForm(o.props.simpleViewAttributeForm,o.props.projectId,o.props.simpleViewImporterSessionId)}},"Next")))}},{key:"handleChange",value:function(e){var t,r=e.target.name,n=e.target.value,o=J({},r,n);"number"===(null===(t=e.target)||void 0===t?void 0:t.type)&&(o=J({},r,parseFloat(n))),o.override_used=!1,this.props.updateSimpleViewAttributeForm(o)}},{key:"handleOverrideChange",value:function(e){var t,r=e.target.name,n=e.target.value,o=J({},r,n);"number"===(null===(t=e.target)||void 0===t?void 0:t.type)&&(o=J({},r,parseFloat(n))),o.override_used=!0,this.props.updateSimpleViewAttributeForm(o)}},{key:"handleMultiSelectOverrideChange",value:function(e){var t,r,n=null===(t=e.target)||void 0===t?void 0:t.name,o=Array.from(e.target.selectedOptions,(function(e){return e.value})),i=J({},n,o);"number"===(null===(r=e.target)||void 0===r?void 0:r.type)&&(i=J({},n,parseFloat(o))),i.override_used=!0,this.props.updateSimpleViewAttributeForm(i)}}])&&X(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(c().Component);J($,"propTypes",{setVisibleSimpleViewAttributeForm:z.func,updateSimpleViewAttributeForm:z.func,simpleViewAttributeForm:z.object,submitSimpleViewAttributeForm:z.func,setProcessingSimpleViewAttributeForm:z.func,processingSimpleViewAttributeForm:z.bool,projectId:z.number,submitUrl:z.string,simpleViewImporterSessionId:z.number,headings:z.array}),J($,"defaultProps",{});var ee=(0,s.connect)((function(e){var t,r,n,o,i,l,u,a,c,s,p,f=null;return null!=e&&null!==(t=e.simpleView)&&void 0!==t&&t.simpleViewAttributeForm&&(f=(null===(a=JSON.parse(JSON.stringify(null==e||null===(c=e.simpleView)||void 0===c?void 0:c.simpleViewAttributeForm)))||void 0===a?void 0:a.headings)||["Type","Target Attribute","Uploaded Attribute","Attribute Override"],null==e||null===(s=e.simpleView)||void 0===s||null===(p=s.simpleViewAttributeForm)||void 0===p||delete p.headings),{projectId:null==e||null===(r=e.simpleView)||void 0===r||null===(n=r.config)||void 0===n?void 0:n.project_id,simpleViewAttributeForm:(null==e||null===(o=e.simpleView)||void 0===o?void 0:o.simpleViewAttributeForm)||{},simpleViewImporterSessionId:null==e||null===(i=e.simpleView)||void 0===i?void 0:i.simpleViewImporterSessionId,processingSimpleViewAttributeForm:null==e||null===(l=e.simpleView)||void 0===l?void 0:l.processingSimpleViewAttributeForm,submitUrl:(null==e||null===(u=e.simpleView)||void 0===u?void 0:u.submitUrl)||"",headings:f}}),(function(e){return{setVisibleSimpleViewAttributeForm:function(t){return e((0,o.setVisibleSimpleViewAttributeForm)(t))},setProcessingSimpleViewAttributeForm:function(t){return e((0,o.setProcessingSimpleViewAttributeForm)(t))},updateSimpleViewAttributeForm:function(t){return e((0,o.updateSimpleViewAttributeForm)(t))},submitSimpleViewAttributeForm:function(t,r,n){return e((0,o.submitSimpleViewAttributeForm)(t,r,n))}}}))($);function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ne(e,t){return(ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function oe(e,t){if(t&&("object"===te(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function le(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ue=r(45697),ae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ne(e,t)}(l,e);var t,r,n,o,i=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ie(n);if(o){var r=ie(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return oe(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,e)).state={},t}return t=l,(r=[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this;return c().createElement("div",{id:"simple-view-attribute-result-panel",className:"simple-view-panel menu-rows-container",style:{backgroundColor:"rgba(0, 60, 136)",textAlign:"left"}},c().createElement("div",{id:"simple-view-attribute-form-header"},c().createElement("div",{className:"simple-view-panel-header"},'Import Result (showing "external_id" fields)'),c().createElement("span",{className:"btn glyphicon glyphicon-remove legend-close",onClick:function(){e.props.setVisibleSimpleViewAttributeResult(!1)}})),c().createElement("div",{className:"simple-view-panel-body"},c().createElement("div",{className:"simple-view-panel-col-one",style:{width:"800px",minHeight:"300px",marginLeft:"auto",marginTop:"15px",marginRight:"auto",marginBottom:"50px",overflowY:"scroll"}},Object.keys(this.props.simpleViewAttributeResult).map((function(t){return c().createElement(c().Fragment,null,c().createElement("h3",null,t.charAt(0).toUpperCase()+t.slice(1)," (",e.props.simpleViewAttributeResult[t].length,"):"),e.props.simpleViewAttributeResult[t].map((function(e){return"".concat(e,", ")})))})))),c().createElement("div",{id:"simple-view-attribute-result-grid-footer",className:"simple-view-panel-footer"},c().createElement("button",{type:"button",className:"swamm-button",style:{backgroundColor:"darkred"},onClick:function(){e.props.setVisibleSimpleViewAttributeResult(!1)}},"Close")))}}])&&re(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(c().Component);le(ae,"propTypes",{setVisibleSimpleViewAttributeResult:ue.func,projectId:ue.number,simpleViewAttributeResult:ue.object}),le(ae,"defaultProps",{});var ce=(0,s.connect)((function(e){var t,r,n,o;return{projectId:null==e||null===(t=e.simpleView)||void 0===t||null===(r=t.config)||void 0===r?void 0:r.project_id,simpleViewAttributeResult:(null==e||null===(n=e.simpleView)||void 0===n?void 0:n.simpleViewAttributeResult)||{},simpleViewImporterSessionId:null==e||null===(o=e.simpleView)||void 0===o?void 0:o.simpleViewImporterSessionId}}),(function(e){return{setVisibleSimpleViewAttributeResult:function(t){return e((0,o.setVisibleSimpleViewAttributeResult)(t))}}}))(ae);function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fe(e,t){return(fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function de(e,t){if(t&&("object"===se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function be(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ye=r(45697),ve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fe(e,t)}(l,e);var t,r,n,o,i=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=me(n);if(o){var r=me(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return de(this,e)});function l(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),i.call(this,e)}return t=l,(r=[{key:"render",value:function(){var e=this;return c().createElement("div",{id:"simple-view-container"},c().createElement("ul",{className:"menu-groups"},c().createElement("button",{key:"basemaps",className:"simple-view-menu-button",style:{left:20},onClick:function(){var t;e.props.setOpenMenuGroupId(null===(t=e.props.baseMapMenuGroup)||void 0===t?void 0:t.id)}},"BaseMaps"),this.props.menuGroups&&this.props.menuGroups.length?this.props.menuGroups.map((function(t,r){return c().createElement("button",{id:"simpleViewContainer-mapped-button-".concat(null==t?void 0:t.name,"-").concat(null==t?void 0:t.title),key:"simpleViewContainer-mapped-button-".concat(null==t?void 0:t.name,"-").concat(null==t?void 0:t.title),className:"simple-view-menu-button",style:{left:100*(r+e.props.menuSpaces+1)+20},onClick:function(){e.props.setOpenMenuGroupId(t.id)}},"Default"===(null==t?void 0:t.title)?t.name:t.title)})):null),function(){var t;switch(null===(t=e.props)||void 0===t?void 0:t.openMenuGroupId){case null:case void 0:return null;default:return c().createElement("div",{className:"simple-view-panel"},c().createElement(F,null))}}(),c().createElement(O,null),this.props.visibleIntroduction?c().createElement(H,null):null,this.props.visibleSimpleViewAttributeForm?c().createElement(ee,null):null,this.props.visibleSimpleViewAttributeResult?c().createElement(ce,null):null)}}])&&pe(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(c().Component);be(ve,"propTypes",{setOpenMenuGroupId:ye.func,menuGroups:ye.array,baseMapMenuGroup:ye.object,openMenuGroupId:ye.string,visibleIntroduction:ye.bool,visibleSimpleViewAttributeForm:ye.bool,visibleSimpleViewAttributeResult:ye.bool,setVisibleIntroduction:ye.func,menuSpaces:ye.number}),be(ve,"defaultProps",{});const he=(0,s.connect)((function(e){var t,r,n,o,i,l,u,a,c,s,p,f,d=(null==e||null===(t=e.simpleView)||void 0===t||null===(r=t.config)||void 0===r?void 0:r.customMenus)||[],m=(null==e||null===(n=e.simpleView)||void 0===n||null===(o=n.config)||void 0===o?void 0:o.menuSpaces)||0;return null!=e&&null!==(i=e.anuga)&&void 0!==i&&null!==(l=i.projectData)&&void 0!==l&&l.id&&(d=["Input Data","Results"],m=4),{menuSpaces:m,menuGroups:null==e||null===(u=e.layers)||void 0===u||null===(a=u.groups)||void 0===a?void 0:a.filter((function(e){return!(d.includes(e.name)||d.includes(e.title))})),baseMapMenuGroup:{id:"basemaps",title:"Base Maps",name:"basemaps"},openMenuGroupId:null==e||null===(c=e.simpleView)||void 0===c?void 0:c.openMenuGroupId,visibleIntroduction:null==e||null===(s=e.simpleView)||void 0===s?void 0:s.visibleIntroduction,visibleSimpleViewAttributeForm:null==e||null===(p=e.simpleView)||void 0===p?void 0:p.visibleSimpleViewAttributeForm,visibleSimpleViewAttributeResult:null==e||null===(f=e.simpleView)||void 0===f?void 0:f.visibleSimpleViewAttributeResult}}),(function(e){return{setOpenMenuGroupId:function(t){return e((0,o.setOpenMenuGroupId)(t))},setVisibleIntroduction:function(t){return e((0,o.setVisibleIntroduction)(t))}}}))(ve);var ge=r(49977),we=r.n(ge),Ee=r(433528),Se=r(197395),Oe=r(580416),_e=r(375875),Te=r.n(_e);const Ae=(0,n.rx)("SimpleView",{component:he,reducers:{simpleView:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case o.SET_PROCESSING_SV_ATTRIBUTE_FORM:return l(l({},t),{},{processingSimpleViewAttributeForm:r.processing});case o.SET_SV_CONFIG:return l(l({},t),{},{config:r.config});case o.SET_OPEN_MENU_GROUP_ID:return t.openMenuGroupId===r.openMenuGroupId?l(l({},t),{},{openMenuGroupId:null}):l(l({},t),{},{openMenuGroupId:r.openMenuGroupId});case o.SET_VISIBLE_LEGEND_PANEL:return l(l({},t),{},{visibleLegendPanel:r.visible});case o.SET_VISIBLE_INTRODUCTION:return l(l({},t),{},{visibleIntroduction:r.visible});case o.SET_VISIBLE_SV_ATTRIBUTE_FORM:return l(l({},t),{},{visibleSimpleViewAttributeForm:r.visible});case o.SET_VISIBLE_SV_ATTRIBUTE_RESULT:return l(l({},t),{},{visibleSimpleViewAttributeResult:r.visible});case o.SET_SV_ATTRIBUTE_RESULT:return l(l({},t),{},{simpleViewAttributeResult:r.data});case o.CREATE_SV_ATTRIBUTE_FORM:return l(l({},t),{},{simpleViewAttributeForm:r.form,simpleViewImporterSessionId:r.simpleViewImporterSessionId,submitUrl:r.submitUrl,visibleSimpleViewAttributeForm:!0});case o.UPDATE_SV_ATTRIBUTE_FORM:console.log("UPDATE_SV_ATTRIBUTE_FORM action.kv",r.kv);var n=r.kv.override_used;delete r.kv.override_used;var i=Object.keys(r.kv)[0],a=r.kv[i];console.log("UPDATE_SV_ATTRIBUTE_FORM newKey",i),console.log("UPDATE_SV_ATTRIBUTE_FORM newValue",a);var c=l({},t.simpleViewAttributeForm[i]);console.log("UPDATE_SV_ATTRIBUTE_FORM existingAttributeValue",c);var s=l(l({},c),{},{value:a,override_used:n});console.log("UPDATE_SV_ATTRIBUTE_FORM updatedFormValue",s);var p=l(l({},t.simpleViewAttributeForm),{},u({},i,s));return console.log("UPDATE_SV_ATTRIBUTE_FORM updatedSimpleViewAttributeForm",p),l(l({},t),{},{simpleViewAttributeForm:p});case o.SUBMIT_SV_ATTRIBUTE_FORM_SUCCESS:return l(l({},t),{},{simpleViewImporterSessionId:null==r||null===(e=r.data)||void 0===e?void 0:e.importer_session_id});case o.SET_VISIBLE_UPLOADER_PANEL:return l(l({},t),{},{visibleUploaderPanel:r.visible,importerConfigKey:r.importerConfigKey,importerTargetObjectId:r.importerTargetObjectId});case o.UPDATE_UPLOAD_STATUS:return l(l({},t),{},{uploadStatus:r.status});case o.SV_SELECT_LAYER:return l(l({},t),{},{selectedLayer:r.layer});default:return t}}},epics:{beginEditLayerEpic:function(e){return e.ofType(Ee.Jb).concatMap((function(){return we().Observable.of((0,Ee.lg)())}))},updateDatasetTitleEpic:function(e){return e.ofType(o.UPDATE_DATASET_TITLE).switchMap((function(e){return we().Observable.from(Te().get("/api/v2/datasets?search=".concat(e.datasetName.split("geonode:")[1],"&search_fields=name"))).concatMap((function(t){var r,n,o;return we().Observable.from(Te().patch("/api/v2/datasets/".concat(null==t||null===(r=t.data)||void 0===r||null===(n=r.datasets)||void 0===n||null===(o=n[0])||void 0===o?void 0:o.pk,"/"),{title:e.newTitle}))})).concatMap((function(){return we().Observable.of((0,o.updateDatasetTitleSuccess)())}))}))},svDownloadLayerEpic:function(e){return e.ofType(o.SV_DOWNLOAD_LAYER).concatMap((function(e){var t;return we().Observable.concat(we().Observable.of((0,Oe.UG)(null==e||null===(t=e.layer)||void 0===t?void 0:t.id,"layer")),we().Observable.of((0,Oe.LR)(null==e?void 0:e.layer)))}))},submitAttributeFormEpic:function(e,t){return e.ofType(o.SUBMIT_SV_ATTRIBUTE_FORM).switchMap((function(e){var r,n;return we().Observable.from(Te().post(null===(r=t.getState())||void 0===r||null===(n=r.simpleView)||void 0===n?void 0:n.submitUrl,{form:null==e?void 0:e.form,project_id:null==e?void 0:e.projectId,importer_session_id:null==e?void 0:e.simpleViewImporterSessionId}).then((function(e){var t;return console.log("SUBMIT_SV_ATTRIBUTE_FORM response:",e),null!==(t=e.data)&&void 0!==t&&t.submitUrl?(0,o.createSimpleViewAttributeForm)(e.data):(0,o.submitSimpleViewAttributeFormSuccess)(e.data)})))}))},submitSimpleViewAttributeFormSuccessEpic:function(e){return e.ofType(o.SUBMIT_SV_ATTRIBUTE_FORM_SUCCESS).concatMap((function(e){return we().Observable.of((0,o.setVisibleSimpleViewAttributeForm)(!1),(0,o.setVisibleUploaderPanel)(!1),(0,o.setProcessingSimpleViewAttributeForm)(!1),(0,o.setVisibleSimpleViewAttributeResult)(!0),(0,o.setSimpleViewAttributeResult)(e.data),(0,Se.show)({message:"Import successful",title:"Features added",uid:1e3,position:"tc"}))}))}}})}}]);