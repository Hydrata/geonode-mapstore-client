(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[16398],{597222:(e,t,r)=>{"use strict";r.d(t,{Vc:()=>o,qj:()=>i,bj:()=>l,p7:()=>u,Av:()=>a,M8:()=>c,wn:()=>s,gs:()=>p,NN:()=>f,C2:()=>d,O7:()=>m,oQ:()=>b,dX:()=>y,al:()=>v,Gh:()=>h,x2:()=>g,Y7:()=>w,b4:()=>E,GI:()=>S,KP:()=>O,dS:()=>_,Zw:()=>T,l4:()=>A,fZ:()=>V,Z:()=>j,a:()=>P,WN:()=>R,k9:()=>I,yo:()=>C,kE:()=>k,kV:()=>F,v2:()=>M,_q:()=>x,tt:()=>L,Jc:()=>D,w4:()=>N,QJ:()=>U,KG:()=>B,o$:()=>G,TS:()=>H,Tw:()=>Z,I3:()=>X});var n=r(197395),o="SEARCH:SEARCH_WITH_FILTER",i="SEARCH:SCHEDULE_SEARCH_WITH_FILTER",l="TEXT_SEARCH_STARTED",u="TEXT_SEARCH_RESULTS_LOADED",a="TEXT_SEARCH_RESULTS_PURGE",c="TEXT_SEARCH_RESET",s="TEXT_SEARCH_ADD_MARKER",p="TEXT_SEARCH_TEXT_CHANGE",f="TEXT_SEARCH_LOADING",d="TEXT_SEARCH_NESTED_SERVICE_SELECTED",m="TEXT_SEARCH_ERROR",b="TEXT_SEARCH_CANCEL_ITEM",y="TEXT_SEARCH_ITEM_SELECTED",v="TEXT_SEARCH_SHOW_GFI",h="TEXT_SEARCH_SET_HIGHLIGHTED_FEATURE",g="UPDATE_RESULTS_STYLE",w="CHANGE_SEARCH_TOOL",E="SEARCH:ZOOM_ADD_POINT",S="SEARCH:CHANGE_FORMAT",O="SEARCH:CHANGE_COORD",_="SEARCH:HIDE_MARKER";function T(e){return{type:S,format:e}}function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,r=e.cql_filter;return{type:o,layer:t,cql_filter:r}}function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,r=e.cql_filter;return{type:i,layer:t,cql_filter:r}}function j(e,t,r){return{type:E,pos:e,zoom:t,crs:r}}function P(e){return{type:w,activeSearchTool:e}}function R(e){return{type:u,results:e,append:arguments.length>1&&void 0!==arguments[1]&&arguments[1],services:arguments.length>2?arguments[2]:void 0}}function I(e){return{type:p,searchText:e}}function C(e){return{type:f,loading:e}}function k(e){return{type:m,error:e}}function F(){return{type:a}}function M(){return{type:c}}function x(e,t){return{type:s,markerPosition:e,markerLabel:t}}function L(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).services;return{type:l,searchText:e,services:void 0===t?null:t,maxResults:arguments.length>2&&void 0!==arguments[2]?arguments[2]:15}}function D(e,t,r){return{type:y,item:e,mapConfig:t,resultsStyle:r}}var N=function(e){return{type:v,item:e}};function U(e,t,r){return{type:d,searchText:r,services:e,items:t}}function B(e){return{type:b,item:e}}function G(e){return{type:g,style:e}}function H(e,t){return{type:O,coord:e,val:t}}function Z(){return(0,n.error)({title:"Error",position:"tc",message:"search.errors.nonQueriableLayers",autoDismiss:10})}function X(){return(0,n.error)({title:"Error",position:"tc",message:"search.errors.serverError",autoDismiss:10})}},490079:(e,t,r)=>{"use strict";r.d(t,{Z:()=>T});var n=r(531940),o=r.n(n),i=r(701469),l=r.n(i),u=r(414293),a=r.n(u),c=r(737295),s=r.n(c),p=r(675263),f=r.n(p),d=r(124852),m=r.n(d),b=r(233044),y=r(805346);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,O(n.key),n)}}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function S(e,t,r){return(t=O(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==v(t)?t:String(t)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(c,e);var t,r,n,i,u=(n=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(n);if(i){var r=E(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}(this,e)});function c(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return S(w(e=u.call.apply(u,[this].concat(r))),"state",{error:!1}),S(w(e),"onImgError",(function(){e.setState((function(){return{error:!0}}))})),S(w(e),"getUrl",(function(e,t){if(e.layer&&"wms"===e.layer.type&&e.layer.url){var r=e.layer,n=a()(t)?l()(r.url)&&Math.floor(Math.random()*r.url.length):t,i=l()(r.url)?r.url[n]:r.url.replace(/[?].*$/g,""),u=o().parse(i),c=(0,b.clearNilValuesForParams)(r.params),p=s()({},{service:"WMS",request:"GetLegendGraphic",format:"image/png",height:e.legendHeight,width:e.legendWidth,layer:r.name,style:r.style||null,version:r.version||"1.3.0",SLD_VERSION:"1.1.0",LEGEND_OPTIONS:e.legendOptions},r.legendParams||{},e.language&&r.localizedLayerStyles?{LANGUAGE:e.language}:{},(0,b.addAuthenticationToSLD)(c||{},e.layer),c&&c.SLD_BODY?{SLD_BODY:c.SLD_BODY}:{},e.scales&&e.currentZoomLvl&&e.scaleDependent?{SCALE:Math.round(e.scales[e.currentZoomLvl])}:{});return(0,b.addAuthenticationParameter)(i,p),o().format({host:u.host,protocol:u.protocol,pathname:u.pathname,query:p})}return""})),S(w(e),"validateImg",(function(t){t.height<=1&&t.width<=2&&e.onImgError()})),e}return t=c,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.state.error&&this.getUrl(e,0)!==this.getUrl(this.props,0)&&this.setState((function(){return{error:!1}}))}},{key:"render",value:function(){var e=this;return!this.state.error&&this.props.layer&&"wms"===this.props.layer.type&&this.props.layer.url?m().createElement("img",{onError:this.onImgError,onLoad:function(t){return e.validateImg(t.target)},src:this.getUrl(this.props),style:this.props.style}):m().createElement(y.Z,{msgId:"layerProperties.legenderror"})}}])&&h(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(m().Component);S(_,"propTypes",{layer:f().object,legendHeight:f().number,legendWidth:f().number,legendOptions:f().string,style:f().object,currentZoomLvl:f().number,scales:f().array,scaleDependent:f().bool,language:f().string}),S(_,"defaultProps",{legendHeight:12,legendWidth:12,legendOptions:"forceLabels:on",style:{maxWidth:"100%"},scaleDependent:!0});const T=_},38560:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(480681),o=r(124852),i=r.n(o),l=r(294184),u=r.n(l),a=["disabled","className","onClick"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}const s=(p=n.Button,i().forwardRef((function(e,t){var r=e.disabled,n=e.className,o=e.onClick,l=void 0===o?function(){}:o,s=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,a);return i().createElement(p,c({ref:t,className:r?u()("disabled",n):n,onClick:function(){r||l.apply(void 0,arguments)}},s),s.children)})));var p},843614:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(737295),o=r.n(n),i=r(480681),l=r(461365);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function c(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:String(t)}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(l,e);var t,r,n,o,i=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=p(n);if(o){var r=p(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),i.apply(this,arguments)}return t=l,(r=[{key:"handleDialogClick",value:function(e){e.target===e.currentTarget&&this.props.onHide(e)}}])&&a(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(i.Modal);const d=o()((0,l.Z)(f),{Body:i.Modal.Body,Dialog:i.Modal.Dialog,Footer:i.Modal.Footer,Header:i.Modal.Header,Title:i.Modal.Title})},12368:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var n=r(322843);r(893871);var o=r(124852),i=r.n(o),l=r(171703);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function p(e,t,r){return(t=f(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:String(t)}r(357218),r(675263);var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(p,e);var t,r,n,o,l=(n=p,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=s(n);if(o){var r=s(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function p(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),l.call(this,e)}return t=p,(r=[{key:"render",value:function(){return i().createElement("div",{id:"piwik-pro-container"})}}])&&a(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),p}(i().Component);p(d,"propTypes",{}),p(d,"defaultProps",{});const m=(0,l.connect)((function(e){return{}}),(function(e){return{}}))(d),b=(0,n.rx)("piwikPro",{component:m,reducers:{piwikPro:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(arguments.length>1?arguments[1]:void 0).type,e}},epics:{}})},893871:e=>{e.exports={}},160025:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>je});var n=r(322843),o=r(351288),i=r(357218);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){var n;return n=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==l(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=r(124852),p=r.n(s),f=r(171703),d=(r(472619),r(597222)),m=r(490079);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function g(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==b(t)?t:String(t)}var w,E,S,O=r(675263),_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(l,e);var t,r,n,o,i=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(n);if(o){var r=h(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,e)).state={},t}return t=l,(r=[{key:"componentDidMount",value:function(){this.props.searchBarVisible&&this.props.changeActiveSearchTool("coordinatesSearch")}},{key:"render",value:function(){var e=this;return this.props.visibleLegendPanel?p().createElement("div",{className:"simple-view-panel "+(this.props.searchBarVisible?"legend-panel-with-search":"legend-panel")},p().createElement("div",{className:"row h4 legend-heading"},"Legend",p().createElement("span",{className:"btn glyphicon glyphicon-remove legend-close",onClick:function(){return e.props.setVisibleLegendPanel(!1)}})),this.props.visibleLayers.map((function(t){var r,n,o=null===(r=e.props.legendOverrides)||void 0===r||null===(n=r.filter((function(e){return(null==e?void 0:e.layerName)===t.name})))||void 0===n?void 0:n[0];return"wms"!==t.type?null:o?p().createElement("div",{key:t.id,className:"row legend-row"},p().createElement("div",{className:"col-sm-7 legend-background"},p().createElement("span",{className:"legend-image"},p().createElement("img",{src:null==o?void 0:o.staticImageFilePath}))),p().createElement("div",{className:"col-sm-5 legend-text-label"},p().createElement("span",{className:"h5"},t.title))):p().createElement("div",{key:t.id,className:"row legend-row"},p().createElement("div",{className:"col-sm-7 legend-background"},p().createElement("span",{className:"legend-image"},p().createElement(m.Z,{layer:t,legendHeight:12,legendWidth:12,legendOptions:"dpi:150; countMatched:true; hideEmptyRules:true",scales:[1e5],scaleDependent:!0}))),p().createElement("div",{className:"col-sm-5 legend-text-label"},p().createElement("span",{className:"h5"},t.title)))}))):p().createElement("div",null,p().createElement("button",{className:"simple-view-menu-button "+(this.props.searchBarVisible?"legend-button-with-search":"legend-button"),onClick:function(){return e.props.setVisibleLegendPanel(!0)}},"Show Legend"))}}])&&y(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(p().Component);w=_,E="propTypes",S={setVisibleLegendPanel:O.func,visibleLegendPanel:O.bool,visibleLayers:O.array,searchBarVisible:O.bool,changeActiveSearchTool:O.func,legendOverrides:O.array},(E=g(E))in w?Object.defineProperty(w,E,{value:S,enumerable:!0,configurable:!0,writable:!0}):w[E]=S;const T=(0,f.connect)((function(e){var t,r,n,o,i,l,u;return{visibleLayers:null==e||null===(t=e.layers)||void 0===t?void 0:t.flat.filter((function(e){return!0===(null==e?void 0:e.visibility)&&"background"!==(null==e?void 0:e.group)})),visibleLegendPanel:null==e||null===(r=e.simpleView)||void 0===r?void 0:r.visibleLegendPanel,legendOverrides:(null==e||null===(n=e.simpleView)||void 0===n||null===(o=n.config)||void 0===o?void 0:o.legendOverrides)||[],searchBarVisible:!(null==e||null===(i=e.localConfig)||void 0===i||null===(l=i.plugins)||void 0===l||null===(u=l.map_view)||void 0===u||!u.find((function(e){return"Search"===e.name})))}}),(function(e){return{setVisibleLegendPanel:function(t){return e((0,o.setVisibleLegendPanel)(t))},changeActiveSearchTool:function(t){return e((0,d.a)(t))}}}))(_);var A=r(388380);function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,C(n.key),n)}}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}function C(e){var t=function(e,t){if("object"!=V(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==V(t)?t:String(t)}var k=r(675263),F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(l,e);var t,r,n,o,i=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=I(n);if(o){var r=I(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===V(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function l(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),i.call(this,e)}return t=l,(r=[{key:"render",value:function(){var e,t=this;return"basemaps"===this.props.openMenuGroupId?p().createElement("div",{className:"menu-rows-container"},this.props.baseMapLayers.map((function(e){return p().createElement(A.j,{layer:e})}))):0===(null===(e=this.props.layerList)||void 0===e?void 0:e.length)?p().createElement("div",{className:"menu-rows-container"},p().createElement(A.j,{layer:null})):p().createElement("div",{className:"menu-rows-container"},this.props.layerSubheadings.map((function(e){var r;return p().createElement(p().Fragment,null,p().createElement("h5",{style:{textAlign:"left"}},e),null===(r=t.props.layerList)||void 0===r?void 0:r.filter((function(t){return t.group.split(".")[1]===e})).map((function(e){return p().createElement(A.j,{layer:e})})))})))}}])&&P(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(p().Component);!function(e,t,r){(t=C(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(F,"propTypes",{menuGroups:k.array,flatLayers:k.array,layerList:k.array,layerSubheadings:k.array,menuDatasets:k.array,openMenuGroupId:k.string,baseMapLayers:k.array});var M=(0,f.connect)((function(e){var t,r,n,o,i,l,u,a,c;return{openMenuGroupId:null==e||null===(t=e.simpleView)||void 0===t?void 0:t.openMenuGroupId,menuGroups:null==e||null===(r=e.layers)||void 0===r?void 0:r.groups,flatLayers:null==e||null===(n=e.layers)||void 0===n?void 0:n.flat,layerList:null==e||null===(o=e.layers)||void 0===o||null===(i=o.flat)||void 0===i?void 0:i.filter((function(t){var r,n;return(null==t||null===(r=t.group)||void 0===r?void 0:r.split(".")[0])===(null==e||null===(n=e.simpleView)||void 0===n?void 0:n.openMenuGroupId)})),layerSubheadings:(c=new Set(null==e||null===(l=e.layers)||void 0===l||null===(u=l.flat)||void 0===u?void 0:u.filter((function(t){var r,n;return(null==t||null===(r=t.group)||void 0===r?void 0:r.split(".")[0])===(null==e||null===(n=e.simpleView)||void 0===n?void 0:n.openMenuGroupId)})).map((function(e){return e.group.split(".")[1]}))),function(e){if(Array.isArray(e))return j(e)}(c)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(c)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(e,t):void 0}}(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),baseMapLayers:null==e||null===(a=e.layers)||void 0===a?void 0:a.flat.filter((function(e){return"background"===(null==e?void 0:e.group)}))}}),(function(e){return{}}))(F),x=r(843614),L=r(38560);function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function N(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,G(n.key),n)}}function U(e,t){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},U(e,t)}function B(e){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},B(e)}function G(e){var t=function(e,t){if("object"!=D(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==D(t)?t:String(t)}var H=r(675263),Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U(e,t)}(u,e);var t,r,n,o,l=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=B(n);if(o){var r=B(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=l.call(this,e)).state={},t}return t=u,(r=[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return p().createElement("div",{className:"introduction-container"},p().createElement(x.Z,{show:!0,onHide:function(){e.props.setVisibleIntroduction(!1),i.Aw.trackEvent("button","click","close_introduction_cross")}},p().createElement(x.Z.Header,{closeButton:!0},p().createElement(x.Z.Title,{id:"contained-modal-title-lg"},"Welcome to Hydrata")),p().createElement(x.Z.Body,null,p().createElement("p",{style:{fontSize:"small"}},'The application is provided "as-is", without warranty of any kind, express or implied, including but not limited to the warranties of merchantability, firness for a particular pupose and noninfringement. In no event shall the authors or copyright holders be liable for any claim, damages or other liability, whether in an action of contract, tort or otherwise, arising from, out of or in connection with the software or the use or other dealings in the software.'),p().createElement(L.Z,{onClick:function(){e.props.setVisibleIntroduction(!1),i.Aw.trackEvent("button","click","close_introduction_accept")},bsStyle:"primary",style:{marginLeft:"45%"}},"Accept"))))}}])&&N(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(p().Component);!function(e,t,r){(t=G(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(Z,"propTypes",{setVisibleIntroduction:H.func});const X=(0,f.connect)((function(){return{}}),(function(e){return{setVisibleIntroduction:function(t){return e((0,o.setVisibleIntroduction)(t))}}}))(Z);function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Q(n.key),n)}}function Y(e,t){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Y(e,t)}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e){return J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},J(e)}function z(e,t,r){return(t=Q(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q(e){var t=function(e,t){if("object"!=W(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=W(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==W(t)?t:String(t)}var $=r(675263),ee=r(472986),te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y(e,t)}(l,e);var t,r,n,o,i=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=J(n);if(o){var r=J(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===W(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return K(e)}(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,e)).handleChange=t.handleChange.bind(K(t)),t.handleOverrideChange=t.handleOverrideChange.bind(K(t)),t.handleMultiSelectOverrideChange=t.handleMultiSelectOverrideChange.bind(K(t)),t.state={},t}return t=l,r=[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"renderOverride",value:function(e,t){var r,n,o,i,l,u;switch(e){case"datepicker":return p().createElement("input",{style:{color:"white",borderRadius:"4px",textAlign:"right"},name:t,value:null===(r=this.props.simpleViewAttributeForm)||void 0===r||null===(n=r[t])||void 0===n?void 0:n.value,onChange:this.handleOverrideChange,type:"date"});case"float":return p().createElement("input",{style:{color:"white",borderRadius:"4px",textAlign:"right"},name:t,value:null===(o=this.props.simpleViewAttributeForm)||void 0===o||null===(i=o[t])||void 0===i?void 0:i.value,onChange:this.handleOverrideChange,type:"number"});case"text":return p().createElement("input",{style:{color:"white",borderRadius:"4px",textAlign:"right"},name:t,value:null===(l=this.props.simpleViewAttributeForm)||void 0===l||null===(u=l[t])||void 0===u?void 0:u.value,onChange:this.handleOverrideChange,type:"text"});case"multi-select":return p().createElement("div",null);default:return p().createElement("div",null,e," widget not found")}}},{key:"render",value:function(){var e,t,r,n,o=this;return p().createElement("div",{id:"simple-view-attribute-form-panel",className:"simple-view-panel menu-rows-container"},p().createElement("div",{id:"simple-view-attribute-form-header"},p().createElement("div",{className:"simple-view-panel-header"},"Import external data - attribute mapping"),p().createElement("span",{className:"btn glyphicon glyphicon-remove legend-close",onClick:function(){o.props.setVisibleSimpleViewAttributeForm(!1)}})),p().createElement("div",{className:"simple-view-panel-body"},p().createElement("div",{className:"simple-view-panel-col-one",style:{width:"800px",marginLeft:"auto",marginTop:"15px",marginRight:"auto"}},p().createElement("div",{style:{display:"flex",marginBottom:"5px"}},p().createElement("h2",{style:{width:"150px",textAlign:"center"}},null===(e=this.props.headings)||void 0===e?void 0:e[0]),p().createElement("h2",{style:{width:"450px",textAlign:"center"}},null===(t=this.props.headings)||void 0===t?void 0:t[1]),p().createElement("h2",{style:{width:"250px",textAlign:"center"}},null===(r=this.props.headings)||void 0===r?void 0:r[2]),p().createElement("h2",{style:{width:"450px",textAlign:"center"}},null===(n=this.props.headings)||void 0===n?void 0:n[3])),Object.keys(this.props.simpleViewAttributeForm).map((function(e){var t,r,n,i,l=o.props.simpleViewAttributeForm[e];return null!=l&&l.hidden?null:p().createElement("div",{style:{position:"relative",top:"".concat(14*(null==l?void 0:l.position),"px"),border:"solid 1px #ffffff96",borderRadius:"3px",padding:"5px",paddingBottom:"2px"}},p().createElement("div",{style:{display:"flex",marginBottom:"5px"}},p().createElement("div",{style:{width:"150px"}},null==l?void 0:l.datatype),p().createElement("div",{style:{width:"450px",color:"external_id"===e.toLowerCase()?"red":"white"}},e),p().createElement("select",{style:{height:"multi-select"===(null==l?void 0:l.override_widget)?"150px":null,width:"250px",color:"#2b5994",borderRadius:"4px"},name:e,multiple:"multi-select"===(null==l?void 0:l.override_widget),value:null===(t=o.props.simpleViewAttributeForm)||void 0===t||null===(r=t[e])||void 0===r?void 0:r.value,defaultValue:"",onChange:"multi-select"===(null==l?void 0:l.override_widget)?o.handleMultiSelectOverrideChange:o.handleChange},null!=l&&l.override_allowed&&null!=l&&l.override_used?p().createElement(p().Fragment,null,p().createElement("option",{value:"---",selected:!0},"---"),null==l||null===(n=l.options)||void 0===n?void 0:n.map((function(e){return p().createElement("option",{value:e},e)}))):p().createElement(p().Fragment,null,p().createElement("option",{value:"",hidden:!0,selected:!0,disabled:!0},"---"),null==l||null===(i=l.options)||void 0===i?void 0:i.map((function(e){return p().createElement("option",{value:e},e)})))),p().createElement("div",{style:{marginLeft:"40px",width:"450px",textAlign:"center"}},null!=l&&l.override_allowed?o.renderOverride(null==l?void 0:l.override_widget,e):p().createElement("div",null))))})))),p().createElement("div",{id:"simple-view-attribute-form-grid-footer",className:"simple-view-panel-footer"},p().createElement("button",{type:"button",className:"swamm-button",style:{backgroundColor:"darkred"},onClick:function(){o.props.setVisibleSimpleViewAttributeForm(!1)}},"Cancel"),this.props.submitUrl.includes("importer-execute")?this.props.processingSimpleViewAttributeForm?p().createElement("button",{type:"button",className:"swamm-button",style:{backgroundColor:"darkgreen"}},p().createElement("span",null,p().createElement(ee,{color:"white",style:{display:"inline-block",marginTop:"2px",marginBottom:"2px"},spinnerName:"circle",noFadeIn:!0}))):p().createElement("button",{type:"button",className:"swamm-button",style:{backgroundColor:"darkgreen"},onClick:function(){o.props.submitSimpleViewAttributeForm(o.props.simpleViewAttributeForm,o.props.projectId,o.props.simpleViewImporterSessionId),o.props.setProcessingSimpleViewAttributeForm(!0)}},"Process"):p().createElement("button",{type:"button",className:"swamm-button",style:{backgroundColor:"darkgreen"},onClick:function(){o.props.submitSimpleViewAttributeForm(o.props.simpleViewAttributeForm,o.props.projectId,o.props.simpleViewImporterSessionId)}},"Next")))}},{key:"handleChange",value:function(e){var t,r=e.target.name,n=e.target.value,o=z({},r,n);"number"===(null===(t=e.target)||void 0===t?void 0:t.type)&&(o=z({},r,parseFloat(n))),o.override_used=!1,this.props.updateSimpleViewAttributeForm(o)}},{key:"handleOverrideChange",value:function(e){var t,r=e.target.name,n=e.target.value,o=z({},r,n);"number"===(null===(t=e.target)||void 0===t?void 0:t.type)&&(o=z({},r,parseFloat(n))),o.override_used=!0,this.props.updateSimpleViewAttributeForm(o)}},{key:"handleMultiSelectOverrideChange",value:function(e){var t,r,n=null===(t=e.target)||void 0===t?void 0:t.name,o=Array.from(e.target.selectedOptions,(function(e){return e.value})),i=z({},n,o);"number"===(null===(r=e.target)||void 0===r?void 0:r.type)&&(i=z({},n,parseFloat(o))),i.override_used=!0,this.props.updateSimpleViewAttributeForm(i)}}],r&&q(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(p().Component);z(te,"propTypes",{setVisibleSimpleViewAttributeForm:$.func,updateSimpleViewAttributeForm:$.func,simpleViewAttributeForm:$.object,submitSimpleViewAttributeForm:$.func,setProcessingSimpleViewAttributeForm:$.func,processingSimpleViewAttributeForm:$.bool,projectId:$.number,submitUrl:$.string,simpleViewImporterSessionId:$.number,headings:$.array}),z(te,"defaultProps",{});var re=(0,f.connect)((function(e){var t,r,n,o,i,l,u,a,c,s,p,f=null;return null!=e&&null!==(t=e.simpleView)&&void 0!==t&&t.simpleViewAttributeForm&&(f=(null===(a=JSON.parse(JSON.stringify(null==e||null===(c=e.simpleView)||void 0===c?void 0:c.simpleViewAttributeForm)))||void 0===a?void 0:a.headings)||["Type","Target Attribute","Uploaded Attribute","Attribute Override"],null==e||null===(s=e.simpleView)||void 0===s||null===(p=s.simpleViewAttributeForm)||void 0===p||delete p.headings),{projectId:null==e||null===(r=e.simpleView)||void 0===r||null===(n=r.config)||void 0===n?void 0:n.project_id,simpleViewAttributeForm:(null==e||null===(o=e.simpleView)||void 0===o?void 0:o.simpleViewAttributeForm)||{},simpleViewImporterSessionId:null==e||null===(i=e.simpleView)||void 0===i?void 0:i.simpleViewImporterSessionId,processingSimpleViewAttributeForm:null==e||null===(l=e.simpleView)||void 0===l?void 0:l.processingSimpleViewAttributeForm,submitUrl:(null==e||null===(u=e.simpleView)||void 0===u?void 0:u.submitUrl)||"",headings:f}}),(function(e){return{setVisibleSimpleViewAttributeForm:function(t){return e((0,o.setVisibleSimpleViewAttributeForm)(t))},setProcessingSimpleViewAttributeForm:function(t){return e((0,o.setProcessingSimpleViewAttributeForm)(t))},updateSimpleViewAttributeForm:function(t){return e((0,o.updateSimpleViewAttributeForm)(t))},submitSimpleViewAttributeForm:function(t,r,n){return e((0,o.submitSimpleViewAttributeForm)(t,r,n))}}}))(te);function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function oe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ae(n.key),n)}}function ie(e,t){return ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ie(e,t)}function le(e){return le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},le(e)}function ue(e,t,r){return(t=ae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ae(e){var t=function(e,t){if("object"!=ne(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ne(t)?t:String(t)}var ce=r(675263),se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ie(e,t)}(l,e);var t,r,n,o,i=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=le(n);if(o){var r=le(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ne(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,e)).state={},t}return t=l,r=[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this;return p().createElement("div",{id:"simple-view-attribute-result-panel",className:"simple-view-panel menu-rows-container",style:{backgroundColor:"rgba(0, 60, 136)",textAlign:"left"}},p().createElement("div",{id:"simple-view-attribute-form-header"},p().createElement("div",{className:"simple-view-panel-header"},'Import Result (showing "external_id" fields)'),p().createElement("span",{className:"btn glyphicon glyphicon-remove legend-close",onClick:function(){e.props.setVisibleSimpleViewAttributeResult(!1)}})),p().createElement("div",{className:"simple-view-panel-body"},p().createElement("div",{className:"simple-view-panel-col-one",style:{width:"800px",minHeight:"300px",marginLeft:"auto",marginTop:"15px",marginRight:"auto",marginBottom:"50px",overflowY:"scroll"}},Object.keys(this.props.simpleViewAttributeResult).map((function(t){return p().createElement(p().Fragment,null,p().createElement("h3",null,t.charAt(0).toUpperCase()+t.slice(1)," (",e.props.simpleViewAttributeResult[t].length,"):"),e.props.simpleViewAttributeResult[t].map((function(e){return"".concat(e,", ")})))})))),p().createElement("div",{id:"simple-view-attribute-result-grid-footer",className:"simple-view-panel-footer"},p().createElement("button",{type:"button",className:"swamm-button",style:{backgroundColor:"darkred"},onClick:function(){e.props.setVisibleSimpleViewAttributeResult(!1)}},"Close")))}}],r&&oe(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(p().Component);ue(se,"propTypes",{setVisibleSimpleViewAttributeResult:ce.func,projectId:ce.number,simpleViewAttributeResult:ce.object}),ue(se,"defaultProps",{});var pe=(0,f.connect)((function(e){var t,r,n,o;return{projectId:null==e||null===(t=e.simpleView)||void 0===t||null===(r=t.config)||void 0===r?void 0:r.project_id,simpleViewAttributeResult:(null==e||null===(n=e.simpleView)||void 0===n?void 0:n.simpleViewAttributeResult)||{},simpleViewImporterSessionId:null==e||null===(o=e.simpleView)||void 0===o?void 0:o.simpleViewImporterSessionId}}),(function(e){return{setVisibleSimpleViewAttributeResult:function(t){return e((0,o.setVisibleSimpleViewAttributeResult)(t))}}}))(se);function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function de(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ve(n.key),n)}}function me(e,t){return me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},me(e,t)}function be(e){return be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},be(e)}function ye(e,t,r){return(t=ve(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ve(e){var t=function(e,t){if("object"!=fe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=fe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==fe(t)?t:String(t)}var he=r(675263),ge=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&me(e,t)}(u,e);var t,r,n,o,l=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=be(n);if(o){var r=be(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===fe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),l.call(this,e)}return t=u,(r=[{key:"render",value:function(){var e=this;return p().createElement("div",{id:"simple-view-container"},p().createElement("ul",{className:"menu-groups"},p().createElement("button",{key:"basemaps",className:"simple-view-menu-button",style:{left:20},onClick:function(){var t;e.props.setOpenMenuGroupId(null===(t=e.props.baseMapMenuGroup)||void 0===t?void 0:t.id)}},"BaseMaps"),this.props.menuGroups&&this.props.menuGroups.length?this.props.menuGroups.map((function(t,r){return p().createElement("button",{id:"simpleViewContainer-mapped-button-".concat(null==t?void 0:t.name,"-").concat(null==t?void 0:t.title),key:"simpleViewContainer-mapped-button-".concat(null==t?void 0:t.name,"-").concat(null==t?void 0:t.title),className:"simple-view-menu-button",style:{left:100*(r+e.props.menuSpaces+1)+20},onClick:function(){e.props.setOpenMenuGroupId(null==t?void 0:t.id),i.Aw.trackEvent("component_setOpenMenuGroupId","action_".concat(null==t?void 0:t.id),"name_".concat(null==t?void 0:t.id))}},"Default"===(null==t?void 0:t.title)?null==t?void 0:t.name:null==t?void 0:t.title)})):null),function(t){switch(null===(t=e.props)||void 0===t?void 0:t.openMenuGroupId){case null:case void 0:return null;default:return p().createElement("div",{className:"simple-view-panel"},p().createElement(M,null))}}(),p().createElement(T,null),this.props.visibleIntroduction?p().createElement(X,null):null,this.props.visibleSimpleViewAttributeForm?p().createElement(re,null):null,this.props.visibleSimpleViewAttributeResult?p().createElement(pe,null):null)}}])&&de(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(p().Component);ye(ge,"propTypes",{setOpenMenuGroupId:he.func,menuGroups:he.array,baseMapMenuGroup:he.object,openMenuGroupId:he.string,visibleIntroduction:he.bool,visibleSimpleViewAttributeForm:he.bool,visibleSimpleViewAttributeResult:he.bool,setVisibleIntroduction:he.func,menuSpaces:he.number}),ye(ge,"defaultProps",{visibleIntroduction:!0});const we=(0,f.connect)((function(e){var t,r,n,o,i,l,u,a,c,s,p,f,d=(null==e||null===(t=e.simpleView)||void 0===t||null===(r=t.config)||void 0===r?void 0:r.customMenus)||[],m=(null==e||null===(n=e.simpleView)||void 0===n||null===(o=n.config)||void 0===o?void 0:o.menuSpaces)||0;return null!=e&&null!==(i=e.anuga)&&void 0!==i&&null!==(l=i.projectData)&&void 0!==l&&l.id&&(d=["Input Data","Results"],m=4),{menuSpaces:m,menuGroups:null==e||null===(u=e.layers)||void 0===u||null===(a=u.groups)||void 0===a?void 0:a.filter((function(e){return!(d.includes(e.name)||d.includes(e.title))})),baseMapMenuGroup:{id:"basemaps",title:"Base Maps",name:"basemaps"},openMenuGroupId:null==e||null===(c=e.simpleView)||void 0===c?void 0:c.openMenuGroupId,visibleIntroduction:null==e||null===(s=e.simpleView)||void 0===s?void 0:s.visibleIntroduction,visibleSimpleViewAttributeForm:null==e||null===(p=e.simpleView)||void 0===p?void 0:p.visibleSimpleViewAttributeForm,visibleSimpleViewAttributeResult:null==e||null===(f=e.simpleView)||void 0===f?void 0:f.visibleSimpleViewAttributeResult}}),(function(e){return{setOpenMenuGroupId:function(t){return e((0,o.setOpenMenuGroupId)(t))},setVisibleIntroduction:function(t){return e((0,o.setVisibleIntroduction)(t))}}}))(ge);var Ee=r(49977),Se=r.n(Ee),Oe=r(433528),_e=r(197395),Te=r(580416),Ae=r(375875),Ve=r.n(Ae);const je=(0,n.rx)("SimpleView",{component:we,reducers:{simpleView:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case o.SET_PROCESSING_SV_ATTRIBUTE_FORM:return a(a({},t),{},{processingSimpleViewAttributeForm:r.processing});case o.SET_SV_CONFIG:return a(a({},t),{},{config:r.config});case o.SET_OPEN_MENU_GROUP_ID:return t.openMenuGroupId===r.openMenuGroupId?a(a({},t),{},{openMenuGroupId:null}):a(a({},t),{},{openMenuGroupId:r.openMenuGroupId});case o.SET_VISIBLE_LEGEND_PANEL:return a(a({},t),{},{visibleLegendPanel:r.visible});case o.SET_VISIBLE_INTRODUCTION:return a(a({},t),{},{visibleIntroduction:r.visible});case o.SET_VISIBLE_SV_ATTRIBUTE_FORM:return a(a({},t),{},{visibleSimpleViewAttributeForm:r.visible});case o.SET_VISIBLE_SV_ATTRIBUTE_RESULT:return a(a({},t),{},{visibleSimpleViewAttributeResult:r.visible});case o.SET_SV_ATTRIBUTE_RESULT:return a(a({},t),{},{simpleViewAttributeResult:r.data});case o.CREATE_SV_ATTRIBUTE_FORM:return a(a({},t),{},{simpleViewAttributeForm:r.form,simpleViewImporterSessionId:r.simpleViewImporterSessionId,submitUrl:r.submitUrl,visibleSimpleViewAttributeForm:!0});case o.UPDATE_SV_ATTRIBUTE_FORM:console.log("UPDATE_SV_ATTRIBUTE_FORM action.kv",r.kv);var n=r.kv.override_used;delete r.kv.override_used;var i=Object.keys(r.kv)[0],l=r.kv[i];console.log("UPDATE_SV_ATTRIBUTE_FORM newKey",i),console.log("UPDATE_SV_ATTRIBUTE_FORM newValue",l);var u=a({},t.simpleViewAttributeForm[i]);console.log("UPDATE_SV_ATTRIBUTE_FORM existingAttributeValue",u);var s=a(a({},u),{},{value:l,override_used:n});console.log("UPDATE_SV_ATTRIBUTE_FORM updatedFormValue",s);var p=a(a({},t.simpleViewAttributeForm),{},c({},i,s));return console.log("UPDATE_SV_ATTRIBUTE_FORM updatedSimpleViewAttributeForm",p),a(a({},t),{},{simpleViewAttributeForm:p});case o.SUBMIT_SV_ATTRIBUTE_FORM_SUCCESS:return a(a({},t),{},{simpleViewImporterSessionId:null==r||null===(e=r.data)||void 0===e?void 0:e.importer_session_id});case o.SET_VISIBLE_UPLOADER_PANEL:return a(a({},t),{},{visibleUploaderPanel:r.visible,importerConfigKey:r.importerConfigKey,importerTargetObjectId:r.importerTargetObjectId});case o.UPDATE_UPLOAD_STATUS:return a(a({},t),{},{uploadStatus:r.status});case o.SV_SELECT_LAYER:return a(a({},t),{},{selectedLayer:r.layer});default:return t}}},epics:{beginEditLayerEpic:function(e){return e.ofType(Oe.Jb).concatMap((function(){return Se().Observable.of((0,Oe.lg)())}))},updateDatasetTitleEpic:function(e){return e.ofType(o.UPDATE_DATASET_TITLE).switchMap((function(e){return Se().Observable.from(Ve().get("/api/v2/datasets?search=".concat(e.datasetName.split("geonode:")[1],"&search_fields=name"))).concatMap((function(t){var r,n,o;return Se().Observable.from(Ve().patch("/api/v2/datasets/".concat(null==t||null===(r=t.data)||void 0===r||null===(n=r.datasets)||void 0===n||null===(o=n[0])||void 0===o?void 0:o.pk,"/"),{title:e.newTitle}))})).concatMap((function(){return Se().Observable.of((0,o.updateDatasetTitleSuccess)())}))}))},svDownloadLayerEpic:function(e){return e.ofType(o.SV_DOWNLOAD_LAYER).concatMap((function(e){var t;return Se().Observable.concat(Se().Observable.of((0,Te.UG)(null==e||null===(t=e.layer)||void 0===t?void 0:t.id,"layer")),Se().Observable.of((0,Te.LR)(null==e?void 0:e.layer)))}))},submitAttributeFormEpic:function(e,t){return e.ofType(o.SUBMIT_SV_ATTRIBUTE_FORM).switchMap((function(e){var r,n;return Se().Observable.from(Ve().post(null===(r=t.getState())||void 0===r||null===(n=r.simpleView)||void 0===n?void 0:n.submitUrl,{form:null==e?void 0:e.form,project_id:null==e?void 0:e.projectId,importer_session_id:null==e?void 0:e.simpleViewImporterSessionId}).then((function(e){var t;return console.log("SUBMIT_SV_ATTRIBUTE_FORM response:",e),null!==(t=e.data)&&void 0!==t&&t.submitUrl?(0,o.createSimpleViewAttributeForm)(e.data):(0,o.submitSimpleViewAttributeFormSuccess)(e.data)})))}))},submitSimpleViewAttributeFormSuccessEpic:function(e){return e.ofType(o.SUBMIT_SV_ATTRIBUTE_FORM_SUCCESS).concatMap((function(e){return Se().Observable.of((0,o.setVisibleSimpleViewAttributeForm)(!1),(0,o.setVisibleUploaderPanel)(!1),(0,o.setProcessingSimpleViewAttributeForm)(!1),(0,o.setVisibleSimpleViewAttributeResult)(!0),(0,o.setSimpleViewAttributeResult)(e.data),(0,_e.show)({message:"Import successful",title:"Features added",uid:1e3,position:"tc"}))}))}}})}}]);