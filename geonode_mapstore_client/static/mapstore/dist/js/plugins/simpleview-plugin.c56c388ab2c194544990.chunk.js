(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[16398],{597222:(e,t,r)=>{"use strict";r.d(t,{Vc:()=>o,qj:()=>i,bj:()=>l,p7:()=>u,Av:()=>a,M8:()=>c,wn:()=>s,gs:()=>p,NN:()=>f,C2:()=>d,O7:()=>m,oQ:()=>b,dX:()=>v,al:()=>y,Gh:()=>w,x2:()=>h,Y7:()=>g,b4:()=>E,GI:()=>S,KP:()=>_,dS:()=>O,Zw:()=>T,l4:()=>A,fZ:()=>V,Z:()=>j,a:()=>P,WN:()=>R,k9:()=>I,yo:()=>C,kE:()=>F,kV:()=>k,v2:()=>M,_q:()=>x,tt:()=>N,Jc:()=>L,w4:()=>D,QJ:()=>U,KG:()=>B,o$:()=>G,TS:()=>H,Tw:()=>X,I3:()=>Z});var n=r(197395),o="SEARCH:SEARCH_WITH_FILTER",i="SEARCH:SCHEDULE_SEARCH_WITH_FILTER",l="TEXT_SEARCH_STARTED",u="TEXT_SEARCH_RESULTS_LOADED",a="TEXT_SEARCH_RESULTS_PURGE",c="TEXT_SEARCH_RESET",s="TEXT_SEARCH_ADD_MARKER",p="TEXT_SEARCH_TEXT_CHANGE",f="TEXT_SEARCH_LOADING",d="TEXT_SEARCH_NESTED_SERVICE_SELECTED",m="TEXT_SEARCH_ERROR",b="TEXT_SEARCH_CANCEL_ITEM",v="TEXT_SEARCH_ITEM_SELECTED",y="TEXT_SEARCH_SHOW_GFI",w="TEXT_SEARCH_SET_HIGHLIGHTED_FEATURE",h="UPDATE_RESULTS_STYLE",g="CHANGE_SEARCH_TOOL",E="SEARCH:ZOOM_ADD_POINT",S="SEARCH:CHANGE_FORMAT",_="SEARCH:CHANGE_COORD",O="SEARCH:HIDE_MARKER";function T(e){return{type:S,format:e}}function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,r=e.cql_filter;return{type:o,layer:t,cql_filter:r}}function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,r=e.cql_filter;return{type:i,layer:t,cql_filter:r}}function j(e,t,r){return{type:E,pos:e,zoom:t,crs:r}}function P(e){return{type:g,activeSearchTool:e}}function R(e){return{type:u,results:e,append:arguments.length>1&&void 0!==arguments[1]&&arguments[1],services:arguments.length>2?arguments[2]:void 0}}function I(e){return{type:p,searchText:e}}function C(e){return{type:f,loading:e}}function F(e){return{type:m,error:e}}function k(){return{type:a}}function M(){return{type:c}}function x(e,t){return{type:s,markerPosition:e,markerLabel:t}}function N(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).services;return{type:l,searchText:e,services:void 0===t?null:t,maxResults:arguments.length>2&&void 0!==arguments[2]?arguments[2]:15}}function L(e,t,r,n){return{type:v,item:e,mapConfig:t,service:r,resultsStyle:n}}var D=function(e){return{type:y,item:e}};function U(e,t,r){return{type:d,searchText:r,services:e,items:t}}function B(e){return{type:b,item:e}}function G(e){return{type:h,style:e}}function H(e,t){return{type:_,coord:e,val:t}}function X(){return(0,n.error)({title:"Error",position:"tc",message:"search.errors.nonQueriableLayers",autoDismiss:10})}function Z(){return(0,n.error)({title:"Error",position:"tc",message:"search.errors.serverError",autoDismiss:10})}},38560:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(480681),o=r(124852),i=r.n(o),l=r(294184),u=r.n(l),a=["disabled","className","onClick"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(null,arguments)}var s=r(815135);const p=(f=n.zx,i().forwardRef((function(e,t){var r=e.disabled,n=e.className,o=e.onClick,l=void 0===o?function(){}:o,s=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,a);return i().createElement(f,c({ref:t,className:r?u()("disabled",n):n,onClick:function(){r||l.apply(void 0,arguments)}},s),s.children)})));var f;(0,s.Z)(n.zx)},843614:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(727418),o=r.n(n),i=r(480681),l=r(461365);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function c(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}function s(e,t,r){return t=f(t),function(e,t){if(t&&("object"==u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,p()?Reflect.construct(t,r||[],f(e).constructor):t.apply(e,r))}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(p=function(){return!!e})()}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),r=t,n=[{key:"handleDialogClick",value:function(e){e.target===e.currentTarget&&this.props.onHide(e)}}],n&&a(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i.u_);const b=o()((0,l.Z)(m),{Body:i.u_.Body,Dialog:i.u_.Dialog,Footer:i.u_.Footer,Header:i.u_.Header,Title:i.u_.Title})},160025:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>De});var n=r(322843),o=r(351288),i=r(357218);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=r(124852),p=r.n(s),f=r(171703),d=(r(472619),r(597222));function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function v(e,t,r){return t=w(t),function(e,t){if(t&&("object"==m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,y()?Reflect.construct(t,r||[],w(e).constructor):t.apply(e,r))}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y=function(){return!!e})()}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function g(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==m(t)?t:t+""}var E,S,_,O=r(45697),T=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=v(this,t,[e])).state={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){this.props.searchBarVisible&&this.props.changeActiveSearchTool("coordinatesSearch")}},{key:"render",value:function(){var e=this;return this.props.visibleLegendPanel?p().createElement("div",{className:"simple-view-panel "+(this.props.searchBarVisible?"legend-panel-with-search":"legend-panel")},p().createElement("div",{className:"row h4 legend-heading"},"Legend",p().createElement("span",{className:"btn glyphicon glyphicon-remove legend-close",onClick:function(){return e.props.setVisibleLegendPanel(!1)}})),this.props.visibleLayers.map((function(t){var r,n,o=null===(r=e.props.legendOverrides)||void 0===r||null===(n=r.filter((function(e){return(null==e?void 0:e.layerName)===t.name})))||void 0===n?void 0:n[0];return"wms"!==t.type?null:o?p().createElement("div",{key:t.id,className:"row legend-row"},p().createElement("div",{className:"col-sm-7 legend-background"},p().createElement("span",{className:"legend-image"},p().createElement("img",{src:null==o?void 0:o.staticImageFilePath}))),p().createElement("div",{className:"col-sm-5 legend-text-label"},p().createElement("span",{className:"h5"},t.title))):p().createElement("div",{key:t.id,className:"row legend-row"},p().createElement("div",{className:"col-sm-7 legend-background"},p().createElement("span",{className:"legend-image"},"Legend Here")),p().createElement("div",{className:"col-sm-5 legend-text-label"},p().createElement("span",{className:"h5"},t.title)))}))):p().createElement("div",null,p().createElement("button",{className:"simple-view-menu-button "+(this.props.searchBarVisible?"legend-button-with-search":"legend-button"),onClick:function(){return e.props.setVisibleLegendPanel(!0)}},"Show Legend"))}}])&&b(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(p().Component);E=T,S="propTypes",_={setVisibleLegendPanel:O.func,visibleLegendPanel:O.bool,visibleLayers:O.array,searchBarVisible:O.bool,changeActiveSearchTool:O.func,legendOverrides:O.array},(S=g(S))in E?Object.defineProperty(E,S,{value:_,enumerable:!0,configurable:!0,writable:!0}):E[S]=_;const A=(0,f.connect)((function(e){var t,r,n,o,i,l,u;return{visibleLayers:null==e||null===(t=e.layers)||void 0===t?void 0:t.flat.filter((function(e){return!0===(null==e?void 0:e.visibility)&&"background"!==(null==e?void 0:e.group)})),visibleLegendPanel:null==e||null===(r=e.simpleView)||void 0===r?void 0:r.visibleLegendPanel,legendOverrides:(null==e||null===(n=e.simpleView)||void 0===n||null===(o=n.config)||void 0===o?void 0:o.legendOverrides)||[],searchBarVisible:!(null==e||null===(i=e.localConfig)||void 0===i||null===(l=i.plugins)||void 0===l||null===(u=l.map_view)||void 0===u||!u.find((function(e){return"Search"===e.name})))}}),(function(e){return{setVisibleLegendPanel:function(t){return e((0,o.setVisibleLegendPanel)(t))},changeActiveSearchTool:function(t){return e((0,d.a)(t))}}}))(T);var V=r(388380);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function P(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return R(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,x(n.key),n)}}function C(e,t,r){return t=k(t),function(e,t){if(t&&("object"==j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,F()?Reflect.construct(t,r||[],k(e).constructor):t.apply(e,r))}function F(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(F=function(){return!!e})()}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function M(e,t){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},M(e,t)}function x(e){var t=function(e,t){if("object"!=j(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==j(t)?t:t+""}var N=r(45697),L=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),C(this,t,[e])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M(e,t)}(t,e),function(e,t,r){return t&&I(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"render",value:function(){var e,t=this;return"basemaps"===this.props.openMenuGroupId?p().createElement("div",{className:"menu-rows-container"},this.props.baseMapLayers.map((function(e){return p().createElement(V.j,{layer:e})}))):0===(null===(e=this.props.layerList)||void 0===e?void 0:e.length)?p().createElement("div",{className:"menu-rows-container"},p().createElement(V.j,{layer:null})):p().createElement("div",{className:"menu-rows-container"},this.props.layerSubheadings.map((function(e){var r;return p().createElement(p().Fragment,null,p().createElement("h5",{style:{textAlign:"left"}},e),null===(r=t.props.layerList)||void 0===r?void 0:r.filter((function(t){return t.group.split(".")[1]===e})).map((function(e){return p().createElement(V.j,{layer:e})})))})))}}])}(p().Component);!function(e,t,r){(t=x(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(L,"propTypes",{menuGroups:N.array,flatLayers:N.array,layerList:N.array,layerSubheadings:N.array,menuDatasets:N.array,openMenuGroupId:N.string,baseMapLayers:N.array});var D=(0,f.connect)((function(e){var t,r,n,o,i,l,u,a;return{openMenuGroupId:null==e||null===(t=e.simpleView)||void 0===t?void 0:t.openMenuGroupId,menuGroups:null==e||null===(r=e.layers)||void 0===r?void 0:r.groups,flatLayers:null==e||null===(n=e.layers)||void 0===n?void 0:n.flat,layerList:null==e||null===(o=e.layers)||void 0===o||null===(i=o.flat)||void 0===i?void 0:i.filter((function(t){var r,n;return(null==t||null===(r=t.group)||void 0===r?void 0:r.split(".")[0])===(null==e||null===(n=e.simpleView)||void 0===n?void 0:n.openMenuGroupId)})),layerSubheadings:P(new Set(null==e||null===(l=e.layers)||void 0===l||null===(u=l.flat)||void 0===u?void 0:u.filter((function(t){var r,n;return(null==t||null===(r=t.group)||void 0===r?void 0:r.split(".")[0])===(null==e||null===(n=e.simpleView)||void 0===n?void 0:n.openMenuGroupId)})).map((function(e){return e.group.split(".")[1]})))),baseMapLayers:null==e||null===(a=e.layers)||void 0===a?void 0:a.flat.filter((function(e){return"background"===(null==e?void 0:e.group)}))}}),(function(e){return{}}))(L),U=r(843614),B=r(38560);function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}function H(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,W(n.key),n)}}function X(e,t,r){return t=K(t),function(e,t){if(t&&("object"==G(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Z()?Reflect.construct(t,r||[],K(e).constructor):t.apply(e,r))}function Z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Z=function(){return!!e})()}function K(e){return K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},K(e)}function q(e,t){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},q(e,t)}function W(e){var t=function(e,t){if("object"!=G(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=G(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==G(t)?t:t+""}var J=r(45697),Y=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=X(this,t,[e])).state={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q(e,t)}(t,e),function(e,t,r){return t&&H(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return p().createElement("div",{className:"introduction-container"},p().createElement(U.Z,{show:!0,onHide:function(){e.props.setVisibleIntroduction(!1),i.Aw.trackEvent("button","click","close_introduction_cross")}},p().createElement(U.Z.Header,{closeButton:!0},p().createElement(U.Z.Title,{id:"contained-modal-title-lg"},"Welcome to Hydrata")),p().createElement(U.Z.Body,null,p().createElement("p",{style:{fontSize:"small"}},'The application is provided "as-is", without warranty of any kind, express or implied, including but not limited to the warranties of merchantability, firness for a particular pupose and noninfringement. In no event shall the authors or copyright holders be liable for any claim, damages or other liability, whether in an action of contract, tort or otherwise, arising from, out of or in connection with the software or the use or other dealings in the software.'),p().createElement(B.Z,{onClick:function(){e.props.setVisibleIntroduction(!1),i.Aw.trackEvent("button","click","close_introduction_accept")},bsStyle:"primary",style:{marginLeft:"45%"}},"Accept"))))}}])}(p().Component);!function(e,t,r){(t=W(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(Y,"propTypes",{setVisibleIntroduction:J.func});const z=(0,f.connect)((function(){return{}}),(function(e){return{setVisibleIntroduction:function(t){return e((0,o.setVisibleIntroduction)(t))}}}))(Y);function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function $(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ie(n.key),n)}}function ee(e,t,r){return t=re(t),function(e,t){if(t&&("object"==Q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,te()?Reflect.construct(t,r||[],re(e).constructor):t.apply(e,r))}function te(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(te=function(){return!!e})()}function re(e){return re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},re(e)}function ne(e,t){return ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ne(e,t)}function oe(e,t,r){return(t=ie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ie(e){var t=function(e,t){if("object"!=Q(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Q(t)?t:t+""}var le=r(45697),ue=r(472986),ae=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=ee(this,t,[e])).handleChange=r.handleChange.bind(r),r.handleOverrideChange=r.handleOverrideChange.bind(r),r.handleMultiSelectOverrideChange=r.handleMultiSelectOverrideChange.bind(r),r.state={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ne(e,t)}(t,e),function(e,t,r){return t&&$(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"renderOverride",value:function(e,t){var r,n,o,i,l,u;switch(e){case"datepicker":return p().createElement("input",{style:{color:"white",borderRadius:"4px",textAlign:"right"},name:t,value:null===(r=this.props.simpleViewAttributeForm)||void 0===r||null===(n=r[t])||void 0===n?void 0:n.value,onChange:this.handleOverrideChange,type:"date"});case"float":return p().createElement("input",{style:{color:"white",borderRadius:"4px",textAlign:"right"},name:t,value:null===(o=this.props.simpleViewAttributeForm)||void 0===o||null===(i=o[t])||void 0===i?void 0:i.value,onChange:this.handleOverrideChange,type:"number"});case"text":return p().createElement("input",{style:{color:"white",borderRadius:"4px",textAlign:"right"},name:t,value:null===(l=this.props.simpleViewAttributeForm)||void 0===l||null===(u=l[t])||void 0===u?void 0:u.value,onChange:this.handleOverrideChange,type:"text"});case"multi-select":return p().createElement("div",null);default:return p().createElement("div",null,e," widget not found")}}},{key:"render",value:function(){var e,t,r,n,o=this;return p().createElement("div",{id:"simple-view-attribute-form-panel",className:"simple-view-panel menu-rows-container"},p().createElement("div",{id:"simple-view-attribute-form-header"},p().createElement("div",{className:"simple-view-panel-header"},"Import external data - attribute mapping"),p().createElement("span",{className:"btn glyphicon glyphicon-remove legend-close",onClick:function(){o.props.setVisibleSimpleViewAttributeForm(!1)}})),p().createElement("div",{className:"simple-view-panel-body"},p().createElement("div",{className:"simple-view-panel-col-one",style:{width:"800px",marginLeft:"auto",marginTop:"15px",marginRight:"auto"}},p().createElement("div",{style:{display:"flex",marginBottom:"5px"}},p().createElement("h2",{style:{width:"150px",textAlign:"center"}},null===(e=this.props.headings)||void 0===e?void 0:e[0]),p().createElement("h2",{style:{width:"450px",textAlign:"center"}},null===(t=this.props.headings)||void 0===t?void 0:t[1]),p().createElement("h2",{style:{width:"250px",textAlign:"center"}},null===(r=this.props.headings)||void 0===r?void 0:r[2]),p().createElement("h2",{style:{width:"450px",textAlign:"center"}},null===(n=this.props.headings)||void 0===n?void 0:n[3])),Object.keys(this.props.simpleViewAttributeForm).map((function(e){var t,r,n,i,l=o.props.simpleViewAttributeForm[e];return null!=l&&l.hidden?null:p().createElement("div",{style:{position:"relative",top:"".concat(14*(null==l?void 0:l.position),"px"),border:"solid 1px #ffffff96",borderRadius:"3px",padding:"5px",paddingBottom:"2px"}},p().createElement("div",{style:{display:"flex",marginBottom:"5px"}},p().createElement("div",{style:{width:"150px"}},null==l?void 0:l.datatype),p().createElement("div",{style:{width:"450px",color:"external_id"===e.toLowerCase()?"red":"white"}},e),p().createElement("select",{style:{height:"multi-select"===(null==l?void 0:l.override_widget)?"150px":null,width:"250px",color:"#2b5994",borderRadius:"4px"},name:e,multiple:"multi-select"===(null==l?void 0:l.override_widget),value:null===(t=o.props.simpleViewAttributeForm)||void 0===t||null===(r=t[e])||void 0===r?void 0:r.value,defaultValue:"",onChange:"multi-select"===(null==l?void 0:l.override_widget)?o.handleMultiSelectOverrideChange:o.handleChange},null!=l&&l.override_allowed&&null!=l&&l.override_used?p().createElement(p().Fragment,null,p().createElement("option",{value:"---",selected:!0},"---"),null==l||null===(n=l.options)||void 0===n?void 0:n.map((function(e){return p().createElement("option",{value:e},e)}))):p().createElement(p().Fragment,null,p().createElement("option",{value:"",hidden:!0,selected:!0,disabled:!0},"---"),null==l||null===(i=l.options)||void 0===i?void 0:i.map((function(e){return p().createElement("option",{value:e},e)})))),p().createElement("div",{style:{marginLeft:"40px",width:"450px",textAlign:"center"}},null!=l&&l.override_allowed?o.renderOverride(null==l?void 0:l.override_widget,e):p().createElement("div",null))))})))),p().createElement("div",{id:"simple-view-attribute-form-grid-footer",className:"simple-view-panel-footer"},p().createElement("button",{type:"button",className:"swamm-button",style:{backgroundColor:"darkred"},onClick:function(){o.props.setVisibleSimpleViewAttributeForm(!1)}},"Cancel"),this.props.submitUrl.includes("importer-execute")?this.props.processingSimpleViewAttributeForm?p().createElement("button",{type:"button",className:"swamm-button",style:{backgroundColor:"darkgreen"}},p().createElement("span",null,p().createElement(ue,{color:"white",style:{display:"inline-block",marginTop:"2px",marginBottom:"2px"},spinnerName:"circle",noFadeIn:!0}))):p().createElement("button",{type:"button",className:"swamm-button",style:{backgroundColor:"darkgreen"},onClick:function(){o.props.submitSimpleViewAttributeForm(o.props.simpleViewAttributeForm,o.props.projectId,o.props.simpleViewImporterSessionId),o.props.setProcessingSimpleViewAttributeForm(!0)}},"Process"):p().createElement("button",{type:"button",className:"swamm-button",style:{backgroundColor:"darkgreen"},onClick:function(){o.props.submitSimpleViewAttributeForm(o.props.simpleViewAttributeForm,o.props.projectId,o.props.simpleViewImporterSessionId)}},"Next")))}},{key:"handleChange",value:function(e){var t,r=e.target.name,n=e.target.value,o=oe({},r,n);"number"===(null===(t=e.target)||void 0===t?void 0:t.type)&&(o=oe({},r,parseFloat(n))),o.override_used=!1,this.props.updateSimpleViewAttributeForm(o)}},{key:"handleOverrideChange",value:function(e){var t,r=e.target.name,n=e.target.value,o=oe({},r,n);"number"===(null===(t=e.target)||void 0===t?void 0:t.type)&&(o=oe({},r,parseFloat(n))),o.override_used=!0,this.props.updateSimpleViewAttributeForm(o)}},{key:"handleMultiSelectOverrideChange",value:function(e){var t,r,n=null===(t=e.target)||void 0===t?void 0:t.name,o=Array.from(e.target.selectedOptions,(function(e){return e.value})),i=oe({},n,o);"number"===(null===(r=e.target)||void 0===r?void 0:r.type)&&(i=oe({},n,parseFloat(o))),i.override_used=!0,this.props.updateSimpleViewAttributeForm(i)}}])}(p().Component);oe(ae,"propTypes",{setVisibleSimpleViewAttributeForm:le.func,updateSimpleViewAttributeForm:le.func,simpleViewAttributeForm:le.object,submitSimpleViewAttributeForm:le.func,setProcessingSimpleViewAttributeForm:le.func,processingSimpleViewAttributeForm:le.bool,projectId:le.number,submitUrl:le.string,simpleViewImporterSessionId:le.number,headings:le.array}),oe(ae,"defaultProps",{});var ce=(0,f.connect)((function(e){var t,r,n,o,i,l,u,a,c,s,p,f=null;return null!=e&&null!==(t=e.simpleView)&&void 0!==t&&t.simpleViewAttributeForm&&(f=(null===(a=JSON.parse(JSON.stringify(null==e||null===(c=e.simpleView)||void 0===c?void 0:c.simpleViewAttributeForm)))||void 0===a?void 0:a.headings)||["Type","Target Attribute","Uploaded Attribute","Attribute Override"],null==e||null===(s=e.simpleView)||void 0===s||null===(p=s.simpleViewAttributeForm)||void 0===p||delete p.headings),{projectId:null==e||null===(r=e.simpleView)||void 0===r||null===(n=r.config)||void 0===n?void 0:n.project_id,simpleViewAttributeForm:(null==e||null===(o=e.simpleView)||void 0===o?void 0:o.simpleViewAttributeForm)||{},simpleViewImporterSessionId:null==e||null===(i=e.simpleView)||void 0===i?void 0:i.simpleViewImporterSessionId,processingSimpleViewAttributeForm:null==e||null===(l=e.simpleView)||void 0===l?void 0:l.processingSimpleViewAttributeForm,submitUrl:(null==e||null===(u=e.simpleView)||void 0===u?void 0:u.submitUrl)||"",headings:f}}),(function(e){return{setVisibleSimpleViewAttributeForm:function(t){return e((0,o.setVisibleSimpleViewAttributeForm)(t))},setProcessingSimpleViewAttributeForm:function(t){return e((0,o.setProcessingSimpleViewAttributeForm)(t))},updateSimpleViewAttributeForm:function(t){return e((0,o.updateSimpleViewAttributeForm)(t))},submitSimpleViewAttributeForm:function(t,r,n){return e((0,o.submitSimpleViewAttributeForm)(t,r,n))}}}))(ae);function se(e){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function pe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ye(n.key),n)}}function fe(e,t,r){return t=me(t),function(e,t){if(t&&("object"==se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,de()?Reflect.construct(t,r||[],me(e).constructor):t.apply(e,r))}function de(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(de=function(){return!!e})()}function me(e){return me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},me(e)}function be(e,t){return be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},be(e,t)}function ve(e,t,r){return(t=ye(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ye(e){var t=function(e,t){if("object"!=se(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==se(t)?t:t+""}var we=r(45697),he=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=fe(this,t,[e])).state={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&be(e,t)}(t,e),function(e,t,r){return t&&pe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this;return p().createElement("div",{id:"simple-view-attribute-result-panel",className:"simple-view-panel menu-rows-container",style:{backgroundColor:"rgba(0, 60, 136)",textAlign:"left"}},p().createElement("div",{id:"simple-view-attribute-form-header"},p().createElement("div",{className:"simple-view-panel-header"},'Import Result (showing "external_id" fields)'),p().createElement("span",{className:"btn glyphicon glyphicon-remove legend-close",onClick:function(){e.props.setVisibleSimpleViewAttributeResult(!1)}})),p().createElement("div",{className:"simple-view-panel-body"},p().createElement("div",{className:"simple-view-panel-col-one",style:{width:"800px",minHeight:"300px",marginLeft:"auto",marginTop:"15px",marginRight:"auto",marginBottom:"50px",overflowY:"scroll"}},Object.keys(this.props.simpleViewAttributeResult).map((function(t){return p().createElement(p().Fragment,null,p().createElement("h3",null,t.charAt(0).toUpperCase()+t.slice(1)," (",e.props.simpleViewAttributeResult[t].length,"):"),e.props.simpleViewAttributeResult[t].map((function(e){return"".concat(e,", ")})))})))),p().createElement("div",{id:"simple-view-attribute-result-grid-footer",className:"simple-view-panel-footer"},p().createElement("button",{type:"button",className:"swamm-button",style:{backgroundColor:"darkred"},onClick:function(){e.props.setVisibleSimpleViewAttributeResult(!1)}},"Close")))}}])}(p().Component);ve(he,"propTypes",{setVisibleSimpleViewAttributeResult:we.func,projectId:we.number,simpleViewAttributeResult:we.object}),ve(he,"defaultProps",{});var ge=(0,f.connect)((function(e){var t,r,n,o;return{projectId:null==e||null===(t=e.simpleView)||void 0===t||null===(r=t.config)||void 0===r?void 0:r.project_id,simpleViewAttributeResult:(null==e||null===(n=e.simpleView)||void 0===n?void 0:n.simpleViewAttributeResult)||{},simpleViewImporterSessionId:null==e||null===(o=e.simpleView)||void 0===o?void 0:o.simpleViewImporterSessionId}}),(function(e){return{setVisibleSimpleViewAttributeResult:function(t){return e((0,o.setVisibleSimpleViewAttributeResult)(t))}}}))(he);function Ee(e){return Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ee(e)}function Se(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,je(n.key),n)}}function _e(e,t,r){return t=Te(t),function(e,t){if(t&&("object"==Ee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Oe()?Reflect.construct(t,r||[],Te(e).constructor):t.apply(e,r))}function Oe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Oe=function(){return!!e})()}function Te(e){return Te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Te(e)}function Ae(e,t){return Ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ae(e,t)}function Ve(e,t,r){return(t=je(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function je(e){var t=function(e,t){if("object"!=Ee(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ee(t)?t:t+""}var Pe=r(45697),Re=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),_e(this,t,[e])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ae(e,t)}(t,e),function(e,t,r){return t&&Se(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"render",value:function(){var e=this;return p().createElement("div",{id:"simple-view-container"},p().createElement("ul",{className:"menu-groups"},p().createElement("button",{key:"basemaps",className:"simple-view-menu-button",style:{left:20},onClick:function(){var t;e.props.setOpenMenuGroupId(null===(t=e.props.baseMapMenuGroup)||void 0===t?void 0:t.id)}},"BaseMaps"),this.props.menuGroups&&this.props.menuGroups.length?this.props.menuGroups.map((function(t,r){return p().createElement("button",{id:"simpleViewContainer-mapped-button-".concat(null==t?void 0:t.name,"-").concat(null==t?void 0:t.title),key:"simpleViewContainer-mapped-button-".concat(null==t?void 0:t.name,"-").concat(null==t?void 0:t.title),className:"simple-view-menu-button",style:{left:100*(r+e.props.menuSpaces+1)+20},onClick:function(){e.props.setOpenMenuGroupId(null==t?void 0:t.id),i.Aw.trackEvent("component_setOpenMenuGroupId","action_".concat(null==t?void 0:t.title),"name_".concat(null==t?void 0:t.title))}},"Default"===(null==t?void 0:t.title)?null==t?void 0:t.name:null==t?void 0:t.title)})):null),function(t){switch(null===(t=e.props)||void 0===t?void 0:t.openMenuGroupId){case null:case void 0:return null;default:return p().createElement("div",{className:"simple-view-panel"},p().createElement(D,null))}}(),p().createElement(A,null),this.props.visibleIntroduction?p().createElement(z,null):null,this.props.visibleSimpleViewAttributeForm?p().createElement(ce,null):null,this.props.visibleSimpleViewAttributeResult?p().createElement(ge,null):null)}}])}(p().Component);Ve(Re,"propTypes",{setOpenMenuGroupId:Pe.func,menuGroups:Pe.array,baseMapMenuGroup:Pe.object,openMenuGroupId:Pe.string,visibleIntroduction:Pe.bool,visibleSimpleViewAttributeForm:Pe.bool,visibleSimpleViewAttributeResult:Pe.bool,setVisibleIntroduction:Pe.func,menuSpaces:Pe.number}),Ve(Re,"defaultProps",{visibleIntroduction:!0});const Ie=(0,f.connect)((function(e){var t,r,n,o,i,l,u,a,c,s,p,f,d=(null==e||null===(t=e.simpleView)||void 0===t||null===(r=t.config)||void 0===r?void 0:r.customMenus)||[],m=(null==e||null===(n=e.simpleView)||void 0===n||null===(o=n.config)||void 0===o?void 0:o.menuSpaces)||0;return null!=e&&null!==(i=e.anuga)&&void 0!==i&&null!==(l=i.projectData)&&void 0!==l&&l.id&&(d=["Input Data","Results"],m=4),{menuSpaces:m,menuGroups:null==e||null===(u=e.layers)||void 0===u||null===(a=u.groups)||void 0===a?void 0:a.filter((function(e){return!(d.includes(e.name)||d.includes(e.title))})),baseMapMenuGroup:{id:"basemaps",title:"Base Maps",name:"basemaps"},openMenuGroupId:null==e||null===(c=e.simpleView)||void 0===c?void 0:c.openMenuGroupId,visibleIntroduction:null==e||null===(s=e.simpleView)||void 0===s?void 0:s.visibleIntroduction,visibleSimpleViewAttributeForm:null==e||null===(p=e.simpleView)||void 0===p?void 0:p.visibleSimpleViewAttributeForm,visibleSimpleViewAttributeResult:null==e||null===(f=e.simpleView)||void 0===f?void 0:f.visibleSimpleViewAttributeResult}}),(function(e){return{setOpenMenuGroupId:function(t){return e((0,o.setOpenMenuGroupId)(t))},setVisibleIntroduction:function(t){return e((0,o.setVisibleIntroduction)(t))}}}))(Re);var Ce=r(49977),Fe=r.n(Ce),ke=r(433528),Me=r(197395),xe=r(580416),Ne=r(375875),Le=r.n(Ne);const De=(0,n.rx)("SimpleView",{component:Ie,reducers:{simpleView:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case o.SET_PROCESSING_SV_ATTRIBUTE_FORM:return a(a({},t),{},{processingSimpleViewAttributeForm:r.processing});case o.SET_SV_CONFIG:return a(a({},t),{},{config:r.config});case o.SET_OPEN_MENU_GROUP_ID:return t.openMenuGroupId===r.openMenuGroupId?a(a({},t),{},{openMenuGroupId:null}):a(a({},t),{},{openMenuGroupId:r.openMenuGroupId});case o.SET_VISIBLE_LEGEND_PANEL:return a(a({},t),{},{visibleLegendPanel:r.visible});case o.SET_VISIBLE_INTRODUCTION:return a(a({},t),{},{visibleIntroduction:r.visible});case o.SET_VISIBLE_SV_ATTRIBUTE_FORM:return a(a({},t),{},{visibleSimpleViewAttributeForm:r.visible});case o.SET_VISIBLE_SV_ATTRIBUTE_RESULT:return a(a({},t),{},{visibleSimpleViewAttributeResult:r.visible});case o.SET_SV_ATTRIBUTE_RESULT:return a(a({},t),{},{simpleViewAttributeResult:r.data});case o.CREATE_SV_ATTRIBUTE_FORM:return a(a({},t),{},{simpleViewAttributeForm:r.form,simpleViewImporterSessionId:r.simpleViewImporterSessionId,submitUrl:r.submitUrl,visibleSimpleViewAttributeForm:!0});case o.UPDATE_SV_ATTRIBUTE_FORM:console.log("UPDATE_SV_ATTRIBUTE_FORM action.kv",r.kv);var n=r.kv.override_used;delete r.kv.override_used;var i=Object.keys(r.kv)[0],l=r.kv[i];console.log("UPDATE_SV_ATTRIBUTE_FORM newKey",i),console.log("UPDATE_SV_ATTRIBUTE_FORM newValue",l);var u=a({},t.simpleViewAttributeForm[i]);console.log("UPDATE_SV_ATTRIBUTE_FORM existingAttributeValue",u);var s=a(a({},u),{},{value:l,override_used:n});console.log("UPDATE_SV_ATTRIBUTE_FORM updatedFormValue",s);var p=a(a({},t.simpleViewAttributeForm),{},c({},i,s));return console.log("UPDATE_SV_ATTRIBUTE_FORM updatedSimpleViewAttributeForm",p),a(a({},t),{},{simpleViewAttributeForm:p});case o.SUBMIT_SV_ATTRIBUTE_FORM_SUCCESS:return a(a({},t),{},{simpleViewImporterSessionId:null==r||null===(e=r.data)||void 0===e?void 0:e.importer_session_id});case o.SET_VISIBLE_UPLOADER_PANEL:return a(a({},t),{},{visibleUploaderPanel:r.visible,importerConfigKey:r.importerConfigKey,importerTargetObjectId:r.importerTargetObjectId});case o.UPDATE_UPLOAD_STATUS:return a(a({},t),{},{uploadStatus:r.status});case o.SV_SELECT_LAYER:return a(a({},t),{},{selectedLayer:r.layer});default:return t}}},epics:{beginEditLayerEpic:function(e){return e.ofType(ke.Jb).concatMap((function(){return Fe().Observable.of((0,ke.lg)())}))},updateDatasetTitleEpic:function(e){return e.ofType(o.UPDATE_DATASET_TITLE).switchMap((function(e){return Fe().Observable.from(Le().get("/api/v2/datasets?search=".concat(e.datasetName.split("geonode:")[1],"&search_fields=name"))).concatMap((function(t){var r,n,o;return Fe().Observable.from(Le().patch("/api/v2/datasets/".concat(null==t||null===(r=t.data)||void 0===r||null===(n=r.datasets)||void 0===n||null===(o=n[0])||void 0===o?void 0:o.pk,"/"),{title:e.newTitle}))})).concatMap((function(){return Fe().Observable.of((0,o.updateDatasetTitleSuccess)())}))}))},svDownloadLayerEpic:function(e){return e.ofType(o.SV_DOWNLOAD_LAYER).concatMap((function(e){var t;return Fe().Observable.concat(Fe().Observable.of((0,xe.UG)(null==e||null===(t=e.layer)||void 0===t?void 0:t.id,"layer")),Fe().Observable.of((0,xe.LR)(null==e?void 0:e.layer)))}))},submitAttributeFormEpic:function(e,t){return e.ofType(o.SUBMIT_SV_ATTRIBUTE_FORM).switchMap((function(e){var r,n;return Fe().Observable.from(Le().post(null===(r=t.getState())||void 0===r||null===(n=r.simpleView)||void 0===n?void 0:n.submitUrl,{form:null==e?void 0:e.form,project_id:null==e?void 0:e.projectId,importer_session_id:null==e?void 0:e.simpleViewImporterSessionId}).then((function(e){var t;return console.log("SUBMIT_SV_ATTRIBUTE_FORM response:",e),null!==(t=e.data)&&void 0!==t&&t.submitUrl?(0,o.createSimpleViewAttributeForm)(e.data):(0,o.submitSimpleViewAttributeFormSuccess)(e.data)})))}))},submitSimpleViewAttributeFormSuccessEpic:function(e){return e.ofType(o.SUBMIT_SV_ATTRIBUTE_FORM_SUCCESS).concatMap((function(e){return Fe().Observable.of((0,o.setVisibleSimpleViewAttributeForm)(!1),(0,o.setVisibleUploaderPanel)(!1),(0,o.setProcessingSimpleViewAttributeForm)(!1),(0,o.setVisibleSimpleViewAttributeResult)(!0),(0,o.setSimpleViewAttributeResult)(e.data),(0,Me.show)({message:"Import successful",title:"Features added",uid:1e3,position:"tc"}))}))}}})}}]);