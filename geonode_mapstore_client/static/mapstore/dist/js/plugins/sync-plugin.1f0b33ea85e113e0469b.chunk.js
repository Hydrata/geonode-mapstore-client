(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[67440,2095],{555927:(t,e,n)=>{"use strict";n.d(e,{BJ:()=>r,_y:()=>o,vk:()=>i,uI:()=>u,mg:()=>c,aR:()=>a,SW:()=>O,$l:()=>E,zX:()=>s,R4:()=>l,E9:()=>p,CP:()=>f,s6:()=>S,E5:()=>R,CF:()=>d,B_:()=>y,js:()=>A,TA:()=>D,Kv:()=>v,zV:()=>T,D_:()=>_,Nl:()=>G,G9:()=>g,gE:()=>m,pB:()=>b,GD:()=>h,sA:()=>Y,o2:()=>C,PC:()=>I,rR:()=>N,vM:()=>w,AN:()=>P,tH:()=>B,kk:()=>H,ak:()=>L,qY:()=>j});var r="DASHBOARD:SET_AVAILABLE",o="DASHBOARD:SET_EDITING",i="DASHBOARD:SHOW_CONNECTIONS",u="DASHBOARD:TRIGGER_SAVE_MODAL",c="DASHBOARD:TRIGGER_SAVE_AS_MODAL",a="DASHBOARD:SAVE_DASHBOARD",O="DASHBOARD:SAVE_ERROR",E="DASHBOARD:DASHBOARD_SAVED",s="DASHBOARD:LOAD_DASHBOARD",l="DASHBOARD:DASHBOARD_RESET",p="DASHBOARD:DASHBOARD_LOADED",f="DASHBOARD:DASHBOARD_LOADING",S="DASHBOARD:UPDATE_SERVICES",R="DASHBOARD:SET_SELECTED_SERVICE",d="DASHBOARD:ADD_NEW_SERVICE",y="DASHBOARD:CATALOG_MODE",A="DASHBOARD:DELETE_SERVICE",D="DASHBOARD:SAVE_SERVICE_LOADING",v="DASHBOARD:EXPORT",T="DASHBOARD:IMPORT",_=function(t){return{type:o,editing:t}},G=function(t){return{type:r,available:t}},g=function(t){return{type:i,show:t}},m=function(t){return{type:u,show:t}},b=function(t){return{type:c,show:t}},h=function(t){return{type:O,error:t}},Y=function(t){return{type:E,id:t}},C=function(t){return{type:s,id:t}},I=function(){return{type:l}},N=function(t,e){return{type:p,resource:t,data:e}},w=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"loading";return{type:f,name:e,value:t}},P=function(t){return{type:"DASHBOARD:DASHBOARD_LOAD_ERROR",error:t}},B=function(t,e){return{type:R,service:t,services:e}},H=function(t,e,n){return{type:d,service:t,services:e,isNew:n}},L=function(t,e){return{type:y,mode:t,isNew:e}},j=function(t,e){return{type:A,service:t,services:e}}},134990:(t,e,n)=>{"use strict";n.d(e,{D7:()=>a,mN:()=>O,vb:()=>E,KT:()=>s,QK:()=>l,cc:()=>p,Gx:()=>f,XH:()=>S,lX:()=>R,tP:()=>d,Dq:()=>y,LE:()=>A,SW:()=>D,si:()=>v,i2:()=>T,IY:()=>_,Zf:()=>G,ij:()=>g,Hb:()=>m,Mk:()=>b,c:()=>h,NZ:()=>Y,Cx:()=>C,wb:()=>I,km:()=>N,un:()=>w,Ro:()=>P,jr:()=>B,ZY:()=>H,EQ:()=>L,W$:()=>j,mk:()=>V,U3:()=>U,aF:()=>k,IH:()=>M,rp:()=>x,D_:()=>W,zJ:()=>z,wJ:()=>F,OS:()=>X,YP:()=>Z,Ct:()=>q,Od:()=>J,y6:()=>K,g5:()=>$,_e:()=>Q,DF:()=>tt,GD:()=>et,K0:()=>nt,kB:()=>rt,Xn:()=>ot,G5:()=>it,Vx:()=>ut,RZ:()=>ct,pB:()=>at,$A:()=>Ot,m7:()=>Et,YM:()=>st,o2:()=>lt,ql:()=>pt,c0:()=>ft,Fu:()=>St,WE:()=>Rt,fD:()=>dt,EE:()=>yt});var r=n(747037),o=n.n(r),i=n(455877),u=n.n(i),c=n(192579),a="GEOSTORY:ADD",O="GEOSTORY:ADD_RESOURCE",E="GEOSTORY:CHANGE_MODE",s="GEOSTORY:CLEAR_SAVE_ERROR",l="GEOSTORY:EDIT_RESOURCE",p="GEOSTORY:EDIT_WEBPAGE",f="GEOSTORY:SCROLLING",S="GEOSTORY:LOAD_GEOSTORY",R="GEOSTORY:LOADING_GEOSTORY",d="GEOSTORY:MOVE",y="GEOSTORY:REMOVE",A="GEOSTORY:SAVE_STORY",D="GEOSTORY:SAVE_ERROR",v="GEOSTORY:STORY_SAVED",T="GEOSTORY:SELECT_CARD",_="GEOSTORY:SET_CONTROL",G="GEOSTORY:SET_RESOURCE",g="GEOSTORY:SET_CURRENT_STORY",m="GEOSTORY:SET_WEBPAGE_URL",b="GEOSTORY:TOGGLE_CARD_PREVIEW",h="GEOSTORY:TOGGLE_SETTINGS_PANEL",Y="GEOSTORY:TOGGLE_SETTING",C="GEOSTORY:TOGGLE_CONTENT_FOCUS",I="GEOSTORY:UPDATE",N="GEOSTORY:UPDATE_SETTING",w="GEOSTORY:UPDATE_CURRENT_PAGE",P="GEOSTORY:REMOVE_RESOURCE",B="GEOSTORY:SET_PENDING_CHANGES",H="GEOSTORY:SET_UPDATE_URL_SCROLL",L="GEOSTORY:UPDATE_MEDIA_EDITOR_SETTINGS",j="GEOSTORY:HIDE_CAROUSEL_ITEMS",V="GEOSTORY:ENABLE_DRAW",U="GEOSTORY:EXPORT",k="GEOSTORY:IMPORT",M=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(t){return t};return{type:a,id:n&&n.id||u()(),path:t,position:e,element:o()(n)&&(0,c.nq)(n,r)||n}},x=function(t,e,n){return{type:O,id:t,mediaType:e,data:n}},W=function(t){return{type:E,mode:t?c.nl.EDIT:c.nl.VIEW}},z=function(t,e,n){return{type:l,id:t,mediaType:e,data:n}},F=function(t,e){return{type:S,id:t,options:e}},X=function(t){return{type:"GEOSTORY:GEOSTORY_LOADED",id:t}},Z=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"loading";return{type:R,value:t,name:e}},q=function(t){return{type:"GEOSTORY:LOAD_GEOSTORY_ERROR",error:t}},J=function(t){return{type:y,path:t}},K=function(t){return{type:D,error:t}},$=function(t,e){return{type:_,control:t,value:e}},Q=function(t){return{type:T,card:t}},tt=function(t){return{type:G,resource:t}},et=function(t){return{type:v,id:t}},nt=function(t){return{type:g,story:t}},rt=function(){return{type:b}},ot=function(t){return{type:Y,option:t}},it=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:h,withSave:t}},ut=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"replace";return{type:I,path:t,element:e,mode:n}},ct=function(t){var e=t.sectionId,n=t.columnId;return{type:w,sectionId:e,columnId:n}},at=function(t,e,n){return{type:d,source:t,target:e,position:n}},Ot=function(t,e,n,r,o){return{type:C,status:t,target:e,selector:n,hideContent:r,path:o}},Et=function(t,e){return{type:N,prop:t,value:e}},st=function(t){return{type:m,src:t}},lt=function(t){var e=t.path,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GEOSTORY";return{type:p,path:e,owner:n}},pt=function(t,e){return{type:P,id:t,mediaType:e}},ft=function(t){return{type:B,value:t}},St=function(t){return{type:L,mediaEditorSettings:t}},Rt=function(t){return{type:f,status:t}},dt=function(t,e){return{type:j,sectionId:t,showContentId:e}},yt=function(t){return{type:V,drawOptions:t}}},73443:(t,e,n)=>{"use strict";n.d(e,{rs:()=>r,AY:()=>o,SW:()=>i,yB:()=>u,oG:()=>c,oz:()=>a,id:()=>O,gc:()=>E,cE:()=>s,rG:()=>l,Vj:()=>p,nY:()=>f});var r="GEONODE:SAVING_RESOURCE",o="GEONODE:SAVE_SUCCESS",i="GEONODE:SAVE_ERROR",u="GEONODE:CLEAR_SAVE",c="GEONODE:SAVE_CONTENT",a="GEONODE:SAVE_DIRECT_CONTENT";function O(){return{type:r}}function E(t){return{type:o,success:t}}function s(t){return{type:i,error:t}}function l(){return{type:u}}function p(t,e,n,r){return{type:c,id:t,metadata:e,reload:n,showNotifications:r}}function f(){return{type:a}}},535188:(t,e,n)=>{"use strict";n.r(e),n.d(e,{ConnectedSyncButton:()=>L,default:()=>j});var r=n(124852),o=n.n(r),i=n(45697),u=n.n(i),c=n(171703),a=n(22222),O=n(322843),E=n(805346),s=n(303744),l=n(274621),p=n(49977),f=n(375875),S=n.n(f),R=n(682492),d=n.n(R),y="GEONODE:SYNC_RESOURCES",A=n(73443),D=n(76907),v=n(337326),T=n(134990),_=n(197395),G=n(535721),g=n(367306),m=n(555927);function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){C(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function C(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var I={map:v.nl,image:v.ez,video:v.ez},N=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="",o={};if("geostory"===t)o="map"!==(r=e.subtype||e.resource_type)?(0,G.R1)(e,e):(0,G.F0)(e);else if("dashboard"===t){var i,u=null===(i=e.widgets)||void 0===i?void 0:i.map((function(t){var e=n.find((function(e){var n,r;return!(e.data.pk!==(null===(n=t.map)||void 0===n||null===(r=n.extraParams)||void 0===r?void 0:r.pk))}));return e?Y(Y({},t),{},{map:Y(Y({},t.map),e.data.data.map)}):t}));o=d()(e,{widgets:u})}return{type:r,data:o}};const w={gnSyncComponentsWithResources:function(t,e){return t.ofType(y).switchMap((function(){var t=e.getState(),n=(0,D.L4)(t),r=function(t,e){switch(t){case"geostory":return(0,D._i)(e);case"dashboard":return(0,D.F7)(e);default:return[]}}(n,t);return p.Observable.defer((function(){return S().all(r.map((function(t){var e,r;return("geostory"===n?I[t.type](t.id):(0,v.nl)(null==t||null===(e=t.map)||void 0===e||null===(r=e.extraParams)||void 0===r?void 0:r.pk)).then((function(t){return{data:t,status:"success",title:t.title}})).catch((function(){var e,n,r,o;return{data:t,status:"error",title:(null==t||null===(e=t.data)||void 0===e?void 0:e.title)||(null==t||null===(n=t.map)||void 0===n||null===(r=n.extraParams)||void 0===r?void 0:r.pk)||(null==t||null===(o=t.data)||void 0===o?void 0:o.name)}}))})))})).switchMap((function(e){var r,o,i,u=e.filter((function(t){return"error"===t.status})),c=e.filter((function(t){return"success"===t.status})),a=function(){if(0===c.length)return[];if("geostory"===n)return c.map((function(t){var e=t.data,n=N("geostory",e),r=n.type,o=n.data;return(0,T.zJ)(e.pk,r,o)}));if("dashboard"===n){var e=(0,g.hS)(t),r=N("dashboard",e,c).data;return[(0,m.rR)((0,g.NB)(t),r)]}return[]}(),O=function(t,e,n){var r="Success";return t>0&&e>0?r="Warning":0===t&&e>0?r="Success":t>0&&0===e&&(r="Error"),{level:r.toLowerCase(),title:"gnviewer.sync".concat(r).concat("Warning"!==r?n:"","Title"),message:"gnviewer.sync".concat(r,"Message")}}(u.length,c.length,n),E=O.level,s=O.title,l=O.message;return p.Observable.of.apply(p.Observable,(i=a,function(t){if(Array.isArray(t))return b(t)}(i)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(i)||function(t,e){if(t){if("string"==typeof t)return b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(t,e):void 0}}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([(0,A.gc)(),(0,_.show)({title:s,message:l,values:{successTitles:null===(r=c.map((function(t){return t.title})))||void 0===r?void 0:r.join(", "),errorTitles:null===(o=u.map((function(t){return t.title})))||void 0===o?void 0:o.join(", ")}},E)]))})).catch((function(t){var e,n;return p.Observable.of((0,A.gc)(),(0,_.error)({title:"gnviewer.syncErrorTitle",message:(null==t||null===(e=t.data)||void 0===e?void 0:e.detail)||(null==t||null===(n=t.originalError)||void 0===n?void 0:n.message)||(null==t?void 0:t.message)||"gnviewer.syncErrorDefault"}))})).startWith((0,A.id)())}))}};function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function B(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H(t){var e=t.synchronize,n=t.enabled,r=t.size;return n&&o().createElement(s.Z,{variant:"primary",size:r,onClick:function(){return e()}},o().createElement(E.Z,{msgId:"gnviewer.sync"}))}H.contextTypes={synchronize:u().func};var L=(0,c.connect)((0,a.P1)(l.jl,(function(t){return{enabled:t}})),{synchronize:function(){return{type:y}}})(H);const j=(0,O.rx)("Sync",{component:L,containers:{ActionNavbar:{name:"Sync",priority:1}},epics:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){B(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},w),reducers:{}})},887157:(t,e,n)=>{var r=n(640554),o=n(588958);t.exports=function(t,e,n,i){var u=t.length;for((n=r(n))<0&&(n=-n>u?0:u+n),(i=void 0===i||i>u?u:r(i))<0&&(i+=u),i=n>i?0:o(i);n<i;)t[n++]=e;return t}},580760:(t,e,n)=>{var r=n(989881);t.exports=function(t,e){var n=[];return r(t,(function(t,r,o){e(t,r,o)&&n.push(t)})),n}},389179:(t,e,n)=>{var r=n(555639),o=n(640554),i=n(14841),u=n(479833),c=r.isFinite,a=Math.min;t.exports=function(t){var e=Math[t];return function(t,n){if(t=i(t),(n=null==n?0:a(o(n),292))&&c(t)){var r=(u(t)+"e").split("e"),O=e(r[0]+"e"+(+r[1]+n));return+((r=(u(O)+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}},819873:(t,e,n)=>{var r=n(887157),o=n(816612);t.exports=function(t,e,n,i){var u=null==t?0:t.length;return u?(n&&"number"!=typeof n&&o(t,e,n)&&(n=0,i=u),r(t,e,n,i)):[]}},763105:(t,e,n)=>{var r=n(234963),o=n(580760),i=n(267206),u=n(701469);t.exports=function(t,e){return(u(t)?r:o)(t,i(e,3))}},313880:(t,e,n)=>{var r=n(479833);t.exports=function(){var t=arguments,e=r(t[0]);return t.length<3?e:e.replace(t[1],t[2])}},59854:(t,e,n)=>{var r=n(389179)("round");t.exports=r},588958:(t,e,n)=>{var r=n(829750),o=n(640554);t.exports=function(t){return t?r(o(t),0,4294967295):0}}}]);